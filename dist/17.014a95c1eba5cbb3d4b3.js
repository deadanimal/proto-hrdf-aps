(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"4ZJM":function(t,e,i){t.exports=function(){"use strict";var t,e,i;function r(r,n){if(t)if(e){var a="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",o={};t(o),(i=n(o)).workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else e=n;else t=n}return r(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var i=r;function r(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var i,r,n,a,o;for(void 0===e&&(e=1e-6),n=t,o=0;o<8;o++){if(a=this.sampleCurveX(n)-t,Math.abs(a)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=a/s}if((n=t)<(i=0))return i;if(n>(r=1))return r;for(;i<r;){if(a=this.sampleCurveX(n),Math.abs(a-t)<e)return n;t>a?i=n:r=n,n=.5*(r-i)+i}return n},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var n=a;function a(t,e){this.x=t,this.y=e}function o(t,e,r,n){var a=new i(t,e,r,n);return function(t){return a.solve(t)}}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-r*(this.y-e.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t};var s=o(.25,.1,.25,1);function l(t,e,i){return Math.min(i,Math.max(e,t))}function u(t,e,i){var r=i-e,n=((t-e)%r+r)%r+e;return n===e?i:n}function c(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var a=n[r];for(var o in a)t[o]=a[o]}return t}var h=1;function p(){return h++}function d(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function f(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function m(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function g(t,e,i){var r={};for(var n in t)r[n]=e.call(i||this,t[n],n,t);return r}function b(t,e,i){var r={};for(var n in t)e.call(i||this,t[n],n,t)&&(r[n]=t[n]);return r}function v(t){return Array.isArray(t)?t.map(v):"object"==typeof t&&t?g(t,v):t}var _={};function x(t){_[t]||("undefined"!=typeof console&&console.warn(t),_[t]=!0)}function S(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function w(t){for(var e=0,i=0,r=t.length,n=r-1,a=void 0,o=void 0;i<r;n=i++)e+=((o=t[n]).x-(a=t[i]).x)*(a.y+o.y);return e}function T(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function P(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,i,r,n){var a=r||n;return e[i]=!a||a.toLowerCase(),""})),e["max-age"]){var i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e}var C=null;function k(t){if(null==C){var e=t.navigator?t.navigator.userAgent:null;C=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return C}function I(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var A,O,D,F,M=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),E=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,L=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,R={now:M,frame:function(t){var e=E(t);return{cancel:function(){return L(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var i=self.document.createElement("canvas"),r=i.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return A||(A=self.document.createElement("a")),A.href=t,A.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==O&&(O=self.matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}},V={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},j={supported:!1,testSupport:function(t){!z&&F&&(B?N(t):D=t)}},z=!1,B=!1;function N(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,F),t.isContextLost())return;j.supported=!0}catch(t){}t.deleteTexture(e),z=!0}self.document&&((F=self.document.createElement("img")).onload=function(){D&&N(D),D=null,B=!0},F.onerror=function(){z=!0,D=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var U="01",X=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function H(t){return 0===t.indexOf("mapbox:")}X.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",U,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},X.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},X.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},X.prototype.normalizeStyleURL=function(t,e){if(!H(t))return t;var i=q(t);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},X.prototype.normalizeGlyphsURL=function(t,e){if(!H(t))return t;var i=q(t);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},X.prototype.normalizeSourceURL=function(t,e){if(!H(t))return t;var i=q(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)},X.prototype.normalizeSpriteURL=function(t,e,i,r){var n=q(t);return H(t)?(n.path="/styles/v1"+n.path+"/sprite"+e+i,this._makeAPIURL(n,this._customAccessToken||r)):(n.path+=""+e+i,K(n))},X.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!H(t))return t;var i=q(t);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(R.devicePixelRatio>=2||512===e?"@2x":"")+(j.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var r=this._customAccessToken||function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(i.params)||V.ACCESS_TOKEN;return V.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,r)},X.prototype.canonicalizeTileURL=function(t,e){var i=q(t);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=i.path.replace("/v4/","");var n=i.params;return e&&(n=n.filter((function(t){return!t.match(/^access_token=/)}))),n.length&&(r+="?"+n.join("&")),r},X.prototype.canonicalizeTileset=function(t,e){for(var i=!!e&&H(e),r=[],n=0,a=t.tiles||[];n<a.length;n+=1){var o=a[n];Y(o)?r.push(this.canonicalizeTileURL(o,i)):r.push(o)}return r},X.prototype._makeAPIURL=function(t,e){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=q(V.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"/"!==r.path&&(t.path=""+r.path+t.path),!V.REQUIRE_ACCESS_TOKEN)return K(t);if(!(e=e||V.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),K(t)};var W=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Y(t){return W.test(t)}var G=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function q(t){var e=t.match(G);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function K(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function Z(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var J=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};J.prototype.getStorageKey=function(t){var e,i=Z(V.ACCESS_TOKEN);return e=i&&i.u?self.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):V.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},J.prototype.fetchEventData=function(){var t=I("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{var r=self.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var n=self.localStorage.getItem(i);n&&(this.anonId=n)}catch(t){x("Unable to read from LocalStorage")}},J.prototype.saveEventData=function(){var t=I("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){x("Unable to write to LocalStorage")}},J.prototype.processRequests=function(t){},J.prototype.postEvent=function(t,e,i,r){var n=this;if(V.EVENTS_URL){var a=q(V.EVENTS_URL);a.params.push("access_token="+(r||V.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.0",skuId:U,userId:this.anonId},s=e?c(o,e):o,l={url:K(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=vt(l,(function(t){n.pendingRequest=null,i(t),n.saveEventData(),n.processRequests(r)}))}},J.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var $,Q,tt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,i,r){this.skuToken=i,(V.EVENTS_URL&&r||V.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return H(t)||Y(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},r)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),r=i.id,n=i.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),f(this.anonId)||(this.anonId=d()),this.postEvent(n,{skuToken:this.skuToken},(function(t){t||r&&(e.success[r]=!0)}),t))}},e}(J),et=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){V.EVENTS_URL&&V.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return H(t)||Y(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=Z(V.ACCESS_TOKEN),r=i?i.u:V.ACCESS_TOKEN,n=r!==this.eventData.tokenU;f(this.anonId)||(this.anonId=d(),n=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),l=(a-this.eventData.lastSuccess)/864e5;n=n||l>=1||l<-1||o.getDate()!==s.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(a,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=a,e.eventData.tokenU=r)}),t)}},e}(J)),it=et.postTurnstileEvent.bind(et),rt=new tt,nt=rt.postMapLoadEvent.bind(rt),at=500,ot=50;function st(){self.caches&&!$&&($=self.caches.open("mapbox-tiles"))}function lt(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var ut,ct=1/0;function ht(){return null==ut&&(ut=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),ut}var pt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(pt);var dt,ft,mt=function(t){function e(e,i,r){401===i&&Y(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=i,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),yt=T()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},gt=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(yt())&&!/^\w+:/.test(i))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(t,e){var i,r=new self.AbortController,n=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:yt(),signal:r.signal}),a=!1,o=!1,s=(i=n.url).indexOf("sku=")>0&&Y(i);"json"===t.type&&n.headers.set("Accept","application/json");var l=function(i,r,a){if(!o){if(i&&"SecurityError"!==i.message&&x(i),r&&a)return u(r);var l=Date.now();self.fetch(n).then((function(i){if(i.ok){var r=s?i.clone():null;return u(i,r,l)}return e(new mt(i.statusText,i.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},u=function(i,r,s){("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((function(t){o||(r&&s&&function(t,e,i){if(st(),$){var r={status:e.status,statusText:e.statusText,headers:new self.Headers};e.headers.forEach((function(t,e){return r.headers.set(e,t)}));var n=P(e.headers.get("Cache-Control")||"");n["no-store"]||(n["max-age"]&&r.headers.set("Expires",new Date(i+1e3*n["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-i<42e4||function(t,e){if(void 0===Q)try{new Response(new ReadableStream),Q=!0}catch(t){Q=!1}Q?e(t.body):t.blob().then(e)}(e,(function(e){var i=new self.Response(e,r);st(),$&&$.then((function(e){return e.put(lt(t.url),i)})).catch((function(t){return x(t.message)}))})))}}(n,r,s),a=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((function(t){o||e(new Error(t.message))}))};return s?function(t,e){if(st(),!$)return e(null);var i=lt(t.url);$.then((function(t){t.match(i).then((function(r){var n=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),i=P(t.headers.get("Cache-Control")||"");return e>Date.now()&&!i["no-cache"]}(r);t.delete(i),n&&t.put(i,r.clone()),e(null,r,n)})).catch(e)})).catch(e)}(n,l):l(null,null),{cancel:function(){o=!0,a||r.abort()}}}(t,e);if(T()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){var i=new self.XMLHttpRequest;for(var r in i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer"),t.headers)i.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=function(){e(new Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var r=i.response;if("json"===t.type)try{r=JSON.parse(i.response)}catch(t){return e(t)}e(null,r,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else e(new mt(i.statusText,i.status,t.url))},i.send(t.body),{cancel:function(){return i.abort()}}}(t,e)},bt=function(t,e){return gt(c(t,{type:"arrayBuffer"}),e)},vt=function(t,e){return gt(c(t,{method:"POST"}),e)};dt=[],ft=0;var _t=function(t,e){if(j.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),ft>=V.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return dt.push(i),i}ft++;var r=!1,n=function(){if(!r)for(r=!0,ft--;dt.length&&ft<V.MAX_PARALLEL_IMAGE_REQUESTS;){var t=dt.shift();t.cancelled||(t.cancel=_t(t.requestParameters,t.callback).cancel)}},a=bt(t,(function(t,i,r,a){n(),t?e(t):i&&(ht()?function(t,e){var i=new self.Blob([new Uint8Array(t)],{type:"image/png"});self.createImageBitmap(i).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(i,e):function(t,e,i,r){var n=new self.Image,a=self.URL;n.onload=function(){e(null,n),a.revokeObjectURL(n.src)},n.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var o=new self.Blob([new Uint8Array(t)],{type:"image/png"});n.cacheControl=i,n.expires=r,n.src=t.byteLength?a.createObjectURL(o):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(i,e,r,a))}));return{cancel:function(){a.cancel(),n()}}};function xt(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function St(t,e,i){if(i&&i[t]){var r=i[t].indexOf(e);-1!==r&&i[t].splice(r,1)}}var wt=function(t,e){void 0===e&&(e={}),c(this,e),this.type=t},Tt=function(t){function e(e,i){void 0===i&&(i={}),t.call(this,"error",c({error:e},i))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(wt),Pt=function(){};Pt.prototype.on=function(t,e){return this._listeners=this._listeners||{},xt(t,e,this._listeners),this},Pt.prototype.off=function(t,e){return St(t,e,this._listeners),St(t,e,this._oneTimeListeners),this},Pt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},xt(t,e,this._oneTimeListeners),this},Pt.prototype.fire=function(t,e){"string"==typeof t&&(t=new wt(t,e||{}));var i=t.type;if(this.listens(i)){t.target=this;for(var r=0,n=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];r<n.length;r+=1)n[r].call(this,t);for(var a=0,o=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];a<o.length;a+=1){var s=o[a];St(i,s,this._oneTimeListeners),s.call(this,t)}var l=this._eventedParent;l&&(c(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof Tt&&console.error(t.error);return this},Pt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Pt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var Ct={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"},slice:{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},kt=function(t,e,i,r){this.message=(t?t+": ":"")+i,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function It(t){var e=t.value;return e?[new kt(t.key,e,"constants have been deprecated as of v8")]:[]}function At(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var a=n[r];for(var o in a)t[o]=a[o]}return t}function Ot(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Dt(t){if(Array.isArray(t))return t.map(Dt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=Dt(t[i]);return e}return Ot(t)}var Ft=function(t){function e(e,i){t.call(this,i),this.message=i,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Mt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,r=e;i<r.length;i+=1){var n=r[i];this.bindings[n[0]]=n[1]}};Mt.prototype.concat=function(t){return new Mt(this,t)},Mt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Mt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Et={kind:"null"},Lt={kind:"number"},Rt={kind:"string"},Vt={kind:"boolean"},jt={kind:"color"},zt={kind:"object"},Bt={kind:"value"},Nt={kind:"collator"},Ut={kind:"formatted"},Xt={kind:"resolvedImage"};function Ht(t,e){return{kind:"array",itemType:t,N:e}}function Wt(t){if("array"===t.kind){var e=Wt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Yt=[Et,Lt,Rt,Vt,jt,Ut,zt,Ht(Bt),Xt];function Gt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Gt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,r=Yt;i<r.length;i+=1)if(!Gt(r[i],e))return null}return"Expected "+Wt(t)+" but found "+Wt(e)+" instead."}function qt(t,e){return e.some((function(e){return e.kind===t.kind}))}function Kt(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var Zt=e((function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function n(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function a(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function o(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in i)return i[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=s.indexOf("("),u=s.indexOf(")");if(-1!==l&&u+1===s.length){var c=s.substr(0,l),h=s.substr(l+1,u-(l+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=a(h.pop());case"rgb":return 3!==h.length?null:[n(h[0]),n(h[1]),n(h[2]),p];case"hsla":if(4!==h.length)return null;p=a(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,f=a(h[1]),m=a(h[2]),y=m<=.5?m*(f+1):m+f-m*f,g=2*m-y;return[r(255*o(g,y,d+1/3)),r(255*o(g,y,d)),r(255*o(g,y,d-1/3)),p];default:return null}}return null}}catch(t){}})).parseCSSColor,Jt=function(t,e,i,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=i,this.a=r};Jt.parse=function(t){if(t){if(t instanceof Jt)return t;if("string"==typeof t){var e=Zt(t);if(e)return new Jt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Jt.prototype.toString=function(){var t=this.toArray(),e=t[1],i=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(i)+","+r+")"},Jt.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},Jt.black=new Jt(0,0,0,1),Jt.white=new Jt(1,1,1,1),Jt.transparent=new Jt(0,0,0,0),Jt.red=new Jt(1,0,0,1);var $t=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};$t.prototype.compare=function(t,e){return this.collator.compare(t,e)},$t.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Qt=function(t,e,i,r,n){this.text=t,this.image=e,this.scale=i,this.fontStack=r,this.textColor=n},te=function(t){this.sections=t};te.fromString=function(t){return new te([new Qt(t,null,null,null,null)])},te.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},te.factory=function(t){return t instanceof te?t:te.fromString(t)},te.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},te.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r=i[e];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var n={};r.fontStack&&(n["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(n["font-scale"]=r.scale),r.textColor&&(n["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(n)}}return t};var ee=function(t){this.name=t.name,this.available=t.available};function ie(t,e,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,i,r]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function re(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Jt)return!0;if(t instanceof $t)return!0;if(t instanceof te)return!0;if(t instanceof ee)return!0;if(Array.isArray(t)){for(var e=0,i=t;e<i.length;e+=1)if(!re(i[e]))return!1;return!0}if("object"==typeof t){for(var r in t)if(!re(t[r]))return!1;return!0}return!1}function ne(t){if(null===t)return Et;if("string"==typeof t)return Rt;if("boolean"==typeof t)return Vt;if("number"==typeof t)return Lt;if(t instanceof Jt)return jt;if(t instanceof $t)return Nt;if(t instanceof te)return Ut;if(t instanceof ee)return Xt;if(Array.isArray(t)){for(var e,i=t.length,r=0,n=t;r<n.length;r+=1){var a=ne(n[r]);if(e){if(e===a)continue;e=Bt;break}e=a}return Ht(e||Bt,i)}return zt}function ae(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Jt||t instanceof te||t instanceof ee?t.toString():JSON.stringify(t)}ee.prototype.toString=function(){return this.name},ee.fromString=function(t){return t?new ee({name:t,available:!1}):null},ee.prototype.serialize=function(){return["image",this.name]};var oe=function(t,e){this.type=t,this.value=e};oe.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!re(t[1]))return e.error("invalid value");var i=t[1],r=ne(i),n=e.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new oe(r,i)},oe.prototype.evaluate=function(){return this.value},oe.prototype.eachChild=function(){},oe.prototype.outputDefined=function(){return!0},oe.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Jt?["rgba"].concat(this.value.toArray()):this.value instanceof te?this.value.serialize():this.value};var se=function(t){this.name="ExpressionEvaluationError",this.message=t};se.prototype.toJSON=function(){return this.message};var le={string:Rt,number:Lt,boolean:Vt,object:zt},ue=function(t,e){this.type=t,this.args=e};ue.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,r=1,n=t[0];if("array"===n){var a,o;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in le)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=le[s],r++}else a=Bt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}i=Ht(a,o)}else i=le[n];for(var l=[];r<t.length;r++){var u=e.parse(t[r],r,Bt);if(!u)return null;l.push(u)}return new ue(i,l)},ue.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!Gt(this.type,ne(i)))return i;if(e===this.args.length-1)throw new se("Expected value to be of type "+Wt(this.type)+", but found "+Wt(ne(i))+" instead.")}return null},ue.prototype.eachChild=function(t){this.args.forEach(t)},ue.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ue.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var ce=function(t){this.type=Ut,this.sections=t};ce.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var r=[],n=!1,a=1;a<=t.length-1;++a){var o=t[a];if(n&&"object"==typeof o&&!Array.isArray(o)){n=!1;var s=null;if(o["font-scale"]&&!(s=e.parse(o["font-scale"],1,Lt)))return null;var l=null;if(o["text-font"]&&!(l=e.parse(o["text-font"],1,Ht(Rt))))return null;var u=null;if(o["text-color"]&&!(u=e.parse(o["text-color"],1,jt)))return null;var c=r[r.length-1];c.scale=s,c.font=l,c.textColor=u}else{var h=e.parse(t[a],1,Bt);if(!h)return null;var p=h.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:h,scale:null,font:null,textColor:null})}}return new ce(r)},ce.prototype.evaluate=function(t){return new te(this.sections.map((function(e){var i=e.content.evaluate(t);return ne(i)===Xt?new Qt("",i,null,null,null):new Qt(ae(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},ce.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},ce.prototype.outputDefined=function(){return!1},ce.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t.push(r.content.serialize());var n={};r.scale&&(n["font-scale"]=r.scale.serialize()),r.font&&(n["text-font"]=r.font.serialize()),r.textColor&&(n["text-color"]=r.textColor.serialize()),t.push(n)}return t};var he=function(t){this.type=Xt,this.input=t};he.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Rt);return i?new he(i):e.error("No image name provided.")},he.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=ee.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i},he.prototype.eachChild=function(t){t(this.input)},he.prototype.outputDefined=function(){return!1},he.prototype.serialize=function(){return["image",this.input.serialize()]};var pe={"to-boolean":Vt,"to-color":jt,"to-number":Lt,"to-string":Rt},de=function(t,e){this.type=t,this.args=e};de.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var r=pe[i],n=[],a=1;a<t.length;a++){var o=e.parse(t[a],a,Bt);if(!o)return null;n.push(o)}return new de(r,n)},de.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,r=0,n=this.args;r<n.length;r+=1){if(i=null,(e=n[r].evaluate(t))instanceof Jt)return e;if("string"==typeof e){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ie(e[0],e[1],e[2],e[3])))return new Jt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new se(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var o=null,s=0,l=this.args;s<l.length;s+=1){if(null===(o=l[s].evaluate(t)))return 0;var u=Number(o);if(!isNaN(u))return u}throw new se("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?te.fromString(ae(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ee.fromString(ae(this.args[0].evaluate(t))):ae(this.args[0].evaluate(t))},de.prototype.eachChild=function(t){this.args.forEach(t)},de.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},de.prototype.serialize=function(){if("formatted"===this.type.kind)return new ce([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new he(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var fe=["Unknown","Point","LineString","Polygon"],me=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};me.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},me.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?fe[this.feature.type]:this.feature.type:null},me.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},me.prototype.canonicalID=function(){return this.canonical},me.prototype.properties=function(){return this.feature&&this.feature.properties||{}},me.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Jt.parse(t)),e};var ye=function(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r};ye.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ye.prototype.eachChild=function(t){this.args.forEach(t)},ye.prototype.outputDefined=function(){return!1},ye.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},ye.parse=function(t,e){var i,r=t[0],n=ye.definitions[r];if(!n)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var a=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=o.filter((function(e){var i=e[0];return!Array.isArray(i)||i.length===t.length-1})),l=null,u=0,c=s;u<c.length;u+=1){var h=c[u],p=h[0],d=h[1];l=new je(e.registry,e.path,null,e.scope);for(var f=[],m=!1,y=1;y<t.length;y++){var g=t[y],b=Array.isArray(p)?p[y-1]:p.type,v=l.parse(g,1+f.length,b);if(!v){m=!0;break}f.push(v)}if(!m)if(Array.isArray(p)&&p.length!==f.length)l.error("Expected "+p.length+" arguments, but found "+f.length+" instead.");else{for(var _=0;_<f.length;_++){var x=Array.isArray(p)?p[_]:p.type,S=f[_];l.concat(_+1).checkSubtype(x,S.type)}if(0===l.errors.length)return new ye(r,a,d,f)}}if(1===s.length)(i=e.errors).push.apply(i,l.errors);else{for(var w=(s.length?s:o).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Wt).join(", ")+")":"("+Wt(e.type)+"...)"})).join(" | "),T=[],P=1;P<t.length;P++){var C=e.parse(t[P],1+T.length);if(!C)return null;T.push(Wt(C.type))}e.error("Expected arguments of type "+w+", but found ("+T.join(", ")+") instead.")}return null},ye.register=function(t,e){for(var i in ye.definitions=e,e)t[i]=ye};var ge=function(t,e,i){this.type=Nt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};function be(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function ve(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function _e(t,e){var i=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,n=Math.pow(2,e.z);return[Math.round(i*n*8192),Math.round(r*n*8192)]}function xe(t,e,i){return e[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-e[0])*(t[1]-e[1])/(i[1]-e[1])+e[0]}function Se(t,e){for(var i,r,n,a,o,s,l,u=!1,c=0,h=e.length;c<h;c++)for(var p=e[c],d=0,f=p.length;d<f-1;d++){if((a=(i=t)[0]-(r=p[d])[0])*(l=i[1]-(n=p[d+1])[1])-(s=i[0]-n[0])*(o=i[1]-r[1])==0&&a*s<=0&&o*l<=0)return!1;xe(t,p[d],p[d+1])&&(u=!u)}return u}function we(t,e){for(var i=0;i<e.length;i++)if(Se(t,e[i]))return!0;return!1}function Te(t,e,i,r){var n=r[0]-i[0],a=r[1]-i[1],o=(t[0]-i[0])*a-n*(t[1]-i[1]),s=(e[0]-i[0])*a-n*(e[1]-i[1]);return o>0&&s<0||o<0&&s>0}function Pe(t,e,i){for(var r=0,n=i;r<n.length;r+=1)for(var a=n[r],o=0;o<a.length-1;++o)if(0!=(h=[(c=a[o+1])[0]-(u=a[o])[0],c[1]-u[1]])[0]*(p=[(l=e)[0]-(s=t)[0],l[1]-s[1]])[1]-h[1]*p[0]&&Te(s,l,u,c)&&Te(u,c,s,l))return!0;var s,l,u,c,h,p;return!1}function Ce(t,e){for(var i=0;i<t.length;++i)if(!Se(t[i],e))return!1;for(var r=0;r<t.length-1;++r)if(Pe(t[r],t[r+1],e))return!1;return!0}function ke(t,e){for(var i=0;i<e.length;i++)if(Ce(t,e[i]))return!0;return!1}function Ie(t,e,i){for(var r=[],n=0;n<t.length;n++){for(var a=[],o=0;o<t[n].length;o++){var s=_e(t[n][o],i);be(e,s),a.push(s)}r.push(a)}return r}function Ae(t,e,i){for(var r=[],n=0;n<t.length;n++){var a=Ie(t[n],e,i);r.push(a)}return r}function Oe(t,e,i,r){if(t[0]<i[0]||t[0]>i[2]){var n=.5*r,a=t[0]-i[0]>n?-r:i[0]-t[0]>n?r:0;0===a&&(a=t[0]-i[2]>n?-r:i[2]-t[0]>n?r:0),t[0]+=a}be(e,t)}function De(t,e,i,r){for(var n=8192*Math.pow(2,r.z),a=[8192*r.x,8192*r.y],o=[],s=0,l=t;s<l.length;s+=1)for(var u=0,c=l[s];u<c.length;u+=1){var h=c[u],p=[h.x+a[0],h.y+a[1]];Oe(p,e,i,n),o.push(p)}return o}function Fe(t,e,i,r){for(var n,a=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],s=[],l=0,u=t;l<u.length;l+=1){for(var c=[],h=0,p=u[l];h<p.length;h+=1){var d=p[h],f=[d.x+o[0],d.y+o[1]];be(e,f),c.push(f)}s.push(c)}if(e[2]-e[0]<=a/2){(n=e)[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(var m=0,y=s;m<y.length;m+=1)for(var g=0,b=y[m];g<b.length;g+=1)Oe(b[g],e,i,a)}return s}ge.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Vt);if(!r)return null;var n=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Vt);if(!n)return null;var a=null;return i.locale&&!(a=e.parse(i.locale,1,Rt))?null:new ge(r,n,a)},ge.prototype.evaluate=function(t){return new $t(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ge.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ge.prototype.outputDefined=function(){return!1},ge.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Me=function(t,e){this.type=Vt,this.geojson=t,this.geometries=e};function Ee(t){if(t instanceof ye){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Me)return!1;var e=!0;return t.eachChild((function(t){e&&!Ee(t)&&(e=!1)})),e}function Le(t){if(t instanceof ye&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!Le(t)&&(e=!1)})),e}function Re(t,e){if(t instanceof ye&&e.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild((function(t){i&&!Re(t,e)&&(i=!1)})),i}Me.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(re(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var n=i.features[r].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new Me(i,i.features[r].geometry)}else if("Feature"===i.type){var a=i.geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new Me(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new Me(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Me.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var a=Ie(e.coordinates,r,n),o=De(t.geometry(),i,r,n);if(!ve(i,r))return!1;for(var s=0,l=o;s<l.length;s+=1)if(!Se(l[s],a))return!1}if("MultiPolygon"===e.type){var u=Ae(e.coordinates,r,n),c=De(t.geometry(),i,r,n);if(!ve(i,r))return!1;for(var h=0,p=c;h<p.length;h+=1)if(!we(p[h],u))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){var a=Ie(e.coordinates,r,n),o=Fe(t.geometry(),i,r,n);if(!ve(i,r))return!1;for(var s=0,l=o;s<l.length;s+=1)if(!Ce(l[s],a))return!1}if("MultiPolygon"===e.type){var u=Ae(e.coordinates,r,n),c=Fe(t.geometry(),i,r,n);if(!ve(i,r))return!1;for(var h=0,p=c;h<p.length;h+=1)if(!ke(p[h],u))return!1}return!0}(t,this.geometries)}return!1},Me.prototype.eachChild=function(){},Me.prototype.outputDefined=function(){return!0},Me.prototype.serialize=function(){return["within",this.geojson]};var Ve=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Ve.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new Ve(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Ve.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Ve.prototype.eachChild=function(){},Ve.prototype.outputDefined=function(){return!1},Ve.prototype.serialize=function(){return["var",this.name]};var je=function(t,e,i,r,n){void 0===e&&(e=[]),void 0===r&&(r=new Mt),void 0===n&&(n=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=r,this.errors=n,this.expectedType=i};function ze(t,e){for(var i,r=t.length-1,n=0,a=r,o=0;n<=a;)if((i=t[o=Math.floor((n+a)/2)])<=e){if(o===r||e<t[o+1])return o;n=o+1}else{if(!(i>e))throw new se("Input is not a number.");a=o-1}return 0}je.prototype.parse=function(t,e,i,r,n){return void 0===n&&(n={}),e?this.concat(e,i,r)._parse(t,n):this._parse(t,n)},je.prototype._parse=function(t,e){function i(t,e,i){return"assert"===i?new ue(e,[t]):"coerce"===i?new de(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var n=this.registry[r];if(n){var a=n.parse(t,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=i(a,o,e.typeAnnotation||"coerce");else a=i(a,o,e.typeAnnotation||"assert")}if(!(a instanceof oe)&&"resolvedImage"!==a.type.kind&&function t(e){if(e instanceof Ve)return t(e.boundExpression);if(e instanceof ye&&"error"===e.name)return!1;if(e instanceof ge)return!1;if(e instanceof Me)return!1;var i=e instanceof de||e instanceof ue,r=!0;return e.eachChild((function(e){r=i?r&&t(e):r&&e instanceof oe})),!!r&&Ee(e)&&Re(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(a)){var l=new me;try{a=new oe(a.type,a.evaluate(l))}catch(t){return this.error(t.message),null}}return a}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},je.prototype.concat=function(t,e,i){var r="number"==typeof t?this.path.concat(t):this.path,n=i?this.scope.concat(i):this.scope;return new je(this.registry,r,e||null,n,this.errors)},je.prototype.error=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var r=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Ft(r,t))},je.prototype.checkSubtype=function(t,e){var i=Gt(t,e);return i&&this.error(i),i};var Be=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,n=i;r<n.length;r+=1){var a=n[r],o=a[1];this.labels.push(a[0]),this.outputs.push(o)}};function Ne(t,e,i){return t*(1-i)+e*i}Be.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,Lt);if(!i)return null;var r=[],n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var a=1;a<t.length;a+=2){var o=1===a?-1/0:t[a],s=t[a+1],l=a,u=a+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(r.length&&r[r.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(s,u,n);if(!c)return null;n=n||c.type,r.push([o,c])}return new Be(n,i,r)},Be.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;return r>=e[n-1]?i[n-1].evaluate(t):i[ze(e,r)].evaluate(t)},Be.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},Be.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},Be.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Ue=Object.freeze({__proto__:null,number:Ne,color:function(t,e,i){return new Jt(Ne(t.r,e.r,i),Ne(t.g,e.g,i),Ne(t.b,e.b,i),Ne(t.a,e.a,i))},array:function(t,e,i){return t.map((function(t,r){return Ne(t,e[r],i)}))}}),Xe=6/29*3*(6/29),He=Math.PI/180,We=180/Math.PI;function Ye(t){return t>.008856451679035631?Math.pow(t,1/3):t/Xe+4/29}function Ge(t){return t>6/29?t*t*t:Xe*(t-4/29)}function qe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ke(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ze(t){var e=Ke(t.r),i=Ke(t.g),r=Ke(t.b),n=Ye((.4124564*e+.3575761*i+.1804375*r)/.95047),a=Ye((.2126729*e+.7151522*i+.072175*r)/1);return{l:116*a-16,a:500*(n-a),b:200*(a-Ye((.0193339*e+.119192*i+.9503041*r)/1.08883)),alpha:t.a}}function Je(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*Ge(e),i=.95047*Ge(i),r=1.08883*Ge(r),new Jt(qe(3.2404542*i-1.5371385*e-.4985314*r),qe(-.969266*i+1.8760108*e+.041556*r),qe(.0556434*i-.2040259*e+1.0572252*r),t.alpha)}function $e(t,e,i){var r=e-t;return t+i*(r>180||r<-180?r-360*Math.round(r/360):r)}var Qe={forward:Ze,reverse:Je,interpolate:function(t,e,i){return{l:Ne(t.l,e.l,i),a:Ne(t.a,e.a,i),b:Ne(t.b,e.b,i),alpha:Ne(t.alpha,e.alpha,i)}}},ti={forward:function(t){var e=Ze(t),i=e.l,r=e.a,n=e.b,a=Math.atan2(n,r)*We;return{h:a<0?a+360:a,c:Math.sqrt(r*r+n*n),l:i,alpha:t.a}},reverse:function(t){var e=t.h*He,i=t.c;return Je({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:$e(t.h,e.h,i),c:Ne(t.c,e.c,i),l:Ne(t.l,e.l,i),alpha:Ne(t.alpha,e.alpha,i)}}},ei=Object.freeze({__proto__:null,lab:Qe,hcl:ti}),ii=function(t,e,i,r,n){this.type=t,this.operator=e,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(var a=0,o=n;a<o.length;a+=1){var s=o[a],l=s[1];this.labels.push(s[0]),this.outputs.push(l)}};function ri(t,e,i,r){var n=r-i,a=t-i;return 0===n?0:1===e?a/n:(Math.pow(e,a)-1)/(Math.pow(e,n)-1)}ii.interpolationFactor=function(t,e,r,n){var a=0;if("exponential"===t.name)a=ri(e,t.base,r,n);else if("linear"===t.name)a=ri(e,1,r,n);else if("cubic-bezier"===t.name){var o=t.controlPoints;a=new i(o[0],o[1],o[2],o[3]).solve(ri(e,1,r,n))}return a},ii.parse=function(t,e){var i=t[0],r=t[1],n=t[2],a=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var o=r[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:o}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,2,Lt)))return null;var l=[],u=null;"interpolate-hcl"===i||"interpolate-lab"===i?u=jt:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<a.length;c+=2){var h=a[c],p=a[c+1],d=c+3,f=c+4;if("number"!=typeof h)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(l.length&&l[l.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var m=e.parse(p,f,u);if(!m)return null;u=u||m.type,l.push([h,m])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new ii(u,i,r,n,l):e.error("Type "+Wt(u)+" is not interpolatable.")},ii.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;if(r>=e[n-1])return i[n-1].evaluate(t);var a=ze(e,r),o=ii.interpolationFactor(this.interpolation,r,e[a],e[a+1]),s=i[a].evaluate(t),l=i[a+1].evaluate(t);return"interpolate"===this.operator?Ue[this.type.kind.toLowerCase()](s,l,o):"interpolate-hcl"===this.operator?ti.reverse(ti.interpolate(ti.forward(s),ti.forward(l),o)):Qe.reverse(Qe.interpolate(Qe.forward(s),Qe.forward(l),o))},ii.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},ii.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},ii.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var ni=function(t,e){this.type=t,this.args=e};ni.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,r=e.expectedType;r&&"value"!==r.kind&&(i=r);for(var n=[],a=0,o=t.slice(1);a<o.length;a+=1){var s=e.parse(o[a],1+n.length,i,void 0,{typeAnnotation:"omit"});if(!s)return null;i=i||s.type,n.push(s)}var l=r&&n.some((function(t){return Gt(r,t.type)}));return new ni(l?Bt:i,n)},ni.prototype.evaluate=function(t){for(var e,i=null,r=0,n=0,a=this.args;n<a.length&&(r++,(i=a[n].evaluate(t))&&i instanceof ee&&!i.available&&(e||(e=i.name),i=null,r===this.args.length&&(i=e)),null===i);n+=1);return i},ni.prototype.eachChild=function(t){this.args.forEach(t)},ni.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ni.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var ai=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};ai.prototype.evaluate=function(t){return this.result.evaluate(t)},ai.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},ai.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],r=1;r<t.length-1;r+=2){var n=t[r];if("string"!=typeof n)return e.error("Expected string, but found "+typeof n+" instead.",r);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var a=e.parse(t[r+1],r+1);if(!a)return null;i.push([n,a])}var o=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return o?new ai(i,o):null},ai.prototype.outputDefined=function(){return this.result.outputDefined()},ai.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var r=i[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var oi=function(t,e,i){this.type=t,this.index=e,this.input=i};oi.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Lt),r=e.parse(t[2],2,Ht(e.expectedType||Bt));return i&&r?new oi(r.type.itemType,i,r):null},oi.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new se("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new se("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new se("Array index must be an integer, but found "+e+" instead.");return i[e]},oi.prototype.eachChild=function(t){t(this.index),t(this.input)},oi.prototype.outputDefined=function(){return!1},oi.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var si=function(t,e){this.type=Vt,this.needle=t,this.haystack=e};si.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Bt),r=e.parse(t[2],2,Bt);return i&&r?qt(i.type,[Vt,Rt,Lt,Et,Bt])?new si(i,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Wt(i.type)+" instead"):null},si.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!Kt(e,["boolean","string","number","null"]))throw new se("Expected first argument to be of type boolean, string, number or null, but found "+Wt(ne(e))+" instead.");if(!Kt(i,["string","array"]))throw new se("Expected second argument to be of type array or string, but found "+Wt(ne(i))+" instead.");return i.indexOf(e)>=0},si.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},si.prototype.outputDefined=function(){return!0},si.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var li=function(t,e,i){this.type=Lt,this.needle=t,this.haystack=e,this.fromIndex=i};li.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Bt),r=e.parse(t[2],2,Bt);if(!i||!r)return null;if(!qt(i.type,[Vt,Rt,Lt,Et,Bt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Wt(i.type)+" instead");if(4===t.length){var n=e.parse(t[3],3,Lt);return n?new li(i,r,n):null}return new li(i,r)},li.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!Kt(e,["boolean","string","number","null"]))throw new se("Expected first argument to be of type boolean, string, number or null, but found "+Wt(ne(e))+" instead.");if(!Kt(i,["string","array"]))throw new se("Expected second argument to be of type array or string, but found "+Wt(ne(i))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return i.indexOf(e,r)}return i.indexOf(e)},li.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},li.prototype.outputDefined=function(){return!1},li.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ui=function(t,e,i,r,n,a){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=n,this.otherwise=a};ui.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n={},a=[],o=2;o<t.length-1;o+=2){var s=t[o],l=t[o+1];Array.isArray(s)||(s=[s]);var u=e.concat(o);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var p=h[c];if("number"!=typeof p&&"string"!=typeof p)return u.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return u.error("Numeric branch labels must be integer values.");if(i){if(u.checkSubtype(i,ne(p)))return null}else i=ne(p);if(void 0!==n[String(p)])return u.error("Branch labels must be unique.");n[String(p)]=a.length}var d=e.parse(l,o,r);if(!d)return null;r=r||d.type,a.push(d)}var f=e.parse(t[1],1,Bt);if(!f)return null;var m=e.parse(t[t.length-1],t.length-1,r);return m?"value"!==f.type.kind&&e.concat(1).checkSubtype(i,f.type)?null:new ui(i,r,f,n,a,m):null},ui.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(ne(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},ui.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},ui.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},ui.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=[],r={},n=0,a=Object.keys(this.cases).sort();n<a.length;n+=1){var o=a[n];void 0===(h=r[this.cases[o]])?(r[this.cases[o]]=i.length,i.push([this.cases[o],[o]])):i[h][1].push(o)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,u=i;l<u.length;l+=1){var c=u[l],h=c[0],p=c[1];e.push(1===p.length?s(p[0]):p.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var ci=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};ci.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r=[],n=1;n<t.length-1;n+=2){var a=e.parse(t[n],n,Vt);if(!a)return null;var o=e.parse(t[n+1],n+1,i);if(!o)return null;r.push([a,o]),i=i||o.type}var s=e.parse(t[t.length-1],t.length-1,i);return s?new ci(i,r,s):null},ci.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[1];if(r[0].evaluate(t))return n.evaluate(t)}return this.otherwise.evaluate(t)},ci.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[1];t(r[0]),t(n)}t(this.otherwise)},ci.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},ci.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var hi=function(t,e,i,r){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=r};function pi(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function di(t,e,i,r){return 0===r.compare(e,i)}function fi(t,e,i){var r="=="!==t&&"!="!==t;return function(){function n(t,e,i){this.type=Vt,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return n.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var i=t[0],a=e.parse(t[1],1,Bt);if(!a)return null;if(!pi(i,a.type))return e.concat(1).error('"'+i+"\" comparisons are not supported for type '"+Wt(a.type)+"'.");var o=e.parse(t[2],2,Bt);if(!o)return null;if(!pi(i,o.type))return e.concat(2).error('"'+i+"\" comparisons are not supported for type '"+Wt(o.type)+"'.");if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '"+Wt(a.type)+"' and '"+Wt(o.type)+"'.");r&&("value"===a.type.kind&&"value"!==o.type.kind?a=new ue(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new ue(a.type,[o])));var s=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Nt)))return null}return new n(a,o,s)},n.prototype.evaluate=function(n){var a=this.lhs.evaluate(n),o=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){var s=ne(a),l=ne(o);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new se('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var u=ne(a),c=ne(o);if("string"!==u.kind||"string"!==c.kind)return e(n,a,o)}return this.collator?i(n,a,o,this.collator.evaluate(n)):e(n,a,o)},n.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},n.prototype.outputDefined=function(){return!0},n.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},n}()}hi.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Bt),r=e.parse(t[2],2,Lt);if(!i||!r)return null;if(!qt(i.type,[Ht(Bt),Rt,Bt]))return e.error("Expected first argument to be of type array or string, but found "+Wt(i.type)+" instead");if(4===t.length){var n=e.parse(t[3],3,Lt);return n?new hi(i.type,i,r,n):null}return new hi(i.type,i,r)},hi.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!Kt(e,["string","array"]))throw new se("Expected first argument to be of type array or string, but found "+Wt(ne(e))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(i,r)}return e.slice(i)},hi.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},hi.prototype.outputDefined=function(){return!1},hi.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var mi=fi("==",(function(t,e,i){return e===i}),di),yi=fi("!=",(function(t,e,i){return e!==i}),(function(t,e,i,r){return!di(0,e,i,r)})),gi=fi("<",(function(t,e,i){return e<i}),(function(t,e,i,r){return r.compare(e,i)<0})),bi=fi(">",(function(t,e,i){return e>i}),(function(t,e,i,r){return r.compare(e,i)>0})),vi=fi("<=",(function(t,e,i){return e<=i}),(function(t,e,i,r){return r.compare(e,i)<=0})),_i=fi(">=",(function(t,e,i){return e>=i}),(function(t,e,i,r){return r.compare(e,i)>=0})),xi=function(t,e,i,r,n){this.type=Rt,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=n};xi.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Lt);if(!i)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var n=null;if(r.locale&&!(n=e.parse(r.locale,1,Rt)))return null;var a=null;if(r.currency&&!(a=e.parse(r.currency,1,Rt)))return null;var o=null;if(r["min-fraction-digits"]&&!(o=e.parse(r["min-fraction-digits"],1,Lt)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,Lt))?null:new xi(i,n,a,o,s)},xi.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},xi.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},xi.prototype.outputDefined=function(){return!1},xi.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Si=function(t){this.type=Lt,this.input=t};Si.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+Wt(i.type)+" instead."):new Si(i):null},Si.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new se("Expected value to be of type string or array, but found "+Wt(ne(e))+" instead.")},Si.prototype.eachChild=function(t){t(this.input)},Si.prototype.outputDefined=function(){return!1},Si.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var wi={"==":mi,"!=":yi,">":bi,"<":gi,">=":_i,"<=":vi,array:ue,at:oi,boolean:ue,case:ci,coalesce:ni,collator:ge,format:ce,image:he,in:si,"index-of":li,interpolate:ii,"interpolate-hcl":ii,"interpolate-lab":ii,length:Si,let:ai,literal:oe,match:ui,number:ue,"number-format":xi,object:ue,slice:hi,step:Be,string:ue,"to-boolean":de,"to-color":de,"to-number":de,"to-string":de,var:Ve,within:Me};function Ti(t,e){var i=e[0],r=e[1],n=e[2],a=e[3];i=i.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);var o=a?a.evaluate(t):1,s=ie(i,r,n,o);if(s)throw new se(s);return new Jt(i/255*o,r/255*o,n/255*o,o)}function Pi(t,e){return t in e}function Ci(t,e){var i=e[t];return void 0===i?null:i}function ki(t){return{type:t}}function Ii(t){return{result:"success",value:t}}function Ai(t){return{result:"error",value:t}}function Oi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Di(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Fi(t){return!!t.expression&&t.expression.interpolated}function Mi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Ei(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Li(t){return t}function Ri(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function Vi(t,e,i,r,n){return Ri(typeof i===n?r[i]:void 0,t.default,e.default)}function ji(t,e,i){if("number"!==Mi(i))return Ri(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];var n=ze(t.stops.map((function(t){return t[0]})),i);return t.stops[n][1]}function zi(t,e,i){var r=void 0!==t.base?t.base:1;if("number"!==Mi(i))return Ri(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];var a=ze(t.stops.map((function(t){return t[0]})),i),o=function(t,e,i,r){var n=r-i,a=t-i;return 0===n?0:1===e?a/n:(Math.pow(e,a)-1)/(Math.pow(e,n)-1)}(i,r,t.stops[a][0],t.stops[a+1][0]),s=t.stops[a][1],l=t.stops[a+1][1],u=Ue[e.type]||Li;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=ei[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=s.evaluate.apply(void 0,t),r=l.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==r)return u(i,r,o)}}:u(s,l,o)}function Bi(t,e,i){return"color"===e.type?i=Jt.parse(i):"formatted"===e.type?i=te.fromString(i.toString()):"resolvedImage"===e.type?i=ee.fromString(i.toString()):Mi(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),Ri(i,t.default,e.default)}ye.register(wi,{error:[{kind:"error"},[Rt],function(t,e){throw new se(e[0].evaluate(t))}],typeof:[Rt,[Bt],function(t,e){return Wt(ne(e[0].evaluate(t)))}],"to-rgba":[Ht(Lt,4),[jt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[jt,[Lt,Lt,Lt],Ti],rgba:[jt,[Lt,Lt,Lt,Lt],Ti],has:{type:Vt,overloads:[[[Rt],function(t,e){return Pi(e[0].evaluate(t),t.properties())}],[[Rt,zt],function(t,e){var i=e[1];return Pi(e[0].evaluate(t),i.evaluate(t))}]]},get:{type:Bt,overloads:[[[Rt],function(t,e){return Ci(e[0].evaluate(t),t.properties())}],[[Rt,zt],function(t,e){var i=e[1];return Ci(e[0].evaluate(t),i.evaluate(t))}]]},"feature-state":[Bt,[Rt],function(t,e){return Ci(e[0].evaluate(t),t.featureState||{})}],properties:[zt,[],function(t){return t.properties()}],"geometry-type":[Rt,[],function(t){return t.geometryType()}],id:[Bt,[],function(t){return t.id()}],zoom:[Lt,[],function(t){return t.globals.zoom}],"heatmap-density":[Lt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Lt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Bt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Lt,ki(Lt),function(t,e){for(var i=0,r=0,n=e;r<n.length;r+=1)i+=n[r].evaluate(t);return i}],"*":[Lt,ki(Lt),function(t,e){for(var i=1,r=0,n=e;r<n.length;r+=1)i*=n[r].evaluate(t);return i}],"-":{type:Lt,overloads:[[[Lt,Lt],function(t,e){var i=e[1];return e[0].evaluate(t)-i.evaluate(t)}],[[Lt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Lt,[Lt,Lt],function(t,e){var i=e[1];return e[0].evaluate(t)/i.evaluate(t)}],"%":[Lt,[Lt,Lt],function(t,e){var i=e[1];return e[0].evaluate(t)%i.evaluate(t)}],ln2:[Lt,[],function(){return Math.LN2}],pi:[Lt,[],function(){return Math.PI}],e:[Lt,[],function(){return Math.E}],"^":[Lt,[Lt,Lt],function(t,e){var i=e[1];return Math.pow(e[0].evaluate(t),i.evaluate(t))}],sqrt:[Lt,[Lt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Lt,[Lt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Lt,[Lt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Lt,[Lt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Lt,[Lt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Lt,[Lt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Lt,[Lt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Lt,[Lt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Lt,[Lt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Lt,[Lt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Lt,ki(Lt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Lt,ki(Lt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Lt,[Lt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Lt,[Lt],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[Lt,[Lt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Lt,[Lt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Vt,[Rt,Bt],function(t,e){var i=e[0],r=e[1];return t.properties()[i.value]===r.value}],"filter-id-==":[Vt,[Bt],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[Vt,[Rt],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[Vt,[Rt,Bt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],a=r.value;return typeof n==typeof a&&n<a}],"filter-id-<":[Vt,[Bt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<n}],"filter->":[Vt,[Rt,Bt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],a=r.value;return typeof n==typeof a&&n>a}],"filter-id->":[Vt,[Bt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r>n}],"filter-<=":[Vt,[Rt,Bt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],a=r.value;return typeof n==typeof a&&n<=a}],"filter-id-<=":[Vt,[Bt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<=n}],"filter->=":[Vt,[Rt,Bt],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],a=r.value;return typeof n==typeof a&&n>=a}],"filter-id->=":[Vt,[Bt],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r>=n}],"filter-has":[Vt,[Bt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Vt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[Vt,[Ht(Rt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Vt,[Ht(Bt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Vt,[Rt,Ht(Bt)],function(t,e){var i=e[0];return e[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[Vt,[Rt,Ht(Bt)],function(t,e){var i=e[0],r=e[1];return function(t,e,i,r){for(;i<=r;){var n=i+r>>1;if(e[n]===t)return!0;e[n]>t?r=n-1:i=n+1}return!1}(t.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:Vt,overloads:[[[Vt,Vt],function(t,e){var i=e[1];return e[0].evaluate(t)&&i.evaluate(t)}],[ki(Vt),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(!r[i].evaluate(t))return!1;return!0}]]},any:{type:Vt,overloads:[[[Vt,Vt],function(t,e){var i=e[1];return e[0].evaluate(t)||i.evaluate(t)}],[ki(Vt),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(r[i].evaluate(t))return!0;return!1}]]},"!":[Vt,[Vt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Vt,[Rt],function(t,e){var i=t.globals&&t.globals.isSupportedScript;return!i||i(e[0].evaluate(t))}],upcase:[Rt,[Rt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Rt,[Rt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Rt,ki(Bt),function(t,e){return e.map((function(e){return ae(e.evaluate(t))})).join("")}],"resolved-locale":[Rt,[Nt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Ni=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new me,this._defaultValue=e?function(t){return"color"===t.type&&Ei(t.default)?new Jt(0,0,0,0):"color"===t.type?Jt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Ui(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in wi}function Xi(t,e){var i=new je(wi,[],e?function(t){var e={color:jt,string:Rt,number:Lt,enum:Rt,boolean:Vt,formatted:Ut,resolvedImage:Xt};return"array"===t.type?Ht(e[t.value]||Bt,t.length):e[t.type]}(e):void 0),r=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Ii(new Ni(r,e)):Ai(i.errors)}Ni.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)},Ni.prototype.evaluate=function(t,e,i,r,n,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=a||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new se("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(o)+" instead.");return o}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Hi=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Le(e.expression)};Hi.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,a)},Hi.prototype.evaluate=function(t,e,i,r,n,a){return this._styleExpression.evaluate(t,e,i,r,n,a)};var Wi=function(t,e,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Le(e.expression),this.interpolationType=r};function Yi(t,e){if("error"===(t=Xi(t,e)).result)return t;var i=t.value.expression,r=Ee(i);if(!r&&!Oi(e))return Ai([new Ft("","data expressions not supported")]);var n=Re(i,["zoom"]);if(!n&&!Di(e))return Ai([new Ft("","zoom expressions not supported")]);var a=function t(e){var i=null;if(e instanceof ai)i=t(e.result);else if(e instanceof ni)for(var r=0,n=e.args;r<n.length&&!(i=t(n[r]));r+=1);else(e instanceof Be||e instanceof ii)&&e.input instanceof ye&&"zoom"===e.input.name&&(i=e);return i instanceof Ft||e.eachChild((function(e){var r=t(e);r instanceof Ft?i=r:!i&&r?i=new Ft("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&r&&i!==r&&(i=new Ft("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}(i);return a||n?a instanceof Ft?Ai([a]):a instanceof ii&&!Fi(e)?Ai([new Ft("",'"interpolate" expressions cannot be used with this property')]):Ii(a?new Wi(r?"camera":"composite",t.value,a.labels,a instanceof ii?a.interpolation:void 0):new Hi(r?"constant":"source",t.value)):Ai([new Ft("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Wi.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,n,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,a)},Wi.prototype.evaluate=function(t,e,i,r,n,a){return this._styleExpression.evaluate(t,e,i,r,n,a)},Wi.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?ii.interpolationFactor(this.interpolationType,t,e,i):0};var Gi=function(t,e){this._parameters=t,this._specification=e,At(this,function t(e,i){var r,n,a,o="color"===i.type,s=e.stops&&"object"==typeof e.stops[0][0],l=s||!(s||void 0!==e.property),u=e.type||(Fi(i)?"exponential":"interval");if(o&&((e=At({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],Jt.parse(t[1])]}))),e.default=Jt.parse(e.default?e.default:i.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!ei[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===u)r=zi;else if("interval"===u)r=ji;else if("categorical"===u){r=Vi,n=Object.create(null);for(var c=0,h=e.stops;c<h.length;c+=1){var p=h[c];n[p[0]]=p[1]}a=typeof e.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');r=Bi}if(s){for(var d={},f=[],m=0;m<e.stops.length;m++){var y=e.stops[m],g=y[0].zoom;void 0===d[g]&&(d[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},f.push(g)),d[g].stops.push([y[0].value,y[1]])}for(var b=[],v=0,_=f;v<_.length;v+=1){var x=_[v];b.push([d[x].zoom,t(d[x],i)])}var S={name:"linear"};return{kind:"composite",interpolationType:S,interpolationFactor:ii.interpolationFactor.bind(void 0,S),zoomStops:b.map((function(t){return t[0]})),evaluate:function(t,r){var n=t.zoom;return zi({stops:b,base:e.base},i,n).evaluate(n,r)}}}if(l){var w="exponential"===u?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:w,interpolationFactor:ii.interpolationFactor.bind(void 0,w),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return r(e,i,t.zoom,n,a)}}}return{kind:"source",evaluate:function(t,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?Ri(e.default,i.default):r(e,i,s,n,a)}}}(this._parameters,this._specification))};function qi(t){var e=t.key,i=t.value,r=t.valueSpec||{},n=t.objectElementValidators||{},a=t.style,o=t.styleSpec,s=[],l=Mi(i);if("object"!==l)return[new kt(e,i,"object expected, "+l+" found")];for(var u in i){var c=u.split(".")[0],h=r[c]||r["*"],p=void 0;if(n[c])p=n[c];else if(r[c])p=vr;else if(n["*"])p=n["*"];else{if(!r["*"]){s.push(new kt(e,i[u],'unknown property "'+u+'"'));continue}p=vr}s=s.concat(p({key:(e?e+".":e)+u,value:i[u],valueSpec:h,style:a,styleSpec:o,object:i,objectKey:u},i))}for(var d in r)n[d]||r[d].required&&void 0===r[d].default&&void 0===i[d]&&s.push(new kt(e,i,'missing required property "'+d+'"'));return s}function Ki(t){var e=t.value,i=t.valueSpec,r=t.style,n=t.styleSpec,a=t.key,o=t.arrayElementValidator||vr;if("array"!==Mi(e))return[new kt(a,e,"array expected, "+Mi(e)+" found")];if(i.length&&e.length!==i.length)return[new kt(a,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new kt(a,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var s={type:i.value,values:i.values};n.$version<7&&(s.function=i.function),"object"===Mi(i.value)&&(s=i.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(o({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:r,styleSpec:n,key:a+"["+u+"]"}));return l}function Zi(t){var e=t.key,i=t.value,r=t.valueSpec,n=Mi(i);return"number"===n&&i!=i&&(n="NaN"),"number"!==n?[new kt(e,i,"number expected, "+n+" found")]:"minimum"in r&&i<r.minimum?[new kt(e,i,i+" is less than the minimum value "+r.minimum)]:"maximum"in r&&i>r.maximum?[new kt(e,i,i+" is greater than the maximum value "+r.maximum)]:[]}function Ji(t){var e,i,r,n=t.valueSpec,a=Ot(t.value.type),o={},s="categorical"!==a&&void 0===t.value.property,l=!s,u="array"===Mi(t.value.stops)&&"array"===Mi(t.value.stops[0])&&"object"===Mi(t.value.stops[0][0]),c=qi({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===a)return[new kt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],i=t.value;return e=e.concat(Ki({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Mi(i)&&0===i.length&&e.push(new kt(t.key,i,"array must have at least one stop")),e},default:function(t){return vr({key:t.key,value:t.value,valueSpec:n,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===a&&s&&c.push(new kt(t.key,t.value,'missing required property "property"')),"identity"===a||t.value.stops||c.push(new kt(t.key,t.value,'missing required property "stops"')),"exponential"===a&&t.valueSpec.expression&&!Fi(t.valueSpec)&&c.push(new kt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Oi(t.valueSpec)?c.push(new kt(t.key,t.value,"property functions not supported")):s&&!Di(t.valueSpec)&&c.push(new kt(t.key,t.value,"zoom functions not supported"))),"categorical"!==a&&!u||void 0!==t.value.property||c.push(new kt(t.key,t.value,'"property" property is required')),c;function h(t){var e=[],a=t.value,s=t.key;if("array"!==Mi(a))return[new kt(s,a,"array expected, "+Mi(a)+" found")];if(2!==a.length)return[new kt(s,a,"array length 2 expected, length "+a.length+" found")];if(u){if("object"!==Mi(a[0]))return[new kt(s,a,"object expected, "+Mi(a[0])+" found")];if(void 0===a[0].zoom)return[new kt(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new kt(s,a,"object stop key must have value")];if(r&&r>Ot(a[0].zoom))return[new kt(s,a[0].zoom,"stop zoom values must appear in ascending order")];Ot(a[0].zoom)!==r&&(r=Ot(a[0].zoom),i=void 0,o={}),e=e.concat(qi({key:s+"[0]",value:a[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Zi,value:p}}))}else e=e.concat(p({key:s+"[0]",value:a[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},a));return Ui(Dt(a[1]))?e.concat([new kt(s+"[1]",a[1],"expressions are not allowed in function stops.")]):e.concat(vr({key:s+"[1]",value:a[1],valueSpec:n,style:t.style,styleSpec:t.styleSpec}))}function p(t,r){var s=Mi(t.value),l=Ot(t.value),u=null!==t.value?t.value:r;if(e){if(s!==e)return[new kt(t.key,u,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new kt(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var c="number expected, "+s+" found";return Oi(n)&&void 0===a&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new kt(t.key,u,c)]}return"categorical"!==a||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==a&&"number"===s&&void 0!==i&&l<i?[new kt(t.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===a&&l in o?[new kt(t.key,u,"stop domain values must be unique")]:(o[l]=!0,[])):[new kt(t.key,u,"integer expected, found "+l)]}}function $i(t){var e=("property"===t.expressionContext?Yi:Xi)(Dt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new kt(""+t.key+e.key,t.value,e.message)}));var i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new kt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Le(i))return[new kt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Le(i))return[new kt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Re(i,["zoom","feature-state"]))return[new kt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Ee(i))return[new kt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qi(t){var e=t.key,i=t.value,r=t.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(Ot(i))&&n.push(new kt(e,i,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(r.values).indexOf(Ot(i))&&n.push(new kt(e,i,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(i)+" found")),n}function tr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var r=i[e];if(!tr(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}Gi.deserialize=function(t){return new Gi(t._parameters,t._specification)},Gi.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var er={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ir(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};tr(t)||(t=nr(t));var e=Xi(t,er);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,i,r){return e.value.evaluate(t,i,{},r)},needGeometry:Array.isArray(t)&&0!==t.length&&"within"===t[0]}}function rr(t,e){return t<e?-1:t>e?1:0}function nr(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?ar(t[1],t[2],"=="):"!="===i?lr(ar(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?ar(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(nr))):"all"===i?["all"].concat(t.slice(1).map(nr)):"none"===i?["all"].concat(t.slice(1).map(nr).map(lr)):"in"===i?or(t[1],t.slice(2)):"!in"===i?lr(or(t[1],t.slice(2))):"has"===i?sr(t[1]):"!has"!==i||lr(sr(t[1]))}function ar(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function or(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(rr)]]:["filter-in-small",t,["literal",e]]}}function sr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function lr(t){return["!",t]}function ur(t){return tr(Dt(t.value))?$i(At({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var i=e.value,r=e.key;if("array"!==Mi(i))return[new kt(r,i,"array expected, "+Mi(i)+" found")];var n,a=e.styleSpec,o=[];if(i.length<1)return[new kt(r,i,"filter array must have at least 1 element")];switch(o=o.concat(Qi({key:r+"[0]",value:i[0],valueSpec:a.filter_operator,style:e.style,styleSpec:e.styleSpec})),Ot(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===Ot(i[1])&&o.push(new kt(r,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&o.push(new kt(r,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":i.length>=2&&"string"!==(n=Mi(i[1]))&&o.push(new kt(r+"[1]",i[1],"string expected, "+n+" found"));for(var s=2;s<i.length;s++)n=Mi(i[s]),"$type"===Ot(i[1])?o=o.concat(Qi({key:r+"["+s+"]",value:i[s],valueSpec:a.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&o.push(new kt(r+"["+s+"]",i[s],"string, number, or boolean expected, "+n+" found"));break;case"any":case"all":case"none":for(var l=1;l<i.length;l++)o=o.concat(t({key:r+"["+l+"]",value:i[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=Mi(i[1]),2!==i.length?o.push(new kt(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==n&&o.push(new kt(r+"[1]",i[1],"string expected, "+n+" found"))}return o}(t)}function cr(t,e){var i=t.key,r=t.style,n=t.styleSpec,a=t.value,o=t.objectKey,s=n[e+"_"+t.layerType];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return vr({key:i,value:a,valueSpec:n.transition,style:r,styleSpec:n});var u,c=t.valueSpec||s[o];if(!c)return[new kt(i,a,'unknown property "'+o+'"')];if("string"===Mi(a)&&Oi(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new kt(i,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===o&&r&&!r.glyphs&&h.push(new kt(i,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Ei(Dt(a))&&"identity"===Ot(a.type)&&h.push(new kt(i,a,'"text-font" does not support identity functions'))),h.concat(vr({key:t.key,value:a,valueSpec:c,style:r,styleSpec:n,expressionContext:"property",propertyType:e,propertyKey:o}))}function hr(t){return cr(t,"paint")}function pr(t){return cr(t,"layout")}function dr(t){var e=[],i=t.value,r=t.key,n=t.style,a=t.styleSpec;i.type||i.ref||e.push(new kt(r,i,'either "type" or "ref" is required'));var o,s=Ot(i.type),l=Ot(i.ref);if(i.id)for(var u=Ot(i.id),c=0;c<t.arrayIndex;c++){var h=n.layers[c];Ot(h.id)===u&&e.push(new kt(r,i.id,'duplicate layer id "'+i.id+'", previously used at line '+h.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach((function(t){t in i&&e.push(new kt(r,i[t],'"'+t+'" is prohibited for ref layers'))})),n.layers.forEach((function(t){Ot(t.id)===l&&(o=t)})),o?o.ref?e.push(new kt(r,i.ref,"ref cannot reference another ref layer")):s=Ot(o.type):e.push(new kt(r,i.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(i.source){var p=n.sources&&n.sources[i.source],d=p&&Ot(p.type);p?"vector"===d&&"raster"===s?e.push(new kt(r,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===d&&"raster"!==s?e.push(new kt(r,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==d||i["source-layer"]?"raster-dem"===d&&"hillshade"!==s?e.push(new kt(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===d&&p.lineMetrics||e.push(new kt(r,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new kt(r,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new kt(r,i.source,'source "'+i.source+'" not found'))}else e.push(new kt(r,i,'missing required property "source"'));return e=e.concat(qi({key:r,value:i,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return vr({key:r+".type",value:i.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:ur,layout:function(t){return qi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return pr(At({layerType:s},t))}}})},paint:function(t){return qi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return hr(At({layerType:s},t))}}})}}}))}function fr(t){var e=t.value,i=t.key,r=Mi(e);return"string"!==r?[new kt(i,e,"string expected, "+r+" found")]:[]}var mr={promoteId:function(t){var e=t.key,i=t.value;if("string"===Mi(i))return fr({key:e,value:i});var r=[];for(var n in i)r.push.apply(r,fr({key:e+"."+n,value:i[n]}));return r}};function yr(t){var e=t.value,i=t.key,r=t.styleSpec,n=t.style;if(!e.type)return[new kt(i,e,'"type" is required')];var a,o=Ot(e.type);switch(o){case"vector":case"raster":case"raster-dem":return qi({key:i,value:e,valueSpec:r["source_"+o.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:mr});case"geojson":if(a=qi({key:i,value:e,valueSpec:r.source_geojson,style:n,styleSpec:r,objectElementValidators:mr}),e.cluster)for(var s in e.clusterProperties){var l=e.clusterProperties[s],u=l[0],c="string"==typeof u?[u,["accumulated"],["get",s]]:u;a.push.apply(a,$i({key:i+"."+s+".map",value:l[1],expressionContext:"cluster-map"})),a.push.apply(a,$i({key:i+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return a;case"video":return qi({key:i,value:e,valueSpec:r.source_video,style:n,styleSpec:r});case"image":return qi({key:i,value:e,valueSpec:r.source_image,style:n,styleSpec:r});case"canvas":return[new kt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qi({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:r})}}function gr(t){var e=t.value,i=t.styleSpec,r=i.light,n=t.style,a=[],o=Mi(e);if(void 0===e)return a;if("object"!==o)return a.concat([new kt("light",e,"object expected, "+o+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&r[l[1]]&&r[l[1]].transition?vr({key:s,value:e[s],valueSpec:i.transition,style:n,styleSpec:i}):r[s]?vr({key:s,value:e[s],valueSpec:r[s],style:n,styleSpec:i}):[new kt(s,e[s],'unknown property "'+s+'"')])}return a}var br={"*":function(){return[]},array:Ki,boolean:function(t){var e=t.value,i=t.key,r=Mi(e);return"boolean"!==r?[new kt(i,e,"boolean expected, "+r+" found")]:[]},number:Zi,color:function(t){var e=t.key,i=t.value,r=Mi(i);return"string"!==r?[new kt(e,i,"color expected, "+r+" found")]:null===Zt(i)?[new kt(e,i,'color expected, "'+i+'" found')]:[]},constants:It,enum:Qi,filter:ur,function:Ji,layer:dr,object:qi,source:yr,light:gr,string:fr,formatted:function(t){return 0===fr(t).length?[]:$i(t)},resolvedImage:function(t){return 0===fr(t).length?[]:$i(t)}};function vr(t){var e=t.value,i=t.valueSpec,r=t.styleSpec;return i.expression&&Ei(Ot(e))?Ji(t):i.expression&&Ui(Dt(e))?$i(t):i.type&&br[i.type]?br[i.type](t):qi(At({},t,{valueSpec:i.type?r[i.type]:i}))}function _r(t){var e=t.value,i=t.key,r=fr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new kt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new kt(i,e,'"glyphs" url must include a "{range}" token'))),r}function xr(t,e){void 0===e&&(e=Ct);var i=[];return i=i.concat(vr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:_r,"*":function(){return[]}}})),t.constants&&(i=i.concat(It({key:"constants",value:t.constants,style:t,styleSpec:e}))),Sr(i)}function Sr(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function wr(t){return function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return Sr(t.apply(this,e))}}xr.source=wr(yr),xr.light=wr(gr),xr.layer=wr(dr),xr.filter=wr(ur),xr.paintProperty=wr(hr),xr.layoutProperty=wr(pr);var Tr=xr,Pr=Tr.light,Cr=Tr.paintProperty,kr=Tr.layoutProperty;function Ir(t,e){var i=!1;if(e&&e.length)for(var r=0,n=e;r<n.length;r+=1)t.fire(new Tt(new Error(n[r].message))),i=!0;return i}var Ar=Or;function Or(t,e,i){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var n=new Int32Array(this.arrayBuffer);t=n[0],this.d=(e=n[1])+2*(i=n[2]);for(var a=0;a<this.d*this.d;a++){var o=n[3+a],s=n[3+a+1];r.push(o===s?null:n.subarray(o,s))}var l=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],l),this.bboxes=n.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var u=0;u<this.d*this.d;u++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var c=i/e*t;this.min=-c,this.max=t+c}Or.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Or.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Or.prototype._insertCell=function(t,e,i,r,n,a){this.cells[n].push(a)},Or.prototype.query=function(t,e,i,r,n){var a=this.min,o=this.max;if(t<=a&&e<=a&&o<=i&&o<=r&&!n)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,i,r,this._queryCell,s,{},n),s},Or.prototype._queryCell=function(t,e,i,r,n,a,o,s){var l=this.cells[n];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===o[p]){var d=4*p;(s?s(c[d+0],c[d+1],c[d+2],c[d+3]):t<=c[d+2]&&e<=c[d+3]&&i>=c[d+0]&&r>=c[d+1])?(o[p]=!0,a.push(u[p])):o[p]=!1}}},Or.prototype._forEachCell=function(t,e,i,r,n,a,o,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(i),h=this._convertToCellCoord(r),p=l;p<=c;p++)for(var d=u;d<=h;d++){var f=this.d*d+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(d),this._convertFromCellCoord(p+1),this._convertFromCellCoord(d+1)))&&n.call(this,t,e,i,r,f,a,o,s))return}},Or.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Or.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Or.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,r=0;r<this.cells.length;r++)i+=this.cells[r].length;var n=new Int32Array(e+i+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var a=e,o=0;o<t.length;o++){var s=t[o];n[3+o]=a,n.set(s,a),a+=s.length}return n[3+t.length]=a,n.set(this.keys,a),n[3+t.length+1]=a+=this.keys.length,n.set(this.bboxes,a),a+=this.bboxes.length,n.buffer};var Dr=self.ImageData,Fr=self.ImageBitmap,Mr={};function Er(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Mr[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(var Lr in Er("Object",Object),Ar.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},Ar.deserialize=function(t){return new Ar(t.buffer)},Er("Grid",Ar),Er("Color",Jt),Er("Error",Error),Er("ResolvedImage",ee),Er("StylePropertyFunction",Gi),Er("StyleExpression",Ni,{omit:["_evaluator"]}),Er("ZoomDependentExpression",Wi),Er("ZoomConstantExpression",Hi),Er("CompoundExpression",ye,{omit:["_evaluate"]}),wi)wi[Lr]._classRegistryKey||Er("Expression_"+Lr,wi[Lr]);function Rr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Vr(t){return Fr&&t instanceof Fr}function jr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Rr(t)||Vr(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof Dr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],n=0,a=t;n<a.length;n+=1)r.push(jr(a[n],e));return r}if("object"==typeof t){var o=t.constructor,s=o._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l=o.serialize?o.serialize(t,e):{};if(!o.serialize){for(var u in t)if(t.hasOwnProperty(u)&&!(Mr[s].omit.indexOf(u)>=0)){var c=t[u];l[u]=Mr[s].shallow.indexOf(u)>=0?c:jr(c,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l}throw new Error("can't serialize object of type "+typeof t)}function zr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Rr(t)||Vr(t)||ArrayBuffer.isView(t)||t instanceof Dr)return t;if(Array.isArray(t))return t.map(zr);if("object"==typeof t){var e=t.$name||"Object",i=Mr[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var r=Object.create(i.prototype),n=0,a=Object.keys(t);n<a.length;n+=1){var o=a[n];if("$name"!==o){var s=t[o];r[o]=Mr[e].shallow.indexOf(o)>=0?s:zr(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var Br=function(){this.first=!0};Br.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))};var Nr={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Ur(t){for(var e=0,i=t;e<i.length;e+=1)if(Xr(i[e].charCodeAt(0)))return!0;return!1}function Xr(t){return!(746!==t&&747!==t&&(t<4352||!(Nr["Bopomofo Extended"](t)||Nr.Bopomofo(t)||Nr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Nr["CJK Compatibility Ideographs"](t)||Nr["CJK Compatibility"](t)||Nr["CJK Radicals Supplement"](t)||Nr["CJK Strokes"](t)||!(!Nr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Nr["CJK Unified Ideographs Extension A"](t)||Nr["CJK Unified Ideographs"](t)||Nr["Enclosed CJK Letters and Months"](t)||Nr["Hangul Compatibility Jamo"](t)||Nr["Hangul Jamo Extended-A"](t)||Nr["Hangul Jamo Extended-B"](t)||Nr["Hangul Jamo"](t)||Nr["Hangul Syllables"](t)||Nr.Hiragana(t)||Nr["Ideographic Description Characters"](t)||Nr.Kanbun(t)||Nr["Kangxi Radicals"](t)||Nr["Katakana Phonetic Extensions"](t)||Nr.Katakana(t)&&12540!==t||!(!Nr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Nr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Nr["Unified Canadian Aboriginal Syllabics"](t)||Nr["Unified Canadian Aboriginal Syllabics Extended"](t)||Nr["Vertical Forms"](t)||Nr["Yijing Hexagram Symbols"](t)||Nr["Yi Syllables"](t)||Nr["Yi Radicals"](t))))}function Hr(t){return!(Xr(t)||function(t){return!!(Nr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Nr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Nr["Letterlike Symbols"](t)||Nr["Number Forms"](t)||Nr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Nr["Control Pictures"](t)&&9251!==t||Nr["Optical Character Recognition"](t)||Nr["Enclosed Alphanumerics"](t)||Nr["Geometric Shapes"](t)||Nr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Nr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Nr["CJK Symbols and Punctuation"](t)||Nr.Katakana(t)||Nr["Private Use Area"](t)||Nr["CJK Compatibility Forms"](t)||Nr["Small Form Variants"](t)||Nr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Wr(t){return t>=1424&&t<=2303||Nr["Arabic Presentation Forms-A"](t)||Nr["Arabic Presentation Forms-B"](t)}function Yr(t,e){return!(!e&&Wr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Nr.Khmer(t))}function Gr(t){for(var e=0,i=t;e<i.length;e+=1)if(Wr(i[e].charCodeAt(0)))return!0;return!1}var qr=null,Kr="unavailable",Zr=null,Jr=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Kr="error"),qr&&qr(t)};function $r(){Qr.fire(new wt("pluginStateChange",{pluginStatus:Kr,pluginURL:Zr}))}var Qr=new Pt,tn=function(){return Kr},en=function(){if("deferred"!==Kr||!Zr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Kr="loading",$r(),Zr&&bt({url:Zr},(function(t){t?Jr(t):(Kr="loaded",$r())}))},rn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Kr||null!=rn.applyArabicShaping},isLoading:function(){return"loading"===Kr},setState:function(t){Kr=t.pluginStatus,Zr=t.pluginURL},isParsed:function(){return null!=rn.applyArabicShaping&&null!=rn.processBidirectionalText&&null!=rn.processStyledBidirectionalText},getPluginURL:function(){return Zr}},nn=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Br,this.transition={})};nn.prototype.isSupportedScript=function(t){return function(t,e){for(var i=0,r=t;i<r.length;i+=1)if(!Yr(r[i].charCodeAt(0),e))return!1;return!0}(t,rn.isLoaded())},nn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},nn.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}};var an=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Ei(t))return new Gi(t,e);if(Ui(t)){var i=Yi(t,e);if("error"===i.result)throw new Error(i.value.map((function(t){return t.key+": "+t.message})).join(", "));return i.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=Jt.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===e?t.specification.default:e,t.specification)};an.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},an.prototype.possiblyEvaluate=function(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)};var on=function(t){this.property=t,this.value=new an(t,void 0)};on.prototype.transitioned=function(t,e){return new ln(this.property,this.value,e,c({},t.transition,this.transition),t.now)},on.prototype.untransitioned=function(){return new ln(this.property,this.value,null,{},0)};var sn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};sn.prototype.getValue=function(t){return v(this._values[t].value.value)},sn.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new on(this._values[t].property)),this._values[t].value=new an(this._values[t].property,null===e?void 0:v(e))},sn.prototype.getTransition=function(t){return v(this._values[t].transition)},sn.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new on(this._values[t].property)),this._values[t].transition=v(e)||void 0},sn.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n);var a=this.getTransition(r);void 0!==a&&(t[r+"-transition"]=a)}return t},sn.prototype.transitioned=function(t,e){for(var i=new un(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var a=n[r];i._values[a]=this._values[a].transitioned(t,e._values[a])}return i},sn.prototype.untransitioned=function(){for(var t=new un(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e];t._values[r]=this._values[r].untransitioned()}return t};var ln=function(t,e,i,r,n){this.property=t,this.value=e,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)};ln.prototype.possiblyEvaluate=function(t,e,i){var r=t.now||0,n=this.value.possiblyEvaluate(t,e,i),a=this.prior;if(a){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return a.possiblyEvaluate(t,e,i);var o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(t,e,i),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}(o))}return n};var un=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};un.prototype.possiblyEvaluate=function(t,e){for(var i=new pn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var a=n[r];i._values[a]=this._values[a].possiblyEvaluate(t,e)}return i},un.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var cn=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};cn.prototype.getValue=function(t){return v(this._values[t].value)},cn.prototype.setValue=function(t,e){this._values[t]=new an(this._values[t].property,null===e?void 0:v(e))},cn.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n)}return t},cn.prototype.possiblyEvaluate=function(t,e){for(var i=new pn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var a=n[r];i._values[a]=this._values[a].possiblyEvaluate(t,e)}return i};var hn=function(t,e,i){this.property=t,this.value=e,this.parameters=i};hn.prototype.isConstant=function(){return"constant"===this.value.kind},hn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},hn.prototype.evaluate=function(t,e,i,r){return this.property.evaluate(this.value,this.parameters,t,e,i,r)};var pn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};pn.prototype.get=function(t){return this._values[t]};var dn=function(t){this.specification=t};dn.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},dn.prototype.interpolate=function(t,e,i){var r=Ue[this.specification.type];return r?r(t,e,i):t};var fn=function(t,e){this.specification=t,this.overrides=e};fn.prototype.possiblyEvaluate=function(t,e,i,r){return new hn(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,r)}:t.expression,e)},fn.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new hn(this,{kind:"constant",value:void 0},t.parameters);var r=Ue[this.specification.type];return r?new hn(this,{kind:"constant",value:r(t.value.value,e.value.value,i)},t.parameters):t},fn.prototype.evaluate=function(t,e,i,r,n,a){return"constant"===t.kind?t.value:t.evaluate(e,i,r,n,a)};var mn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,i,r){if(void 0===t.value)return new hn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},i,r),a="resolvedImage"===t.property.specification.type&&"string"!=typeof n?n.name:n,o=this._calculate(a,a,a,e);return new hn(this,{kind:"constant",value:o},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new hn(this,{kind:"constant",value:s},e)}return new hn(this,t.expression,e)},e.prototype.evaluate=function(t,e,i,r,n,a){if("source"===t.kind){var o=t.evaluate(e,i,r,n,a);return this._calculate(o,o,o,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,r),t.evaluate({zoom:Math.floor(e.zoom)},i,r),t.evaluate({zoom:Math.floor(e.zoom)+1},i,r),e):t.value},e.prototype._calculate=function(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},e.prototype.interpolate=function(t){return t},e}(fn),yn=function(t){this.specification=t};yn.prototype.possiblyEvaluate=function(t,e,i,r){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e,null,{},i,r);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new nn(Math.floor(e.zoom-1),e)),t.expression.evaluate(new nn(Math.floor(e.zoom),e)),t.expression.evaluate(new nn(Math.floor(e.zoom+1),e)),e)}},yn.prototype._calculate=function(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},yn.prototype.interpolate=function(t){return t};var gn=function(t){this.specification=t};gn.prototype.possiblyEvaluate=function(t,e,i,r){return!!t.expression.evaluate(e,null,{},i,r)},gn.prototype.interpolate=function(){return!1};var bn=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[e];i.specification.overridable&&this.overridableProperties.push(e);var r=this.defaultPropertyValues[e]=new an(i,void 0),n=this.defaultTransitionablePropertyValues[e]=new on(i);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};Er("DataDrivenProperty",fn),Er("DataConstantProperty",dn),Er("CrossFadedDataDrivenProperty",mn),Er("CrossFadedProperty",yn),Er("ColorRampProperty",gn);var vn=function(t){function e(e,i){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),i.layout&&(this._unevaluatedLayout=new cn(i.layout)),i.paint)){for(var r in this._transitionablePaint=new sn(i.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var n in e.layout)this.setLayoutProperty(n,e.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,i){void 0===i&&(i={}),null!=e&&this._validate(kr,"layers."+this.id+".layout."+t,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return y(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,i){if(void 0===i&&(i={}),null!=e&&this._validate(Cr,"layers."+this.id+".paint."+t,t,e,i))return!1;if(y(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],n="cross-faded-data-driven"===r.property.specification["property-type"],a=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||a||n||this._handleOverridablePaintPropertyUpdate(t,o,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,i){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),b(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,i,r,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&Ir(this,t.call(Tr,{key:e,layerType:this.type,objectKey:i,value:r,styleSpec:Ct,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof hn&&Oi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Pt),_n={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},xn=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Sn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function wn(t,e){void 0===e&&(e=1);var i=0,r=0;return{members:t.map((function(t){var n=_n[t.type].BYTES_PER_ELEMENT,a=i=Tn(i,Math.max(e,n)),o=t.components||1;return r=Math.max(r,n),i+=n*o,{name:t.name,type:t.type,components:o,offset:a}})),size:Tn(i,Math.max(r,e)),alignment:e}}function Tn(t,e){return Math.ceil(t/e)*e}Sn.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Sn.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Sn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Sn.prototype.clear=function(){this.length=0},Sn.prototype.resize=function(t){this.reserve(t),this.length=t},Sn.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Sn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Pn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=i,t},e}(Sn);Pn.prototype.bytesPerElement=4,Er("StructArrayLayout2i4",Pn);var Cn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var a=4*t;return this.int16[a+0]=e,this.int16[a+1]=i,this.int16[a+2]=r,this.int16[a+3]=n,t},e}(Sn);Cn.prototype.bytesPerElement=8,Er("StructArrayLayout4i8",Cn);var kn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,r,n,a)},e.prototype.emplace=function(t,e,i,r,n,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(Sn);kn.prototype.bytesPerElement=12,Er("StructArrayLayout2i4i12",kn);var In=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,r,n,a)},e.prototype.emplace=function(t,e,i,r,n,a,o){var s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.uint8[l+4]=r,this.uint8[l+5]=n,this.uint8[l+6]=a,this.uint8[l+7]=o,t},e}(Sn);In.prototype.bytesPerElement=8,Er("StructArrayLayout2i4ub8",In);var An=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,a,o,s,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,i,r,n,a,o,s,l,u)},e.prototype.emplace=function(t,e,i,r,n,a,o,s,l,u,c){var h=9*t,p=18*t;return this.uint16[h+0]=e,this.uint16[h+1]=i,this.uint16[h+2]=r,this.uint16[h+3]=n,this.uint16[h+4]=a,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint8[p+16]=u,this.uint8[p+17]=c,t},e}(Sn);An.prototype.bytesPerElement=18,Er("StructArrayLayout8ui2ub18",An);var On=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,a,o,s,l,u,c,h){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,i,r,n,a,o,s,l,u,c,h)},e.prototype.emplace=function(t,e,i,r,n,a,o,s,l,u,c,h,p){var d=12*t;return this.int16[d+0]=e,this.int16[d+1]=i,this.int16[d+2]=r,this.int16[d+3]=n,this.uint16[d+4]=a,this.uint16[d+5]=o,this.uint16[d+6]=s,this.uint16[d+7]=l,this.int16[d+8]=u,this.int16[d+9]=c,this.int16[d+10]=h,this.int16[d+11]=p,t},e}(Sn);On.prototype.bytesPerElement=24,Er("StructArrayLayout4i4ui4i24",On);var Dn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.float32[n+0]=e,this.float32[n+1]=i,this.float32[n+2]=r,t},e}(Sn);Dn.prototype.bytesPerElement=12,Er("StructArrayLayout3f12",Dn);var Fn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Sn);Fn.prototype.bytesPerElement=4,Er("StructArrayLayout1ul4",Fn);var Mn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,a,o,s,l){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,i,r,n,a,o,s,l)},e.prototype.emplace=function(t,e,i,r,n,a,o,s,l,u){var c=10*t,h=5*t;return this.int16[c+0]=e,this.int16[c+1]=i,this.int16[c+2]=r,this.int16[c+3]=n,this.int16[c+4]=a,this.int16[c+5]=o,this.uint32[h+3]=s,this.uint16[c+8]=l,this.uint16[c+9]=u,t},e}(Sn);Mn.prototype.bytesPerElement=20,Er("StructArrayLayout6i1ul2ui20",Mn);var En=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,r,n,a)},e.prototype.emplace=function(t,e,i,r,n,a,o){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=a,this.int16[s+5]=o,t},e}(Sn);En.prototype.bytesPerElement=12,Er("StructArrayLayout2i2i2i12",En);var Ln=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n)},e.prototype.emplace=function(t,e,i,r,n,a){var o=4*t,s=8*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=r,this.int16[s+6]=n,this.int16[s+7]=a,t},e}(Sn);Ln.prototype.bytesPerElement=16,Er("StructArrayLayout2f1f2i16",Ln);var Rn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var a=12*t,o=3*t;return this.uint8[a+0]=e,this.uint8[a+1]=i,this.float32[o+1]=r,this.float32[o+2]=n,t},e}(Sn);Rn.prototype.bytesPerElement=12,Er("StructArrayLayout2ub2f12",Rn);var Vn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,this.uint16[n+2]=r,t},e}(Sn);Vn.prototype.bytesPerElement=6,Er("StructArrayLayout3ui6",Vn);var jn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,a,o,s,l,u,c,h,p,d,f,m,y){var g=this.length;return this.resize(g+1),this.emplace(g,t,e,i,r,n,a,o,s,l,u,c,h,p,d,f,m,y)},e.prototype.emplace=function(t,e,i,r,n,a,o,s,l,u,c,h,p,d,f,m,y,g){var b=24*t,v=12*t,_=48*t;return this.int16[b+0]=e,this.int16[b+1]=i,this.uint16[b+2]=r,this.uint16[b+3]=n,this.uint32[v+2]=a,this.uint32[v+3]=o,this.uint32[v+4]=s,this.uint16[b+10]=l,this.uint16[b+11]=u,this.uint16[b+12]=c,this.float32[v+7]=h,this.float32[v+8]=p,this.uint8[_+36]=d,this.uint8[_+37]=f,this.uint8[_+38]=m,this.uint32[v+10]=y,this.int16[b+22]=g,t},e}(Sn);jn.prototype.bytesPerElement=48,Er("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",jn);var zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,a,o,s,l,u,c,h,p,d,f,m,y,g,b,v,_,x,S,w,T,P,C,k){var I=this.length;return this.resize(I+1),this.emplace(I,t,e,i,r,n,a,o,s,l,u,c,h,p,d,f,m,y,g,b,v,_,x,S,w,T,P,C,k)},e.prototype.emplace=function(t,e,i,r,n,a,o,s,l,u,c,h,p,d,f,m,y,g,b,v,_,x,S,w,T,P,C,k,I){var A=34*t,O=17*t;return this.int16[A+0]=e,this.int16[A+1]=i,this.int16[A+2]=r,this.int16[A+3]=n,this.int16[A+4]=a,this.int16[A+5]=o,this.int16[A+6]=s,this.int16[A+7]=l,this.uint16[A+8]=u,this.uint16[A+9]=c,this.uint16[A+10]=h,this.uint16[A+11]=p,this.uint16[A+12]=d,this.uint16[A+13]=f,this.uint16[A+14]=m,this.uint16[A+15]=y,this.uint16[A+16]=g,this.uint16[A+17]=b,this.uint16[A+18]=v,this.uint16[A+19]=_,this.uint16[A+20]=x,this.uint16[A+21]=S,this.uint16[A+22]=w,this.uint32[O+12]=T,this.float32[O+13]=P,this.float32[O+14]=C,this.float32[O+15]=k,this.float32[O+16]=I,t},e}(Sn);zn.prototype.bytesPerElement=68,Er("StructArrayLayout8i15ui1ul4f68",zn);var Bn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Sn);Bn.prototype.bytesPerElement=4,Er("StructArrayLayout1f4",Bn);var Nn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=3*t;return this.int16[n+0]=e,this.int16[n+1]=i,this.int16[n+2]=r,t},e}(Sn);Nn.prototype.bytesPerElement=6,Er("StructArrayLayout3i6",Nn);var Un=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)},e.prototype.emplace=function(t,e,i,r){var n=4*t;return this.uint32[2*t+0]=e,this.uint16[n+2]=i,this.uint16[n+3]=r,t},e}(Sn);Un.prototype.bytesPerElement=8,Er("StructArrayLayout1ul2ui8",Un);var Xn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,t},e}(Sn);Xn.prototype.bytesPerElement=4,Er("StructArrayLayout2ui4",Xn);var Hn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Sn);Hn.prototype.bytesPerElement=2,Er("StructArrayLayout1ui2",Hn);var Wn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=i,t},e}(Sn);Wn.prototype.bytesPerElement=8,Er("StructArrayLayout2f8",Wn);var Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)},e.prototype.emplace=function(t,e,i,r,n){var a=4*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=r,this.float32[a+3]=n,t},e}(Sn);Yn.prototype.bytesPerElement=16,Er("StructArrayLayout4f16",Yn);var Gn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(xn);Gn.prototype.size=20;var qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Gn(this,t)},e}(Mn);Er("CollisionBoxArray",qn);var Kn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,i),e}(xn);Kn.prototype.size=48;var Zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Kn(this,t)},e}(jn);Er("PlacedSymbolArray",Zn);var Jn=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,i),e}(xn);Jn.prototype.size=68;var $n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Jn(this,t)},e}(zn);Er("SymbolInstanceArray",$n);var Qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Bn);Er("GlyphOffsetArray",Qn);var ta=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Nn);Er("SymbolLineVertexArray",ta);var ea=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,i),e}(xn);ea.prototype.size=8;var ia=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new ea(this,t)},e}(Un);Er("FeatureIndexArray",ia);var ra=wn([{name:"a_pos",components:2,type:"Int16"}],4).members,na=function(t){void 0===t&&(t=[]),this.segments=t};function aa(t,e){return 256*(t=l(Math.floor(t),0,255))+l(Math.floor(e),0,255)}na.prototype.prepareSegment=function(t,e,i,r){var n=this.segments[this.segments.length-1];return t>na.MAX_VERTEX_ARRAY_LENGTH&&x("Max vertices per segment is "+na.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!n||n.vertexLength+t>na.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n},na.prototype.get=function(){return this.segments},na.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var r in i.vaos)i.vaos[r].destroy()}},na.simpleSegment=function(t,e,i,r){return new na([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])},na.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Er("SegmentVector",na);var oa=wn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),sa=e((function(t){t.exports=function(t,e){var i,r,n,a,o,s,l,u;for(r=t.length-(i=3&t.length),n=e,o=3432918353,s=461845907,u=0;u<r;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,n=27492+(65535&(a=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}})),la=e((function(t){t.exports=function(t,e){for(var i,r=t.length,n=e^r,a=0;r>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++a;switch(r){case 3:n^=(255&t.charCodeAt(a+2))<<16;case 2:n^=(255&t.charCodeAt(a+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(a)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}})),ua=sa,ca=la;ua.murmur3=sa,ua.murmur2=ca;var ha=function(){this.ids=[],this.positions=[],this.indexed=!1};ha.prototype.add=function(t,e,i,r){this.ids.push(da(t)),this.positions.push(e,i,r)},ha.prototype.getPositions=function(t){for(var e=da(t),i=0,r=this.ids.length-1;i<r;){var n=i+r>>1;this.ids[n]>=e?r=n:i=n+1}for(var a=[];this.ids[i]===e;)a.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return a},ha.serialize=function(t,e){var i=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,i,r,n){for(;r<n;){for(var a=e[r+n>>1],o=r-1,s=n+1;;){do{o++}while(e[o]<a);do{s--}while(e[s]>a);if(o>=s)break;fa(e,o,s),fa(i,3*o,3*s),fa(i,3*o+1,3*s+1),fa(i,3*o+2,3*s+2)}s-r<n-s?(t(e,i,r,s),r=s+1):(t(e,i,s+1,n),n=s)}}(i,r,0,i.length-1),e&&e.push(i.buffer,r.buffer),{ids:i,positions:r}},ha.deserialize=function(t){var e=new ha;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var pa=Math.pow(2,53)-1;function da(t){var e=+t;return!isNaN(e)&&e<=pa?e:ua(String(t))}function fa(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}Er("FeaturePositionMap",ha);var ma=function(t,e){this.gl=t.gl,this.location=e},ya=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(ma),ga=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(ma),ba=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(ma),va=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(ma),_a=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(ma),xa=function(t){function e(e,i){t.call(this,e,i),this.current=Jt.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(ma),Sa=new Float32Array(16),wa=function(t){function e(e,i){t.call(this,e,i),this.current=Sa}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(ma);function Ta(t){return[aa(255*t.r,255*t.g),aa(255*t.b,255*t.a)]}var Pa=function(t,e,i){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=i};Pa.prototype.setUniform=function(t,e,i){t.set(i.constantOr(this.value))},Pa.prototype.getBinding=function(t,e,i){return"color"===this.type?new xa(t,e):new ga(t,e)};var Ca=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ca.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Ca.prototype.setUniform=function(t,e,i,r){var n="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;n&&t.set(n)},Ca.prototype.getBinding=function(t,e,i){return"u_pattern"===i.substr(0,9)?new _a(t,e):new ga(t,e)};var ka=function(t,e,i,r){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?2:1,offset:0}})),this.paintVertexArray=new r};ka.prototype.populatePaintArray=function(t,e,i,r,n){var a=this.paintVertexArray.length,o=this.expression.evaluate(new nn(0),e,{},r,[],n);this.paintVertexArray.resize(t),this._setPaintValue(a,t,o)},ka.prototype.updatePaintArray=function(t,e,i,r){var n=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(t,e,n)},ka.prototype._setPaintValue=function(t,e,i){if("color"===this.type)for(var r=Ta(i),n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1]);else{for(var a=t;a<e;a++)this.paintVertexArray.emplace(a,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},ka.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ka.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ia=function(t,e,i,r,n,a){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=i,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?4:2,offset:0}})),this.paintVertexArray=new a};Ia.prototype.populatePaintArray=function(t,e,i,r,n){var a=this.expression.evaluate(new nn(this.zoom),e,{},r,[],n),o=this.expression.evaluate(new nn(this.zoom+1),e,{},r,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,a,o)},Ia.prototype.updatePaintArray=function(t,e,i,r){var n=this.expression.evaluate({zoom:this.zoom},i,r),a=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(t,e,n,a)},Ia.prototype._setPaintValue=function(t,e,i,r){if("color"===this.type)for(var n=Ta(i),a=Ta(r),o=t;o<e;o++)this.paintVertexArray.emplace(o,n[0],n[1],a[0],a[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}},Ia.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ia.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ia.prototype.setUniform=function(t,e){var i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=l(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(r)},Ia.prototype.getBinding=function(t,e,i){return new ga(t,e)};var Aa=function(t,e,i,r,n,a){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=r,this.layerId=a,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n};Aa.prototype.populatePaintArray=function(t,e,i){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],i)},Aa.prototype.updatePaintArray=function(t,e,i,r,n){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],n)},Aa.prototype._setPaintValues=function(t,e,i,r){if(r&&i){var n=r[i.min],a=r[i.mid],o=r[i.max];if(n&&a&&o)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,a.tl[0],a.tl[1],a.br[0],a.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],a.pixelRatio,n.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,a.tl[0],a.tl[1],a.br[0],a.br[1],o.tl[0],o.tl[1],o.br[0],o.br[1],a.pixelRatio,o.pixelRatio)}},Aa.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,oa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,oa.members,this.expression.isStateDependent))},Aa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Oa=function(t,e,i,r){this.binders={},this.layoutAttributes=r,this._buffers=[];var n=[];for(var a in t.paint._values)if(i(a)){var o=t.paint.get(a);if(o instanceof hn&&Oi(o.property.specification)){var s=Fa(a,t.type),l=o.value,u=o.property.specification.type,c=o.property.useIntegerZoom,h=o.property.specification["property-type"],p="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===l.kind)this.binders[a]=p?new Ca(l.value,s):new Pa(l.value,s,u),n.push("/u_"+a);else if("source"===l.kind||p){var d=Ma(a,u,"source");this.binders[a]=p?new Aa(l,u,c,e,d,t.id):new ka(l,s,u,d),n.push("/a_"+a)}else{var f=Ma(a,u,"composite");this.binders[a]=new Ia(l,s,u,c,e,f),n.push("/z_"+a)}}}this.cacheKey=n.sort().join("")};Oa.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof ka||e instanceof Ia?e.maxValue:0},Oa.prototype.populatePaintArrays=function(t,e,i,r,n){for(var a in this.binders){var o=this.binders[a];(o instanceof ka||o instanceof Ia||o instanceof Aa)&&o.populatePaintArray(t,e,i,r,n)}},Oa.prototype.setConstantPatternPositions=function(t,e){for(var i in this.binders){var r=this.binders[i];r instanceof Ca&&r.setConstantPatternPositions(t,e)}},Oa.prototype.updatePaintArrays=function(t,e,i,r,n){var a=!1;for(var o in t)for(var s=0,l=e.getPositions(o);s<l.length;s+=1){var u=l[s],c=i.feature(u.index);for(var h in this.binders){var p=this.binders[h];if((p instanceof ka||p instanceof Ia||p instanceof Aa)&&!0===p.expression.isStateDependent){var d=r.paint.get(h);p.expression=d.value,p.updatePaintArray(u.start,u.end,c,t[o],n),a=!0}}}return a},Oa.prototype.defines=function(){var t=[];for(var e in this.binders){var i=this.binders[e];(i instanceof Pa||i instanceof Ca)&&t.push.apply(t,i.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},Oa.prototype.getPaintVertexBuffers=function(){return this._buffers},Oa.prototype.getUniforms=function(t,e){var i=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof Pa||n instanceof Ca||n instanceof Ia)for(var a=0,o=n.uniformNames;a<o.length;a+=1){var s=o[a];if(e[s]){var l=n.getBinding(t,e[s],s);i.push({name:s,property:r,binding:l})}}}return i},Oa.prototype.setUniforms=function(t,e,i,r){for(var n=0,a=e;n<a.length;n+=1){var o=a[n],s=o.name,l=o.property;this.binders[l].setUniform(o.binding,r,i.get(l),s)}},Oa.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var i=this.binders[e];if(t&&i instanceof Aa){var r=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(i instanceof ka||i instanceof Ia)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Oa.prototype.upload=function(t){for(var e in this.binders){var i=this.binders[e];(i instanceof ka||i instanceof Ia||i instanceof Aa)&&i.upload(t)}this.updatePaintBuffers()},Oa.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof ka||e instanceof Ia||e instanceof Aa)&&e.destroy()}};var Da=function(t,e,i,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var n=0,a=e;n<a.length;n+=1){var o=a[n];this.programConfigurations[o.id]=new Oa(o,i,r,t)}this.needsUpload=!1,this._featureMap=new ha,this._bufferOffset=0};function Fa(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Ma(t,e,i){var r={color:{source:Wn,composite:Yn},number:{source:Bn,composite:Wn}},n=function(t){return{"line-pattern":{source:An,composite:An},"fill-pattern":{source:An,composite:An},"fill-extrusion-pattern":{source:An,composite:An}}[t]}(t);return n&&n[i]||r[e][i]}Da.prototype.populatePaintArrays=function(t,e,i,r,n,a){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(t,e,r,n,a);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Da.prototype.updatePaintArrays=function(t,e,i,r){for(var n=0,a=i;n<a.length;n+=1){var o=a[n];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,this._featureMap,e,o,r)||this.needsUpload}},Da.prototype.get=function(t){return this.programConfigurations[t]},Da.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Da.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Er("ConstantBinder",Pa),Er("CrossFadedConstantBinder",Ca),Er("SourceExpressionBinder",ka),Er("CrossFadedCompositeBinder",Aa),Er("CompositeExpressionBinder",Ia),Er("ProgramConfiguration",Oa,{omit:["_buffers"]}),Er("ProgramConfigurationSet",Da);var Ea={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function La(t){for(var e=8192/t.extent,i=t.loadGeometry(),r=0;r<i.length;r++)for(var n=i[r],a=0;a<n.length;a++){var o=n[a];o.x=Math.round(o.x*e),o.y=Math.round(o.y*e),(o.x<Ea.min||o.x>Ea.max||o.y<Ea.min||o.y>Ea.max)&&(x("Geometry exceeds allowed extent, reduce your vector tile buffer size"),o.x=l(o.x,Ea.min,Ea.max),o.y=l(o.y,Ea.min,Ea.max))}return i}function Ra(t,e,i,r,n){t.emplaceBack(2*e+(r+1)/2,2*i+(n+1)/2)}var Va=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Pn,this.indexArray=new Vn,this.segments=new na,this.programConfigurations=new Da(ra,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function ja(t,e){for(var i=0;i<t.length;i++)if(Ga(e,t[i]))return!0;for(var r=0;r<e.length;r++)if(Ga(t,e[r]))return!0;return!!Ua(t,e)}function za(t,e,i){return!!Ga(t,e)||!!Ha(e,t,i)}function Ba(t,e){if(1===t.length)return Ya(e,t[0]);for(var i=0;i<e.length;i++)for(var r=e[i],n=0;n<r.length;n++)if(Ga(t,r[n]))return!0;for(var a=0;a<t.length;a++)if(Ya(e,t[a]))return!0;for(var o=0;o<e.length;o++)if(Ua(t,e[o]))return!0;return!1}function Na(t,e,i){if(t.length>1){if(Ua(t,e))return!0;for(var r=0;r<e.length;r++)if(Ha(e[r],t,i))return!0}for(var n=0;n<t.length;n++)if(Ha(t[n],e,i))return!0;return!1}function Ua(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var r=t[i],n=t[i+1],a=0;a<e.length-1;a++)if(Xa(r,n,e[a],e[a+1]))return!0;return!1}function Xa(t,e,i,r){return S(t,i,r)!==S(e,i,r)&&S(t,e,i)!==S(t,e,r)}function Ha(t,e,i){var r=i*i;if(1===e.length)return t.distSqr(e[0])<r;for(var n=1;n<e.length;n++)if(Wa(t,e[n-1],e[n])<r)return!0;return!1}function Wa(t,e,i){var r=e.distSqr(i);if(0===r)return t.distSqr(e);var n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return t.distSqr(n<0?e:n>1?i:i.sub(e)._mult(n)._add(e))}function Ya(t,e){for(var i,r,n,a=!1,o=0;o<t.length;o++)for(var s=0,l=(i=t[o]).length-1;s<i.length;l=s++)(r=i[s]).y>e.y!=(n=i[l]).y>e.y&&e.x<(n.x-r.x)*(e.y-r.y)/(n.y-r.y)+r.x&&(a=!a);return a}function Ga(t,e){for(var i=!1,r=0,n=t.length-1;r<t.length;n=r++){var a=t[r],o=t[n];a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(i=!i)}return i}function qa(t,e,i){var r=i[0],n=i[2];if(t.x<r.x&&e.x<r.x||t.x>n.x&&e.x>n.x||t.y<r.y&&e.y<r.y||t.y>n.y&&e.y>n.y)return!1;var a=S(t,e,i[0]);return a!==S(t,e,i[1])||a!==S(t,e,i[2])||a!==S(t,e,i[3])}function Ka(t,e,i){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:i.programConfigurations.get(e.id).getMaxValue(t)}function Za(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ja(t,e,i,r,a){if(!e[0]&&!e[1])return t;var o=n.convert(e)._mult(a);"viewport"===i&&o._rotate(-r);for(var s=[],l=0;l<t.length;l++)s.push(t[l].sub(o));return s}Va.prototype.populate=function(t,e,i){var r=this.layers[0],n=[],a=null;"circle"===r.type&&(a=r.layout.get("circle-sort-key"));for(var o=0,s=t;o<s.length;o+=1){var l=s[o],u=l.feature,c=l.id,h=l.index,p=l.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:c,properties:u.properties,geometry:d?La(u):[]};if(this.layers[0]._featureFilter.filter(new nn(this.zoom),f,i)){d||(f.geometry=La(u));var m=a?a.evaluate(f,{},i):void 0;n.push({id:c,properties:u.properties,type:u.type,sourceLayerIndex:p,index:h,geometry:f.geometry,patterns:{},sortKey:m})}}a&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,g=n;y<g.length;y+=1){var b=g[y],v=b.geometry,_=b.index,x=b.sourceLayerIndex,S=t[_].feature;this.addFeature(b,v,_,i),e.featureIndex.insert(S,v,_,x,this.index)}},Va.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Va.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Va.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Va.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ra),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Va.prototype.addFeature=function(t,e,i,r){for(var n=0,a=e;n<a.length;n+=1)for(var o=0,s=a[n];o<s.length;o+=1){var l=s[o],u=l.x,c=l.y;if(!(u<0||u>=8192||c<0||c>=8192)){var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),p=h.vertexLength;Ra(this.layoutVertexArray,u,c,-1,-1),Ra(this.layoutVertexArray,u,c,1,-1),Ra(this.layoutVertexArray,u,c,1,1),Ra(this.layoutVertexArray,u,c,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},r)},Er("CircleBucket",Va,{omit:["layers"]});var $a=new bn({"circle-sort-key":new fn(Ct.layout_circle["circle-sort-key"])}),Qa={paint:new bn({"circle-radius":new fn(Ct.paint_circle["circle-radius"]),"circle-color":new fn(Ct.paint_circle["circle-color"]),"circle-blur":new fn(Ct.paint_circle["circle-blur"]),"circle-opacity":new fn(Ct.paint_circle["circle-opacity"]),"circle-translate":new dn(Ct.paint_circle["circle-translate"]),"circle-translate-anchor":new dn(Ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new dn(Ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new dn(Ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new fn(Ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new fn(Ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new fn(Ct.paint_circle["circle-stroke-opacity"])}),layout:$a},to="undefined"!=typeof Float32Array?Float32Array:Array;function eo(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function io(t,e,i){var r=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],m=e[12],y=e[13],g=e[14],b=e[15],v=i[0],_=i[1],x=i[2],S=i[3];return t[0]=v*r+_*s+x*h+S*m,t[1]=v*n+_*l+x*p+S*y,t[2]=v*a+_*u+x*d+S*g,t[3]=v*o+_*c+x*f+S*b,t[4]=(v=i[4])*r+(_=i[5])*s+(x=i[6])*h+(S=i[7])*m,t[5]=v*n+_*l+x*p+S*y,t[6]=v*a+_*u+x*d+S*g,t[7]=v*o+_*c+x*f+S*b,t[8]=(v=i[8])*r+(_=i[9])*s+(x=i[10])*h+(S=i[11])*m,t[9]=v*n+_*l+x*p+S*y,t[10]=v*a+_*u+x*d+S*g,t[11]=v*o+_*c+x*f+S*b,t[12]=(v=i[12])*r+(_=i[13])*s+(x=i[14])*h+(S=i[15])*m,t[13]=v*n+_*l+x*p+S*y,t[14]=v*a+_*u+x*d+S*g,t[15]=v*o+_*c+x*f+S*b,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,i=arguments.length;i--;)e+=t[i]*t[i];return Math.sqrt(e)});var ro,no=io;function ao(t,e,i){var r=e[0],n=e[1],a=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*a+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*a+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*a+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*a+i[15]*o,t}ro=new to(3),to!=Float32Array&&(ro[0]=0,ro[1]=0,ro[2]=0),function(){var t=new to(4);to!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var oo=(function(){var t=new to(2);to!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,Qa)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Va(t)},e.prototype.queryRadius=function(t){var e=t;return Ka("circle-radius",this,e)+Ka("circle-stroke-width",this,e)+Za(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,n,a,o,s){for(var l=Ja(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),u=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),c="map"===this.paint.get("circle-pitch-alignment"),h=c?l:function(t,e){return t.map((function(t){return so(t,e)}))}(l,s),p=c?u*o:u,d=0,f=r;d<f.length;d+=1)for(var m=0,y=f[d];m<y.length;m+=1){var g=y[m],b=c?g:so(g,s),v=p,_=ao([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=_[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=a.cameraToCenterDistance/_[3]),za(h,b,v))return!0}return!1},e}(vn));function so(t,e){var i=ao([],[t.x,t.y,0,1],e);return new n(i[0]/i[3],i[1]/i[3])}var lo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Va);function uo(t,e,i,r){var n=e.width,a=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==n*a*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(n*a*i);return t.width=n,t.height=a,t.data=r,t}function co(t,e,i){var r=e.width,n=e.height;if(r!==t.width||n!==t.height){var a=uo({},{width:r,height:n},i);ho(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,n)},i),t.width=r,t.height=n,t.data=a.data}}function ho(t,e,i,r,n,a){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=t.data,s=e.data,l=0;l<n.height;l++)for(var u=((i.y+l)*t.width+i.x)*a,c=((r.y+l)*e.width+r.x)*a,h=0;h<n.width*a;h++)s[c+h]=o[u+h];return e}Er("HeatmapBucket",lo,{omit:["layers"]});var po=function(t,e){uo(this,t,1,e)};po.prototype.resize=function(t){co(this,t,1)},po.prototype.clone=function(){return new po({width:this.width,height:this.height},new Uint8Array(this.data))},po.copy=function(t,e,i,r,n){ho(t,e,i,r,n,1)};var fo=function(t,e){uo(this,t,4,e)};fo.prototype.resize=function(t){co(this,t,4)},fo.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},fo.prototype.clone=function(){return new fo({width:this.width,height:this.height},new Uint8Array(this.data))},fo.copy=function(t,e,i,r,n){ho(t,e,i,r,n,4)},Er("AlphaImage",po),Er("RGBAImage",fo);var mo={paint:new bn({"heatmap-radius":new fn(Ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new fn(Ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new dn(Ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new gn(Ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new dn(Ct.paint_heatmap["heatmap-opacity"])})};function yo(t,e){for(var i=new Uint8Array(1024),r={},n=0,a=0;n<256;n++,a+=4){r[e]=n/255;var o=t.evaluate(r);i[a+0]=Math.floor(255*o.r/o.a),i[a+1]=Math.floor(255*o.g/o.a),i[a+2]=Math.floor(255*o.b/o.a),i[a+3]=Math.floor(255*o.a)}return new fo({width:256,height:1},i)}var go=function(t){function e(e){t.call(this,e,mo),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new lo(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=yo(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(vn),bo={paint:new bn({"hillshade-illumination-direction":new dn(Ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new dn(Ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new dn(Ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new dn(Ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new dn(Ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new dn(Ct.paint_hillshade["hillshade-accent-color"])})},vo=function(t){function e(e){t.call(this,e,bo)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(vn),_o=wn([{name:"a_pos",components:2,type:"Int16"}],4).members,xo=wo,So=wo;function wo(t,e,i){i=i||2;var r,n,a,o,s,l,u,c=e&&e.length,h=c?e[0]*i:t.length,p=To(t,0,h,i,!0),d=[];if(!p||p.next===p.prev)return d;if(c&&(p=function(t,e,i,r){var n,a,o,s=[];for(n=0,a=e.length;n<a;n++)(o=To(t,e[n]*r,n<a-1?e[n+1]*r:t.length,r,!1))===o.next&&(o.steiner=!0),s.push(Lo(o));for(s.sort(Do),n=0;n<s.length;n++)Fo(s[n],i),i=Po(i,i.next);return i}(t,e,p,i)),t.length>80*i){r=a=t[0],n=o=t[1];for(var f=i;f<h;f+=i)(s=t[f])<r&&(r=s),(l=t[f+1])<n&&(n=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-r,o-n))?1/u:0}return Co(p,d,i,r,n,u),d}function To(t,e,i,r,n){var a,o;if(n===qo(t,e,i,r)>0)for(a=e;a<i;a+=r)o=Wo(a,t[a],t[a+1],o);else for(a=i-r;a>=e;a-=r)o=Wo(a,t[a],t[a+1],o);return o&&zo(o,o.next)&&(Yo(o),o=o.next),o}function Po(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!zo(r,r.next)&&0!==jo(r.prev,r,r.next))r=r.next;else{if(Yo(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function Co(t,e,i,r,n,a,o){if(t){!o&&a&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=Eo(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,a,o,s,l,u=1;do{for(i=t,t=null,a=null,o=0;i;){for(o++,r=i,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,l--),a?a.nextZ=n:t=n,n.prevZ=a,a=n;i=r}a.nextZ=null,u*=2}while(o>1)}(n)}(t,r,n,a);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,a?Io(t,r,n,a):ko(t))e.push(s.i/i),e.push(t.i/i),e.push(l.i/i),Yo(t),t=l.next,u=l.next;else if((t=l)===u){o?1===o?Co(t=Ao(Po(t),e,i),e,i,r,n,a,2):2===o&&Oo(t,e,i,r,n,a):Co(Po(t),e,i,r,n,a,1);break}}}function ko(t){var e=t.prev,i=t,r=t.next;if(jo(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(Ro(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&jo(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Io(t,e,i,r){var n=t.prev,a=t,o=t.next;if(jo(n,a,o)>=0)return!1;for(var s=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,l=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y,u=Eo(n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,e,i,r),c=Eo(s,l,e,i,r),h=t.prevZ,p=t.nextZ;h&&h.z>=u&&p&&p.z<=c;){if(h!==t.prev&&h!==t.next&&Ro(n.x,n.y,a.x,a.y,o.x,o.y,h.x,h.y)&&jo(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==t.prev&&p!==t.next&&Ro(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&jo(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=u;){if(h!==t.prev&&h!==t.next&&Ro(n.x,n.y,a.x,a.y,o.x,o.y,h.x,h.y)&&jo(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=c;){if(p!==t.prev&&p!==t.next&&Ro(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&jo(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Ao(t,e,i){var r=t;do{var n=r.prev,a=r.next.next;!zo(n,a)&&Bo(n,r,r.next,a)&&Xo(n,a)&&Xo(a,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(a.i/i),Yo(r),Yo(r.next),r=t=a),r=r.next}while(r!==t);return Po(r)}function Oo(t,e,i,r,n,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Vo(o,s)){var l=Ho(o,s);return o=Po(o,o.next),l=Po(l,l.next),Co(o,e,i,r,n,a),void Co(l,e,i,r,n,a)}s=s.next}o=o.next}while(o!==t)}function Do(t,e){return t.x-e.x}function Fo(t,e){if(e=function(t,e){var i,r=e,n=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o){if(o=s,s===n){if(a===r.y)return r;if(a===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===o)return i;var l,u=i,c=i.x,h=i.y,p=1/0;r=i;do{n>=r.x&&r.x>=c&&n!==r.x&&Ro(a<h?n:o,a,c,h,a<h?o:n,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(n-r.x),Xo(r,t)&&(l<p||l===p&&(r.x>i.x||r.x===i.x&&Mo(i,r)))&&(i=r,p=l)),r=r.next}while(r!==u);return i}(t,e)){var i=Ho(e,t);Po(e,e.next),Po(i,i.next)}}function Mo(t,e){return jo(t.prev,t,e.prev)<0&&jo(e.next,t,t.next)<0}function Eo(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Lo(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function Ro(t,e,i,r,n,a,o,s){return(n-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(r-s)-(i-o)*(e-s)>=0&&(i-o)*(a-s)-(n-o)*(r-s)>=0}function Vo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Bo(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(Xo(t,e)&&Xo(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,a=(t.y+e.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(jo(t.prev,t,e.prev)||jo(t,e.prev,e))||zo(t,e)&&jo(t.prev,t,t.next)>0&&jo(e.prev,e,e.next)>0)}function jo(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function zo(t,e){return t.x===e.x&&t.y===e.y}function Bo(t,e,i,r){var n=Uo(jo(t,e,i)),a=Uo(jo(t,e,r)),o=Uo(jo(i,r,t)),s=Uo(jo(i,r,e));return n!==a&&o!==s||!(0!==n||!No(t,i,e))||!(0!==a||!No(t,r,e))||!(0!==o||!No(i,t,r))||!(0!==s||!No(i,e,r))}function No(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Uo(t){return t>0?1:t<0?-1:0}function Xo(t,e){return jo(t.prev,t,t.next)<0?jo(t,e,t.next)>=0&&jo(t,t.prev,e)>=0:jo(t,e,t.prev)<0||jo(t,t.next,e)<0}function Ho(t,e){var i=new Go(t.i,t.x,t.y),r=new Go(e.i,e.x,e.y),n=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,a.next=r,r.prev=a,r}function Wo(t,e,i,r){var n=new Go(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function Yo(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Go(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function qo(t,e,i,r){for(var n=0,a=e,o=i-r;a<i;a+=r)n+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return n}function Ko(t,e,i,r,n){!function t(e,i,r,n,a){for(;n>r;){if(n-r>600){var o=n-r+1,s=i-r+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);t(e,i,Math.max(r,Math.floor(i-s*u/o+c)),Math.min(n,Math.floor(i+(o-s)*u/o+c)),a)}var h=e[i],p=r,d=n;for(Zo(e,r,i),a(e[n],h)>0&&Zo(e,r,n);p<d;){for(Zo(e,p,d),p++,d--;a(e[p],h)<0;)p++;for(;a(e[d],h)>0;)d--}0===a(e[r],h)?Zo(e,r,d):Zo(e,++d,n),d<=i&&(r=d+1),i<=d&&(n=d-1)}}(t,e,i||0,r||t.length-1,n||Jo)}function Zo(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function Jo(t,e){return t<e?-1:t>e?1:0}function $o(t,e){var i=t.length;if(i<=1)return[t];for(var r,n,a=[],o=0;o<i;o++){var s=w(t[o]);0!==s&&(t[o].area=Math.abs(s),void 0===n&&(n=s<0),n===s<0?(r&&a.push(r),r=[t[o]]):r.push(t[o]))}if(r&&a.push(r),e>1)for(var l=0;l<a.length;l++)a[l].length<=e||(Ko(a[l],e,1,a[l].length-1,Qo),a[l]=a[l].slice(0,e));return a}function Qo(t,e){return e.area-t.area}function ts(t,e,i){for(var r=i.patternDependencies,n=!1,a=0,o=e;a<o.length;a+=1){var s=o[a].paint.get(t+"-pattern");s.isConstant()||(n=!0);var l=s.constantOr(null);l&&(n=!0,r[l.to]=!0,r[l.from]=!0)}return n}function es(t,e,i,r,n){for(var a=n.patternDependencies,o=0,s=e;o<s.length;o+=1){var l=s[o],u=l.paint.get(t+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:r-1},i,{},n.availableImages),h=u.evaluate({zoom:r},i,{},n.availableImages),p=u.evaluate({zoom:r+1},i,{},n.availableImages);h=h&&h.name?h.name:h,p=p&&p.name?p.name:p,a[c=c&&c.name?c.name:c]=!0,a[h]=!0,a[p]=!0,i.patterns[l.id]={min:c,mid:h,max:p}}}return i}wo.deviation=function(t,e,i,r){var n=e&&e.length,a=Math.abs(qo(t,0,n?e[0]*i:t.length,i));if(n)for(var o=0,s=e.length;o<s;o++)a-=Math.abs(qo(t,e[o]*i,o<s-1?e[o+1]*i:t.length,i));var l=0;for(o=0;o<r.length;o+=3){var u=r[o]*i,c=r[o+1]*i,h=r[o+2]*i;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},wo.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++)for(var o=0;o<e;o++)i.vertices.push(t[n][a][o]);n>0&&i.holes.push(r+=t[n-1].length)}return i},xo.default=So;var is=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pn,this.indexArray=new Vn,this.indexArray2=new Xn,this.programConfigurations=new Da(_o,t.layers,t.zoom),this.segments=new na,this.segments2=new na,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};is.prototype.populate=function(t,e,i){this.hasPattern=ts("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),n=[],a=0,o=t;a<o.length;a+=1){var s=o[a],l=s.feature,u=s.id,c=s.index,h=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d={type:l.type,id:u,properties:l.properties,geometry:p?La(l):[]};if(this.layers[0]._featureFilter.filter(new nn(this.zoom),d,i)){p||(d.geometry=La(l));var f=r?r.evaluate(d,{},i,e.availableImages):void 0;n.push({id:u,properties:l.properties,type:l.type,sourceLayerIndex:h,index:c,geometry:d.geometry,patterns:{},sortKey:f})}}r&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,y=n;m<y.length;m+=1){var g=y[m],b=g.geometry,v=g.index,_=g.sourceLayerIndex;if(this.hasPattern){var x=es("fill",this.layers,g,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(g,b,v,i,{});e.featureIndex.insert(t[v].feature,b,v,_,this.index)}},is.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},is.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var a=n[r];this.addFeature(a,a.geometry,a.index,e,i)}},is.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},is.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},is.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},is.prototype.addFeature=function(t,e,i,r,n){for(var a=0,o=$o(e,500);a<o.length;a+=1){for(var s=o[a],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var h=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),p=h.vertexLength,d=[],f=[],m=0,y=s;m<y.length;m+=1){var g=y[m];if(0!==g.length){g!==s[0]&&f.push(d.length/2);var b=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),v=b.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(v+g.length-1,v),d.push(g[0].x),d.push(g[0].y);for(var _=1;_<g.length;_++)this.layoutVertexArray.emplaceBack(g[_].x,g[_].y),this.indexArray2.emplaceBack(v+_-1,v+_),d.push(g[_].x),d.push(g[_].y);b.vertexLength+=g.length,b.primitiveLength+=g.length}}for(var x=xo(d,f),S=0;S<x.length;S+=3)this.indexArray.emplaceBack(p+x[S],p+x[S+1],p+x[S+2]);h.vertexLength+=l,h.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Er("FillBucket",is,{omit:["layers","patternFeatures"]});var rs=new bn({"fill-sort-key":new fn(Ct.layout_fill["fill-sort-key"])}),ns={paint:new bn({"fill-antialias":new dn(Ct.paint_fill["fill-antialias"]),"fill-opacity":new fn(Ct.paint_fill["fill-opacity"]),"fill-color":new fn(Ct.paint_fill["fill-color"]),"fill-outline-color":new fn(Ct.paint_fill["fill-outline-color"]),"fill-translate":new dn(Ct.paint_fill["fill-translate"]),"fill-translate-anchor":new dn(Ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new mn(Ct.paint_fill["fill-pattern"])}),layout:rs},as=function(t){function e(e){t.call(this,e,ns)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new is(t)},e.prototype.queryRadius=function(){return Za(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,n,a,o){return Ba(Ja(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),r)},e.prototype.isTileClipped=function(){return!0},e}(vn),os=wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ss=ls;function ls(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(us,this,e)}function us(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function cs(t){for(var e,i,r=0,n=0,a=t.length,o=a-1;n<a;o=n++)r+=((i=t[o]).x-(e=t[n]).x)*(e.y+i.y);return r}ls.types=["Unknown","Point","LineString","Polygon"],ls.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,a=0,o=0,s=0,l=[];t.pos<i;){if(a<=0){var u=t.readVarint();r=7&u,a=u>>3}if(a--,1===r||2===r)o+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&l.push(e),e=[]),e.push(new n(o,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&l.push(e),l},ls.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,a=0,o=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();i=7&c,r=c>>3}if(r--,1===i||2===i)(n+=t.readSVarint())<o&&(o=n),n>s&&(s=n),(a+=t.readSVarint())<l&&(l=a),a>u&&(u=a);else if(7!==i)throw new Error("unknown command "+i)}return[o,l,s,u]},ls.prototype.toGeoJSON=function(t,e,i){var r,n,a=this.extent*Math.pow(2,i),o=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=ls.types[this.type];function c(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];c(l=h);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],a=0;a<e;a++){var o=cs(t[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(i&&n.push(i),i=[t[a]]):i.push(t[a]))}return i&&n.push(i),n}(l),r=0;r<l.length;r++)for(n=0;n<l[r].length;n++)c(l[r][n])}1===l.length?l=l[0]:u="Multi"+u;var p={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var hs=ps;function ps(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ds,this,e),this.length=this._features.length}function ds(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(i))}function fs(t,e,i){if(3===t){var r=new hs(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}ps.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new ss(this._pbf,e,this.extent,this._keys,this._values)};var ms={VectorTile:function(t,e){this.layers=t.readFields(fs,{},e)},VectorTileFeature:ss,VectorTileLayer:hs},ys=ms.VectorTileFeature.types,gs=Math.pow(2,13);function bs(t,e,i,r,n,a,o,s){t.emplaceBack(e,i,2*Math.floor(r*gs)+o,n*gs*2,a*gs*2,Math.round(s))}var vs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new kn,this.indexArray=new Vn,this.programConfigurations=new Da(os,t.layers,t.zoom),this.segments=new na,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function _s(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}vs.prototype.populate=function(t,e,i){this.features=[],this.hasPattern=ts("fill-extrusion",this.layers,e);for(var r=0,n=t;r<n.length;r+=1){var a=n[r],o=a.feature,s=a.id,l=a.index,u=a.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,h={type:o.type,id:s,properties:o.properties,geometry:c?La(o):[]};if(this.layers[0]._featureFilter.filter(new nn(this.zoom),h,i)){var p={id:s,sourceLayerIndex:u,index:l,geometry:c?h.geometry:La(o),properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(p.id=o.id),this.hasPattern?this.features.push(es("fill-extrusion",this.layers,p,this.zoom,e)):this.addFeature(p,p.geometry,l,i,{}),e.featureIndex.insert(o,p.geometry,l,u,this.index,!0)}}},vs.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.features;r<n.length;r+=1){var a=n[r];this.addFeature(a,a.geometry,a.index,e,i)}},vs.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},vs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},vs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,os),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},vs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vs.prototype.addFeature=function(t,e,i,r,n){for(var a=0,o=$o(e,500);a<o.length;a+=1){for(var s=o[a],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,d=s;p<d.length;p+=1){var f=d[p];if(0!==f.length&&!((F=f).every((function(t){return t.x<0}))||F.every((function(t){return t.x>8192}))||F.every((function(t){return t.y<0}))||F.every((function(t){return t.y>8192}))))for(var m=0,y=0;y<f.length;y++){var g=f[y];if(y>=1){var b=f[y-1];if(!_s(g,b)){h.vertexLength+4>na.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=g.sub(b)._perp()._unit(),_=b.dist(g);m+_>32768&&(m=0),bs(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,0,m),bs(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,1,m),bs(this.layoutVertexArray,b.x,b.y,v.x,v.y,0,0,m+=_),bs(this.layoutVertexArray,b.x,b.y,v.x,v.y,0,1,m);var x=h.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),h.vertexLength+=4,h.primitiveLength+=2}}}}if(h.vertexLength+l>na.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===ys[t.type]){for(var S=[],w=[],T=h.vertexLength,P=0,C=s;P<C.length;P+=1){var k=C[P];if(0!==k.length){k!==s[0]&&w.push(S.length/2);for(var I=0;I<k.length;I++){var A=k[I];bs(this.layoutVertexArray,A.x,A.y,0,0,1,1,0),S.push(A.x),S.push(A.y)}}}for(var O=xo(S,w),D=0;D<O.length;D+=3)this.indexArray.emplaceBack(T+O[D],T+O[D+2],T+O[D+1]);h.primitiveLength+=O.length/3,h.vertexLength+=l}}var F;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},Er("FillExtrusionBucket",vs,{omit:["layers","features"]});var xs={paint:new bn({"fill-extrusion-opacity":new dn(Ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new fn(Ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new dn(Ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new dn(Ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mn(Ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new fn(Ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new fn(Ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new dn(Ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Ss=function(t){function e(e){t.call(this,e,xs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new vs(t)},e.prototype.queryRadius=function(){return Za(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,i,r,a,o,s,l){var u=Ja(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,i),h=this.paint.get("fill-extrusion-base").evaluate(e,i),p=function(t,e,i,r){for(var a=[],o=0,s=t;o<s.length;o+=1){var l=s[o],u=[l.x,l.y,0,1];ao(u,u,e),a.push(new n(u[0]/u[3],u[1]/u[3]))}return a}(u,l),d=function(t,e,i,r){for(var a=[],o=[],s=r[8]*e,l=r[9]*e,u=r[10]*e,c=r[11]*e,h=r[8]*i,p=r[9]*i,d=r[10]*i,f=r[11]*i,m=0,y=t;m<y.length;m+=1){for(var g=[],b=[],v=0,_=y[m];v<_.length;v+=1){var x=_[v],S=x.x,w=x.y,T=r[0]*S+r[4]*w+r[12],P=r[1]*S+r[5]*w+r[13],C=r[2]*S+r[6]*w+r[14],k=r[3]*S+r[7]*w+r[15],I=C+u,A=k+c,O=T+h,D=P+p,F=C+d,M=k+f,E=new n((T+s)/A,(P+l)/A);E.z=I/A,g.push(E);var L=new n(O/M,D/M);L.z=F/M,b.push(L)}a.push(g),o.push(b)}return[a,o]}(r,h,c,l);return function(t,e,i){var r=1/0;Ba(i,e)&&(r=Ts(i,e[0]));for(var n=0;n<e.length;n++)for(var a=e[n],o=t[n],s=0;s<a.length-1;s++){var l=a[s],u=[l,a[s+1],o[s+1],o[s],l];ja(i,u)&&(r=Math.min(r,Ts(i,u)))}return r!==1/0&&r}(d[0],d[1],p)},e}(vn);function ws(t,e){return t.x*e.x+t.y*e.y}function Ts(t,e){if(1===t.length){for(var i,r=0,n=e[r++];!i||n.equals(i);)if(!(i=e[r++]))return 1/0;for(;r<e.length;r++){var a=e[r],o=t[0],s=i.sub(n),l=a.sub(n),u=o.sub(n),c=ws(s,s),h=ws(s,l),p=ws(l,l),d=ws(u,s),f=ws(u,l),m=c*p-h*h,y=(p*d-h*f)/m,g=(c*f-h*d)/m,b=n.z*(1-y-g)+i.z*y+a.z*g;if(isFinite(b))return b}return 1/0}for(var v=1/0,_=0,x=e;_<x.length;_+=1)v=Math.min(v,x[_].z);return v}var Ps=wn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Cs=ms.VectorTileFeature.types,ks=Math.cos(Math.PI/180*37.5),Is=Math.pow(2,14)/.5,As=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new In,this.indexArray=new Vn,this.programConfigurations=new Da(Ps,t.layers,t.zoom),this.segments=new na,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};As.prototype.populate=function(t,e,i){this.hasPattern=ts("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),n=[],a=0,o=t;a<o.length;a+=1){var s=o[a],l=s.feature,u=s.id,c=s.index,h=s.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d={type:l.type,id:u,properties:l.properties,geometry:p?La(l):[]};if(this.layers[0]._featureFilter.filter(new nn(this.zoom),d,i)){p||(d.geometry=La(l));var f=r?r.evaluate(d,{},i):void 0;n.push({id:u,properties:l.properties,type:l.type,sourceLayerIndex:h,index:c,geometry:d.geometry,patterns:{},sortKey:f})}}r&&n.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,y=n;m<y.length;m+=1){var g=y[m],b=g.geometry,v=g.index,_=g.sourceLayerIndex;if(this.hasPattern){var x=es("line",this.layers,g,this.zoom,e);this.patternFeatures.push(x)}else this.addFeature(g,b,v,i,{});e.featureIndex.insert(t[v].feature,b,v,_,this.index)}},As.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},As.prototype.addFeatures=function(t,e,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var a=n[r];this.addFeature(a,a.geometry,a.index,e,i)}},As.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},As.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},As.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ps),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},As.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},As.prototype.addFeature=function(t,e,i,r,n){for(var a=this.layers[0].layout,o=a.get("line-join").evaluate(t,{}),s=a.get("line-cap"),l=a.get("line-miter-limit"),u=a.get("line-round-limit"),c=0,h=e;c<h.length;c+=1)this.addLine(h[c],t,o,s,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)},As.prototype.addLine=function(t,e,i,r,n,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var o=0;o<t.length-1;o++)this.totalDistance+=t[o].dist(t[o+1]);this.updateScaledDistance()}for(var s="Polygon"===Cs[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var u=0;u<l-1&&t[u].equals(t[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===i&&(n=1.05);var c,h=this.overscaling<=16?122880/(512*this.overscaling):0,p=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray),d=void 0,f=void 0,m=void 0,y=void 0;this.e1=this.e2=-1,s&&(y=t[u].sub(c=t[l-2])._unit()._perp());for(var g=u;g<l;g++)if(!(f=g===l-1?s?t[u+1]:void 0:t[g+1])||!t[g].equals(f)){y&&(m=y),c&&(d=c),c=t[g],y=f?f.sub(c)._unit()._perp():m;var b=(m=m||y).add(y);0===b.x&&0===b.y||b._unit();var v=m.x*y.x+m.y*y.y,_=b.x*y.x+b.y*y.y,x=0!==_?1/_:1/0,S=2*Math.sqrt(2-2*_),w=_<ks&&d&&f,T=m.x*y.y-m.y*y.x>0;if(w&&g>u){var P=c.dist(d);if(P>2*h){var C=c.sub(c.sub(d)._mult(h/P)._round());this.updateDistance(d,C),this.addCurrentVertex(C,m,0,0,p),d=C}}var k=d&&f,I=k?i:s?"butt":r;if(k&&"round"===I&&(x<a?I="miter":x<=2&&(I="fakeround")),"miter"===I&&x>n&&(I="bevel"),"bevel"===I&&(x>2&&(I="flipbevel"),x<n&&(I="miter")),d&&this.updateDistance(d,c),"miter"===I)b._mult(x),this.addCurrentVertex(c,b,0,0,p);else if("flipbevel"===I){if(x>100)b=y.mult(-1);else{var A=x*m.add(y).mag()/m.sub(y).mag();b._perp()._mult(A*(T?-1:1))}this.addCurrentVertex(c,b,0,0,p),this.addCurrentVertex(c,b.mult(-1),0,0,p)}else if("bevel"===I||"fakeround"===I){var O=-Math.sqrt(x*x-1),D=T?O:0,F=T?0:O;if(d&&this.addCurrentVertex(c,m,D,F,p),"fakeround"===I)for(var M=Math.round(180*S/Math.PI/20),E=1;E<M;E++){var L=E/M;if(.5!==L){var R=L-.5;L+=L*R*(L-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*R*R+(.848013+v*(.215638*v-1.06021)))}var V=y.sub(m)._mult(L)._add(m)._unit()._mult(T?-1:1);this.addHalfVertex(c,V.x,V.y,!1,T,0,p)}f&&this.addCurrentVertex(c,y,-D,-F,p)}else if("butt"===I)this.addCurrentVertex(c,b,0,0,p);else if("square"===I){var j=d?1:-1;this.addCurrentVertex(c,b,j,j,p)}else"round"===I&&(d&&(this.addCurrentVertex(c,m,0,0,p),this.addCurrentVertex(c,m,1,1,p,!0)),f&&(this.addCurrentVertex(c,y,-1,-1,p,!0),this.addCurrentVertex(c,y,0,0,p)));if(w&&g<l-1){var z=c.dist(f);if(z>2*h){var B=c.add(f.sub(c)._mult(h/z)._round());this.updateDistance(c,B),this.addCurrentVertex(B,y,0,0,p),c=B}}}}},As.prototype.addCurrentVertex=function(t,e,i,r,n,a){void 0===a&&(a=!1);var o=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,a,!1,i,n),this.addHalfVertex(t,o,s,a,!0,-r,n),this.distance>Is/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,r,n,a))},As.prototype.addHalfVertex=function(t,e,i,r,n,a,o){var s=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((t.x<<1)+(r?1:0),(t.y<<1)+(n?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===a?0:a<0?-1:1)|(63&s)<<2,s>>6);var l=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),o.primitiveLength++),n?this.e2=l:this.e1=l},As.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Is-1):this.distance},As.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Er("LineBucket",As,{omit:["layers","patternFeatures"]});var Os=new bn({"line-cap":new dn(Ct.layout_line["line-cap"]),"line-join":new fn(Ct.layout_line["line-join"]),"line-miter-limit":new dn(Ct.layout_line["line-miter-limit"]),"line-round-limit":new dn(Ct.layout_line["line-round-limit"]),"line-sort-key":new fn(Ct.layout_line["line-sort-key"])}),Ds={paint:new bn({"line-opacity":new fn(Ct.paint_line["line-opacity"]),"line-color":new fn(Ct.paint_line["line-color"]),"line-translate":new dn(Ct.paint_line["line-translate"]),"line-translate-anchor":new dn(Ct.paint_line["line-translate-anchor"]),"line-width":new fn(Ct.paint_line["line-width"]),"line-gap-width":new fn(Ct.paint_line["line-gap-width"]),"line-offset":new fn(Ct.paint_line["line-offset"]),"line-blur":new fn(Ct.paint_line["line-blur"]),"line-dasharray":new yn(Ct.paint_line["line-dasharray"]),"line-pattern":new mn(Ct.paint_line["line-pattern"]),"line-gradient":new gn(Ct.paint_line["line-gradient"])}),layout:Os},Fs=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,i){return i=new nn(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),t.prototype.possiblyEvaluate.call(this,e,i)},e.prototype.evaluate=function(e,i,r,n){return i=c({},i,{zoom:Math.floor(i.zoom)}),t.prototype.evaluate.call(this,e,i,r,n)},e}(fn))(Ds.paint.properties["line-width"].specification);Fs.useIntegerZoom=!0;var Ms=function(t){function e(e){t.call(this,e,Ds)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=yo(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i),this.paint._values["line-floorwidth"]=Fs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new As(t)},e.prototype.queryRadius=function(t){var e=t,i=Es(Ka("line-width",this,e),Ka("line-gap-width",this,e)),r=Ka("line-offset",this,e);return i/2+Math.abs(r)+Za(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,r,a,o,s){var l=Ja(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),u=s/2*Es(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),c=this.paint.get("line-offset").evaluate(e,i);return c&&(r=function(t,e){for(var i=[],r=new n(0,0),a=0;a<t.length;a++){for(var o=t[a],s=[],l=0;l<o.length;l++){var u=o[l],c=o[l+1],h=0===l?r:u.sub(o[l-1])._unit()._perp(),p=l===o.length-1?r:c.sub(u)._unit()._perp(),d=h._add(p)._unit();d._mult(1/(d.x*p.x+d.y*p.y)),s.push(d._mult(e)._add(u))}i.push(s)}return i}(r,c*s)),function(t,e,i){for(var r=0;r<e.length;r++){var n=e[r];if(t.length>=3)for(var a=0;a<n.length;a++)if(Ga(t,n[a]))return!0;if(Na(t,n,i))return!0}return!1}(l,r,u)},e.prototype.isTileClipped=function(){return!0},e}(vn);function Es(t,e){return e>0?e+2*t:t}var Ls=wn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Rs=wn([{name:"a_projected_pos",components:3,type:"Float32"}],4),Vs=(wn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),wn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),js=(wn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),wn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),zs=wn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Bs(t,e,i){return t.sections.forEach((function(t){t.text=function(t,e,i){var r=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),rn.applyArabicShaping&&(t=rn.applyArabicShaping(t)),t}(t.text,e,i)})),t}wn([{name:"triangle",components:3,type:"Uint16"}]),wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),wn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),wn([{type:"Float32",name:"offsetX"}]),wn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ns={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Us=function(t,e,i,r,n){var a,o,s=8*n-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=i?n-1:0,p=i?-1:1,d=t[e+h];for(h+=p,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+t[e+h],h+=p,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+t[e+h],h+=p,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=u}return(d?-1:1)*o*Math.pow(2,a-r)},Xs=function(t,e,i,r,n,a){var o,s,l,u=8*a-n-1,c=(1<<u)-1,h=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(e*l-1)*Math.pow(2,n),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,n),o=0));n>=8;t[i+d]=255&s,d+=f,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;t[i+d]=255&o,d+=f,o/=256,u-=8);t[i+d-f]|=128*m},Hs=Ws;function Ws(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Ws.Varint=0,Ws.Fixed64=1,Ws.Bytes=2,Ws.Fixed32=5;var Ys="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Gs(t){return t.type===Ws.Bytes?t.readVarint()+t.pos:t.pos+1}function qs(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Ks(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function Zs(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Js(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function $s(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function Qs(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function tl(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function el(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function il(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function rl(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function nl(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function al(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function ol(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function sl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function ll(t,e,i){1===t&&i.readMessage(ul,e)}function ul(t,e,i){if(3===t){var r=i.readMessage(cl,{}),n=r.width,a=r.height,o=r.left,s=r.top,l=r.advance;e.push({id:r.id,bitmap:new po({width:n+6,height:a+6},r.bitmap),metrics:{width:n,height:a,left:o,top:s,advance:l}})}}function cl(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function hl(t){for(var e=0,i=0,r=0,n=t;r<n.length;r+=1){var a=n[r];e+=a.w*a.h,i=Math.max(i,a.w)}t.sort((function(t,e){return e.h-t.h}));for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],s=0,l=0,u=0,c=t;u<c.length;u+=1)for(var h=c[u],p=o.length-1;p>=0;p--){var d=o[p];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,l=Math.max(l,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===d.w&&h.h===d.h){var f=o.pop();p<o.length&&(o[p]=f)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(o.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}Ws.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,a=this.pos;this.type=7&r,t(n,e,this),this.pos===a&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=al(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=sl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=al(this.buf,this.pos)+4294967296*al(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=al(this.buf,this.pos)+4294967296*sl(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Us(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Us(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,a=i.buf;if(r=(112&(n=a[i.pos++]))>>4,n<128)return qs(t,r,e);if(r|=(127&(n=a[i.pos++]))<<3,n<128)return qs(t,r,e);if(r|=(127&(n=a[i.pos++]))<<10,n<128)return qs(t,r,e);if(r|=(127&(n=a[i.pos++]))<<17,n<128)return qs(t,r,e);if(r|=(127&(n=a[i.pos++]))<<24,n<128)return qs(t,r,e);if(r|=(1&(n=a[i.pos++]))<<31,n<128)return qs(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Ys?function(t,e,i){return Ys.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var r="",n=e;n<i;){var a,o,s,l=t[n],u=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c>i)break;1===c?l<128&&(u=l):2===c?128==(192&(a=t[n+1]))&&(u=(31&l)<<6|63&a)<=127&&(u=null):3===c?(o=t[n+2],128==(192&(a=t[n+1]))&&128==(192&o)&&((u=(15&l)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=t[n+2],s=t[n+3],128==(192&(a=t[n+1]))&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),n+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Ws.Bytes)return t.push(this.readVarint(e));var i=Gs(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Ws.Bytes)return t.push(this.readSVarint());var e=Gs(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Ws.Bytes)return t.push(this.readBoolean());var e=Gs(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Ws.Bytes)return t.push(this.readFloat());var e=Gs(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Ws.Bytes)return t.push(this.readDouble());var e=Gs(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Ws.Bytes)return t.push(this.readFixed32());var e=Gs(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Ws.Bytes)return t.push(this.readSFixed32());var e=Gs(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Ws.Bytes)return t.push(this.readFixed64());var e=Gs(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Ws.Bytes)return t.push(this.readSFixed64());var e=Gs(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Ws.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ws.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ws.Fixed32)this.pos+=4;else{if(e!==Ws.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ol(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),ol(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),ol(this.buf,-1&t,this.pos),ol(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),ol(this.buf,-1&t,this.pos),ol(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,a=0;a<e.length;a++){if((r=e.charCodeAt(a))>55295&&r<57344){if(!n){r>56319||a+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&Ks(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Xs(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Xs(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&Ks(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,Ws.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Zs,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Js,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,tl,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,$s,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Qs,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,el,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,il,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,rl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,nl,e)},writeBytesField:function(t,e){this.writeTag(t,Ws.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Ws.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Ws.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Ws.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Ws.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Ws.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Ws.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Ws.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Ws.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Ws.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var pl=function(t,e){var i=e.pixelRatio,r=e.version,n=e.stretchX,a=e.stretchY,o=e.content;this.paddedRect=t,this.pixelRatio=i,this.stretchX=n,this.stretchY=a,this.content=o,this.version=r},dl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};dl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},dl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},dl.tlbr.get=function(){return this.tl.concat(this.br)},dl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(pl.prototype,dl);var fl=function(t,e){var i={},r={};this.haveRenderCallbacks=[];var n=[];this.addImages(t,i,n),this.addImages(e,r,n);var a=hl(n),o=new fo({width:a.w||1,height:a.h||1});for(var s in t){var l=t[s],u=i[s].paddedRect;fo.copy(l.data,o,{x:0,y:0},{x:u.x+1,y:u.y+1},l.data)}for(var c in e){var h=e[c],p=r[c].paddedRect,d=p.x+1,f=p.y+1,m=h.data.width,y=h.data.height;fo.copy(h.data,o,{x:0,y:0},{x:d,y:f},h.data),fo.copy(h.data,o,{x:0,y:y-1},{x:d,y:f-1},{width:m,height:1}),fo.copy(h.data,o,{x:0,y:0},{x:d,y:f+y},{width:m,height:1}),fo.copy(h.data,o,{x:m-1,y:0},{x:d-1,y:f},{width:1,height:y}),fo.copy(h.data,o,{x:0,y:0},{x:d+m,y:f},{width:1,height:y})}this.image=o,this.iconPositions=i,this.patternPositions=r};fl.prototype.addImages=function(t,e,i){for(var r in t){var n=t[r],a={x:0,y:0,w:n.data.width+2,h:n.data.height+2};i.push(a),e[r]=new pl(a,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},fl.prototype.patchUpdatedImages=function(t,e){for(var i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)},fl.prototype.patchUpdatedImage=function(t,e,i){if(t&&e&&t.version!==e.version){t.version=e.version;var r=t.tl;i.update(e.data,void 0,{x:r[0],y:r[1]})}},Er("ImagePosition",pl),Er("ImageAtlas",fl);var ml={horizontal:1,vertical:2,horizontalOnly:3},yl=function(){this.scale=1,this.fontStack="",this.imageName=null};yl.forText=function(t,e){var i=new yl;return i.scale=t||1,i.fontStack=e,i},yl.forImage=function(t){var e=new yl;return e.imageName=t,e};var gl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function bl(t,e,i,r,n,a,o,s,l,u,c,h,p,d,f,m){var y,g=gl.fromFeature(t,n);h===ml.vertical&&g.verticalizePunctuation();var b=rn.processBidirectionalText,v=rn.processStyledBidirectionalText;if(b&&1===g.sections.length){y=[];for(var _=0,x=b(g.toString(),Pl(g,u,a,e,r,d,f));_<x.length;_+=1){var S=x[_],w=new gl;w.text=S,w.sections=g.sections;for(var T=0;T<S.length;T++)w.sectionIndex.push(0);y.push(w)}}else if(v){y=[];for(var P=0,C=v(g.text,g.sectionIndex,Pl(g,u,a,e,r,d,f));P<C.length;P+=1){var k=C[P],I=new gl;I.text=k[0],I.sectionIndex=k[1],I.sections=g.sections,y.push(I)}}else y=function(t,e){for(var i=[],r=t.text,n=0,a=0,o=e;a<o.length;a+=1){var s=o[a];i.push(t.substring(n,s)),n=s}return n<r.length&&i.push(t.substring(n,r.length)),i}(g,Pl(g,u,a,e,r,d,f));var A=[],O={positionedLines:A,text:g.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(t,e,i,r,n,a,o,s,l,u,c,h){for(var p=0,d=-17,f=0,m=0,y="right"===s?1:"left"===s?0:.5,g=0,b=0,v=n;b<v.length;b+=1){var _=v[b];_.trim();var x=_.getMaxScale(),S=24*(x-1),w={positionedGlyphs:[],lineOffset:0};t.positionedLines[g]=w;var T=w.positionedGlyphs,P=0;if(_.length()){for(var C=0;C<_.length();C++){var k=_.getSection(C),I=_.getSectionIndex(C),A=_.getCharCode(C),O=0,D=null,F=null,M=null,E=24,L=!(l===ml.horizontal||!c&&!Xr(A)||c&&(vl[A]||(H=A,Nr.Arabic(H)||Nr["Arabic Supplement"](H)||Nr["Arabic Extended-A"](H)||Nr["Arabic Presentation Forms-A"](H)||Nr["Arabic Presentation Forms-B"](H))));if(k.imageName){var R=r[k.imageName];if(!R)continue;M=k.imageName,t.iconsInText=t.iconsInText||!0,F=R.paddedRect;var V=R.displaySize;k.scale=24*k.scale/h,O=S+(24-V[1]*k.scale),E=(D={width:V[0],height:V[1],left:1,top:-3,advance:L?V[1]:V[0]}).advance;var j=L?V[0]*k.scale-24*x:V[1]*k.scale-24*x;j>0&&j>P&&(P=j)}else{var z=i[k.fontStack],B=z&&z[A];if(B&&B.rect)F=B.rect,D=B.metrics;else{var N=e[k.fontStack],U=N&&N[A];if(!U)continue;D=U.metrics}O=24*(x-k.scale)}L?(t.verticalizable=!0,T.push({glyph:A,imageName:M,x:p,y:d+O,vertical:L,scale:k.scale,fontStack:k.fontStack,sectionIndex:I,metrics:D,rect:F}),p+=E*k.scale+u):(T.push({glyph:A,imageName:M,x:p,y:d+O,vertical:L,scale:k.scale,fontStack:k.fontStack,sectionIndex:I,metrics:D,rect:F}),p+=D.advance*k.scale+u)}0!==T.length&&(f=Math.max(p-u,f),kl(T,0,T.length-1,y,P)),p=0;var X=a*x+P;w.lineOffset=Math.max(P,S),d+=X,m=Math.max(X,m),++g}else d+=a,++g}var H,W=d- -17,Y=Cl(o),G=Y.horizontalAlign,q=Y.verticalAlign;(function(t,e,i,r,n,a,o,s,l){var u,c=(e-i)*n;u=a!==o?-s*r- -17:(-r*l+.5)*o;for(var h=0,p=t;h<p.length;h+=1)for(var d=0,f=p[h].positionedGlyphs;d<f.length;d+=1){var m=f[d];m.x+=c,m.y+=u}})(t.positionedLines,y,G,q,f,m,a,W,n.length),t.top+=-q*W,t.bottom=t.top+W,t.left+=-G*f,t.right=t.left+f}(O,e,i,r,y,o,s,l,h,u,p,m),!function(t){for(var e=0,i=t;e<i.length;e+=1)if(0!==i[e].positionedGlyphs.length)return!1;return!0}(A)&&O}gl.fromFeature=function(t,e){for(var i=new gl,r=0;r<t.sections.length;r++){var n=t.sections[r];n.image?i.addImageSection(n):i.addTextSection(n,e)}return i},gl.prototype.length=function(){return this.text.length},gl.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},gl.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},gl.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},gl.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i+1)||null,n=t.charCodeAt(i-1)||null;e+=r&&Hr(r)&&!Ns[t[i+1]]||n&&Hr(n)&&!Ns[t[i-1]]||!Ns[t[i]]?t[i]:Ns[t[i]]}return e}(this.text)},gl.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&vl[this.text.charCodeAt(e)];e++)t++;for(var i=this.text.length,r=this.text.length-1;r>=0&&r>=t&&vl[this.text.charCodeAt(r)];r--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)},gl.prototype.substring=function(t,e){var i=new gl;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i},gl.prototype.toString=function(){return this.text},gl.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,i){return Math.max(e,t.sections[i].scale)}),0)},gl.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(yl.forText(t.scale,t.fontStack||e));for(var i=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(i)},gl.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(yl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):x("Reached maximum number of images 6401")}else x("Can't add FormattedSection with an empty image.")},gl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var vl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_l={};function xl(t,e,i,r,n,a){if(e.imageName){var o=r[e.imageName];return o?o.displaySize[0]*e.scale*24/a+n:0}var s=i[e.fontStack],l=s&&s[t];return l?l.metrics.advance*e.scale+n:0}function Sl(t,e,i,r){var n=Math.pow(t-e,2);return r?t<e?n/2:2*n:n+Math.abs(i)*i}function wl(t,e,i){var r=0;return 10===t&&(r-=1e4),i&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Tl(t,e,i,r,n,a){for(var o=null,s=Sl(e,i,n,a),l=0,u=r;l<u.length;l+=1){var c=u[l],h=Sl(e-c.x,i,n,a)+c.badness;h<=s&&(o=c,s=h)}return{index:t,x:e,priorBreak:o,badness:s}}function Pl(t,e,i,r,n,a,o){if("point"!==a)return[];if(!t)return[];for(var s,l=[],u=function(t,e,i,r,n,a){for(var o=0,s=0;s<t.length();s++){var l=t.getSection(s);o+=xl(t.getCharCode(s),l,r,n,e,a)}return o/Math.max(1,Math.ceil(o/i))}(t,e,i,r,n,o),c=t.text.indexOf("\u200b")>=0,h=0,p=0;p<t.length();p++){var d=t.getSection(p),f=t.getCharCode(p);if(vl[f]||(h+=xl(f,d,r,n,e,o)),p<t.length()-1){var m=!((s=f)<11904||!(Nr["Bopomofo Extended"](s)||Nr.Bopomofo(s)||Nr["CJK Compatibility Forms"](s)||Nr["CJK Compatibility Ideographs"](s)||Nr["CJK Compatibility"](s)||Nr["CJK Radicals Supplement"](s)||Nr["CJK Strokes"](s)||Nr["CJK Symbols and Punctuation"](s)||Nr["CJK Unified Ideographs Extension A"](s)||Nr["CJK Unified Ideographs"](s)||Nr["Enclosed CJK Letters and Months"](s)||Nr["Halfwidth and Fullwidth Forms"](s)||Nr.Hiragana(s)||Nr["Ideographic Description Characters"](s)||Nr["Kangxi Radicals"](s)||Nr["Katakana Phonetic Extensions"](s)||Nr.Katakana(s)||Nr["Vertical Forms"](s)||Nr["Yi Radicals"](s)||Nr["Yi Syllables"](s)));(_l[f]||m||d.imageName)&&l.push(Tl(p+1,h,u,l,wl(f,t.getCharCode(p+1),m&&c),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Tl(t.length(),h,u,l,0,!0))}function Cl(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function kl(t,e,i,r,n){if(r||n)for(var a=t[i],o=(t[i].x+a.metrics.advance*a.scale)*r,s=e;s<=i;s++)t[s].x-=o,t[s].y+=n}function Il(t,e,i,r,n,a){var o,s=t.image;if(s.content){var l=s.content,u=s.pixelRatio||1;o=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,h,p,d,f=e.left*a,m=e.right*a;"width"===i||"both"===i?(d=n[0]+f-r[3],h=n[0]+m+r[1]):h=(d=n[0]+(f+m-s.displaySize[0])/2)+s.displaySize[0];var y=e.top*a,g=e.bottom*a;return"height"===i||"both"===i?(c=n[1]+y-r[0],p=n[1]+g+r[2]):p=(c=n[1]+(y+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:p,left:d,collisionPadding:o}}_l[10]=!0,_l[32]=!0,_l[38]=!0,_l[40]=!0,_l[41]=!0,_l[43]=!0,_l[45]=!0,_l[47]=!0,_l[173]=!0,_l[183]=!0,_l[8203]=!0,_l[8208]=!0,_l[8211]=!0,_l[8231]=!0;var Al=function(t){function e(e,i,r,n){t.call(this,e,i),this.angle=r,void 0!==n&&(this.segment=n)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(n);function Ol(t,e){var i=e.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new nn(t+1))};if("source"===i.kind)return{kind:"source"};for(var r=i.zoomStops,n=i.interpolationType,a=0;a<r.length&&r[a]<=t;)a++;for(var o=a=Math.max(0,a-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var s=r[a],l=r[o];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:l,minSize:i.evaluate(new nn(s)),maxSize:i.evaluate(new nn(l)),interpolationType:n}}function Dl(t,e,i){var r=e.uSize,n=i.lowerSize;return"source"===t.kind?n/128:"composite"===t.kind?Ne(n/128,i.upperSize/128,e.uSizeT):r}function Fl(t,e){var i=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var n=t.interpolationType,a=n?l(ii.interpolationFactor(n,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?r=Ne(t.minSize,t.maxSize,a):i=a}return{uSizeT:i,uSize:r}}Er("Anchor",Al);var Ml=Object.freeze({__proto__:null,getSizeData:Ol,evaluateSizeForFeature:Dl,evaluateSizeForZoom:Fl,SIZE_PACK_FACTOR:128});function El(t,e,i,r,n){if(void 0===e.segment)return!0;for(var a=e,o=e.segment+1,s=0;s>-i/2;){if(--o<0)return!1;s-=t[o].dist(a),a=t[o]}s+=t[o].dist(t[o+1]),o++;for(var l=[],u=0;s<i/2;){var c=t[o],h=t[o+1];if(!h)return!1;var p=t[o-1].angleTo(c)-c.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:p}),u+=p;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>n)return!1;o++,s+=c.dist(h)}return!0}function Ll(t){for(var e=0,i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function Rl(t,e,i){return t?.6*e*i:0}function Vl(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function jl(t,e,i,r,n,a){for(var o=Rl(i,n,a),s=Vl(i,r)*a,l=0,u=Ll(t)/2,c=0;c<t.length-1;c++){var h=t[c],p=t[c+1],d=h.dist(p);if(l+d>u){var f=(u-l)/d,m=Ne(h.x,p.x,f),y=Ne(h.y,p.y,f),g=new Al(m,y,p.angleTo(h),c);return g._round(),!o||El(t,g,s,o,e)?g:void 0}l+=d}}function zl(t,e,i,r,n,a,o,s,l){var u=Rl(r,a,o),c=Vl(r,n),h=c*o,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),function t(e,i,r,n,a,o,s,l,u){for(var c=o/2,h=Ll(e),p=0,d=i-r,f=[],m=0;m<e.length-1;m++){for(var y=e[m],g=e[m+1],b=y.dist(g),v=g.angleTo(y);d+r<p+b;){var _=((d+=r)-p)/b,x=Ne(y.x,g.x,_),S=Ne(y.y,g.y,_);if(x>=0&&x<u&&S>=0&&S<u&&d-c>=0&&d+c<=h){var w=new Al(x,S,v,m);w._round(),n&&!El(e,w,o,n,a)||f.push(w)}}p+=b}return l||f.length||s||(f=t(e,p/2,r,n,a,o,s,!0,u)),f}(t,p?e/2*s%e:(c/2+2*a)*o*s%e,e,u,i,h,p,!1,l)}function Bl(t,e,i,r,a){for(var o=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,c=0;c<l.length-1;c++){var h=l[c],p=l[c+1];h.x<e&&p.x<e||(h.x<e?h=new n(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x<e&&(p=new n(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y<i&&p.y<i||(h.y<i?h=new n(h.x+(i-h.y)/(p.y-h.y)*(p.x-h.x),i)._round():p.y<i&&(p=new n(h.x+(i-h.y)/(p.y-h.y)*(p.x-h.x),i)._round()),h.x>=r&&p.x>=r||(h.x>=r?h=new n(r,h.y+(r-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x>=r&&(p=new n(r,h.y+(r-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y>=a&&p.y>=a||(h.y>=a?h=new n(h.x+(a-h.y)/(p.y-h.y)*(p.x-h.x),a)._round():p.y>=a&&(p=new n(h.x+(a-h.y)/(p.y-h.y)*(p.x-h.x),a)._round()),u&&h.equals(u[u.length-1])||o.push(u=[h]),u.push(p)))))}return o}function Nl(t,e,i,r){var a=[],o=t.image,s=o.pixelRatio,l=o.paddedRect.w-2,u=o.paddedRect.h-2,c=t.right-t.left,h=t.bottom-t.top,p=o.stretchX||[[0,l]],d=o.stretchY||[[0,u]],f=function(t,e){return t+e[1]-e[0]},m=p.reduce(f,0),y=d.reduce(f,0),g=l-m,b=u-y,v=0,_=m,x=0,S=y,w=0,T=g,P=0,C=b;if(o.content&&r){var k=o.content;v=Ul(p,0,k[0]),x=Ul(d,0,k[1]),_=Ul(p,k[0],k[2]),S=Ul(d,k[1],k[3]),w=k[0]-v,P=k[1]-x,T=k[2]-k[0]-_,C=k[3]-k[1]-S}var I=function(r,a,l,u){var p=Hl(r.stretch-v,_,c,t.left),d=Wl(r.fixed-w,T,r.stretch,m),f=Hl(a.stretch-x,S,h,t.top),g=Wl(a.fixed-P,C,a.stretch,y),b=Hl(l.stretch-v,_,c,t.left),k=Wl(l.fixed-w,T,l.stretch,m),I=Hl(u.stretch-x,S,h,t.top),A=Wl(u.fixed-P,C,u.stretch,y),O=new n(p,f),D=new n(b,f),F=new n(b,I),M=new n(p,I),E=new n(d/s,g/s),L=new n(k/s,A/s),R=e*Math.PI/180;if(R){var V=Math.sin(R),j=Math.cos(R),z=[j,-V,V,j];O._matMult(z),D._matMult(z),M._matMult(z),F._matMult(z)}var B=r.stretch+r.fixed,N=a.stretch+a.fixed;return{tl:O,tr:D,bl:M,br:F,tex:{x:o.paddedRect.x+1+B,y:o.paddedRect.y+1+N,w:l.stretch+l.fixed-B,h:u.stretch+u.fixed-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:E,pixelOffsetBR:L,minFontScaleX:T/s/c,minFontScaleY:C/s/h,isSDF:i}};if(r&&(o.stretchX||o.stretchY))for(var A=Xl(p,g,m),O=Xl(d,b,y),D=0;D<A.length-1;D++)for(var F=A[D],M=A[D+1],E=0;E<O.length-1;E++)a.push(I(F,O[E],M,O[E+1]));else a.push(I({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}));return a}function Ul(t,e,i){for(var r=0,n=0,a=t;n<a.length;n+=1){var o=a[n];r+=Math.max(e,Math.min(i,o[1]))-Math.max(e,Math.min(i,o[0]))}return r}function Xl(t,e,i){for(var r=[{fixed:-1,stretch:0}],n=0,a=t;n<a.length;n+=1){var o=a[n],s=o[0],l=o[1],u=r[r.length-1];r.push({fixed:s-u.stretch,stretch:u.stretch}),r.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}return r.push({fixed:e+1,stretch:i}),r}function Hl(t,e,i,r){return t/e*i+r}function Wl(t,e,i,r){return t-e*i/r}var Yl=function(t,e,i,r,a,o,s,l,u,c){if(this.boxStartIndex=t.length,u){var h=o.top,p=o.bottom,d=o.collisionPadding;d&&(h-=d[1],p+=d[3]);var f=p-h;f>0&&(f=Math.max(10,f),this.circleDiameter=f)}else{var m=o.top*s-l,y=o.bottom*s+l,g=o.left*s-l,b=o.right*s+l,v=o.collisionPadding;if(v&&(g-=v[0]*s,m-=v[1]*s,b+=v[2]*s,y+=v[3]*s),c){var _=new n(g,m),x=new n(b,m),S=new n(g,y),w=new n(b,y),T=c*Math.PI/180;_._rotate(T),x._rotate(T),S._rotate(T),w._rotate(T),g=Math.min(_.x,x.x,S.x,w.x),b=Math.max(_.x,x.x,S.x,w.x),m=Math.min(_.y,x.y,S.y,w.y),y=Math.max(_.y,x.y,S.y,w.y)}t.emplaceBack(e.x,e.y,g,m,b,y,i,r,a)}this.boxEndIndex=t.length},Gl=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=ql),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function ql(t,e){return t<e?-1:t>e?1:0}function Kl(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var r=1/0,a=1/0,o=-1/0,s=-1/0,l=t[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<r)&&(r=c.x),(!u||c.y<a)&&(a=c.y),(!u||c.x>o)&&(o=c.x),(!u||c.y>s)&&(s=c.y)}var h=Math.min(o-r,s-a),p=h/2,d=new Gl([],Zl);if(0===h)return new n(r,a);for(var f=r;f<o;f+=h)for(var m=a;m<s;m+=h)d.push(new Jl(f+p,m+p,p,t));for(var y=function(t){for(var e=0,i=0,r=0,n=t[0],a=0,o=n.length,s=o-1;a<o;s=a++){var l=n[a],u=n[s],c=l.x*u.y-u.x*l.y;i+=(l.x+u.x)*c,r+=(l.y+u.y)*c,e+=3*c}return new Jl(i/e,r/e,0,t)}(t),g=d.length;d.length;){var b=d.pop();(b.d>y.d||!y.d)&&(y=b,i&&console.log("found best %d after %d probes",Math.round(1e4*b.d)/1e4,g)),b.max-y.d<=e||(d.push(new Jl(b.p.x-(p=b.h/2),b.p.y-p,p,t)),d.push(new Jl(b.p.x+p,b.p.y-p,p,t)),d.push(new Jl(b.p.x-p,b.p.y+p,p,t)),d.push(new Jl(b.p.x+p,b.p.y+p,p,t)),g+=4)}return i&&(console.log("num probes: "+g),console.log("best distance: "+y.d)),y.p}function Zl(t,e){return e.max-t.max}function Jl(t,e,i,r){this.p=new n(t,e),this.h=i,this.d=function(t,e){for(var i=!1,r=1/0,n=0;n<e.length;n++)for(var a=e[n],o=0,s=a.length,l=s-1;o<s;l=o++){var u=a[o],c=a[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(i=!i),r=Math.min(r,Wa(t,u,c))}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}Gl.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Gl.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Gl.prototype.peek=function(){return this.data[0]},Gl.prototype._up=function(t){for(var e=this.data,i=this.compare,r=e[t];t>0;){var n=t-1>>1,a=e[n];if(i(r,a)>=0)break;e[t]=a,t=n}e[t]=r},Gl.prototype._down=function(t){for(var e=this.data,i=this.compare,r=this.length>>1,n=e[t];t<r;){var a=1+(t<<1),o=e[a],s=a+1;if(s<this.length&&i(e[s],o)<0&&(a=s,o=e[s]),i(o,n)>=0)break;e[t]=o,t=a}e[t]=n};var $l=Number.POSITIVE_INFINITY;function Ql(t,e){return e[1]!==$l?function(t,e,i){var r=0,n=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":n=i-7;break;case"bottom-right":case"bottom-left":case"bottom":n=7-i}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,n]}(t,e[0],e[1]):function(t,e){var i=0,r=0;e<0&&(e=0);var n=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=n-7;break;case"bottom-right":case"bottom-left":r=7-n;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=e;break;case"right":i=-e}return[i,r]}(t,e[0])}function tu(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function eu(t,e,i,r,a,o,s,l,u,c,h,p,d,f,m){var y=function(t,e,i,r,a,o,s,l){for(var u=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=[],h=0,p=e.positionedLines;h<p.length;h+=1)for(var d=p[h],f=0,m=d.positionedGlyphs;f<m.length;f+=1){var y=m[f];if(y.rect){var g=y.rect||{},b=4,v=!0,_=1,x=0,S=(a||l)&&y.vertical,w=y.metrics.advance*y.scale/2;if(l&&e.verticalizable&&(x=d.lineOffset/2-(y.imageName?-(24-y.metrics.width*y.scale)/2:24*(y.scale-1))),y.imageName){var T=s[y.imageName];v=T.sdf,b=1/(_=T.pixelRatio)}var P=a?[y.x+w,y.y]:[0,0],C=a?[0,0]:[y.x+w+i[0],y.y+i[1]-x],k=[0,0];S&&(k=C,C=[0,0]);var I=(y.metrics.left-b)*y.scale-w+C[0],A=(-y.metrics.top-b)*y.scale+C[1],O=I+g.w*y.scale/_,D=A+g.h*y.scale/_,F=new n(I,A),M=new n(O,A),E=new n(I,D),L=new n(O,D);if(S){var R=new n(-w,w- -17),V=-Math.PI/2,j=12-w,z=new n(22-j,-(y.imageName?j:0)),B=new(Function.prototype.bind.apply(n,[null].concat(k)));F._rotateAround(V,R)._add(z)._add(B),M._rotateAround(V,R)._add(z)._add(B),E._rotateAround(V,R)._add(z)._add(B),L._rotateAround(V,R)._add(z)._add(B)}if(u){var N=Math.sin(u),U=Math.cos(u),X=[U,-N,N,U];F._matMult(X),M._matMult(X),E._matMult(X),L._matMult(X)}var H=new n(0,0),W=new n(0,0);c.push({tl:F,tr:M,bl:E,br:L,tex:g,writingMode:e.writingMode,glyphOffset:P,sectionIndex:y.sectionIndex,isSDF:v,pixelOffsetTL:H,pixelOffsetBR:W,minFontScaleX:0,minFontScaleY:0})}}return c}(0,i,l,a,o,s,r,t.allowVerticalPlacement),g=t.textSizeData,b=null;"source"===g.kind?(b=[128*a.layout.get("text-size").evaluate(s,{})])[0]>32640&&x(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===g.kind&&((b=[128*f.compositeTextSizes[0].evaluate(s,{},m),128*f.compositeTextSizes[1].evaluate(s,{},m)])[0]>32640||b[1]>32640)&&x(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,y,b,l,o,s,c,e,u.lineStartIndex,u.lineLength,d,m);for(var v=0,_=h;v<_.length;v+=1)p[_[v]]=t.text.placedSymbolArray.length-1;return 4*y.length}function iu(t){for(var e in t)return t[e];return null}function ru(t,e,i,r){var n=t.compareText;if(e in n){for(var a=n[e],o=a.length-1;o>=0;o--)if(r.dist(a[o])<i)return!0}else n[e]=[];return n[e].push(r),!1}var nu=ms.VectorTileFeature.types,au=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ou(t,e,i,r,n,a,o,s,l,u,c,h,p){var d=s?Math.min(32640,Math.round(s[0])):0,f=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,i,Math.round(32*r),Math.round(32*n),a,o,(d<<1)+(l?1:0),f,16*u,16*c,256*h,256*p)}function su(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function lu(t){for(var e=0,i=t.sections;e<i.length;e+=1)if(Gr(i[e].text))return!0;return!1}var uu=function(t){this.layoutVertexArray=new On,this.indexArray=new Vn,this.programConfigurations=t,this.segments=new na,this.dynamicLayoutVertexArray=new Dn,this.opacityVertexArray=new Fn,this.placedSymbolArray=new Zn};uu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},uu.prototype.upload=function(t,e,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ls.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Rs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,au,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(t))},uu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Er("SymbolBuffers",uu);var cu=function(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new na,this.collisionVertexArray=new Rn};cu.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Vs.members,!0)},cu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Er("CollisionBuffers",cu);var hu=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=eo([]),this.placementViewportMatrix=eo([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ol(this.zoom,e["text-size"]),this.iconSizeData=Ol(this.zoom,e["icon-size"]);var i=this.layers[0].layout,r=i.get("symbol-sort-key"),n=i.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==n&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey)&&(i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement")),"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((function(t){return ml[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};hu.prototype.createArrays=function(){this.text=new uu(new Da(Ls.members,this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new uu(new Da(Ls.members,this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new Qn,this.lineVertexArray=new ta,this.symbolInstances=new $n},hu.prototype.calculateGlyphDependencies=function(t,e,i,r,n){for(var a=0;a<t.length;a++)if(e[t.charCodeAt(a)]=!0,(i||r)&&n){var o=Ns[t.charAt(a)];o&&(e[o.charCodeAt(0)]=!0)}},hu.prototype.populate=function(t,e,i){var r=this.layers[0],n=r.layout,a=n.get("text-font"),o=n.get("text-field"),s=n.get("icon-image"),l=("constant"!==o.value.kind||o.value.value instanceof te&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=n.get("symbol-sort-key");if(this.features=[],l||u){for(var h=e.iconDependencies,p=e.glyphDependencies,d=e.availableImages,f=new nn(this.zoom),m=0,y=t;m<y.length;m+=1){var g=y[m],b=g.feature,v=g.id,_=g.index,x=g.sourceLayerIndex,S=r._featureFilter.needGeometry,w={type:b.type,id:v,properties:b.properties,geometry:S?La(b):[]};if(r._featureFilter.filter(f,w,i)){S||(w.geometry=La(b));var T=void 0;if(l){var P=r.getValueAndResolveTokens("text-field",w,i,d),C=te.factory(P);lu(C)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===tn()||this.hasRTLText&&rn.isParsed())&&(T=Bs(C,r,w))}var k=void 0;if(u){var I=r.getValueAndResolveTokens("icon-image",w,i,d);k=I instanceof ee?I:ee.fromString(I)}if(T||k){var A=this.sortFeaturesByKey?c.evaluate(w,{},i):void 0,O={id:v,text:T,icon:k,index:_,sourceLayerIndex:x,geometry:La(b),properties:b.properties,type:nu[b.type],sortKey:A};if(this.features.push(O),k&&(h[k.name]=!0),T){var D=a.evaluate(w,{},i).join(","),F="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ml.vertical)>=0;for(var M=0,E=T.sections;M<E.length;M+=1){var L=E[M];if(L.image)h[L.image.name]=!0;else{var R=Ur(T.toString()),V=L.fontStack||D,j=p[V]=p[V]||{};this.calculateGlyphDependencies(L.text,j,F,this.allowVerticalPlacement,R)}}}}}}"line"===n.get("symbol-placement")&&(this.features=function(t){var e={},i={},r=[],n=0;function a(e){r.push(t[e]),n++}function o(t,e,n){var a=i[t];return delete i[t],i[e]=a,r[a].geometry[0].pop(),r[a].geometry[0]=r[a].geometry[0].concat(n[0]),a}function s(t,i,n){var a=e[i];return delete e[i],e[t]=a,r[a].geometry[0].shift(),r[a].geometry[0]=n[0].concat(r[a].geometry[0]),a}function l(t,e,i){var r=i?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.text?c.text.toString():null;if(p){var d=l(p,h),f=l(p,h,!0);if(d in i&&f in e&&i[d]!==e[f]){var m=s(d,f,h),y=o(d,f,r[m].geometry);delete e[d],delete i[f],i[l(p,r[y].geometry,!0)]=y,r[m].geometry=null}else d in i?o(d,f,h):f in e?s(d,f,h):(a(u),e[d]=n-1,i[f]=n-1)}else a(u)}return r.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},hu.prototype.update=function(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))},hu.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},hu.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},hu.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},hu.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},hu.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},hu.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]),a={},o=t.segment+1;o<e.length;o++)a[o]={x:e[o].x,y:e[o].y,tileUnitDistanceFromAnchor:r},o<e.length-1&&(r+=e[o+1].dist(e[o]));for(var s=t.segment||0;s>=0;s--)a[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:n},s>0&&(n+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=a[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},hu.prototype.addSymbols=function(t,e,i,r,n,a,o,s,l,u,c,h){for(var p=t.indexArray,d=t.layoutVertexArray,f=t.segments.prepareSegment(4*e.length,d,p,a.sortKey),m=this.glyphOffsetArray.length,y=f.vertexLength,g=this.allowVerticalPlacement&&o===ml.vertical?Math.PI/2:0,b=a.text&&a.text.sections,v=0;v<e.length;v++){var _=e[v],x=_.tl,S=_.tr,w=_.bl,T=_.br,P=_.tex,C=_.pixelOffsetTL,k=_.pixelOffsetBR,I=_.minFontScaleX,A=_.minFontScaleY,O=_.glyphOffset,D=_.isSDF,F=_.sectionIndex,M=f.vertexLength,E=O[1];ou(d,s.x,s.y,x.x,E+x.y,P.x,P.y,i,D,C.x,C.y,I,A),ou(d,s.x,s.y,S.x,E+S.y,P.x+P.w,P.y,i,D,k.x,C.y,I,A),ou(d,s.x,s.y,w.x,E+w.y,P.x,P.y+P.h,i,D,C.x,k.y,I,A),ou(d,s.x,s.y,T.x,E+T.y,P.x+P.w,P.y+P.h,i,D,k.x,k.y,I,A),su(t.dynamicLayoutVertexArray,s,g),p.emplaceBack(M,M+1,M+2),p.emplaceBack(M+1,M+2,M+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(O[0]),v!==e.length-1&&F===e[v+1].sectionIndex||t.programConfigurations.populatePaintArrays(d.length,a,a.index,{},h,b&&b[F])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,y,l,u,s.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],o,0,!1,0,c)},hu.prototype._addCollisionDebugVertex=function(t,e,i,r,n,a){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,r,n,Math.round(a.x),Math.round(a.y))},hu.prototype.addCollisionDebugVertices=function(t,e,i,r,a,o,s){var l=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),u=l.vertexLength,c=a.layoutVertexArray,h=a.collisionVertexArray,p=s.anchorX,d=s.anchorY;this._addCollisionDebugVertex(c,h,o,p,d,new n(t,e)),this._addCollisionDebugVertex(c,h,o,p,d,new n(i,e)),this._addCollisionDebugVertex(c,h,o,p,d,new n(i,r)),this._addCollisionDebugVertex(c,h,o,p,d,new n(t,r)),l.vertexLength+=4;var f=a.indexArray;f.emplaceBack(u,u+1),f.emplaceBack(u+1,u+2),f.emplaceBack(u+2,u+3),f.emplaceBack(u+3,u),l.primitiveLength+=4},hu.prototype.addDebugCollisionBoxes=function(t,e,i,r){for(var n=t;n<e;n++){var a=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(a.x1,a.y1,a.x2,a.y2,r?this.textCollisionBox:this.iconCollisionBox,a.anchorPoint,i)}},hu.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new cu(En,js.members,Xn),this.iconCollisionBox=new cu(En,js.members,Xn);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},hu.prototype._deserializeCollisionBoxesForSymbol=function(t,e,i,r,n,a,o,s,l){for(var u={},c=e;c<i;c++){var h=t.get(c);u.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},u.textFeatureIndex=h.featureIndex;break}for(var p=r;p<n;p++){var d=t.get(p);u.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},u.verticalTextFeatureIndex=d.featureIndex;break}for(var f=a;f<o;f++){var m=t.get(f);u.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},u.iconFeatureIndex=m.featureIndex;break}for(var y=s;y<l;y++){var g=t.get(y);u.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},u.verticalIconFeatureIndex=g.featureIndex;break}return u},hu.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},hu.prototype.hasTextData=function(){return this.text.segments.get().length>0},hu.prototype.hasIconData=function(){return this.icon.segments.get().length>0},hu.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},hu.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},hu.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},hu.prototype.addIndicesForPlacedSymbol=function(t,e){for(var i=t.placedSymbolArray.get(e),r=i.vertexStartIndex+4*i.numGlyphs,n=i.vertexStartIndex;n<r;n+=4)t.indexArray.emplaceBack(n,n+1,n+2),t.indexArray.emplaceBack(n+1,n+2,n+3)},hu.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),i=Math.cos(t),r=[],n=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);r.push(0|Math.round(e*s.anchorX+i*s.anchorY)),n.push(s.featureIndex)}return a.sort((function(t,e){return r[t]-r[e]||n[e]-n[t]})),a},hu.prototype.addToSortKeyRanges=function(t,e){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},hu.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,r=this.symbolInstanceIndexes;i<r.length;i+=1){var n=this.symbolInstances.get(r[i]);this.featureSortOrder.push(n.featureIndex),[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((function(t,i,r){t>=0&&r.indexOf(t)===i&&e.addIndicesForPlacedSymbol(e.text,t)})),n.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,n.verticalPlacedTextSymbolIndex),n.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.placedIconSymbolIndex),n.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Er("SymbolBucket",hu,{omit:["layers","collisionBoxArray","features","compareText"]}),hu.MAX_GLYPHS=65535,hu.addDynamicAttributes=su;var pu=new bn({"symbol-placement":new dn(Ct.layout_symbol["symbol-placement"]),"symbol-spacing":new dn(Ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new dn(Ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new fn(Ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new dn(Ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new dn(Ct.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new dn(Ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new dn(Ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new dn(Ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new fn(Ct.layout_symbol["icon-size"]),"icon-text-fit":new dn(Ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new dn(Ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new fn(Ct.layout_symbol["icon-image"]),"icon-rotate":new fn(Ct.layout_symbol["icon-rotate"]),"icon-padding":new dn(Ct.layout_symbol["icon-padding"]),"icon-keep-upright":new dn(Ct.layout_symbol["icon-keep-upright"]),"icon-offset":new fn(Ct.layout_symbol["icon-offset"]),"icon-anchor":new fn(Ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new dn(Ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new dn(Ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new dn(Ct.layout_symbol["text-rotation-alignment"]),"text-field":new fn(Ct.layout_symbol["text-field"]),"text-font":new fn(Ct.layout_symbol["text-font"]),"text-size":new fn(Ct.layout_symbol["text-size"]),"text-max-width":new fn(Ct.layout_symbol["text-max-width"]),"text-line-height":new dn(Ct.layout_symbol["text-line-height"]),"text-letter-spacing":new fn(Ct.layout_symbol["text-letter-spacing"]),"text-justify":new fn(Ct.layout_symbol["text-justify"]),"text-radial-offset":new fn(Ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new dn(Ct.layout_symbol["text-variable-anchor"]),"text-anchor":new fn(Ct.layout_symbol["text-anchor"]),"text-max-angle":new dn(Ct.layout_symbol["text-max-angle"]),"text-writing-mode":new dn(Ct.layout_symbol["text-writing-mode"]),"text-rotate":new fn(Ct.layout_symbol["text-rotate"]),"text-padding":new dn(Ct.layout_symbol["text-padding"]),"text-keep-upright":new dn(Ct.layout_symbol["text-keep-upright"]),"text-transform":new fn(Ct.layout_symbol["text-transform"]),"text-offset":new fn(Ct.layout_symbol["text-offset"]),"text-allow-overlap":new dn(Ct.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new dn(Ct.layout_symbol["text-ignore-placement"]),"text-optional":new dn(Ct.layout_symbol["text-optional"])}),du={paint:new bn({"icon-opacity":new fn(Ct.paint_symbol["icon-opacity"]),"icon-color":new fn(Ct.paint_symbol["icon-color"]),"icon-halo-color":new fn(Ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new fn(Ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new fn(Ct.paint_symbol["icon-halo-blur"]),"icon-translate":new dn(Ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new dn(Ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new fn(Ct.paint_symbol["text-opacity"]),"text-color":new fn(Ct.paint_symbol["text-color"],{runtimeType:jt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new fn(Ct.paint_symbol["text-halo-color"]),"text-halo-width":new fn(Ct.paint_symbol["text-halo-width"]),"text-halo-blur":new fn(Ct.paint_symbol["text-halo-blur"]),"text-translate":new dn(Ct.paint_symbol["text-translate"]),"text-translate-anchor":new dn(Ct.paint_symbol["text-translate-anchor"])}),layout:pu},fu=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Et,this.defaultValue=t};fu.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},fu.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},fu.prototype.outputDefined=function(){return!1},fu.prototype.serialize=function(){return null},Er("FormatSectionOverride",fu,{omit:["defaultValue"]});var mu=function(t){function e(e){t.call(this,e,du)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){if(t.prototype.recalculate.call(this,e,i),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var n=[],a=0,o=r;a<o.length;a+=1){var s=o[a];n.indexOf(s)<0&&n.push(s)}this.layout._values["text-writing-mode"]=n}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,i,r){var n=this.layout.get(t).evaluate(e,{},i,r),a=this._unevaluatedLayout._values[t];return a.isDataDriven()||Ui(a.value)||!n?n:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,i){return i in t?String(t[i]):""}))}(e.properties,n)},e.prototype.createBucket=function(t){return new hu(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,i=du.paint.overridableProperties;t<i.length;t+=1){var r=i[t];if(e.hasPaintOverride(this.layout,r)){var n,a=this.paint.get(r),o=new fu(a),s=new Ni(o,a.property.specification);n="constant"===a.value.kind||"source"===a.value.kind?new Hi("source",s):new Wi("composite",s,a.value.zoomStops,a.value._interpolationType),this.paint._values[r]=new hn(a.property,n,a.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,i,r){return!(!this.layout||i.isDataDriven()||r.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var i=t.get("text-field"),r=du.paint.properties[e],n=!1,a=function(t){for(var e=0,i=t;e<i.length;e+=1)if(r.overrides&&r.overrides.hasOverride(i[e]))return void(n=!0)};if("constant"===i.value.kind&&i.value.value instanceof te)a(i.value.value.sections);else if("source"===i.value.kind){var o=function(t){n||(t instanceof oe&&ne(t.value)===Ut?a(t.value.sections):t instanceof ce?a(t.sections):t.eachChild(o))},s=i.value;s._styleExpression&&o(s._styleExpression.expression)}return n},e}(vn),yu={paint:new bn({"background-color":new dn(Ct.paint_background["background-color"]),"background-pattern":new yn(Ct.paint_background["background-pattern"]),"background-opacity":new dn(Ct.paint_background["background-opacity"])})},gu=function(t){function e(e){t.call(this,e,yu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(vn),bu={paint:new bn({"raster-opacity":new dn(Ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new dn(Ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new dn(Ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new dn(Ct.paint_raster["raster-brightness-max"]),"raster-saturation":new dn(Ct.paint_raster["raster-saturation"]),"raster-contrast":new dn(Ct.paint_raster["raster-contrast"]),"raster-resampling":new dn(Ct.paint_raster["raster-resampling"]),"raster-fade-duration":new dn(Ct.paint_raster["raster-fade-duration"])})},vu=function(t){function e(e){t.call(this,e,bu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(vn),_u=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(vn),xu={circle:oo,heatmap:go,hillshade:vo,fill:as,"fill-extrusion":Ss,line:Ms,symbol:mu,background:gu,raster:vu},Su=self.HTMLImageElement,wu=self.HTMLCanvasElement,Tu=self.HTMLVideoElement,Pu=self.ImageData,Cu=self.ImageBitmap,ku=function(t,e,i,r){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,r)};ku.prototype.update=function(t,e,i){var r=t.width,n=t.height,a=!(this.size&&this.size[0]===r&&this.size[1]===n||i),o=this.context,s=o.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),a)this.size=[r,n],t instanceof Su||t instanceof wu||t instanceof Tu||t instanceof Pu||Cu&&t instanceof Cu?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,r,n,0,this.format,s.UNSIGNED_BYTE,t.data);else{var l=i||{x:0,y:0},u=l.x,c=l.y;t instanceof Su||t instanceof wu||t instanceof Tu||t instanceof Pu||Cu&&t instanceof Cu?s.texSubImage2D(s.TEXTURE_2D,0,u,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,u,c,r,n,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},ku.prototype.bind=function(t,e,i){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),i!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},ku.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ku.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Iu=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Iu.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Iu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Au=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},m(["receive","process"],this),this.invoker=new Iu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=T()?t:self};function Ou(t,e,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}Au.prototype.send=function(t,e,i,r,n){var a=this;void 0===n&&(n=!1);var o=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[o]=i);var s=k(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:t,hasCallback:!!i,targetMapId:r,mustQueue:n,sourceMapId:this.mapId,data:jr(e,s)},s),{cancel:function(){i&&delete a.callbacks[o],a.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:a.mapId})}}},Au.prototype.receive=function(t){var e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];var r=this.cancelCallbacks[i];delete this.cancelCallbacks[i],r&&r()}else T()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)},Au.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Au.prototype.processTask=function(t,e){var i=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(zr(e.error)):r(null,zr(e.data)))}else{var n=!1,a=k(this.globalScope)?void 0:[],o=e.hasCallback?function(e,r){n=!0,delete i.cancelCallbacks[t],i.target.postMessage({id:t,type:"<response>",sourceMapId:i.mapId,error:e?jr(e):null,data:jr(r,a)},a)}:function(t){n=!0},s=null,l=zr(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,l,o);else if(this.parent.getWorkerSource){var u=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,u[0],l.source)[u[1]](l,o)}else o(new Error("Could not find function "+e.type));!n&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Au.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Du=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Du.prototype.setNorthEast=function(t){return this._ne=t instanceof Fu?new Fu(t.lng,t.lat):Fu.convert(t),this},Du.prototype.setSouthWest=function(t){return this._sw=t instanceof Fu?new Fu(t.lng,t.lat):Fu.convert(t),this},Du.prototype.extend=function(t){var e,i,r=this._sw,n=this._ne;if(t instanceof Fu)e=t,i=t;else{if(!(t instanceof Du))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Du.convert(t)):this.extend(Fu.convert(t)):this;if(i=t._ne,!(e=t._sw)||!i)return this}return r||n?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Fu(e.lng,e.lat),this._ne=new Fu(i.lng,i.lat)),this},Du.prototype.getCenter=function(){return new Fu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Du.prototype.getSouthWest=function(){return this._sw},Du.prototype.getNorthEast=function(){return this._ne},Du.prototype.getNorthWest=function(){return new Fu(this.getWest(),this.getNorth())},Du.prototype.getSouthEast=function(){return new Fu(this.getEast(),this.getSouth())},Du.prototype.getWest=function(){return this._sw.lng},Du.prototype.getSouth=function(){return this._sw.lat},Du.prototype.getEast=function(){return this._ne.lng},Du.prototype.getNorth=function(){return this._ne.lat},Du.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Du.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Du.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Du.prototype.contains=function(t){var e=Fu.convert(t),i=e.lng,r=e.lat,n=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n},Du.convert=function(t){return!t||t instanceof Du?t:new Du(t)};var Fu=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Fu.prototype.wrap=function(){return new Fu(u(this.lng,-180,180),this.lat)},Fu.prototype.toArray=function(){return[this.lng,this.lat]},Fu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Fu.prototype.distanceTo=function(t){var e=Math.PI/180,i=this.lat*e,r=t.lat*e,n=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(n,1))},Fu.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new Du(new Fu(this.lng-i,this.lat-e),new Fu(this.lng+i,this.lat+e))},Fu.convert=function(t){if(t instanceof Fu)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Fu(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Fu(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Mu=2*Math.PI*6371008.8;function Eu(t){return Mu*Math.cos(t*Math.PI/180)}function Lu(t){return(180+t)/360}function Ru(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Vu(t,e){return t/Eu(e)}function ju(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var zu=function(t,e,i){void 0===i&&(i=0),this.x=+t,this.y=+e,this.z=+i};zu.fromLngLat=function(t,e){void 0===e&&(e=0);var i=Fu.convert(t);return new zu(Lu(i.lng),Ru(i.lat),Vu(e,i.lat))},zu.prototype.toLngLat=function(){return new Fu(360*this.x-180,ju(this.y))},zu.prototype.toAltitude=function(){return this.z*Eu(ju(this.y))},zu.prototype.meterInMercatorCoordinateUnits=function(){return 1/Mu*(t=ju(this.y),1/Math.cos(t*Math.PI/180));var t};var Bu=function(t,e,i){this.z=t,this.x=e,this.y=i,this.key=Xu(0,t,t,e,i)};Bu.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Bu.prototype.url=function(t,e){var i,r,n,a,o,s=(r=this.y,n=this.z,a=Ou(256*(i=this.x),256*(r=Math.pow(2,n)-r-1),n),o=Ou(256*(i+1),256*(r+1),n),a[0]+","+a[1]+","+o[0]+","+o[1]),l=function(t,e,i){for(var r,n="",a=t;a>0;a--)n+=(e&(r=1<<a-1)?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Bu.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new n(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},Bu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Nu=function(t,e){this.wrap=t,this.canonical=e,this.key=Xu(t,e.z,e.z,e.x,e.y)},Uu=function(t,e,i,r,n){this.overscaledZ=t,this.wrap=e,this.canonical=new Bu(i,+r,+n),this.key=Xu(e,t,i,r,n)};function Xu(t,e,i,r,n){(t*=2)<0&&(t=-1*t-1);var a=1<<i;return(a*a*t+a*n+r).toString(36)+i.toString(36)+e.toString(36)}Uu.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Uu.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Uu(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Uu(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Uu.prototype.calculateScaledKey=function(t,e){var i=this.canonical.z-t;return t>this.canonical.z?Xu(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Xu(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)},Uu.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Uu.prototype.children=function(t){if(this.overscaledZ>=t)return[new Uu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new Uu(e,this.wrap,e,i,r),new Uu(e,this.wrap,e,i+1,r),new Uu(e,this.wrap,e,i,r+1),new Uu(e,this.wrap,e,i+1,r+1)]},Uu.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Uu.prototype.wrapped=function(){return new Uu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Uu.prototype.unwrapTo=function(t){return new Uu(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Uu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Uu.prototype.toUnwrapped=function(){return new Nu(this.wrap,this.canonical)},Uu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Uu.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new zu(t.x-this.wrap,t.y))},Er("CanonicalTileID",Bu),Er("OverscaledTileID",Uu,{omit:["posMatrix"]});var Hu=function(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return x('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(var n=0;n<r;n++)this.data[this._idx(-1,n)]=this.data[this._idx(0,n)],this.data[this._idx(r,n)]=this.data[this._idx(r-1,n)],this.data[this._idx(n,-1)]=this.data[this._idx(n,0)],this.data[this._idx(n,r)]=this.data[this._idx(n,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Hu.prototype.get=function(t,e){var i=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])},Hu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Hu.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Hu.prototype._unpackMapbox=function(t,e,i){return(256*t*256+256*e+i)/10-1e4},Hu.prototype._unpackTerrarium=function(t,e,i){return 256*t+e+i/256-32768},Hu.prototype.getPixels=function(){return new fo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Hu.prototype.backfillBorder=function(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,n=e*this.dim+this.dim,a=i*this.dim,o=i*this.dim+this.dim;switch(e){case-1:r=n-1;break;case 1:n=r+1}switch(i){case-1:a=o-1;break;case 1:o=a+1}for(var s=-e*this.dim,l=-i*this.dim,u=a;u<o;u++)for(var c=r;c<n;c++)this.data[this._idx(c,u)]=t.data[this._idx(c+s,u+l)]},Er("DEMData",Hu);var Wu=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}};Wu.prototype.encode=function(t){return this._stringToNumber[t]},Wu.prototype.decode=function(t){return this._numberToString[t]};var Yu=function(t,e,i,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=r,this.properties=t.properties,this.id=n},Gu={geometry:{configurable:!0}};Gu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Gu.geometry.set=function(t){this._geometry=t},Yu.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Yu.prototype,Gu);var qu=function(){this.state={},this.stateChanges={},this.deletedStates={}};qu.prototype.updateState=function(t,e,i){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},c(this.stateChanges[t][r],i),null===this.deletedStates[t])for(var n in this.deletedStates[t]={},this.state[t])n!==r&&(this.deletedStates[t][n]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var a in this.deletedStates[t][r]={},this.state[t][r])i[a]||(this.deletedStates[t][r][a]=null);else for(var o in i)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][o]&&delete this.deletedStates[t][r][o]},qu.prototype.removeFeatureState=function(t,e,i){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(i in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][i]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},qu.prototype.getState=function(t,e){var i=String(e),r=c({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var n=this.deletedStates[t][e];if(null===n)return{};for(var a in n)delete r[a]}return r},qu.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},qu.prototype.coalesceChanges=function(t,e){var i={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var n={};for(var a in this.stateChanges[r])this.state[r][a]||(this.state[r][a]={}),c(this.state[r][a],this.stateChanges[r][a]),n[a]=this.state[r][a];i[r]=n}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var l in this.state[o])s[l]={},this.state[o][l]={};else for(var u in this.deletedStates[o]){if(null===this.deletedStates[o][u])this.state[o][u]={};else for(var h=0,p=Object.keys(this.deletedStates[o][u]);h<p.length;h+=1)delete this.state[o][u][p[h]];s[u]=this.state[o][u]}i[o]=i[o]||{},c(i[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var d in t)t[d].setFeatureState(i,e)};var Ku=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ar(8192,16,0),this.grid3D=new Ar(8192,16,0),this.featureIndexArray=new ia,this.promoteId=e};function Zu(t,e,i,r,n){return g(t,(function(t,a){var o=e instanceof pn?e.get(a):null;return o&&o.evaluate?o.evaluate(i,r,n):o}))}function Ju(t){for(var e=1/0,i=1/0,r=-1/0,n=-1/0,a=0,o=t;a<o.length;a+=1){var s=o[a];e=Math.min(e,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),n=Math.max(n,s.y)}return{minX:e,minY:i,maxX:r,maxY:n}}function $u(t,e){return e-t}Ku.prototype.insert=function(t,e,i,r,n,a){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n);for(var s=a?this.grid3D:this.grid,l=0;l<e.length;l++){for(var u=e[l],c=[1/0,1/0,-1/0,-1/0],h=0;h<u.length;h++){var p=u[h];c[0]=Math.min(c[0],p.x),c[1]=Math.min(c[1],p.y),c[2]=Math.max(c[2],p.x),c[3]=Math.max(c[3],p.y)}c[0]<8192&&c[1]<8192&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}},Ku.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ms.VectorTile(new Hs(this.rawTileData)).layers,this.sourceLayerCoder=new Wu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ku.prototype.query=function(t,e,i,r){var a=this;this.loadVTLayers();for(var o=t.params||{},s=8192/t.tileSize/t.scale,l=ir(o.filter),u=t.queryGeometry,c=t.queryPadding*s,h=Ju(u),p=this.grid.query(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c),d=Ju(t.cameraQueryGeometry),f=0,m=this.grid3D.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c,(function(e,i,r,a){return function(t,e,i,r,a){for(var o=0,s=t;o<s.length;o+=1){var l=s[o];if(e<=l.x&&i<=l.y&&r>=l.x&&a>=l.y)return!0}var u=[new n(e,i),new n(e,a),new n(r,a),new n(r,i)];if(t.length>2)for(var c=0,h=u;c<h.length;c+=1)if(Ga(t,h[c]))return!0;for(var p=0;p<t.length-1;p++)if(qa(t[p],t[p+1],u))return!0;return!1}(t.cameraQueryGeometry,e-c,i-c,r+c,a+c)}));f<m.length;f+=1)p.push(m[f]);p.sort($u);for(var y,g={},b=function(n){var c=p[n];if(c!==y){y=c;var h=a.featureIndexArray.get(c),d=null;a.loadMatchingFeature(g,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,l,o.layers,o.availableImages,e,i,r,(function(e,i,r){return d||(d=La(e)),i.queryIntersectsFeature(u,e,r,d,a.z,t.transform,s,t.pixelPosMatrix)}))}},v=0;v<p.length;v++)b(v);return g},Ku.prototype.loadMatchingFeature=function(t,e,i,r,n,a,o,s,l,u,c){var h=this.bucketLayerIDs[e];if(!a||function(t,e){for(var i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(a,h)){var p=this.sourceLayerCoder.decode(i),d=this.vtLayers[p].feature(r);if(n.filter(new nn(this.tileID.overscaledZ),d))for(var f=this.getId(d,p),m=0;m<h.length;m++){var y=h[m];if(!(a&&a.indexOf(y)<0)){var g=s[y];if(g){var b={};void 0!==f&&u&&(b=u.getState(g.sourceLayer||"_geojsonTileLayer",f));var v=l[y];v.paint=Zu(v.paint,g.paint,d,b,o),v.layout=Zu(v.layout,g.layout,d,b,o);var _=!c||c(d,g,b);if(_){var x=new Yu(d,this.z,this.x,this.y,f);x.layer=v;var S=t[y];void 0===S&&(S=t[y]=[]),S.push({featureIndex:r,feature:x,intersectionZ:_})}}}}}},Ku.prototype.lookupSymbolFeatures=function(t,e,i,r,n,a,o,s){var l={};this.loadVTLayers();for(var u=ir(n),c=0,h=t;c<h.length;c+=1)this.loadMatchingFeature(l,i,r,h[c],u,a,o,s,e);return l},Ku.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var r=0,n=i[e];r<n.length;r+=1)if(t===n[r])return!0;return!1},Ku.prototype.getId=function(t,e){var i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i},Er("FeatureIndex",Ku,{omit:["rawTileData","sourceLayerCoder"]});var Qu=function(t,e){this.tileID=t,this.uid=p(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Qu.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<R.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Qu.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Qu.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var i={};if(!e)return i;for(var r=function(){var t=a[n],r=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return r.filter((function(e){return e.id===t}))[0]})));for(var o=0,s=r;o<s.length;o+=1)i[s[o].id]=t}},n=0,a=t;n<a.length;n+=1)r();return i}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var n=this.buckets[r];if(n instanceof hu){if(this.hasSymbolBuckets=!0,!i)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var o=this.buckets[a];if(o instanceof hu&&o.hasRTLText){this.hasRTLText=!0,rn.isLoading()||rn.isLoaded()||"deferred"!==tn()||en();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(l))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new qn},Qu.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Qu.prototype.getBucket=function(t){return this.buckets[t.id]},Qu.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ku(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ku(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Qu.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Qu.prototype.queryRenderedFeatures=function(t,e,i,r,n,a,o,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:a,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:o,queryPadding:this.queryPadding*l},t,e,i):{}},Qu.prototype.querySourceFeatures=function(t,e){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var r=i.loadVTLayers(),n=e?e.sourceLayer:"",a=r._geojsonTileLayer||r[n];if(a)for(var o=ir(e&&e.filter),s=this.tileID.canonical,l=s.z,u=s.x,c=s.y,h={z:l,x:u,y:c},p=0;p<a.length;p++){var d=a.feature(p);if(o.filter(new nn(this.tileID.overscaledZ),d)){var f=i.getId(d,n),m=new Yu(d,l,u,c,f);m.tile=h,t.push(m)}}}},Qu.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Qu.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Qu.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=P(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),n=!1;if(this.expirationTime>r)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{var a=this.expirationTime-e;a?this.expirationTime=r+Math.max(a,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Qu.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Qu.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var i=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var n=this.buckets[r],a=n.layers[0].sourceLayer||"_geojsonTileLayer",o=i[a],s=t[a];if(o&&s&&0!==Object.keys(s).length){n.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});var l=e&&e.style&&e.style.getLayer(r);l&&l.paint&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(n)))}}}},Qu.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Qu.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<R.now()},Qu.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Qu.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=R.now()+t},Qu.prototype.setDependencies=function(t,e){for(var i={},r=0,n=e;r<n.length;r+=1)i[n[r]]=!0;this.dependencies[t]=i},Qu.prototype.hasDependency=function(t,e){for(var i=0,r=t;i<r.length;i+=1){var n=this.dependencies[r[i]];if(n)for(var a=0,o=e;a<o.length;a+=1)if(n[o[a]])return!0}return!1};var tc=self.performance,ec=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},tc.mark(this._marks.start)};ec.prototype.finish=function(){tc.mark(this._marks.end);var t=tc.getEntriesByName(this._marks.measure);return 0===t.length&&(tc.measure(this._marks.measure,this._marks.start,this._marks.end),t=tc.getEntriesByName(this._marks.measure),tc.clearMarks(this._marks.start),tc.clearMarks(this._marks.end),tc.clearMeasures(this._marks.measure)),t},t.Actor=Au,t.AlphaImage=po,t.CanonicalTileID=Bu,t.CollisionBoxArray=qn,t.Color=Jt,t.DEMData=Hu,t.DataConstantProperty=dn,t.DictionaryCoder=Wu,t.EXTENT=8192,t.ErrorEvent=Tt,t.EvaluationParameters=nn,t.Event=wt,t.Evented=Pt,t.FeatureIndex=Ku,t.FillBucket=is,t.FillExtrusionBucket=vs,t.ImageAtlas=fl,t.ImagePosition=pl,t.LineBucket=As,t.LngLat=Fu,t.LngLatBounds=Du,t.MercatorCoordinate=zu,t.ONE_EM=24,t.OverscaledTileID=Uu,t.Point=n,t.Point$1=n,t.Properties=bn,t.Protobuf=Hs,t.RGBAImage=fo,t.RequestManager=X,t.RequestPerformance=ec,t.ResourceType=pt,t.SegmentVector=na,t.SourceFeatureState=qu,t.StructArrayLayout1ui2=Hn,t.StructArrayLayout2f1f2i16=Ln,t.StructArrayLayout2i4=Pn,t.StructArrayLayout3ui6=Vn,t.StructArrayLayout4i8=Cn,t.SymbolBucket=hu,t.Texture=ku,t.Tile=Qu,t.Transitionable=sn,t.Uniform1f=ga,t.Uniform1i=ya,t.Uniform2f=ba,t.Uniform3f=va,t.Uniform4f=_a,t.UniformColor=xa,t.UniformMatrix4f=wa,t.UnwrappedTileID=Nu,t.ValidationError=kt,t.WritingMode=ml,t.ZoomHistory=Br,t.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},t.addDynamicAttributes=su,t.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);var r=t.length,n=new Array(t.length),a=null;t.forEach((function(t,o){e(t,(function(t,e){t&&(a=t),n[o]=e,0==--r&&i(a,n)}))}))},t.bezier=o,t.bindAll=m,t.browser=R,t.cacheEntryPossiblyAdded=function(t){++ct>ot&&(t.getActor().send("enforceCacheSizeLimit",at),ct=0)},t.clamp=l,t.clearTileCache=function(t){var e=self.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))},t.clipLine=Bl,t.clone=function(t){var e=new to(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=v,t.clone$2=function(t){var e=new to(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=zs,t.config=V,t.create=function(){var t=new to(16);return to!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new to(9);return to!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new to(4);return to!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Xi,t.createLayout=wn,t.createStyleLayer=function(t){return"custom"===t.type?new _u(t):new xu[t.type](t)},t.cross=function(t,e,i){var r=e[0],n=e[1],a=e[2],o=i[0],s=i[1],l=i[2];return t[0]=n*l-a*s,t[1]=a*o-r*l,t[2]=r*s-n*o,t},t.deepEqual=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],i[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i)return!1;if(Object.keys(e).length!==Object.keys(i).length)return!1;for(var n in e)if(!t(e[n],i[n]))return!1;return!0}return e===i},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=s,t.emitValidationErrors=Ir,t.endsWith=y,t.enforceCacheSizeLimit=function(t){st(),$&&$.then((function(e){e.keys().then((function(i){for(var r=0;r<i.length-t;r++)e.delete(i[r])}))}))},t.evaluateSizeForFeature=Dl,t.evaluateSizeForZoom=Fl,t.evaluateVariableOffset=Ql,t.evented=Qr,t.extend=c,t.featureFilter=ir,t.filterObject=b,t.fromRotation=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Cl,t.getAnchorJustification=tu,t.getArrayBuffer=bt,t.getImage=_t,t.getJSON=function(t,e){return gt(c(t,{type:"json"}),e)},t.getRTLTextPluginStatus=tn,t.getReferrer=yt,t.getVideo=function(t,e){var i,r,n=self.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(var a=0;a<t.length;a++){var o=self.document.createElement("source");i=t[a],r=void 0,(r=self.document.createElement("a")).href=i,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(n.crossOrigin="Anonymous"),o.src=t[a],n.appendChild(o)}return{cancel:function(){}}},t.identity=eo,t.invert=function(t,e){var i=e[0],r=e[1],n=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],d=e[11],f=e[12],m=e[13],y=e[14],g=e[15],b=i*s-r*o,v=i*l-n*o,_=i*u-a*o,x=r*l-n*s,S=r*u-a*s,w=n*u-a*l,T=c*m-h*f,P=c*y-p*f,C=c*g-d*f,k=h*y-p*m,I=h*g-d*m,A=p*g-d*y,O=b*A-v*I+_*k+x*C-S*P+w*T;return O?(t[0]=(s*A-l*I+u*k)*(O=1/O),t[1]=(n*I-r*A-a*k)*O,t[2]=(m*w-y*S+g*x)*O,t[3]=(p*S-h*w-d*x)*O,t[4]=(l*C-o*A-u*P)*O,t[5]=(i*A-n*C+a*P)*O,t[6]=(y*_-f*w-g*v)*O,t[7]=(c*w-p*_+d*v)*O,t[8]=(o*I-s*C+u*T)*O,t[9]=(r*C-i*I-a*T)*O,t[10]=(f*S-m*_+g*b)*O,t[11]=(h*_-c*S-d*b)*O,t[12]=(s*P-o*k-l*T)*O,t[13]=(i*k-r*P+n*T)*O,t[14]=(m*v-f*x-y*b)*O,t[15]=(c*x-h*v+p*b)*O,t):null},t.isChar=Nr,t.isMapboxURL=H,t.keysDifference=function(t,e){var i=[];for(var r in t)r in e||i.push(r);return i},t.makeRequest=gt,t.mapObject=g,t.mercatorXfromLng=Lu,t.mercatorYfromLat=Ru,t.mercatorZfromAltitude=Vu,t.mul=no,t.multiply=io,t.mvt=ms,t.normalize=function(t,e){var i=e[0],r=e[1],n=e[2],a=i*i+r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t},t.number=Ne,t.offscreenCanvasSupported=ht,t.ortho=function(t,e,i,r,n,a,o){var s=1/(e-i),l=1/(r-n),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*s,t[13]=(n+r)*l,t[14]=(o+a)*u,t[15]=1,t},t.parseGlyphPBF=function(t){return new Hs(t).readFields(ll,[])},t.pbf=Hs,t.performSymbolLayout=function(t,e,i,r,n,a,o){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,u={};if("composite"===t.textSizeData.kind){var c=t.textSizeData,h=c.maxZoom;u.compositeTextSizes=[l["text-size"].possiblyEvaluate(new nn(c.minZoom),o),l["text-size"].possiblyEvaluate(new nn(h),o)]}if("composite"===t.iconSizeData.kind){var p=t.iconSizeData,d=p.maxZoom;u.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new nn(p.minZoom),o),l["icon-size"].possiblyEvaluate(new nn(d),o)]}u.layoutTextSize=l["text-size"].possiblyEvaluate(new nn(t.zoom+1),o),u.layoutIconSize=l["icon-size"].possiblyEvaluate(new nn(t.zoom+1),o),u.textMaxSize=l["text-size"].possiblyEvaluate(new nn(18));for(var f=24*s.get("text-line-height"),m="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),y=s.get("text-keep-upright"),g=s.get("text-size"),b=function(){var a=_[v],l=s.get("text-font").evaluate(a,{},o).join(","),c=g.evaluate(a,{},o),h=u.layoutTextSize.evaluate(a,{},o),p=u.layoutIconSize.evaluate(a,{},o),d={horizontal:{},vertical:void 0},b=a.text,S=[0,0];if(b){var w=b.toString(),T=24*s.get("text-letter-spacing").evaluate(a,{},o),P=function(t){for(var e=0,i=t;e<i.length;e+=1)if(r=i[e].charCodeAt(0),Nr.Arabic(r)||Nr["Arabic Supplement"](r)||Nr["Arabic Extended-A"](r)||Nr["Arabic Presentation Forms-A"](r)||Nr["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(w)?T:0,C=s.get("text-anchor").evaluate(a,{},o),k=s.get("text-variable-anchor");if(!k){var I=s.get("text-radial-offset").evaluate(a,{},o);S=I?Ql(C,[24*I,$l]):s.get("text-offset").evaluate(a,{},o).map((function(t){return 24*t}))}var A=m?"center":s.get("text-justify").evaluate(a,{},o),O=s.get("symbol-placement"),D="point"===O?24*s.get("text-max-width").evaluate(a,{},o):0,F=function(){t.allowVerticalPlacement&&Ur(w)&&(d.vertical=bl(b,e,i,n,l,D,f,C,"left",P,S,ml.vertical,!0,O,h,c))};if(!m&&k){for(var M="auto"===A?k.map((function(t){return tu(t)})):[A],E=!1,L=0;L<M.length;L++){var R=M[L];if(!d.horizontal[R])if(E)d.horizontal[R]=d.horizontal[0];else{var V=bl(b,e,i,n,l,D,f,"center",R,P,S,ml.horizontal,!1,O,h,c);V&&(d.horizontal[R]=V,E=1===V.positionedLines.length)}}F()}else{"auto"===A&&(A=tu(C));var j=bl(b,e,i,n,l,D,f,C,A,P,S,ml.horizontal,!1,O,h,c);j&&(d.horizontal[A]=j),F(),Ur(w)&&m&&y&&(d.vertical=bl(b,e,i,n,l,D,f,C,A,P,S,ml.vertical,!1,O,h,c))}}var z=void 0,B=!1;if(a.icon&&a.icon.name){var N=r[a.icon.name];N&&(z=function(t,e,i){var r=Cl(i),n=e[0]-t.displaySize[0]*r.horizontalAlign,a=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:a,bottom:a+t.displaySize[1],left:n,right:n+t.displaySize[0]}}(n[a.icon.name],s.get("icon-offset").evaluate(a,{},o),s.get("icon-anchor").evaluate(a,{},o)),B=N.sdf,void 0===t.sdfIcons?t.sdfIcons=N.sdf:t.sdfIcons!==N.sdf&&x("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(N.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var U=iu(d.horizontal)||d.vertical;t.iconsInText=!!U&&U.iconsInText,(U||z)&&function(t,e,i,r,n,a,o,s,l,u,c){var h=a.textMaxSize.evaluate(e,{});void 0===h&&(h=o);var p,d=t.layers[0].layout,f=d.get("icon-offset").evaluate(e,{},c),m=iu(i.horizontal),y=o/24,g=t.tilePixelRatio*y,b=t.tilePixelRatio*h/24,v=t.tilePixelRatio*s,_=t.tilePixelRatio*d.get("symbol-spacing"),S=d.get("text-padding")*t.tilePixelRatio,w=d.get("icon-padding")*t.tilePixelRatio,T=d.get("text-max-angle")/180*Math.PI,P="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),C="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),k=d.get("symbol-placement"),I=_/2,A=d.get("icon-text-fit");r&&"none"!==A&&(t.allowVerticalPlacement&&i.vertical&&(p=Il(r,i.vertical,A,d.get("icon-text-fit-padding"),f,y)),m&&(r=Il(r,m,A,d.get("icon-text-fit-padding"),f,y)));var O=function(s,h){h.x<0||h.x>=8192||h.y<0||h.y>=8192||function(t,e,i,r,n,a,o,s,l,u,c,h,p,d,f,m,y,g,b,v,_,S,w,T,P){var C,k,I,A,O,D=t.addToLineVertexArray(e,i),F=0,M=0,E=0,L=0,R=-1,V=-1,j={},z=ua(""),B=0,N=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(B=(C=s.layout.get("text-offset").evaluate(_,{},T).map((function(t){return 24*t})))[0],N=C[1]):(B=24*s.layout.get("text-radial-offset").evaluate(_,{},T),N=$l),t.allowVerticalPlacement&&r.vertical){var U=s.layout.get("text-rotate").evaluate(_,{},T)+90;A=new Yl(l,e,u,c,h,r.vertical,p,d,f,U),o&&(O=new Yl(l,e,u,c,h,o,y,g,f,U))}if(n){var X=s.layout.get("icon-rotate").evaluate(_,{}),H="none"!==s.layout.get("icon-text-fit"),W=Nl(n,X,w,H),Y=o?Nl(o,X,w,H):void 0;I=new Yl(l,e,u,c,h,n,y,g,!1,X),F=4*W.length;var G=t.iconSizeData,q=null;"source"===G.kind?(q=[128*s.layout.get("icon-size").evaluate(_,{})])[0]>32640&&x(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===G.kind&&((q=[128*S.compositeIconSizes[0].evaluate(_,{},T),128*S.compositeIconSizes[1].evaluate(_,{},T)])[0]>32640||q[1]>32640)&&x(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,W,q,v,b,_,!1,e,D.lineStartIndex,D.lineLength,-1,T),R=t.icon.placedSymbolArray.length-1,Y&&(M=4*Y.length,t.addSymbols(t.icon,Y,q,v,b,_,ml.vertical,e,D.lineStartIndex,D.lineLength,-1,T),V=t.icon.placedSymbolArray.length-1)}for(var K in r.horizontal){var Z=r.horizontal[K];if(!k){z=ua(Z.text);var J=s.layout.get("text-rotate").evaluate(_,{},T);k=new Yl(l,e,u,c,h,Z,p,d,f,J)}var $=1===Z.positionedLines.length;if(E+=eu(t,e,Z,a,s,f,_,m,D,r.vertical?ml.horizontal:ml.horizontalOnly,$?Object.keys(r.horizontal):[K],j,R,S,T),$)break}r.vertical&&(L+=eu(t,e,r.vertical,a,s,f,_,m,D,ml.vertical,["vertical"],j,V,S,T));var Q=k?k.boxStartIndex:t.collisionBoxArray.length,tt=k?k.boxEndIndex:t.collisionBoxArray.length,et=A?A.boxStartIndex:t.collisionBoxArray.length,it=A?A.boxEndIndex:t.collisionBoxArray.length,rt=I?I.boxStartIndex:t.collisionBoxArray.length,nt=I?I.boxEndIndex:t.collisionBoxArray.length,at=O?O.boxStartIndex:t.collisionBoxArray.length,ot=O?O.boxEndIndex:t.collisionBoxArray.length,st=-1,lt=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=lt(k,st),st=lt(A,st),st=lt(I,st);var ut=(st=lt(O,st))>-1?1:0;ut&&(st*=P/24),t.glyphOffsetArray.length>=hu.MAX_GLYPHS&&x("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,_.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,j.right>=0?j.right:-1,j.center>=0?j.center:-1,j.left>=0?j.left:-1,j.vertical||-1,R,V,z,Q,tt,et,it,rt,nt,at,ot,u,E,L,F,M,ut,0,p,B,N,st)}(t,h,s,i,r,n,p,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,g,S,P,l,v,w,C,f,e,a,u,c,o)};if("line"===k)for(var D=0,F=Bl(e.geometry,0,0,8192,8192);D<F.length;D+=1)for(var M=F[D],E=0,L=zl(M,_,T,i.vertical||m,r,24,b,t.overscaling,8192);E<L.length;E+=1){var R=L[E];m&&ru(t,m.text,I,R)||O(M,R)}else if("line-center"===k)for(var V=0,j=e.geometry;V<j.length;V+=1){var z=j[V];if(z.length>1){var B=jl(z,T,i.vertical||m,r,24,b);B&&O(z,B)}}else if("Polygon"===e.type)for(var N=0,U=$o(e.geometry,0);N<U.length;N+=1){var X=U[N],H=Kl(X,16);O(X[0],new Al(H.x,H.y,0))}else if("LineString"===e.type)for(var W=0,Y=e.geometry;W<Y.length;W+=1){var G=Y[W];O(G,new Al(G[0].x,G[0].y,0))}else if("Point"===e.type)for(var q=0,K=e.geometry;q<K.length;q+=1)for(var Z=0,J=K[q];Z<J.length;Z+=1){var $=J[Z];O([$],new Al($.x,$.y,0))}}(t,a,d,z,r,u,h,p,S,B,o)},v=0,_=t.features;v<_.length;v+=1)b();a&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,i,r,n){var a,o=1/Math.tan(e/2);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+r)*(a=1/(r-n)),t[14]=2*n*r*a):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){for(var i={},r=0;r<e.length;r++){var n=e[r];n in t&&(i[n]=t[n])}return i},t.plugin=rn,t.polygonIntersectsPolygon=ja,t.postMapLoadEvent=nt,t.postTurnstileEvent=it,t.potpack=hl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Er,t.registerForPluginStateChange=function(t){return t({pluginStatus:Kr,pluginURL:Zr}),Qr.on("pluginStateChange",t),t},t.rotate=function(t,e,i){var r=e[0],n=e[1],a=e[2],o=e[3],s=Math.sin(i),l=Math.cos(i);return t[0]=r*l+a*s,t[1]=n*l+o*s,t[2]=r*-s+a*l,t[3]=n*-s+o*l,t},t.rotateX=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*n+u*r,t[5]=o*n+c*r,t[6]=s*n+h*r,t[7]=l*n+p*r,t[8]=u*n-a*r,t[9]=c*n-o*r,t[10]=h*n-s*r,t[11]=p*n-l*r,t},t.rotateZ=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),a=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*n+u*r,t[1]=o*n+c*r,t[2]=s*n+h*r,t[3]=l*n+p*r,t[4]=u*n-a*r,t[5]=c*n-o*r,t[6]=h*n-s*r,t[7]=p*n-l*r,t},t.scale=function(t,e,i){var r=i[0],n=i[1],a=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},t.scale$2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},t.setCacheLimits=function(t,e){at=t,ot=e},t.setRTLTextPlugin=function(t,e,i){if(void 0===i&&(i=!1),"deferred"===Kr||"loading"===Kr||"loaded"===Kr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Zr=R.resolveURL(t),Kr="deferred",qr=e,$r(),i||en()},t.sphericalToCartesian=function(t){var e=t[0],i=t[1],r=t[2];return i+=90,i*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(i)*Math.sin(r),y:e*Math.sin(i)*Math.sin(r),z:e*Math.cos(r)}},t.sqrLen=function(t){var e=t[0],i=t[1];return e*e+i*i},t.styleSpec=Ct,t.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},t.symbolSize=Ml,t.transformMat3=function(t,e,i){var r=e[0],n=e[1],a=e[2];return t[0]=r*i[0]+n*i[3]+a*i[6],t[1]=r*i[1]+n*i[4]+a*i[7],t[2]=r*i[2]+n*i[5]+a*i[8],t},t.transformMat4=ao,t.translate=function(t,e,i){var r,n,a,o,s,l,u,c,h,p,d,f,m=i[0],y=i[1],g=i[2];return e===t?(t[12]=e[0]*m+e[4]*y+e[8]*g+e[12],t[13]=e[1]*m+e[5]*y+e[9]*g+e[13],t[14]=e[2]*m+e[6]*y+e[10]*g+e[14],t[15]=e[3]*m+e[7]*y+e[11]*g+e[15]):(n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],t[0]=r=e[0],t[1]=n,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=d,t[11]=f,t[12]=r*m+s*y+h*g+e[12],t[13]=n*m+l*y+p*g+e[13],t[14]=a*m+u*y+d*g+e[14],t[15]=o*m+c*y+f*g+e[15]),t},t.triggerPluginCompletionEvent=Jr,t.uniqueId=p,t.validateCustomStyleLayer=function(t){var e=[],i=t.id;return void 0===i&&e.push({message:"layers."+i+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+i+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Pr,t.validateStyle=Tr,t.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},t.vectorTile=ms,t.version="1.10.0",t.warnOnce=x,t.webpSupported=j,t.window=self,t.wrap=u})),r(0,(function(t){function e(t){var i=typeof t;if("number"===i||"boolean"===i||"string"===i||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",n=0,a=t;n<a.length;n+=1)r+=e(a[n])+",";return r+"]"}for(var o=Object.keys(t).sort(),s="{",l=0;l<o.length;l++)s+=JSON.stringify(o[l])+":"+e(t[o[l]])+",";return s+"}"}function i(i){for(var r="",n=0,a=t.refProperties;n<a.length;n+=1)r+="/"+e(i[a[n]]);return r}var r=function(t){this.keyCache={},t&&this.replace(t)};r.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},r.prototype.update=function(e,r){for(var n=this,a=0,o=e;a<o.length;a+=1){var s=o[a];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=t.createStyleLayer(s);l._featureFilter=t.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var u=0,c=r;u<c.length;u+=1){var h=c[u];delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var p=0,d=function(t,e){for(var r={},n=0;n<t.length;n++){var a=e&&e[t[n].id]||i(t[n]);e&&(e[t[n].id]=a);var o=r[a];o||(o=r[a]=[]),o.push(t[n])}var s=[];for(var l in r)s.push(r[l]);return s}(t.values(this._layerConfigs),this.keyCache);p<d.length;p+=1){var f=d[p].map((function(t){return n._layers[t.id]})),m=f[0];if("none"!==m.visibility){var y=m.source||"",g=this.familiesBySource[y];g||(g=this.familiesBySource[y]={});var b=m.sourceLayer||"_geojsonTileLayer",v=g[b];v||(v=g[b]=[]),v.push(f)}}};var n=function(e){var i={},r=[];for(var n in e){var a=e[n],o=i[n]={};for(var s in a){var l=a[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};r.push(u),o[s]={rect:u,metrics:l.metrics}}}}var c=t.potpack(r),h=new t.AlphaImage({width:c.w||1,height:c.h||1});for(var p in e){var d=e[p];for(var f in d){var m=d[+f];if(m&&0!==m.bitmap.width&&0!==m.bitmap.height){var y=i[p][f].rect;t.AlphaImage.copy(m.bitmap,h,{x:0,y:0},{x:y.x+1,y:y.y+1},m.bitmap)}}}this.image=h,this.positions=i};t.register("GlyphAtlas",n);var a=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function o(e,i,r){for(var n=new t.EvaluationParameters(i),a=0,o=e;a<o.length;a+=1)o[a].recalculate(n,r)}function s(e,i){var r=t.getArrayBuffer(e.request,(function(e,r,n,a){e?i(e):r&&i(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:n,expires:a})}));return function(){r.cancel(),i()}}a.prototype.parse=function(e,i,r,a,s){var l=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var u=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var h,p,d,f,m={},y={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},g=i.familiesBySource[this.source];for(var b in g){var v=e.layers[b];if(v){1===v.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var _=u.encode(b),x=[],S=0;S<v.length;S++){var w=v.feature(S),T=c.getId(w,b);x.push({feature:w,id:T,index:S,sourceLayerIndex:_})}for(var P=0,C=g[b];P<C.length;P+=1){var k=C[P],I=k[0];I.minzoom&&this.zoom<Math.floor(I.minzoom)||I.maxzoom&&this.zoom>=I.maxzoom||"none"!==I.visibility&&(o(k,this.zoom,r),(m[I.id]=I.createBucket({index:c.bucketLayerIDs.length,layers:k,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_,sourceID:this.source})).populate(x,y,this.tileID.canonical),c.bucketLayerIDs.push(k.map((function(t){return t.id}))))}}}var A=t.mapObject(y.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(A).length?a.send("getGlyphs",{uid:this.uid,stacks:A},(function(t,e){h||(h=t,p=e,F.call(l))})):p={};var O=Object.keys(y.iconDependencies);O.length?a.send("getImages",{icons:O,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){h||(h=t,d=e,F.call(l))})):d={};var D=Object.keys(y.patternDependencies);function F(){if(h)return s(h);if(p&&d&&f){var e=new n(p),i=new t.ImageAtlas(d,f);for(var a in m){var l=m[a];l instanceof t.SymbolBucket?(o(l.layers,this.zoom,r),t.performSymbolLayout(l,p,e.positions,d,i.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):l.hasPattern&&(l instanceof t.LineBucket||l instanceof t.FillBucket||l instanceof t.FillExtrusionBucket)&&(o(l.layers,this.zoom,r),l.addFeatures(y,this.tileID.canonical,i.patternPositions))}this.status="done",s(null,{buckets:t.values(m).filter((function(t){return!t.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:i,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?e.positions:null})}}D.length?a.send("getImages",{icons:D,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){h||(h=t,f=e,F.call(l))})):f={},F.call(this)};var l=function(t,e,i,r){this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=r||s,this.loading={},this.loaded={}};l.prototype.loadTile=function(e,i){var r=this,n=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[n]=new a(e);s.abort=this.loadVectorData(e,(function(e,a){if(delete r.loading[n],e||!a)return s.status="done",r.loaded[n]=s,i(e);var l=a.rawData,u={};a.expires&&(u.expires=a.expires),a.cacheControl&&(u.cacheControl=a.cacheControl);var c={};if(o){var h=o.finish();h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}s.vectorTile=a.vectorTile,s.parse(a.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(e,r){if(e||!r)return i(e);i(null,t.extend({rawTileData:l.slice(0)},r,u,c))})),r.loaded=r.loaded||{},r.loaded[n]=s}))},l.prototype.reloadTile=function(t,e){var i=this,r=this.loaded,n=t.uid,a=this;if(r&&r[n]){var o=r[n];o.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,r){var n=o.reloadCallback;n&&(delete o.reloadCallback,o.parse(o.vectorTile,a.layerIndex,i.availableImages,a.actor,n)),e(t,r)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},l.prototype.abortTile=function(t,e){var i=this.loading,r=t.uid;i&&i[r]&&i[r].abort&&(i[r].abort(),delete i[r]),e()},l.prototype.removeTile=function(t,e){var i=this.loaded,r=t.uid;i&&i[r]&&delete i[r],e()};var u=t.window.ImageBitmap,c=function(){this.loaded={}};function h(t,e){if(0!==t.length){p(t[0],e);for(var i=1;i<t.length;i++)p(t[i],!e)}}function p(t,e){for(var i=0,r=0,n=t.length,a=n-1;r<n;a=r++)i+=(t[r][0]-t[a][0])*(t[a][1]+t[r][1]);i>=0!=!!e&&t.reverse()}c.prototype.loadTile=function(e,i){var r=e.uid,n=e.encoding,a=e.rawImageData,o=u&&a instanceof u?this.getImageData(a):a,s=new t.DEMData(r,o,n);this.loaded=this.loaded||{},this.loaded[r]=s,i(null,s)},c.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var i=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:i.width,height:i.height},i.data)},c.prototype.removeTile=function(t){var e=this.loaded,i=t.uid;e&&e[i]&&delete e[i]};var d=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};f.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],i=0,r=this._feature.geometry;i<r.length;i+=1){var n=r[i];e.push([new t.Point$1(n[0],n[1])])}return e}for(var a=[],o=0,s=this._feature.geometry;o<s.length;o+=1){for(var l=[],u=0,c=s[o];u<c.length;u+=1){var h=c[u];l.push(new t.Point$1(h[0],h[1]))}a.push(l)}return a},f.prototype.toGeoJSON=function(t,e,i){return d.call(this,t,e,i)};var m=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};m.prototype.feature=function(t){return new f(this._features[t])};var y=t.vectorTile.VectorTileFeature,g=b;function b(t,e){this.options=e||{},this.features=t,this.length=t.length}function v(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}b.prototype.feature=function(t){return new v(this.features[t],this.options.extent)},v.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var i=0;i<e.length;i++){for(var r=e[i],n=[],a=0;a<r.length;a++)n.push(new t.Point$1(r[a][0],r[a][1]));this.geometry.push(n)}return this.geometry},v.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,r=1/0,n=-1/0,a=0;a<t.length;a++)for(var o=t[a],s=0;s<o.length;s++){var l=o[s];e=Math.min(e,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.y)}return[e,r,i,n]},v.prototype.toGeoJSON=y.prototype.toGeoJSON;var _=S,x=g;function S(e){var i=new t.pbf;return function(t,e){for(var i in t.layers)e.writeMessage(3,w,t.layers[i])}(e,i),i.finish()}function w(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)r.feature=t.feature(i),e.writeMessage(2,T,r);var n=r.keys;for(i=0;i<n.length;i++)e.writeStringField(3,n[i]);var a=r.values;for(i=0;i<a.length;i++)e.writeMessage(4,A,a[i])}function T(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,P,t),e.writeVarintField(3,i.type),e.writeMessage(4,I,i)}function P(t,e){var i=t.feature,r=t.keys,n=t.values,a=t.keycache,o=t.valuecache;for(var s in i.properties){var l=a[s];void 0===l&&(r.push(s),a[s]=l=r.length-1),e.writeVarint(l);var u=i.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var h=c+":"+u,p=o[h];void 0===p&&(n.push(u),o[h]=p=n.length-1),e.writeVarint(p)}}function C(t,e){return(e<<3)+(7&t)}function k(t){return t<<1^t>>31}function I(t,e){for(var i=t.loadGeometry(),r=t.type,n=0,a=0,o=i.length,s=0;s<o;s++){var l=i[s],u=1;1===r&&(u=l.length),e.writeVarint(C(1,u));for(var c=3===r?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==r&&e.writeVarint(C(2,c-1));var p=l[h].x-n,d=l[h].y-a;e.writeVarint(k(p)),e.writeVarint(k(d)),n+=p,a+=d}3===r&&e.writeVarint(C(7,1))}}function A(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function O(t,e,i,r){D(t,i,r),D(e,2*i,2*r),D(e,2*i+1,2*r+1)}function D(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function F(t,e,i,r){var n=t-i,a=e-r;return n*n+a*a}_.fromVectorTileJs=S,_.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var r in t)i[r]=new g(t[r].features,e),i[r].name=r,i[r].version=e.version,i[r].extent=e.extent;return S({layers:i})},_.GeoJSONWrapper=x;var M=function(t){return t[0]},E=function(t){return t[1]},L=function(t,e,i,r,n){void 0===e&&(e=M),void 0===i&&(i=E),void 0===r&&(r=64),void 0===n&&(n=Float64Array),this.nodeSize=r,this.points=t;for(var a=t.length<65536?Uint16Array:Uint32Array,o=this.ids=new a(t.length),s=this.coords=new n(2*t.length),l=0;l<t.length;l++)o[l]=l,s[2*l]=e(t[l]),s[2*l+1]=i(t[l]);!function t(e,i,r,n,a,o){if(!(a-n<=r)){var s=n+a>>1;!function t(e,i,r,n,a,o){for(;a>n;){if(a-n>600){var s=a-n+1,l=r-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(e,i,r,Math.max(n,Math.floor(r-l*c/s+h)),Math.min(a,Math.floor(r+(s-l)*c/s+h)),o)}var p=i[2*r+o],d=n,f=a;for(O(e,i,n,r),i[2*a+o]>p&&O(e,i,n,a);d<f;){for(O(e,i,d,f),d++,f--;i[2*d+o]<p;)d++;for(;i[2*f+o]>p;)f--}i[2*n+o]===p?O(e,i,n,f):O(e,i,++f,a),f<=r&&(n=f+1),r<=f&&(a=f-1)}}(e,i,s,n,a,o%2),t(e,i,r,n,s-1,o+1),t(e,i,r,s+1,a,o+1)}}(o,s,r,0,o.length-1,0)};L.prototype.range=function(t,e,i,r){return function(t,e,i,r,n,a,o){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var h=u.pop(),p=u.pop(),d=u.pop();if(p-d<=o)for(var f=d;f<=p;f++)l=e[2*f+1],(s=e[2*f])>=i&&s<=n&&l>=r&&l<=a&&c.push(t[f]);else{var m=Math.floor((d+p)/2);l=e[2*m+1],(s=e[2*m])>=i&&s<=n&&l>=r&&l<=a&&c.push(t[m]);var y=(h+1)%2;(0===h?i<=s:r<=l)&&(u.push(d),u.push(m-1),u.push(y)),(0===h?n>=s:a>=l)&&(u.push(m+1),u.push(p),u.push(y))}}return c}(this.ids,this.coords,t,e,i,r,this.nodeSize)},L.prototype.within=function(t,e,i){return function(t,e,i,r,n,a){for(var o=[0,t.length-1,0],s=[],l=n*n;o.length;){var u=o.pop(),c=o.pop(),h=o.pop();if(c-h<=a)for(var p=h;p<=c;p++)F(e[2*p],e[2*p+1],i,r)<=l&&s.push(t[p]);else{var d=Math.floor((h+c)/2),f=e[2*d],m=e[2*d+1];F(f,m,i,r)<=l&&s.push(t[d]);var y=(u+1)%2;(0===u?i-n<=f:r-n<=m)&&(o.push(h),o.push(d-1),o.push(y)),(0===u?i+n>=f:r+n>=m)&&(o.push(d+1),o.push(c),o.push(y))}}return s}(this.ids,this.coords,t,e,i,this.nodeSize)};var R={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},V=function(t){this.options=H(Object.create(R),t),this.trees=new Array(this.options.maxZoom+1)};function j(t,e,i,r,n){return{x:t,y:e,zoom:1/0,id:i,parentId:-1,numPoints:r,properties:n}}function z(t,e){var i=t.geometry.coordinates,r=i[1];return{x:U(i[0]),y:X(r),zoom:1/0,index:e,parentId:-1}}function B(t){return{type:"Feature",id:t.id,properties:N(t),geometry:{type:"Point",coordinates:[(r=t.x,360*(r-.5)),(e=t.y,i=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(i))/Math.PI-90)]}};var e,i,r}function N(t){var e=t.numPoints,i=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return H(H({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function U(t){return t/360+.5}function X(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function H(t,e){for(var i in e)t[i]=e[i];return t}function W(t){return t.x}function Y(t){return t.y}function G(t,e,i,r,n,a){var o=n-i,s=a-r;if(0!==o||0!==s){var l=((t-i)*o+(e-r)*s)/(o*o+s*s);l>1?(i=n,r=a):l>0&&(i+=o*l,r+=s*l)}return(o=t-i)*o+(s=e-r)*s}function q(t,e,i,r){var n={id:void 0===t?null:t,type:e,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)K(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var r=0;r<e.length;r++)K(t,e[r]);else if("MultiPolygon"===i)for(r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)K(t,e[r][n])}(n),n}function K(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function Z(t,e,i,r){if(e.geometry){var n=e.geometry.coordinates,a=e.geometry.type,o=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=r||0),"Point"===a)J(n,s);else if("MultiPoint"===a)for(var u=0;u<n.length;u++)J(n[u],s);else if("LineString"===a)$(n,s,o,!1);else if("MultiLineString"===a){if(i.lineMetrics){for(u=0;u<n.length;u++)$(n[u],s=[],o,!1),t.push(q(l,"LineString",s,e.properties));return}Q(n,s,o,!1)}else if("Polygon"===a)Q(n,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(u=0;u<e.geometry.geometries.length;u++)Z(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},i,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<n.length;u++){var c=[];Q(n[u],c,o,!0),s.push(c)}}t.push(q(l,a,s,e.properties))}}function J(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function $(t,e,i,r){for(var n,a,o=0,s=0;s<t.length;s++){var l=tt(t[s][0]),u=et(t[s][1]);e.push(l),e.push(u),e.push(0),s>0&&(o+=r?(n*u-l*a)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(u-a,2))),n=l,a=u}var c=e.length-3;e[2]=1,function t(e,i,r,n){for(var a,o=n,s=r-i>>1,l=r-i,u=e[i],c=e[i+1],h=e[r],p=e[r+1],d=i+3;d<r;d+=3){var f=G(e[d],e[d+1],u,c,h,p);if(f>o)a=d,o=f;else if(f===o){var m=Math.abs(d-s);m<l&&(a=d,l=m)}}o>n&&(a-i>3&&t(e,i,a,n),e[a+2]=o,r-a>3&&t(e,a,r,n))}(e,0,c,i),e[c+2]=1,e.size=Math.abs(o),e.start=0,e.end=e.size}function Q(t,e,i,r){for(var n=0;n<t.length;n++){var a=[];$(t[n],a,i,r),e.push(a)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function it(t,e,i,r,n,a,o,s){if(r/=e,a>=(i/=e)&&o<r)return t;if(o<i||a>=r)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.type,d=0===n?c.minX:c.minY,f=0===n?c.maxX:c.maxY;if(d>=i&&f<r)l.push(c);else if(!(f<i||d>=r)){var m=[];if("Point"===p||"MultiPoint"===p)rt(h,m,i,r,n);else if("LineString"===p)nt(h,m,i,r,n,!1,s.lineMetrics);else if("MultiLineString"===p)ot(h,m,i,r,n,!1);else if("Polygon"===p)ot(h,m,i,r,n,!0);else if("MultiPolygon"===p)for(var y=0;y<h.length;y++){var g=[];ot(h[y],g,i,r,n,!0),g.length&&m.push(g)}if(m.length){if(s.lineMetrics&&"LineString"===p){for(y=0;y<m.length;y++)l.push(q(c.id,p,m[y],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push(q(c.id,p,m,c.tags))}}}return l.length?l:null}function rt(t,e,i,r,n){for(var a=0;a<t.length;a+=3){var o=t[a+n];o>=i&&o<=r&&(e.push(t[a]),e.push(t[a+1]),e.push(t[a+2]))}}function nt(t,e,i,r,n,a,o){for(var s,l,u=at(t),c=0===n?lt:ut,h=t.start,p=0;p<t.length-3;p+=3){var d=t[p],f=t[p+1],m=t[p+2],y=t[p+3],g=t[p+4],b=0===n?d:f,v=0===n?y:g,_=!1;o&&(s=Math.sqrt(Math.pow(d-y,2)+Math.pow(f-g,2))),b<i?v>i&&(l=c(u,d,f,y,g,i),o&&(u.start=h+s*l)):b>r?v<r&&(l=c(u,d,f,y,g,r),o&&(u.start=h+s*l)):st(u,d,f,m),v<i&&b>=i&&(l=c(u,d,f,y,g,i),_=!0),v>r&&b<=r&&(l=c(u,d,f,y,g,r),_=!0),!a&&_&&(o&&(u.end=h+s*l),e.push(u),u=at(t)),o&&(h+=s)}var x=t.length-3;d=t[x],f=t[x+1],m=t[x+2],(b=0===n?d:f)>=i&&b<=r&&st(u,d,f,m),x=u.length-3,a&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&st(u,u[0],u[1],u[2]),u.length&&e.push(u)}function at(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ot(t,e,i,r,n,a){for(var o=0;o<t.length;o++)nt(t[o],e,i,r,n,a,!1)}function st(t,e,i,r){t.push(e),t.push(i),t.push(r)}function lt(t,e,i,r,n,a){var o=(a-e)/(r-e);return t.push(a),t.push(i+(n-i)*o),t.push(1),o}function ut(t,e,i,r,n,a){var o=(a-i)/(n-i);return t.push(e+(r-e)*o),t.push(a),t.push(1),o}function ct(t,e){for(var i=[],r=0;r<t.length;r++){var n,a=t[r],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)n=ht(a.geometry,e);else if("MultiLineString"===o||"Polygon"===o){n=[];for(var s=0;s<a.geometry.length;s++)n.push(ht(a.geometry[s],e))}else if("MultiPolygon"===o)for(n=[],s=0;s<a.geometry.length;s++){for(var l=[],u=0;u<a.geometry[s].length;u++)l.push(ht(a.geometry[s][u],e));n.push(l)}i.push(q(a.id,o,n,a.tags))}return i}function ht(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var r=0;r<t.length;r+=3)i.push(t[r]+e,t[r+1],t[r+2]);return i}function pt(t,e){if(t.transformed)return t;var i,r,n,a=1<<t.z,o=t.x,s=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(dt(u[r],u[r+1],e,a,o,s));else for(r=0;r<u.length;r++){var h=[];for(n=0;n<u[r].length;n+=2)h.push(dt(u[r][n],u[r][n+1],e,a,o,s));l.geometry.push(h)}}return t.transformed=!0,t}function dt(t,e,i,r,n,a){return[Math.round(i*(t*r-n)),Math.round(i*(e*r-a))]}function ft(t,e,i,r,n){for(var a=e===n.maxZoom?0:n.tolerance/((1<<e)*n.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){o.numFeatures++,mt(o,t[s],a,n);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<o.minX&&(o.minX=l),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),h>o.maxY&&(o.maxY=h)}return o}function mt(t,e,i,r){var n=e.geometry,a=e.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<n.length;s+=3)o.push(n[s]),o.push(n[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)yt(o,n,t,i,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<n.length;s++)yt(o,n[s],t,i,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<n.length;l++){var u=n[l];for(s=0;s<u.length;s++)yt(o,u[s],t,i,!0,0===s)}if(o.length){var c=e.tags||null;if("LineString"===a&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=n.start/n.size,c.mapbox_clip_end=n.end/n.size}var p={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}function yt(t,e,i,r,n,a){var o=r*r;if(r>0&&e.size<(n?o:r))i.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>o)&&(i.numSimplified++,s.push(e[l]),s.push(e[l+1])),i.numPoints++;n&&function(t,e){for(var i=0,r=0,n=t.length,a=n-2;r<n;a=r,r+=2)i+=(t[r]-t[a])*(t[r+1]+t[a+1]);if(i>0===e)for(r=0,n=t.length;r<n/2;r+=2){var o=t[r],s=t[r+1];t[r]=t[n-2-r],t[r+1]=t[n-1-r],t[n-2-r]=o,t[n-1-r]=s}}(s,a),t.push(s)}}function gt(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)Z(i,t.features[r],e,r);else Z(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var i=e.buffer/e.extent,r=t,n=it(t,1,-1-i,i,0,-1,2,e),a=it(t,1,1-i,2+i,0,-1,2,e);return(n||a)&&(r=it(t,1,-i,1+i,0,-1,2,e)||[],n&&(r=ct(n,1).concat(r)),a&&(r=r.concat(ct(a,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function bt(t,e,i){return 32*((1<<t)*i+e)+t}function vt(t,e){var i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return e(null,null);var n=new m(r.features),a=_(n);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),e(null,{vectorTile:n,rawData:a.buffer})}V.prototype.load=function(t){var e=this.options,i=e.log,r=e.minZoom,n=e.maxZoom,a=e.nodeSize;i&&console.time("total time");var o="prepare "+t.length+" points";i&&console.time(o),this.points=t;for(var s=[],l=0;l<t.length;l++)t[l].geometry&&s.push(z(t[l],l));this.trees[n+1]=new L(s,W,Y,a,Float32Array),i&&console.timeEnd(o);for(var u=n;u>=r;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new L(s,W,Y,a,Float32Array),i&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return i&&console.timeEnd("total time"),this},V.prototype.getClusters=function(t,e){var i=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),n=180===t[2]?180:((t[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,n=180;else if(i>n){var o=this.getClusters([i,r,180,a],e),s=this.getClusters([-180,r,n,a],e);return o.concat(s)}for(var l=this.trees[this._limitZoom(e)],u=[],c=0,h=l.range(U(i),X(a),U(n),X(r));c<h.length;c+=1){var p=l.points[h[c]];u.push(p.numPoints?B(p):this.points[p.index])}return u},V.prototype.getChildren=function(t){var e=this._getOriginId(t),i=this._getOriginZoom(t),r="No cluster with the specified id.",n=this.trees[i];if(!n)throw new Error(r);var a=n.points[e];if(!a)throw new Error(r);for(var o=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=[],l=0,u=n.within(a.x,a.y,o);l<u.length;l+=1){var c=n.points[u[l]];c.parentId===t&&s.push(c.numPoints?B(c):this.points[c.index])}if(0===s.length)throw new Error(r);return s},V.prototype.getLeaves=function(t,e,i){var r=[];return this._appendLeaves(r,t,e=e||10,i=i||0,0),r},V.prototype.getTile=function(t,e,i){var r=this.trees[this._limitZoom(t)],n=Math.pow(2,t),a=this.options,o=a.radius/a.extent,s=(i-o)/n,l=(i+1+o)/n,u={features:[]};return this._addTileFeatures(r.range((e-o)/n,s,(e+1+o)/n,l),r.points,e,i,n,u),0===e&&this._addTileFeatures(r.range(1-o/n,s,1,l),r.points,n,i,n,u),e===n-1&&this._addTileFeatures(r.range(0,s,o/n,l),r.points,-1,i,n,u),u.features.length?u:null},V.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e},V.prototype._appendLeaves=function(t,e,i,r,n){for(var a=0,o=this.getChildren(e);a<o.length;a+=1){var s=o[a],l=s.properties;if(l&&l.cluster?n+l.point_count<=r?n+=l.point_count:n=this._appendLeaves(t,l.cluster_id,i,r,n):n<r?n++:t.push(s),t.length===i)break}return n},V.prototype._addTileFeatures=function(t,e,i,r,n,a){for(var o=0,s=t;o<s.length;o+=1){var l=e[s[o]],u=l.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(l.x*n-i)),Math.round(this.options.extent*(l.y*n-r))]],tags:u?N(l):this.points[l.index].properties},h=void 0;u?h=l.id:this.options.generateId?h=l.index:this.points[l.index].id&&(h=this.points[l.index].id),void 0!==h&&(c.id=h),a.features.push(c)}},V.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},V.prototype._cluster=function(t,e){for(var i=[],r=this.options,n=r.reduce,a=r.radius/(r.extent*Math.pow(2,e)),o=0;o<t.length;o++){var s=t[o];if(!(s.zoom<=e)){s.zoom=e;for(var l=this.trees[e+1],u=l.within(s.x,s.y,a),c=s.numPoints||1,h=s.x*c,p=s.y*c,d=n&&c>1?this._map(s,!0):null,f=(o<<5)+(e+1)+this.points.length,m=0,y=u;m<y.length;m+=1){var g=l.points[y[m]];if(!(g.zoom<=e)){g.zoom=e;var b=g.numPoints||1;h+=g.x*b,p+=g.y*b,c+=b,g.parentId=f,n&&(d||(d=this._map(s,!0)),n(d,this._map(g)))}}1===c?i.push(s):(s.parentId=f,i.push(j(h/c,p/c,f,c,d)))}}return i},V.prototype._getOriginId=function(t){return t-this.points.length>>5},V.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},V.prototype._map=function(t,e){if(t.numPoints)return e?H({},t.properties):t.properties;var i=this.points[t.index].properties,r=this.options.map(i);return e&&r===i?H({},r):r},gt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},gt.prototype.splitTile=function(t,e,i,r,n,a,o){for(var s=[t,e,i,r],l=this.options,u=l.debug;s.length;){r=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=bt(e,i,r),p=this.tiles[h];if(!p&&(u>1&&console.time("creation"),p=this.tiles[h]=ft(t,e,i,r,l),this.tileCoords.push({z:e,x:i,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=t,n){if(e===l.maxZoom||e===n)continue;var f=1<<n-e;if(i!==Math.floor(a/f)||r!==Math.floor(o/f))continue}else if(e===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==t.length){u>1&&console.time("clipping");var m,y,g,b,v,_,x=.5*l.buffer/l.extent,S=.5-x,w=.5+x,T=1+x;m=y=g=b=null,v=it(t,c,i-x,i+w,0,p.minX,p.maxX,l),_=it(t,c,i+S,i+T,0,p.minX,p.maxX,l),t=null,v&&(m=it(v,c,r-x,r+w,1,p.minY,p.maxY,l),y=it(v,c,r+S,r+T,1,p.minY,p.maxY,l),v=null),_&&(g=it(_,c,r-x,r+w,1,p.minY,p.maxY,l),b=it(_,c,r+S,r+T,1,p.minY,p.maxY,l),_=null),u>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*i,2*r),s.push(y||[],e+1,2*i,2*r+1),s.push(g||[],e+1,2*i+1,2*r),s.push(b||[],e+1,2*i+1,2*r+1)}}},gt.prototype.getTile=function(t,e,i){var r=this.options,n=r.extent,a=r.debug;if(t<0||t>24)return null;var o=1<<t,s=bt(t,e=(e%o+o)%o,i);if(this.tiles[s])return pt(this.tiles[s],n);a>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,u=t,c=e,h=i;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[bt(u,c,h)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",u,c,h),a>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,i),a>1&&console.timeEnd("drilling down"),this.tiles[s]?pt(this.tiles[s],n):null):null};var _t=function(e){function i(t,i,r,n){e.call(this,t,i,r,vt),n&&(this.loadGeoJSON=n)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},i.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var i=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var n=!!(r&&r.request&&r.request.collectResourceTiming)&&new t.RequestPerformance(r.request);this.loadGeoJSON(r,(function(a,o){if(a||!o)return i(a);if("object"!=typeof o)return i(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function t(e,i){var r,n=e&&e.type;if("FeatureCollection"===n)for(r=0;r<e.features.length;r++)t(e.features[r],i);else if("GeometryCollection"===n)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],i);else if("Feature"===n)t(e.geometry,i);else if("Polygon"===n)h(e.coordinates,i);else if("MultiPolygon"===n)for(r=0;r<e.coordinates.length;r++)h(e.coordinates[r],i);return e}(o,!0);try{e._geoJSONIndex=r.cluster?new V(function(e){var i=e.superclusterOptions,r=e.clusterProperties;if(!r||!i)return i;for(var n={},a={},o={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r),u=0,c=l;u<c.length;u+=1){var h=c[u],p=r[h],d=p[0],f=t.createExpression(p[1]),m=t.createExpression("string"==typeof d?[d,["accumulated"],["get",h]]:d);n[h]=f.value,a[h]=m.value}return i.map=function(t){s.properties=t;for(var e={},i=0,r=l;i<r.length;i+=1){var a=r[i];e[a]=n[a].evaluate(o,s)}return e},i.reduce=function(t,e){s.properties=e;for(var i=0,r=l;i<r.length;i+=1){var n=r[i];o.accumulated=t[n],t[n]=a[n].evaluate(o,s)}},i}(r)).load(o.features):function(t,e){return new gt(t,e)}(o,r.geojsonVtOptions)}catch(a){return i(a)}e.loaded={};var s={};if(n){var l=n.finish();l&&(s.resourceTiming={},s.resourceTiming[r.source]=JSON.parse(JSON.stringify(l)))}i(null,s)}))}},i.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},i.prototype.reloadTile=function(t,i){var r=this.loaded;return r&&r[t.uid]?e.prototype.reloadTile.call(this,t,i):this.loadTile(t,i)},i.prototype.loadGeoJSON=function(e,i){if(e.request)t.getJSON(e.request,i);else{if("string"!=typeof e.data)return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return i(null,JSON.parse(e.data))}catch(t){return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},i.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},i.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},i.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},i.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},i}(l),xt=function(e){var i=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:_t},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(i.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');i.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return xt.prototype.setReferrer=function(t,e){this.referrer=e},xt.prototype.setImages=function(t,e,i){this.availableImages[t]=e,i()},xt.prototype.setLayers=function(t,e,i){this.getLayerIndex(t).replace(e),i()},xt.prototype.updateLayers=function(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()},xt.prototype.loadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).loadTile(e,i)},xt.prototype.loadDEMTile=function(t,e,i){this.getDEMWorkerSource(t,e.source).loadTile(e,i)},xt.prototype.reloadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).reloadTile(e,i)},xt.prototype.abortTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)},xt.prototype.removeTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)},xt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},xt.prototype.removeSource=function(t,e,i){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,i):i()}},xt.prototype.loadWorkerSource=function(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}},xt.prototype.syncRTLPluginState=function(e,i,r){try{t.plugin.setState(i);var n=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=n){this.self.importScripts(n);var a=t.plugin.isParsed();r(a?void 0:new Error("RTL Text Plugin failed to import scripts from "+n),a)}}catch(t){r(t.toString())}},xt.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},xt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},xt.prototype.getWorkerSource=function(t,e,i){var r=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][i]||(this.workerSources[t][e][i]=new this.workerSourceTypes[e]({send:function(e,i,n){r.actor.send(e,i,n,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][i]},xt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new c),this.demWorkerSources[t][e]},xt.prototype.enforceCacheSizeLimit=function(e,i){t.enforceCacheSizeLimit(i)},"undefined"!=typeof WorkerGlobalScope&&void 0!==t.window&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new xt(t.window)),xt})),r(0,(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!i(t)}function i(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===r[i=t&&t.failIfMajorPerformanceCaveat]&&(r[i]=function(t){var i=function(t){var i=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",r)||i.probablySupportsContext("experimental-webgl",r):i.supportsContext?i.supportsContext("webgl",r)||i.supportsContext("experimental-webgl",r):i.getContext("webgl",r)||i.getContext("experimental-webgl",r)}(t);if(!i)return!1;var r=i.createShader(i.VERTEX_SHADER);return!(!r||i.isContextLost())&&(i.shaderSource(r,"void main() {}"),i.compileShader(r),!0===i.getShaderParameter(r,i.COMPILE_STATUS))}(i)),r[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=i);var r={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),i={create:function(e,i,r){var n=t.window.document.createElement(e);return void 0!==i&&(n.className=i),r&&r.appendChild(n),n},createNS:function(e,i){return t.window.document.createElementNS(e,i)}},r=t.window.document.documentElement.style;function n(t){if(!r)return t[0];for(var e=0;e<t.length;e++)if(t[e]in r)return t[e];return t[0]}var a,o=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){r&&o&&(a=r[o],r[o]="none")},i.enableDrag=function(){r&&o&&(r[o]=a)};var s=n(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[s]=e};var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",u,u),t.window.removeEventListener("test",u,u)}catch(t){l=!1}i.addEventListener=function(t,e,i,r){void 0===r&&(r={}),t.addEventListener(e,i,"passive"in r&&l?r:r.capture)},i.removeEventListener=function(t,e,i,r){void 0===r&&(r={}),t.removeEventListener(e,i,"passive"in r&&l?r:r.capture)};var c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};function h(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}i.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",c,!0)}),0)},i.mousePos=function(e,i){var r=e.getBoundingClientRect();return new t.Point(i.clientX-r.left-e.clientLeft,i.clientY-r.top-e.clientTop)},i.touchPos=function(e,i){for(var r=e.getBoundingClientRect(),n=[],a=0;a<i.length;a++)n.push(new t.Point(i[a].clientX-r.left-e.clientLeft,i[a].clientY-r.top-e.clientTop));return n},i.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var p=function(e){function i(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.isLoaded=function(){return this.loaded},i.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var r=i[e];this._notify(r.ids,r.callback)}this.requestors=[]}},i.prototype.getImage=function(t){return this.images[t]},i.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},i.prototype._validate=function(e,i){var r=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),r=!1),this._validateContent(i.content,i)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),r=!1),r},i.prototype._validateStretch=function(t,e){if(!t)return!0;for(var i=0,r=0,n=t;r<n.length;r+=1){var a=n[r];if(a[0]<i||a[1]<a[0]||e<a[1])return!1;i=a[1]}return!0},i.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},i.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},i.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},i.prototype.listImages=function(){return Object.keys(this.images)},i.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var r=0,n=t;r<n.length;r+=1)this.images[n[r]]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},i.prototype._notify=function(e,i){for(var r={},n=0,a=e;n<a.length;n+=1){var o=a[n];this.images[o]||this.fire(new t.Event("styleimagemissing",{id:o}));var s=this.images[o];s?r[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}i(null,r)},i.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},i.prototype.getPattern=function(e){var i=this.patterns[e],r=this.getImage(e);if(!r)return null;if(i&&i.position.version===r.version)return i.position;if(i)i.position.version=r.version;else{var n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},a=new t.ImagePosition(n,r);this.patterns[e]={bin:n,position:a}}return this._updatePatternAtlas(),this.patterns[e].position},i.prototype.bind=function(e){var i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},i.prototype._updatePatternAtlas=function(){var e=[];for(var i in this.patterns)e.push(this.patterns[i].bin);var r=t.potpack(e),n=r.w,a=r.h,o=this.atlasImage;for(var s in o.resize({width:n||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,h=this.images[s].data,p=h.width,d=h.height;t.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c},{width:p,height:d}),t.RGBAImage.copy(h,o,{x:0,y:d-1},{x:u,y:c-1},{width:p,height:1}),t.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c+d},{width:p,height:1}),t.RGBAImage.copy(h,o,{x:p-1,y:0},{x:u-1,y:c},{width:1,height:d}),t.RGBAImage.copy(h,o,{x:0,y:0},{x:u+p,y:c},{width:1,height:d})}this.dirty=!0},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i.prototype.dispatchRenderCallbacks=function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var n=this.images[r];h(n)&&this.updateImage(r,n)}}},i}(t.Evented),d=y,f=y,m=1e20;function y(t,e,i,r,n,a){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=n||"sans-serif",this.fontWeight=a||"normal",this.radius=i||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(t,e,i,r,n,a,o){for(var s=0;s<e;s++){for(var l=0;l<i;l++)r[l]=t[l*e+s];for(b(r,n,a,o,i),l=0;l<i;l++)t[l*e+s]=n[l]}for(l=0;l<i;l++){for(s=0;s<e;s++)r[s]=t[l*e+s];for(b(r,n,a,o,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(n[s])}}function b(t,e,i,r,n){i[0]=0,r[0]=-m,r[1]=+m;for(var a=1,o=0;a<n;a++){for(var s=(t[a]+a*a-(t[i[o]]+i[o]*i[o]))/(2*a-2*i[o]);s<=r[o];)o--,s=(t[a]+a*a-(t[i[o]]+i[o]*i[o]))/(2*a-2*i[o]);i[++o]=a,r[o]=s,r[o+1]=+m}for(a=0,o=0;a<n;a++){for(;r[o+1]<a;)o++;e[a]=(a-i[o])*(a-i[o])+t[i[o]]}}y.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var n=e.data[4*r+3]/255;this.gridOuter[r]=1===n?0:0===n?m:Math.pow(Math.max(0,.5-n),2),this.gridInner[r]=1===n?m:0===n?0:Math.pow(Math.max(0,n-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)i[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return i},d.default=f;var v=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};v.prototype.setURL=function(t){this.url=t},v.prototype.getGlyphs=function(e,i){var r=this,n=[];for(var a in e)for(var o=0,s=e[a];o<s.length;o+=1)n.push({stack:a,id:s[o]});t.asyncAll(n,(function(t,e){var i=t.stack,n=t.id,a=r.entries[i];a||(a=r.entries[i]={glyphs:{},requests:{},ranges:{}});var o=a.glyphs[n];if(void 0===o){if(o=r._tinySDF(a,i,n))return a.glyphs[n]=o,void e(null,{stack:i,id:n,glyph:o});var s=Math.floor(n/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(a.ranges[s])e(null,{stack:i,id:n,glyph:o});else{var l=a.requests[s];l||(l=a.requests[s]=[],v.loadGlyphRange(i,s,r.url,r.requestManager,(function(t,e){if(e){for(var i in e)r._doesCharSupportLocalGlyph(+i)||(a.glyphs[+i]=e[+i]);a.ranges[s]=!0}for(var n=0,o=l;n<o.length;n+=1)(0,o[n])(t,e);delete a.requests[s]}))),l.push((function(t,r){t?e(t):r&&e(null,{stack:i,id:n,glyph:r[n]||null})}))}}else e(null,{stack:i,id:n,glyph:o})}),(function(t,e){if(t)i(t);else if(e){for(var r={},n=0,a=e;n<a.length;n+=1){var o=a[n],s=o.stack,l=o.id,u=o.glyph;(r[s]||(r[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}i(null,r)}}))},v.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},v.prototype._tinySDF=function(e,i,r){var n=this.localIdeographFontFamily;if(n&&this._doesCharSupportLocalGlyph(r)){var a=e.tinySDF;if(!a){var o="400";/bold/i.test(i)?o="900":/medium/i.test(i)?o="500":/light/i.test(i)&&(o="200"),a=e.tinySDF=new v.TinySDF(24,3,8,.25,n,o)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(e,i,r,n,a){var o=256*i,s=o+255,l=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",o+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,(function(e,i){if(e)a(e);else if(i){for(var r={},n=0,o=t.parseGlyphPBF(i);n<o.length;n+=1){var s=o[n];r[s.id]=s}a(null,r)}}))},v.TinySDF=d;var _=function(){this.specification=t.styleSpec.light.position};_.prototype.possiblyEvaluate=function(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))},_.prototype.interpolate=function(e,i,r){return{x:t.number(e.x,i.x,r),y:t.number(e.y,i.y,r),z:t.number(e.z,i.z,r)}};var x=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new _,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),S=function(e){function i(i){e.call(this),this._transitionable=new t.Transitionable(x),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(e,i){if(void 0===i&&(i={}),!this._validate(t.validateLight,e,i))for(var r in e){var n=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),n):this._transitionable.setValue(r,n)}},i.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},i.prototype._validate=function(e,i,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},i}(t.Evented),w=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};w.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]},w.prototype.getDashRanges=function(t,e,i){var r=[],n=t.length%2==1?-t[t.length-1]*i:0,a=t[0]*i,o=!0;r.push({left:n,right:a,isDash:o,zeroLength:0===t[0]});for(var s=t[0],l=1;l<t.length;l++){var u=t[l];r.push({left:n=s*i,right:a=(s+=u)*i,isDash:o=!o,zeroLength:0===u})}return r},w.prototype.addRoundDash=function(t,e,i){for(var r=e/2,n=-i;n<=i;n++)for(var a=this.width*(this.nextRow+i+n),o=0,s=t[o],l=0;l<this.width;l++){l/s.right>1&&(s=t[++o]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),h=Math.min(u,c),p=void 0,d=n/i*(r+1);if(s.isDash){var f=r-Math.abs(d);p=Math.sqrt(h*h+f*f)}else p=r-Math.sqrt(h*h+d*d);this.data[a+l]=Math.max(0,Math.min(255,p+128))}},w.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var i=t[e],r=t[e+1];i.zeroLength?t.splice(e,1):r&&r.isDash===i.isDash&&(r.left=i.left,t.splice(e,1))}var n=t[0],a=t[t.length-1];n.isDash===a.isDash&&(n.left=a.left-this.width,a.right=n.right+this.width);for(var o=this.width*this.nextRow,s=0,l=t[s],u=0;u<this.width;u++){u/l.right>1&&(l=t[++s]);var c=Math.abs(u-l.left),h=Math.abs(u-l.right),p=Math.min(c,h);this.data[o+u]=Math.max(0,Math.min(255,(l.isDash?p:-p)+128))}},w.prototype.addDash=function(e,i){var r=i?7:0,n=2*r+1;if(this.nextRow+n>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var a=0,o=0;o<e.length;o++)a+=e[o];if(0!==a){var s=this.width/a,l=this.getDashRanges(e,this.width,s);i?this.addRoundDash(l,s,r):this.addRegularDash(l)}var u={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:a};return this.nextRow+=n,this.dirty=!0,u},w.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var T=function e(i,r){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var n=this.workerPool.acquire(this.id),a=0;a<n.length;a++){var o=new e.Actor(n[a],r,this.id);o.name="Worker "+a,this.actors.push(o)}};function P(e,i,r){var n=function(n,a){if(n)return r(n);if(a){var o=t.pick(t.extend(a,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(o.vectorLayers=a.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(t){return t.id}))),o.tiles=i.canonicalizeTileset(o,e.url),r(null,o)}};return e.url?t.getJSON(i.transformRequest(i.normalizeSourceURL(e.url),t.ResourceType.Source),n):t.browser.frame((function(){return n(null,e)}))}T.prototype.broadcast=function(e,i,r){t.asyncAll(this.actors,(function(t,r){t.send(e,i,r)}),r=r||function(){})},T.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},T.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},T.Actor=t.Actor;var C=function(e,i,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=r||24};C.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},C.prototype.contains=function(e){var i=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),n=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),a=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),o=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=r&&e.x<a&&e.y>=n&&e.y<o};var k=function(e){function i(i,r,n,a){if(e.call(this),this.id=i,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(r,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,(function(i,r){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new C(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.loadTile=function(e,i){var r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),n={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function a(r,n){return delete e.request,e.aborted?i(null):r&&404!==r.status?i(r):(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}n.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",n,a.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",n,a.bind(this)))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.hasTransition=function(){return!1},i}(t.Evented),I=function(e){function i(i,r,n,a){e.call(this),this.id=i,this.dispatcher=n,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,(function(i,r){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new C(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.loadTile=function(e,i){var r=this,n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),(function(n,a){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(a){r.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;var o=r.map.painter.context,s=o.gl;e.texture=r.map.painter.getTileTexture(a.width),e.texture?e.texture.update(a,{useMipmap:!0}):(e.texture=new t.Texture(o,a,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(r.dispatcher),i(null)}}))},i.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},i.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},i.prototype.hasTransition=function(){return!1},i}(t.Evented),A=function(e){function i(i,r,n,a){e.call(this,i,r,n,a),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(e,i){var r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function n(t,r){t&&(e.state="errored",i(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",i(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),(function(r,a){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(a){this.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;var o=t.window.ImageBitmap&&a instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?a:t.browser.getImageData(a,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,n.bind(this)))}}).bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},i.prototype._getNeighboringTiles=function(e){var i=e.canonical,r=Math.pow(2,i.z),n=(i.x-1+r)%r,a=0===i.x?e.wrap-1:e.wrap,o=(i.x+1+r)%r,s=i.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,a,i.z,n,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,o,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,n,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,o,i.y-1).key]={backfilled:!1}),i.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,a,i.z,n,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,o,i.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},i}(I),O=function(e){function i(i,r,n,a){e.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(a),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*o,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(r.clusterRadius||50)*o,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties},r.workerOptions)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(i){if(i)e.fire(new t.ErrorEvent(i));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}}))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setData=function(e){var i=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)i.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(r.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new t.Event("data",r))}})),this},i.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},i.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},i.prototype.getClusterLeaves=function(t,e,i,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},r),this},i.prototype._updateWorkerData=function(e){var i=this;this._loaded=!1;var r=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(r.request=this.map._requestManager.transformRequest(t.browser.resolveURL(n),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(n),this.actor.send(this.type+".loadData",r,(function(t,n){i._removed||n&&n.abandoned||(i._loaded=!0,n&&n.resourceTiming&&n.resourceTiming[i.id]&&(i._resourceTiming=n.resourceTiming[i.id].slice(0)),i.actor.send(i.type+".coalesce",{source:r.source},null),e(t))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.loadTile=function(e,i){var r=this,n=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(n,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,a){return delete e.request,e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(a,r.map.painter,"reloadTile"===n),i(null))}))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},i.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},i.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(t.Evented),D=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),F=function(e){function i(t,i,r,n){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=i}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(e,i){var r=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(n,a){r._loaded=!0,n?r.fire(new t.ErrorEvent(n)):a&&(r.image=a,e&&(r.coordinates=e),i&&i(),r._finishLoading())}))},i.prototype.loaded=function(){return this._loaded},i.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setCoordinates=function(e){var i=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var i=1/0,r=1/0,n=-1/0,a=-1/0,o=0,s=e;o<s.length;o+=1){var l=s[o];i=Math.min(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.x),a=Math.max(a,l.y)}var u=Math.max(n-i,a-r),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),h=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((i+n)/2*h),Math.floor((r+a)/2*h))}(r),this.minzoom=this.maxzoom=this.tileID.z;var n=r.map((function(t){return i.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,i=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},i.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(t.Evented),M=function(e){function i(t,i,r,n){e.call(this,t,i,r,n),this.roundZoom=!0,this.type="video",this.options=i}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1;var i=this.options;this.urls=[];for(var r=0,n=i.urls;r<n.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(n[r],t.ResourceType.Source).url);t.getVideo(this.urls,(function(i,r){e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},i.prototype.pause=function(){this.video&&this.video.pause()},i.prototype.play=function(){this.video&&this.video.play()},i.prototype.seek=function(e){if(this.video){var i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=e}},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,i=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(F),E=function(e){function i(i,r,n,a){e.call(this,i,r,n,a),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,r=i.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(i,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var a=this.tiles[n];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},i}(F),L={vector:k,raster:I,"raster-dem":A,geojson:O,video:M,image:F,canvas:E};function R(e,i){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(i.toUnwrapped()))}function V(t,e,i,r,n,a){var o=function(t,e,i){if(t)for(var r=0,n=t;r<n.length;r+=1){var a=e[n[r]];if(a&&a.source===i&&"fill-extrusion"===a.type)return!0}else for(var o in e){var s=e[o];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(n&&n.layers,e,t.id),s=a.maxPitchScaleFactor(),l=t.tilesIn(r,s,o);l.sort(j);for(var u=[],c=0,h=l;c<h.length;c+=1){var p=h[c];u.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,i,t._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,n,a,s,R(t.transform,p.tileID))})}var d=function(t){for(var e={},i={},r=0,n=t;r<n.length;r+=1){var a=n[r],o=a.queryResults,s=a.wrappedTileID,l=i[s]=i[s]||{};for(var u in o)for(var c=o[u],h=l[u]=l[u]||{},p=e[u]=e[u]||[],d=0,f=c;d<f.length;d+=1){var m=f[d];h[m.featureIndex]||(h[m.featureIndex]=!0,p.push(m))}}return e}(u);for(var f in d)d[f].forEach((function(e){var i=e.feature,r=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}));return d}function j(t,e){var i=t.tileID,r=e.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}var z=function(t,e){this.max=t,this.onRemove=e,this.reset()};z.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var r=i[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},z.prototype.add=function(t,e,i){var r=this,n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);var a={value:e,timeout:void 0};if(void 0!==i&&(a.timeout=setTimeout((function(){r.remove(t,a)}),i)),this.data[n].push(a),this.order.push(n),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},z.prototype.has=function(t){return t.wrapped().key in this.data},z.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},z.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},z.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},z.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},z.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,r=void 0===e?0:this.data[i].indexOf(e),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this},z.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},z.prototype.filter=function(t){var e=[];for(var i in this.data)for(var r=0,n=this.data[i];r<n.length;r+=1){var a=n[r];t(a.value)||e.push(a)}for(var o=0,s=e;o<s.length;o+=1){var l=s[o];this.remove(l.value.tileID,l)}};var B=function(t,e,i){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};B.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},B.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},B.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var N={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},U=function(t,e,i,r){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};U.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},U.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},U.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var r=e.attributes[this.attributes[i].name];void 0!==r&&t.enableVertexAttribArray(r)}},U.prototype.setVertexAttribPointers=function(t,e,i){for(var r=0;r<this.attributes.length;r++){var n=this.attributes[r],a=e.attributes[n.name];void 0!==a&&t.vertexAttribPointer(a,n.components,t[N[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}},U.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var X=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};X.prototype.get=function(){return this.current},X.prototype.set=function(t){},X.prototype.getDefault=function(){return this.default},X.prototype.setDefault=function(){this.set(this.default)};var H=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(X),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(X),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(X),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(X),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(X),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(X),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(X),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(X),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(X),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(X),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(X),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(X),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(X),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(X),nt=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(X),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(X),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(X),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(X),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(X),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(X),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(X),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(X),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(X),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(X),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(X),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(X),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(X),gt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(X),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(X),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(X),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(X),xt=function(t){function e(e,i){t.call(this,e),this.context=e,this.parent=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(X),St=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(xt),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(xt),Tt=function(t,e,i,r){this.context=t,this.width=e,this.height=i;var n=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new St(t,n),r&&(this.depthAttachment=new wt(t,n))};Tt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i)}t.deleteFramebuffer(this.framebuffer)};var Pt=function(t,e,i){this.func=t,this.mask=e,this.range=i};Pt.ReadOnly=!1,Pt.ReadWrite=!0,Pt.disabled=new Pt(519,Pt.ReadOnly,[0,1]);var Ct=function(t,e,i,r,n,a){this.test=t,this.ref=e,this.mask=i,this.fail=r,this.depthFail=n,this.pass=a};Ct.disabled=new Ct({func:519,mask:0},0,0,7680,7680,7680);var kt=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};kt.disabled=new kt(kt.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),kt.unblended=new kt(kt.Replace,t.Color.transparent,[!0,!0,!0,!0]),kt.alphaBlended=new kt([1,771],t.Color.transparent,[!0,!0,!0,!0]);var It=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};It.disabled=new It(!1,1029,2305),It.backCCW=new It(!0,1029,2305);var At=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new H(this),this.clearDepth=new W(this),this.clearStencil=new Y(this),this.colorMask=new G(this),this.depthMask=new q(this),this.stencilMask=new K(this),this.stencilFunc=new Z(this),this.stencilOp=new J(this),this.stencilTest=new $(this),this.depthRange=new Q(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new it(this),this.blendFunc=new rt(this),this.blendColor=new nt(this),this.blendEquation=new at(this),this.cullFace=new ot(this),this.cullFaceSide=new st(this),this.frontFace=new lt(this),this.program=new ut(this),this.activeTexture=new ct(this),this.viewport=new ht(this),this.bindFramebuffer=new pt(this),this.bindRenderbuffer=new dt(this),this.bindTexture=new ft(this),this.bindVertexBuffer=new mt(this),this.bindElementBuffer=new yt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gt(this),this.pixelStoreUnpack=new bt(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new _t(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")};At.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},At.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},At.prototype.createIndexBuffer=function(t,e){return new B(this,t,e)},At.prototype.createVertexBuffer=function(t,e,i){return new U(this,t,e,i)},At.prototype.createRenderbuffer=function(t,e,i){var r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),n},At.prototype.createFramebuffer=function(t,e,i){return new Tt(this,t,e,i)},At.prototype.clear=function(t){var e=t.color,i=t.depth,r=this.gl,n=0;e&&(n|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(n|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),r.clear(n)},At.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},At.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},At.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},At.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,kt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},At.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ot=function(e){function i(i,r,n){var a=this;e.call(this),this.id=i,this.dispatcher=n,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))})),this.on("error",(function(){a._sourceErrored=!0})),this._source=function(e,i,r,n){var a=new L[i.type](e,i,r,n);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return t.bindAll(["load","abort","unload","serialize","prepare"],a),a}(i,r,n,this),this._tiles={},this._cache=new z(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},i.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},i.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},i.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}},i.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(Dt).map((function(t){return t.key}))},i.prototype.getRenderableIds=function(e){var i=this,r=[];for(var n in this._tiles)this._isIdRenderable(n,e)&&r.push(this._tiles[n]);return e?r.sort((function(e,r){var n=e.tileID,a=r.tileID,o=new t.Point(n.canonical.x,n.canonical.y)._rotate(i.transform.angle),s=new t.Point(a.canonical.x,a.canonical.y)._rotate(i.transform.angle);return n.overscaledZ-a.overscaledZ||s.y-o.y||s.x-o.x})).map((function(t){return t.tileID.key})):r.map((function(t){return t.tileID})).sort(Dt).map((function(t){return t.key}))},i.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},i.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},i.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},i.prototype._tileLoaded=function(e,i,r,n){if(n)return e.state="errored",void(404!==n.status?this._source.fire(new t.ErrorEvent(n,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},i.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var r=e[i];if(t.neighboringTiles&&t.neighboringTiles[r]){var n=this.getTileByID(r);a(t,n),a(n,t)}}function a(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,r),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}},i.prototype.getTile=function(t){return this.getTileByID(t.key)},i.prototype.getTileByID=function(t){return this._tiles[t]},i.prototype._retainLoadedChildren=function(t,e,i,r){for(var n in this._tiles){var a=this._tiles[n];if(!(r[n]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>i)){for(var o=a.tileID;a&&a.tileID.overscaledZ>e+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var l=o;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){r[o.key]=o;break}}}},i.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(var r=t.overscaledZ-1;r>=e;r--){var n=t.scaledTo(r),a=this._getLoadedTile(n);if(a)return a}},i.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},i.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*i*5),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(n)},i.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var i={};for(var r in this._tiles){var n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),i[n.tileID.key]=n}for(var a in this._tiles=i,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var o in this._tiles)this._setTileReloadTimer(o,this._tiles[o])}},i.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var n;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(n=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter((function(t){return r._source.hasTile(t)})))):n=[];var a=e.coveringZoomLevel(this._source),o=Math.max(a-i.maxOverzooming,this._source.minzoom),s=Math.max(a+i.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(n,a);if(Ft(this._source.type)){for(var u={},c={},h=0,p=Object.keys(l);h<p.length;h+=1){var d=p[h],f=l[d],m=this._tiles[d];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=t.browser.now())){var y=this.findLoadedParent(f,o);y&&(this._addTile(y.tileID),u[y.tileID.key]=y.tileID),c[d]=f}}for(var g in this._retainLoadedChildren(c,a,s,l),u)l[g]||(this._coveredTiles[g]=!0,l[g]=u[g])}for(var b in l)this._tiles[b].clearFadeHold();for(var v=0,_=t.keysDifference(this._tiles,l);v<_.length;v+=1){var x=_[v],S=this._tiles[x];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},i.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},i.prototype._updateRetainedTiles=function(t,e){for(var r={},n={},a=Math.max(e-i.maxOverzooming,this._source.minzoom),o=Math.max(e+i.maxUnderzooming,this._source.minzoom),s={},l=0,u=t;l<u.length;l+=1){var c=u[l],h=this._addTile(c);r[c.key]=c,h.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,o,r);for(var p=0,d=t;p<d.length;p+=1){var f=d[p],m=this._tiles[f.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var y=f.children(this._source.maxzoom)[0],g=this.getTile(y);if(g&&g.hasData()){r[y.key]=y;continue}}else{var b=f.children(this._source.maxzoom);if(r[b[0].key]&&r[b[1].key]&&r[b[2].key]&&r[b[3].key])continue}for(var v=m.wasRequested(),_=f.overscaledZ-1;_>=a;--_){var x=f.scaledTo(_);if(n[x.key])break;if(n[x.key]=!0,!(m=this.getTile(x))&&v&&(m=this._addTile(x)),m&&(r[x.key]=x,v=m.wasRequested(),m.hasData()))break}}}return r},i.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],i=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}e.push(r.key);var n=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(n))break;r=n}for(var a=0,o=e;a<o.length;a+=1)this._loadedParentTiles[o[a]]=i}},i.prototype._addTile=function(e){var i=this._tiles[e.key];if(i)return i;(i=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));var r=Boolean(i);return r||(i=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i?(i.uses++,this._tiles[e.key]=i,r||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((function(){i._reloadTile(t,"expired"),delete i._timers[t]}),r))},i.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},i.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},i.prototype.tilesIn=function(e,i,r){var n=this,a=[],o=this.transform;if(!o)return a;for(var s=r?o.getCameraQueryGeometry(e):e,l=e.map((function(t){return o.pointCoordinate(t)})),u=s.map((function(t){return o.pointCoordinate(t)})),c=this.getIds(),h=1/0,p=1/0,d=-1/0,f=-1/0,m=0,y=u;m<y.length;m+=1){var g=y[m];h=Math.min(h,g.x),p=Math.min(p,g.y),d=Math.max(d,g.x),f=Math.max(f,g.y)}for(var b=function(e){var r=n._tiles[c[e]];if(!r.holdingForFade()){var s=r.tileID,m=Math.pow(2,o.zoom-r.tileID.overscaledZ),y=i*r.queryPadding*t.EXTENT/r.tileSize/m,g=[s.getTilePoint(new t.MercatorCoordinate(h,p)),s.getTilePoint(new t.MercatorCoordinate(d,f))];if(g[0].x-y<t.EXTENT&&g[0].y-y<t.EXTENT&&g[1].x+y>=0&&g[1].y+y>=0){var b=l.map((function(t){return s.getTilePoint(t)})),v=u.map((function(t){return s.getTilePoint(t)}));a.push({tile:r,tileID:s,queryGeometry:b,cameraQueryGeometry:v,scale:m})}}},v=0;v<c.length;v++)b(v);return a},i.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),r=0,n=i;r<n.length;r+=1){var a=n[r];a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ft(this._source.type))for(var e in this._tiles){var i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.browser.now())return!0}return!1},i.prototype.setFeatureState=function(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)},i.prototype.removeFeatureState=function(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)},i.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},i.prototype.setDependencies=function(t,e,i){var r=this._tiles[t];r&&r.setDependencies(e,i)},i.prototype.reloadTilesForDependencies=function(t,e){for(var i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter((function(i){return!i.hasDependency(t,e)}))},i}(t.Evented);function Dt(t,e){var i=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Ft(t){return"raster"===t||"image"===t||"video"===t}function Mt(){return new t.window.Worker(Yn.workerUrl)}Ot.maxOverzooming=10,Ot.maxUnderzooming=3;var Et="mapboxgl_preloaded_worker_pool",Lt=function(){this.active={}};Lt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Lt.workerCount;)this.workers.push(new Mt);return this.active[t]=!0,this.workers.slice()},Lt.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},Lt.prototype.isPreloaded=function(){return!!this.active[Et]},Lt.prototype.numActive=function(){return Object.keys(this.active).length};var Rt,Vt=Math.floor(t.browser.hardwareConcurrency/2);function jt(){return Rt||(Rt=new Lt),Rt}function zt(e,i){var r={};for(var n in e)"ref"!==n&&(r[n]=e[n]);return t.refProperties.forEach((function(t){t in i&&(r[t]=i[t])})),r}function Bt(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=zt(t[r],e[t[r].ref]));return t}Lt.workerCount=Math.max(Math.min(Vt,6),1);var Nt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ut(t,e,i){i.push({command:Nt.addSource,args:[t,e[t]]})}function Xt(t,e,i){e.push({command:Nt.removeSource,args:[t]}),i[t]=!0}function Ht(t,e,i,r){Xt(t,i,r),Ut(t,e,i)}function Wt(e,i,r){var n;for(n in e[r])if(e[r].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[r][n],i[r][n]))return!1;for(n in i[r])if(i[r].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[r][n],i[r][n]))return!1;return!0}function Yt(e,i,r,n,a,o){var s;for(s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||r.push({command:o,args:[n,s,i[s],a]}));for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||r.push({command:o,args:[n,s,i[s],a]}))}function Gt(t){return t.id}function qt(t,e){return t[e.id]=e,t}var Kt=function(t,e){this.reset(t,e)};Kt.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kt.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var i=1,r=this._distances[i],n=e*this.paddedLength+this.padding;r<n&&i<this._distances.length;)r=this._distances[++i];var a=i-1,o=this._distances[a],s=r-o,l=s>0?(n-o)/s:0;return this.points[a].mult(1-l).add(this.points[i].mult(l))};var Zt=function(t,e,i){var r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var a=0;a<this.xCellCount*this.yCellCount;a++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Jt(e,i,r,n,a){var o=t.create();return i?(t.scale(o,o,[1/a,1/a,1]),r||t.rotateZ(o,o,n.angle)):t.multiply(o,n.labelPlaneMatrix,e),o}function $t(e,i,r,n,a){if(i){var o=t.clone(e);return t.scale(o,o,[a,a,1]),r||t.rotateZ(o,o,-n.angle),o}return n.glCoordMatrix}function Qt(e,i){var r=[e.x,e.y,0,1];ce(r,r,i);var n=r[3];return{point:new t.Point(r[0]/n,r[1]/n),signedDistanceFromCamera:n}}function te(t,e){return.5+t/e*.5}function ee(t,e){var i=t[0]/t[3],r=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&r>=-e[1]&&r<=e[1]}function ie(e,i,r,n,a,o,s,l){var u=n?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(u,r.transform.zoom),h=[256/r.width*2+1,256/r.height*2+1],p=n?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var d=e.lineVertexArray,f=n?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=r.transform.width/r.transform.height,y=!1,g=0;g<f.length;g++){var b=f.get(g);if(b.hidden||b.writingMode===t.WritingMode.vertical&&!y)ue(b.numGlyphs,p);else{y=!1;var v=[b.anchorX,b.anchorY,0,1];if(t.transformMat4(v,v,i),ee(v,h)){var _=te(r.transform.cameraToCenterDistance,v[3]),x=t.evaluateSizeForFeature(u,c,b),S=s?x/_:x*_,w=new t.Point(b.anchorX,b.anchorY),T=Qt(w,a).point,P={},C=ae(b,S,!1,l,i,a,o,e.glyphOffsetArray,d,p,T,w,P,m);y=C.useVertical,(C.notEnoughRoom||y||C.needsFlipping&&ae(b,S,!0,l,i,a,o,e.glyphOffsetArray,d,p,T,w,P,m).notEnoughRoom)&&ue(b.numGlyphs,p)}else ue(b.numGlyphs,p)}}n?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function re(t,e,i,r,n,a,o,s,l,u,c){var h=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,f=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(h-1),y=se(t*f,i,r,n,a,o,s.segment,p,d,l,u,c);if(!y)return null;var g=se(t*m,i,r,n,a,o,s.segment,p,d,l,u,c);return g?{first:y,last:g}:null}function ne(e,i,r,n){return e===t.WritingMode.horizontal&&Math.abs(r.y-i.y)>Math.abs(r.x-i.x)*n?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<r.y:i.x>r.x)?{needsFlipping:!0}:null}function ae(e,i,r,n,a,o,s,l,u,c,h,p,d,f){var m,y=i/24,g=e.lineOffsetX*y,b=e.lineOffsetY*y;if(e.numGlyphs>1){var v=e.glyphStartIndex+e.numGlyphs,_=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,S=re(y,l,g,b,r,h,p,e,u,o,d);if(!S)return{notEnoughRoom:!0};var w=Qt(S.first.point,s).point,T=Qt(S.last.point,s).point;if(n&&!r){var P=ne(e.writingMode,w,T,f);if(P)return P}m=[S.first];for(var C=e.glyphStartIndex+1;C<v-1;C++)m.push(se(y*l.getoffsetX(C),g,b,r,h,p,e.segment,_,x,u,o,d));m.push(S.last)}else{if(n&&!r){var k=Qt(p,a).point,I=e.lineStartIndex+e.segment+1,A=new t.Point(u.getx(I),u.gety(I)),O=Qt(A,a),D=O.signedDistanceFromCamera>0?O.point:oe(p,A,k,1,a),F=ne(e.writingMode,k,D,f);if(F)return F}var M=se(y*l.getoffsetX(e.glyphStartIndex),g,b,r,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,o,d);if(!M)return{notEnoughRoom:!0};m=[M]}for(var E=0,L=m;E<L.length;E+=1){var R=L[E];t.addDynamicAttributes(c,R.point,R.angle)}return{}}function oe(t,e,i,r,n){var a=Qt(t.add(t.sub(e)._unit()),n).point,o=i.sub(a);return i.add(o._mult(r/o.mag()))}function se(e,i,r,n,a,o,s,l,u,c,h,p){var d=n?e-i:e+i,f=d>0?1:-1,m=0;n&&(f*=-1,m=Math.PI),f<0&&(m+=Math.PI);for(var y=f>0?l+s:l+s+1,g=a,b=a,v=0,_=0,x=Math.abs(d),S=[];v+_<=x;){if((y+=f)<l||y>=u)return null;if(b=g,S.push(g),void 0===(g=p[y])){var w=new t.Point(c.getx(y),c.gety(y)),T=Qt(w,h);if(T.signedDistanceFromCamera>0)g=p[y]=T.point;else{var P=y-f;g=oe(0===v?o:new t.Point(c.getx(P),c.gety(P)),w,b,x-v+1,h)}}v+=_,_=b.dist(g)}var C=(x-v)/_,k=g.sub(b),I=k.mult(C)._add(b);I._add(k._unit()._perp()._mult(r*f));var A=m+Math.atan2(g.y-b.y,g.x-b.x);return S.push(I),{point:I,angle:A,path:S}}Zt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Zt.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Zt.prototype.insertCircle=function(t,e,i,r){this._forEachCell(e-r,i-r,e+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(r)},Zt.prototype._insertBoxCell=function(t,e,i,r,n,a){this.boxCells[n].push(a)},Zt.prototype._insertCircleCell=function(t,e,i,r,n,a){this.circleCells[n].push(a)},Zt.prototype._query=function(t,e,i,r,n,a){if(i<0||t>this.width||r<0||e>this.height)return!n&&[];var o=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=r){if(n)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];o.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return a?o.filter(a):o}return this._forEachCell(t,e,i,r,this._queryCell,o,{hitTest:n,seenUids:{box:{},circle:{}}},a),n?o.length>0:o},Zt.prototype._queryCircle=function(t,e,i,r,n){var a=t-i,o=t+i,s=e-i,l=e+i;if(o<0||a>this.width||l<0||s>this.height)return!r&&[];var u=[];return this._forEachCell(a,s,o,l,this._queryCellCircle,u,{hitTest:r,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},n),r?u.length>0:u},Zt.prototype.query=function(t,e,i,r,n){return this._query(t,e,i,r,!1,n)},Zt.prototype.hitTest=function(t,e,i,r,n){return this._query(t,e,i,r,!0,n)},Zt.prototype.hitTestCircle=function(t,e,i,r){return this._queryCircle(t,e,i,!0,r)},Zt.prototype._queryCell=function(t,e,i,r,n,a,o,s){var l=o.seenUids,u=this.boxCells[n];if(null!==u)for(var c=this.bboxes,h=0,p=u;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var f=4*d;if(t<=c[f+2]&&e<=c[f+3]&&i>=c[f+0]&&r>=c[f+1]&&(!s||s(this.boxKeys[d]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var m=this.circleCells[n];if(null!==m)for(var y=this.circles,g=0,b=m;g<b.length;g+=1){var v=b[g];if(!l.circle[v]){l.circle[v]=!0;var _=3*v;if(this._circleAndRectCollide(y[_],y[_+1],y[_+2],t,e,i,r)&&(!s||s(this.circleKeys[v]))){if(o.hitTest)return a.push(!0),!0;var x=y[_],S=y[_+1],w=y[_+2];a.push({key:this.circleKeys[v],x1:x-w,y1:S-w,x2:x+w,y2:S+w})}}}},Zt.prototype._queryCellCircle=function(t,e,i,r,n,a,o,s){var l=o.circle,u=o.seenUids,c=this.boxCells[n];if(null!==c)for(var h=this.bboxes,p=0,d=c;p<d.length;p+=1){var f=d[p];if(!u.box[f]){u.box[f]=!0;var m=4*f;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[m+0],h[m+1],h[m+2],h[m+3])&&(!s||s(this.boxKeys[f])))return a.push(!0),!0}}var y=this.circleCells[n];if(null!==y)for(var g=this.circles,b=0,v=y;b<v.length;b+=1){var _=v[b];if(!u.circle[_]){u.circle[_]=!0;var x=3*_;if(this._circlesCollide(g[x],g[x+1],g[x+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[_])))return a.push(!0),!0}}},Zt.prototype._forEachCell=function(t,e,i,r,n,a,o,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(i),h=this._convertToYCellCoord(r),p=l;p<=c;p++)for(var d=u;d<=h;d++)if(n.call(this,t,e,i,r,this.xCellCount*d+p,a,o,s))return},Zt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Zt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Zt.prototype._circlesCollide=function(t,e,i,r,n,a){var o=r-t,s=n-e,l=i+a;return l*l>o*o+s*s},Zt.prototype._circleAndRectCollide=function(t,e,i,r,n,a,o){var s=(a-r)/2,l=Math.abs(t-(r+s));if(l>s+i)return!1;var u=(o-n)/2,c=Math.abs(e-(n+u));if(c>u+i)return!1;if(l<=s||c<=u)return!0;var h=l-s,p=c-u;return h*h+p*p<=i*i};var le=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ue(t,e){for(var i=0;i<t;i++){var r=e.length;e.resize(r+4),e.float32.set(le,3*r)}}function ce(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t[3]=i[3]*r+i[7]*n+i[15],t}var he=function(t,e,i){void 0===e&&(e=new Zt(t.width+200,t.height+200,25)),void 0===i&&(i=new Zt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function pe(e,i,r){return i*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}he.prototype.placeCollisionBox=function(t,e,i,r,n){var a=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),o=i*a.perspectiveRatio,s=t.x1*o+a.point.x,l=t.y1*o+a.point.y,u=t.x2*o+a.point.x,c=t.y2*o+a.point.y;return!this.isInsideGrid(s,l,u,c)||!e&&this.grid.hitTest(s,l,u,c,n)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},he.prototype.placeCollisionCircles=function(e,i,r,n,a,o,s,l,u,c,h,p,d){var f=[],m=new t.Point(i.anchorX,i.anchorY),y=Qt(m,o),g=te(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),b=(c?a/g:a*g)/t.ONE_EM,v=Qt(m,s).point,_=re(b,n,i.lineOffsetX*b,i.lineOffsetY*b,!1,v,m,i,r,s,{}),x=!1,S=!1,w=!0;if(_){for(var T=.5*p*g+d,P=new t.Point(-100,-100),C=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),k=new Kt,I=_.first,A=_.last,O=[],D=I.path.length-1;D>=1;D--)O.push(I.path[D]);for(var F=1;F<A.path.length;F++)O.push(A.path[F]);var M=2.5*T;if(l){var E=O.map((function(t){return Qt(t,l)}));O=E.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:E.map((function(t){return t.point}))}var L=[];if(O.length>0){for(var R=O[0].clone(),V=O[0].clone(),j=1;j<O.length;j++)R.x=Math.min(R.x,O[j].x),R.y=Math.min(R.y,O[j].y),V.x=Math.max(V.x,O[j].x),V.y=Math.max(V.y,O[j].y);L=R.x>=P.x&&V.x<=C.x&&R.y>=P.y&&V.y<=C.y?[O]:V.x<P.x||R.x>C.x||V.y<P.y||R.y>C.y?[]:t.clipLine([O],P.x,P.y,C.x,C.y)}for(var z=0,B=L;z<B.length;z+=1){var N;k.reset(B[z],.25*T),N=k.length<=.5*T?1:Math.ceil(k.paddedLength/M)+1;for(var U=0;U<N;U++){var X=U/Math.max(N-1,1),H=k.lerp(X),W=H.x+100,Y=H.y+100;f.push(W,Y,T,0);var G=W-T,q=Y-T,K=W+T,Z=Y+T;if(w=w&&this.isOffscreen(G,q,K,Z),S=S||this.isInsideGrid(G,q,K,Z),!e&&this.grid.hitTestCircle(W,Y,T,h)&&(x=!0,!u))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!u&&x||!S?[]:f,offscreen:w,collisionDetected:x}},he.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],r=1/0,n=1/0,a=-1/0,o=-1/0,s=0,l=e;s<l.length;s+=1){var u=l[s],c=new t.Point(u.x+100,u.y+100);r=Math.min(r,c.x),n=Math.min(n,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y),i.push(c)}for(var h={},p={},d=0,f=this.grid.query(r,n,a,o).concat(this.ignoredGrid.query(r,n,a,o));d<f.length;d+=1){var m=f[d],y=m.key;if(void 0===h[y.bucketInstanceId]&&(h[y.bucketInstanceId]={}),!h[y.bucketInstanceId][y.featureIndex]){var g=[new t.Point(m.x1,m.y1),new t.Point(m.x2,m.y1),new t.Point(m.x2,m.y2),new t.Point(m.x1,m.y2)];t.polygonIntersectsPolygon(i,g)&&(h[y.bucketInstanceId][y.featureIndex]=!0,void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]=[]),p[y.bucketInstanceId].push(y.featureIndex))}}return p},he.prototype.insertCollisionBox=function(t,e,i,r,n){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:n},t[0],t[1],t[2],t[3])},he.prototype.insertCollisionCircles=function(t,e,i,r,n){for(var a=e?this.ignoredGrid:this.grid,o={bucketInstanceId:i,featureIndex:r,collisionGroupID:n},s=0;s<t.length;s+=4)a.insertCircle(o,t[s],t[s+1],t[s+2])},he.prototype.projectAndGetPerspectiveRatio=function(e,i,r){var n=[i,r,0,1];return ce(n,n,e),{point:new t.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}},he.prototype.isOffscreen=function(t,e,i,r){return i<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},he.prototype.isInsideGrid=function(t,e,i,r){return i>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary},he.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var de=function(t,e,i,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&i?1:0,this.placed=i};de.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var fe=function(t,e,i,r,n){this.text=new de(t?t.text:null,e,i,n),this.icon=new de(t?t.icon:null,e,r,n)};fe.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var me=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},ye=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},ge=function(t,e,i,r,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n},be=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function ve(e,i,r,n,a){var o=t.getAnchorAlignment(e),s=-(o.horizontalAlign-.5)*i,l=-(o.verticalAlign-.5)*r,u=t.evaluateVariableOffset(e,n);return new t.Point(s+u[0]*a,l+u[1]*a)}function _e(e,i,r,n,a,o){var s=e.x1,l=e.x2,u=e.y1,c=e.y2,h=e.anchorPointX,p=e.anchorPointY,d=new t.Point(i,r);return n&&d._rotate(a?o:-o),{x1:s+d.x,y1:u+d.y,x2:l+d.x,y2:c+d.y,anchorPointX:h,anchorPointY:p}}be.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var xe=function(t,e,i,r){this.transform=t.clone(),this.collisionIndex=new he(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new be(i),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};function Se(t,e,i,r,n){t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0)}xe.prototype.getBucketParts=function(e,i,r,n){var a=r.getBucket(i),o=r.latestFeatureIndex;if(a&&o&&i.id===a.layerIds[0]){var s=r.collisionBoxArray,l=a.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p="map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),f=pe(r,1,this.transform.zoom),m=Jt(h,p,d,this.transform,f),y=null;if(p){var g=$t(h,p,d,this.transform,f);y=t.multiply([],this.transform.labelPlaneMatrix,g)}this.retainedQueryData[a.bucketInstanceId]=new ge(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,r.tileID);var b={bucket:a,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:y,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(n)for(var v=0,_=a.sortKeyRanges;v<_.length;v+=1){var x=_[v];e.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:b})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:b})}},xe.prototype.attemptAnchorPlacement=function(t,e,i,r,n,a,o,s,l,u,c,h,p,d,f){var m,y=[h.textOffset0,h.textOffset1],g=ve(t,i,r,y,n),b=this.collisionIndex.placeCollisionBox(_e(e,g.x,g.y,a,o,this.transform.angle),c,s,l,u.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(_e(f,g.x,g.y,a,o,this.transform.angle),c,s,l,u.predicate).box.length)return b.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(m=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:y,width:i,height:r,anchor:t,textBoxScale:n,prevAnchor:m},this.markUsedJustification(p,t,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:g,placedGlyphBoxes:b}):void 0},xe.prototype.placeLayerBucketPart=function(e,i,r){var n=this,a=e.parameters,o=a.bucket,s=a.layout,l=a.posMatrix,u=a.textLabelPlaneMatrix,c=a.labelToScreenMatrix,h=a.textPixelRatio,p=a.holdingForFade,d=a.collisionBoxArray,f=a.partiallyEvaluatedTextSize,m=a.collisionGroup,y=s.get("text-optional"),g=s.get("icon-optional"),b=s.get("text-allow-overlap"),v=s.get("icon-allow-overlap"),_="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),S="none"!==s.get("icon-text-fit"),w="viewport-y"===s.get("symbol-z-order"),T=b&&(v||!o.hasIconData()||g),P=v&&(b||!o.hasTextData()||y);!o.collisionArrays&&d&&o.deserializeCollisionBoxes(d);var C=function(e,a){if(!i[e.crossTileID])if(p)n.placements[e.crossTileID]=new me(!1,!1,!1);else{var d,w=!1,C=!1,k=!0,I=null,A={box:null,offscreen:null},O={box:null,offscreen:null},D=null,F=null,M=0,E=0,L=0;a.textFeatureIndex?M=a.textFeatureIndex:e.useRuntimeCollisionCircles&&(M=e.featureIndex),a.verticalTextFeatureIndex&&(E=a.verticalTextFeatureIndex);var R=a.textBox;if(R){var V=function(i){var r=t.WritingMode.horizontal;if(o.allowVerticalPlacement&&!i&&n.prevPlacement){var a=n.prevPlacement.placedOrientations[e.crossTileID];a&&(n.placedOrientations[e.crossTileID]=a,n.markUsedOrientation(o,r=a,e))}return r},j=function(i,r){if(o.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&a.verticalTextBox)for(var n=0,s=o.writingModes;n<s.length&&(s[n]===t.WritingMode.vertical?(A=r(),O=A):A=i(),!(A&&A.box&&A.box.length));n+=1);else A=i()};if(s.get("text-variable-anchor")){var z=s.get("text-variable-anchor");if(n.prevPlacement&&n.prevPlacement.variableOffsets[e.crossTileID]){var B=n.prevPlacement.variableOffsets[e.crossTileID];z.indexOf(B.anchor)>0&&(z=z.filter((function(t){return t!==B.anchor}))).unshift(B.anchor)}var N=function(t,i,r){for(var a=t.x2-t.x1,s=t.y2-t.y1,u=e.textBoxScale,c=S&&!v?i:null,p={box:[],offscreen:!1},d=b?2*z.length:z.length,f=0;f<d;++f){var y=n.attemptAnchorPlacement(z[f%z.length],t,a,s,u,_,x,h,l,m,f>=z.length,e,o,r,c);if(y&&(p=y.placedGlyphBoxes)&&p.box&&p.box.length){w=!0,I=y.shift;break}}return p};j((function(){return N(R,a.iconBox,t.WritingMode.horizontal)}),(function(){var i=a.verticalTextBox;return o.allowVerticalPlacement&&!(A&&A.box&&A.box.length)&&e.numVerticalGlyphVertices>0&&i?N(i,a.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),A&&(w=A.box,k=A.offscreen);var U=V(A&&A.box);if(!w&&n.prevPlacement){var X=n.prevPlacement.variableOffsets[e.crossTileID];X&&(n.variableOffsets[e.crossTileID]=X,n.markUsedJustification(o,X.anchor,e,U))}}else{var H=function(t,i){var r=n.collisionIndex.placeCollisionBox(t,b,h,l,m.predicate);return r&&r.box&&r.box.length&&(n.markUsedOrientation(o,i,e),n.placedOrientations[e.crossTileID]=i),r};j((function(){return H(R,t.WritingMode.horizontal)}),(function(){var i=a.verticalTextBox;return o.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?H(i,t.WritingMode.vertical):{box:null,offscreen:null}})),V(A&&A.box&&A.box.length)}}if(w=(d=A)&&d.box&&d.box.length>0,k=d&&d.offscreen,e.useRuntimeCollisionCircles){var W=o.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),Y=t.evaluateSizeForFeature(o.textSizeData,f,W),G=s.get("text-padding");D=n.collisionIndex.placeCollisionCircles(b,W,o.lineVertexArray,o.glyphOffsetArray,Y,l,u,c,r,x,m.predicate,e.collisionCircleDiameter,G),w=b||D.circles.length>0&&!D.collisionDetected,k=k&&D.offscreen}if(a.iconFeatureIndex&&(L=a.iconFeatureIndex),a.iconBox){var q=function(t){var e=S&&I?_e(t,I.x,I.y,_,x,n.transform.angle):t;return n.collisionIndex.placeCollisionBox(e,v,h,l,m.predicate)};C=O&&O.box&&O.box.length&&a.verticalIconBox?(F=q(a.verticalIconBox)).box.length>0:(F=q(a.iconBox)).box.length>0,k=k&&F.offscreen}var K=y||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,Z=g||0===e.numIconVertices;if(K||Z?Z?K||(C=C&&w):w=C&&w:C=w=C&&w,w&&d&&d.box&&n.collisionIndex.insertCollisionBox(d.box,s.get("text-ignore-placement"),o.bucketInstanceId,O&&O.box&&E?E:M,m.ID),C&&F&&n.collisionIndex.insertCollisionBox(F.box,s.get("icon-ignore-placement"),o.bucketInstanceId,L,m.ID),D&&(w&&n.collisionIndex.insertCollisionCircles(D.circles,s.get("text-ignore-placement"),o.bucketInstanceId,M,m.ID),r)){var J=o.bucketInstanceId,$=n.collisionCircleArrays[J];void 0===$&&($=n.collisionCircleArrays[J]=new ye);for(var Q=0;Q<D.circles.length;Q+=4)$.circles.push(D.circles[Q+0]),$.circles.push(D.circles[Q+1]),$.circles.push(D.circles[Q+2]),$.circles.push(D.collisionDetected?1:0)}n.placements[e.crossTileID]=new me(w||T,C||P,k||o.justReloaded),i[e.crossTileID]=!0}};if(w)for(var k=o.getSortedSymbolIndexes(this.transform.angle),I=k.length-1;I>=0;--I){var A=k[I];C(o.symbolInstances.get(A),o.collisionArrays[A])}else for(var O=e.symbolInstanceStart;O<e.symbolInstanceEnd;O++)C(o.symbolInstances.get(O),o.collisionArrays[O]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){var D=this.collisionCircleArrays[o.bucketInstanceId];t.invert(D.invProjMatrix,l),D.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1},xe.prototype.markUsedJustification=function(e,i,r,n){var a;a=n===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(i)];for(var o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];o<s.length;o+=1){var l=s[o];l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=a>=0&&l!==a?0:r.crossTileID)}},xe.prototype.markUsedOrientation=function(e,i,r){for(var n=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,a=i===t.WritingMode.vertical?i:0,o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];o<s.length;o+=1)e.text.placedSymbolArray.get(s[o]).placedOrientation=n;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=a)},xe.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},a=e?e.variableOffsets:{},o=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=n[s];u?(this.opacities[s]=new fe(u,r,l.text,l.icon),i=i||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new fe(null,r,l.text,l.icon,l.skipFade),i=i||l.text||l.icon)}for(var c in n){var h=n[c];if(!this.opacities[c]){var p=new fe(h,r,!1,!1);p.isHidden()||(this.opacities[c]=p,i=i||h.text.placed||h.icon.placed)}}for(var d in a)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=a[d]);for(var f in o)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=o[f]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},xe.prototype.updateLayerOpacities=function(t,e){for(var i={},r=0,n=e;r<n.length;r+=1){var a=n[r],o=a.getBucket(t);o&&a.latestFeatureIndex&&t.id===o.layerIds[0]&&this.updateBucketOpacities(o,i,a.collisionBoxArray)}},xe.prototype.updateBucketOpacities=function(e,i,r){var n=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var a=e.layers[0].layout,o=new fe(null,0,!1,!1,!0),s=a.get("text-allow-overlap"),l=a.get("icon-allow-overlap"),u=a.get("text-variable-anchor"),c="map"===a.get("text-rotation-alignment"),h="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),d=new fe(null,0,s&&(l||!e.hasIconData()||a.get("icon-optional")),l&&(s||!e.hasTextData()||a.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);for(var f=function(t,e,i){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(i)},m=function(r){var a=e.symbolInstances.get(r),s=a.numHorizontalGlyphVertices,l=a.numVerticalGlyphVertices,m=a.crossTileID,y=n.opacities[m];i[m]?y=o:y||(n.opacities[m]=y=d),i[m]=!0;var g=a.numIconVertices>0,b=n.placedOrientations[a.crossTileID],v=b===t.WritingMode.vertical,_=b===t.WritingMode.horizontal||b===t.WritingMode.horizontalOnly;if(s>0||l>0){var x=Oe(y.text);f(e.text,s,v?De:x),f(e.text,l,_?De:x);var S=y.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=S||v?1:0)})),a.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=S||_?1:0);var w=n.variableOffsets[a.crossTileID];w&&n.markUsedJustification(e,w.anchor,a,b);var T=n.placedOrientations[a.crossTileID];T&&(n.markUsedJustification(e,"left",a,T),n.markUsedOrientation(e,T,a))}if(g){var P=Oe(y.icon),C=!(p&&a.verticalPlacedIconSymbolIndex&&v);a.placedIconSymbolIndex>=0&&(f(e.icon,a.numIconVertices,C?P:De),e.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=y.icon.isHidden()),a.verticalPlacedIconSymbolIndex>=0&&(f(e.icon,a.numVerticalIconVertices,C?De:P),e.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var k=e.collisionArrays[r];if(k){var I=new t.Point(0,0);if(k.textBox||k.verticalTextBox){var A=!0;if(u){var O=n.variableOffsets[m];O?(I=ve(O.anchor,O.width,O.height,O.textOffset,O.textBoxScale),c&&I._rotate(h?n.transform.angle:-n.transform.angle)):A=!1}k.textBox&&Se(e.textCollisionBox.collisionVertexArray,y.text.placed,!A||v,I.x,I.y),k.verticalTextBox&&Se(e.textCollisionBox.collisionVertexArray,y.text.placed,!A||_,I.x,I.y)}var D=Boolean(!_&&k.verticalIconBox);k.iconBox&&Se(e.iconCollisionBox.collisionVertexArray,y.icon.placed,D,p?I.x:0,p?I.y:0),k.verticalIconBox&&Se(e.iconCollisionBox.collisionVertexArray,y.icon.placed,!D,p?I.x:0,p?I.y:0)}}},y=0;y<e.symbolInstances.length;y++)m(y);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var g=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=g.invProjMatrix,e.placementViewportMatrix=g.viewportMatrix,e.collisionCircleArray=g.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},xe.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xe.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},xe.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},xe.prototype.stillRecent=function(t,e){var i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t},xe.prototype.setStale=function(){this.stale=!0};var we=Math.pow(2,25),Te=Math.pow(2,24),Pe=Math.pow(2,17),Ce=Math.pow(2,16),ke=Math.pow(2,9),Ie=Math.pow(2,8),Ae=Math.pow(2,1);function Oe(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*we+e*Te+i*Pe+e*Ce+i*ke+e*Ie+i*Ae+e}var De=0,Fe=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Fe.prototype.continuePlacement=function(t,e,i,r,n){for(var a=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(a,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<a.length;)if(e.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1};var Me=function(t,e,i,r,n,a,o){this.placement=new xe(t,n,a,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1};Me.prototype.isDone=function(){return this._done},Me.prototype.continuePlacement=function(e,i,r){for(var n=this,a=t.browser.now(),o=function(){var e=t.browser.now()-a;return!n._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=i[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Fe(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Me.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Ee=512/t.EXTENT/2,Le=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var r=0;r<e.length;r++){var n=e.get(r),a=n.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}};Le.prototype.getScaledCoordinates=function(e,i){var r=Ee/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*r)}},Le.prototype.findMatches=function(t,e,i){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),n=0;n<t.length;n++){var a=t.get(n);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o)for(var s=this.getScaledCoordinates(a,e),l=0,u=o;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!i[c.crossTileID]){i[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}}};var Re=function(){this.maxCrossTileID=0};Re.prototype.generate=function(){return++this.maxCrossTileID};var Ve=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ve.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var r=this.indexes[i],n={};for(var a in r){var o=r[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+e),n[o.tileID.key]=o}this.indexes[i]=n}this.lng=t},Ve.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var n=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>t.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,n)}else{var u=o[t.scaledTo(Number(a)).key];u&&u.findMatches(e.symbolInstances,t,n)}}for(var c=0;c<e.symbolInstances.length;c++){var h=e.symbolInstances.get(c);h.crossTileID||(h.crossTileID=i.generate(),n[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Le(t,e.symbolInstances,e.bucketInstanceId),!0},Ve.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var r=0,n=e.indexedSymbolInstances[i];r<n.length;r+=1)delete this.usedCrossTileIDs[t][n[r].crossTileID]},Ve.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var r=this.indexes[i];for(var n in r)t[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],e=!0)}return e};var je=function(){this.layerIndexes={},this.crossTileIDs=new Re,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};je.prototype.addLayer=function(t,e,i){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Ve);var n=!1,a={};r.handleWrapJump(i);for(var o=0,s=e;o<s.length;o+=1){var l=s[o],u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(l.tileID,u,this.crossTileIDs)&&(n=!0),a[u.bucketInstanceId]=!0)}return r.removeStaleBuckets(a)&&(n=!0),n},je.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var ze=function(e,i){return t.emitValidationErrors(e,i&&i.filter((function(t){return"source.canvas"!==t.identifier})))},Be=t.pick(Nt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ne=t.pick(Nt,["setCenter","setZoom","setBearing","setPitch"]),Ue=function(){var e={},i=t.styleSpec.$version;for(var r in t.styleSpec.$root){var n,a=t.styleSpec.$root[r];a.required&&null!=(n="version"===r?i:"array"===a.type?[]:{})&&(e[r]=n)}return e}(),Xe=function(e){function i(r,n){var a=this;void 0===n&&(n={}),e.call(this),this.map=r,this.dispatcher=new T(jt(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new v(r._requestManager,n.localIdeographFontFamily),this.lineAtlas=new w(256,512),this.crossTileSymbolIndex=new je,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var o=this;this._rtlTextPluginCallback=i.registerForPluginStateChange((function(e){o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,i){if(t.triggerPluginCompletionEvent(e),i&&i.every((function(t){return t})))for(var r in o.sourceCaches)o.sourceCaches[r].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=a.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var r in a._layers){var n=a._layers[r];n.source===i.id&&a._validateLayer(n)}}}}))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.loadURL=function(e,i){var r=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var n="boolean"==typeof i.validate?i.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,i.accessToken);var a=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(a,(function(e,i){r._request=null,e?r.fire(new t.ErrorEvent(e)):i&&r._load(i,n)}))},i.prototype.loadJSON=function(e,i){var r=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){r._request=null,r._load(e,!1!==i.validate)}))},i.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ue,!1)},i.prototype._load=function(e,i){if(!i||!ze(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var n=Bt(this.stylesheet.layers);this._order=n.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var a=0,o=n;a<o.length;a+=1){var s=o[a];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new S(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},i.prototype._loadSprite=function(e){var i=this;this._spriteRequest=function(e,i,r){var n,a,o,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){l=null,o||(o=t,n=e,c())})),u=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){u=null,o||(o=t,a=e,c())}));function c(){if(o)r(o);else if(n&&a){var e=t.browser.getImageData(a),i={};for(var s in n){var l=n[s],u=l.width,c=l.height,h=l.x,p=l.y,d=l.sdf,f=l.pixelRatio,m=l.stretchX,y=l.stretchY,g=l.content,b=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,b,{x:h,y:p},{x:0,y:0},{width:u,height:c}),i[s]={data:b,pixelRatio:f,sdf:d,stretchX:m,stretchY:y,content:g}}r(null,i)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,(function(e,r){if(i._spriteRequest=null,e)i.fire(new t.ErrorEvent(e));else if(r)for(var n in r)i.imageManager.addImage(n,r[n]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.fire(new t.Event("data",{dataType:"style"}))}))},i.prototype._validateLayer=function(e){var i=this.sourceCaches[e.source];if(i){var r=e.sourceLayer;if(r){var n=i.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+n.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(t){for(var e=[],i=0,r=t;i<r.length;i+=1){var n=this._layers[r[i]];"custom"!==n.type&&e.push(n.serialize())}return e},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){var i=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);for(var a in(r.length||n.length)&&this._updateWorkerLayers(r,n),this._updatedSources){var o=this._updatedSources[a];"reload"===o?this._reloadSource(a):"clear"===o&&this._clearSource(a)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var u=0,c=this._order;u<c.length;u+=1){var h=this._layers[c[u]];h.recalculate(e,this._availableImages),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}},i.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},i.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},i.prototype.setState=function(e){var i=this;if(this._checkLoaded(),ze(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Bt(e.layers);var r=function(e,i){if(!e)return[{command:Nt.setStyle,args:[i]}];var r=[];try{if(!t.deepEqual(e.version,i.version))return[{command:Nt.setStyle,args:[i]}];t.deepEqual(e.center,i.center)||r.push({command:Nt.setCenter,args:[i.center]}),t.deepEqual(e.zoom,i.zoom)||r.push({command:Nt.setZoom,args:[i.zoom]}),t.deepEqual(e.bearing,i.bearing)||r.push({command:Nt.setBearing,args:[i.bearing]}),t.deepEqual(e.pitch,i.pitch)||r.push({command:Nt.setPitch,args:[i.pitch]}),t.deepEqual(e.sprite,i.sprite)||r.push({command:Nt.setSprite,args:[i.sprite]}),t.deepEqual(e.glyphs,i.glyphs)||r.push({command:Nt.setGlyphs,args:[i.glyphs]}),t.deepEqual(e.transition,i.transition)||r.push({command:Nt.setTransition,args:[i.transition]}),t.deepEqual(e.light,i.light)||r.push({command:Nt.setLight,args:[i.light]});var n={},a=[];!function(e,i,r,n){var a;for(a in i=i||{},e=e||{})e.hasOwnProperty(a)&&(i.hasOwnProperty(a)||Xt(a,r,n));for(a in i)i.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t.deepEqual(e[a],i[a])||("geojson"===e[a].type&&"geojson"===i[a].type&&Wt(e,i,a)?r.push({command:Nt.setGeoJSONSourceData,args:[a,i[a].data]}):Ht(a,i,r,n)):Ut(a,i,r))}(e.sources,i.sources,a,n);var o=[];e.layers&&e.layers.forEach((function(t){n[t.source]?r.push({command:Nt.removeLayer,args:[t.id]}):o.push(t)})),r=r.concat(a),function(e,i,r){i=i||[];var n,a,o,s,l,u,c,h=(e=e||[]).map(Gt),p=i.map(Gt),d=e.reduce(qt,{}),f=i.reduce(qt,{}),m=h.slice(),y=Object.create(null);for(n=0,a=0;n<h.length;n++)f.hasOwnProperty(o=h[n])?a++:(r.push({command:Nt.removeLayer,args:[o]}),m.splice(m.indexOf(o,a),1));for(n=0,a=0;n<p.length;n++)m[m.length-1-n]!==(o=p[p.length-1-n])&&(d.hasOwnProperty(o)?(r.push({command:Nt.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-a),1)):a++,r.push({command:Nt.addLayer,args:[f[o],u=m[m.length-n]]}),m.splice(m.length-n,0,o),y[o]=!0);for(n=0;n<p.length;n++)if(s=d[o=p[n]],l=f[o],!y[o]&&!t.deepEqual(s,l))if(t.deepEqual(s.source,l.source)&&t.deepEqual(s["source-layer"],l["source-layer"])&&t.deepEqual(s.type,l.type)){for(c in Yt(s.layout,l.layout,r,o,null,Nt.setLayoutProperty),Yt(s.paint,l.paint,r,o,null,Nt.setPaintProperty),t.deepEqual(s.filter,l.filter)||r.push({command:Nt.setFilter,args:[o,l.filter]}),t.deepEqual(s.minzoom,l.minzoom)&&t.deepEqual(s.maxzoom,l.maxzoom)||r.push({command:Nt.setLayerZoomRange,args:[o,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Yt(s[c],l[c],r,o,c.slice(6),Nt.setPaintProperty):t.deepEqual(s[c],l[c])||r.push({command:Nt.setLayerProperty,args:[o,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Yt(s[c],l[c],r,o,c.slice(6),Nt.setPaintProperty):t.deepEqual(s[c],l[c])||r.push({command:Nt.setLayerProperty,args:[o,c,l[c]]}))}else r.push({command:Nt.removeLayer,args:[o]}),u=m[m.lastIndexOf(o)+1],r.push({command:Nt.addLayer,args:[l,u]})}(o,i.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Nt.setStyle,args:[i]}]}return r}(this.serialize(),e).filter((function(t){return!(t.command in Ne)}));if(0===r.length)return!1;var n=r.filter((function(t){return!(t.command in Be)}));if(n.length>0)throw new Error("Unimplemented: "+n.map((function(t){return t.command})).join(", ")+".");return r.forEach((function(t){"setTransition"!==t.command&&i[t.command].apply(i,t.args)})),this.stylesheet=e,!0},i.prototype.addImage=function(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},i.prototype.getImage=function(t){return this.imageManager.getImage(t)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,i,r){var n=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,i,null,r))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var a=this.sourceCaches[e]=new Ot(e,i,this.dispatcher);a.style=this,a.setEventedParent(this,(function(){return{isSourceLoaded:n.loaded(),source:a.serialize(),sourceId:e}})),a.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+i+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},i.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i.prototype.addLayer=function(e,i,r){void 0===r&&(r={}),this._checkLoaded();var n=e.id;if(this.getLayer(n))this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" already exists on this map')));else{var a;if("custom"===e.type){if(ze(this,t.validateCustomStyleLayer(e)))return;a=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(n,e.source),e=t.clone$1(e),e=t.extend(e,{source:n})),this._validate(t.validateStyle.layer,"layers."+n,e,{arrayIndex:-1},r))return;a=t.createStyleLayer(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:n}}),this._serializedLayers[a.id]=a.serialize()}var o=i?this._order.indexOf(i):this._order.length;if(i&&-1===o)this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(o,0,n),this._layerOrderChanged=!0,this._layers[n]=a,this._removedLayers[n]&&a.source&&"custom"!==a.type){var s=this._removedLayers[n];delete this._removedLayers[n],s.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}},i.prototype.moveLayer=function(e,i){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==i){var r=this._order.indexOf(e);this._order.splice(r,1);var n=i?this._order.indexOf(i):this._order.length;i&&-1===n?this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(n,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var i=this._layers[e];if(i){i.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(t){return this._layers[t]},i.prototype.hasLayer=function(t){return t in this._layers},i.prototype.setLayerZoomRange=function(e,i,r){this._checkLoaded();var n=this.getLayer(e);n?n.minzoom===i&&n.maxzoom===r||(null!=i&&(n.minzoom=i),null!=r&&(n.maxzoom=r),this._updateLayer(n)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,i,r){void 0===r&&(r={}),this._checkLoaded();var n=this.getLayer(e);if(n){if(!t.deepEqual(n.filter,i))return null==i?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(t.validateStyle.filter,"layers."+n.id+".filter",i,null,r)||(n.filter=t.clone$1(i),this._updateLayer(n)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,i,r,n){void 0===n&&(n={}),this._checkLoaded();var a=this.getLayer(e);a?t.deepEqual(a.getLayoutProperty(i),r)||(a.setLayoutProperty(i,r,n),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,i){var r=this.getLayer(e);if(r)return r.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(e,i,r,n){void 0===n&&(n={}),this._checkLoaded();var a=this.getLayer(e);a?t.deepEqual(a.getPaintProperty(i),r)||(a.setPaintProperty(i,r,n)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i.prototype.setFeatureState=function(e,i){this._checkLoaded();var r=e.source,n=e.sourceLayer,a=this.sourceCaches[r];if(void 0!==a){var o=a.getSource().type;"geojson"===o&&n?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||n?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),a.setFeatureState(n,e.id,i)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(e,i){this._checkLoaded();var r=e.source,n=this.sourceCaches[r];if(void 0!==n){var a=n.getSource().type,o="vector"===a?e.sourceLayer:void 0;"vector"!==a||o?i&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):n.removeFeatureState(o,e.id,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var i=e.source,r=e.sourceLayer,n=this.sourceCaches[i];if(void 0!==n){if("vector"!==n.getSource().type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),n.getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},i.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},r={},n=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(i(o)){r[o]=a;for(var s=0,l=t;s<l.length;s+=1){var u=l[s][o];if(u)for(var c=0,h=u;c<h.length;c+=1)n.push(h[c])}}}n.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var p=[],d=this._order.length-1;d>=0;d--){var f=this._order[d];if(i(f))for(var m=n.length-1;m>=0;m--){var y=n[m].feature;if(r[y.layer.id]<d)break;p.push(y),n.pop()}else for(var g=0,b=t;g<b.length;g+=1){var v=b[g][f];if(v)for(var _=0,x=v;_<x.length;_+=1)p.push(x[_].feature)}}return p},i.prototype.queryRenderedFeatures=function(e,i,r){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var n={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var a=0,o=i.layers;a<o.length;a+=1){var s=o[a],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];n[l.source]=!0}}var u=[];for(var c in i.availableImages=this._availableImages,this.sourceCaches)i.layers&&!n[c]||u.push(V(this.sourceCaches[c],this._layers,this._serializedLayers,e,i,r));return this.placement&&u.push(function(t,e,i,r,n,a,o){for(var s={},l=a.queryRenderedSymbols(r),u=[],c=0,h=Object.keys(l).map(Number);c<h.length;c+=1)u.push(o[h[c]]);u.sort(j);for(var p=function(){var i=f[d],r=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,n.filter,n.layers,n.availableImages,t);for(var a in r){var o=s[a]=s[a]||[],u=r[a];u.sort((function(t,e){var r=i.featureSortOrder;if(r){var n=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex}));for(var c=0,h=u;c<h.length;c+=1)o.push(h[c])}},d=0,f=u;d<f.length;d+=1)p();var m=function(e){s[e].forEach((function(r){var n=r.feature,a=i[t[e].source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=a}))};for(var y in s)m(y);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},i.prototype.querySourceFeatures=function(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var r=this.sourceCaches[e];return r?function(t,e){for(var i=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),r=[],n={},a=0;a<i.length;a++){var o=i[a],s=o.tileID.canonical.key;n[s]||(n[s]=!0,o.querySourceFeatures(r,e))}return r}(r,i):[]},i.prototype.addSourceType=function(t,e,r){return i.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(i.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e,i){void 0===i&&(i={}),this._checkLoaded();var r=this.light.getLight(),n=!1;for(var a in e)if(!t.deepEqual(e[a],r[a])){n=!0;break}if(n){var o={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(o)}},i.prototype._validate=function(e,i,r,n,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&ze(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:r,styleSpec:t.styleSpec},n)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},i.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},i.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},i.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},i.prototype._updatePlacement=function(e,i,r,n,a){void 0===a&&(a=!1);for(var o=!1,s=!1,l={},u=0,c=this._order;u<c.length;u+=1){var h=this._layers[c[u]];if("symbol"===h.type){if(!l[h.source]){var p=this.sourceCaches[h.source];l[h.source]=p.getRenderableIds(!0).map((function(t){return p.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var d=this.crossTileSymbolIndex.addLayer(h,l[h.source],e.center.lng);o=o||d}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((a=a||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Me(e,this._order,a,i,r,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),o&&this.pauseablePlacement.placement.setStale()),s||o)for(var f=0,m=this._order;f<m.length;f+=1){var y=this._layers[m[f]];"symbol"===y.type&&this.placement.updateLayerOpacities(y,l[y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},i.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)},i.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},i.prototype.getResource=function(e,i,r){return t.makeRequest(i,r)},i}(t.Evented);Xe.getSourceType=function(t){return L[t]},Xe.setSourceType=function(t,e){L[t]=e},Xe.registerForPluginStateChange=t.registerForPluginStateChange;var He=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),We=gi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ye=gi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ge=gi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),qe=gi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ke=gi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ze=gi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Je=gi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),$e=gi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Qe=gi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ti=gi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ei=gi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ii=gi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ri=gi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ni=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ai=gi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),oi=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),si=gi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),li=gi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ui=gi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ci=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),hi=gi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),pi=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),di=gi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),fi=gi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),mi=gi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),yi=gi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function gi(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r={};return{fragmentSource:t=t.replace(i,(function(t,e,i,n,a){return r[a]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nvarying "+i+" "+n+" "+a+";\n#else\nuniform "+i+" "+n+" u_"+a+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+a+"\n    "+i+" "+n+" "+a+" = u_"+a+";\n#endif\n"})),vertexSource:e=e.replace(i,(function(t,e,i,n,a){var o="float"===n?"vec2":"vec4",s=a.match(/color/)?"color":o;return r[a]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float u_"+a+"_t;\nattribute "+i+" "+o+" a_"+a+";\nvarying "+i+" "+n+" "+a+";\n#else\nuniform "+i+" "+n+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = a_"+a+";\n#else\n    "+i+" "+n+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = unpack_mix_"+s+"(a_"+a+", u_"+a+"_t);\n#else\n    "+i+" "+n+" "+a+" = u_"+a+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float u_"+a+"_t;\nattribute "+i+" "+o+" a_"+a+";\n#else\nuniform "+i+" "+n+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+n+" "+a+" = a_"+a+";\n#else\n    "+i+" "+n+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+n+" "+a+" = unpack_mix_"+s+"(a_"+a+", u_"+a+"_t);\n#else\n    "+i+" "+n+" "+a+" = u_"+a+";\n#endif\n"}))}}var bi=Object.freeze({__proto__:null,prelude:We,background:Ye,backgroundPattern:Ge,circle:qe,clippingMask:Ke,heatmap:Ze,heatmapTexture:Je,collisionBox:$e,collisionCircle:Qe,debug:ti,fill:ei,fillOutline:ii,fillOutlinePattern:ri,fillPattern:ni,fillExtrusion:ai,fillExtrusionPattern:oi,hillshadePrepare:si,hillshade:li,line:ui,lineGradient:ci,linePattern:hi,lineSDF:pi,raster:di,symbolIcon:fi,symbolSDF:mi,symbolTextAndIcon:yi}),vi=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};vi.prototype.bind=function(t,e,i,r,n,a,o,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==r.length,u=0;!l&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===n&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),o&&o.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind()):this.freshBind(e,i,r,n,a,o,s)},vi.prototype.freshBind=function(t,e,i,r,n,a,o){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{s=u.currentNumAttributes||0;for(var h=l;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var p=0,d=i;p<d.length;p+=1)d[p].enableAttributes(c,t);a&&a.enableAttributes(c,t),o&&o.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,n);for(var f=0,m=i;f<m.length;f+=1){var y=m[f];y.bind(),y.setVertexAttribPointers(c,t,n)}a&&(a.bind(),a.setVertexAttribPointers(c,t,n)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,t,n)),u.currentNumAttributes=l},vi.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var _i=function(t,e,i,r,n){var a=t.gl;this.program=a.createProgram();var o=i?i.defines():[];n&&o.push("#define OVERDRAW_INSPECTOR;");var s=o.concat(We.fragmentSource,e.fragmentSource).join("\n"),l=o.concat(We.vertexSource,e.vertexSource).join("\n"),u=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(u,s),a.compileShader(u),a.attachShader(this.program,u);var c=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(c,l),a.compileShader(c),a.attachShader(this.program,c);for(var h=i?i.layoutAttributes:[],p=0;p<h.length;p++)a.bindAttribLocation(this.program,p,h[p].name);a.linkProgram(this.program),a.deleteShader(c),a.deleteShader(u),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},f=0;f<this.numAttributes;f++){var m=a.getActiveAttrib(this.program,f);m&&(this.attributes[m.name]=a.getAttribLocation(this.program,m.name))}for(var y=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),g=0;g<y;g++){var b=a.getActiveUniform(this.program,g);b&&(d[b.name]=a.getUniformLocation(this.program,b.name))}this.fixedUniforms=r(t,d),this.binderUniforms=i?i.getUniforms(t,d):[]}}};function xi(t,e,i){var r=1/pe(i,1,e.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,e.transform.tileZoom)/n,o=a*(i.tileID.canonical.x+i.tileID.wrap*n),s=a*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}_i.prototype.draw=function(t,e,i,r,n,a,o,s,l,u,c,h,p,d,f,m){var y,g=t.gl;if(!this.failedToCreate){for(var b in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(r),t.setColorMode(n),t.setCullFace(a),this.fixedUniforms)this.fixedUniforms[b].set(o[b]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:p});for(var v=(y={},y[g.LINES]=2,y[g.TRIANGLES]=3,y[g.LINE_STRIP]=1,y)[e],_=0,x=c.get();_<x.length;_+=1){var S=x[_],w=S.vaos||(S.vaos={});(w[s]||(w[s]=new vi)).bind(t,this,l,d?d.getPaintVertexBuffers():[],u,S.vertexOffset,f,m),g.drawElements(e,S.primitiveLength*v,g.UNSIGNED_SHORT,S.primitiveOffset*v*2)}}};var Si=function(e,i,r,n){var a=i.style.light,o=a.properties.get("position"),s=[o.x,o.y,o.z],l=t.create$1();"viewport"===a.properties.get("anchor")&&t.fromRotation(l,-i.transform.angle),t.transformMat3(s,s,l);var u=a.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r,u_opacity:n}},wi=function(e,i,r,n,a,o,s){return t.extend(Si(e,i,r,n),xi(o,i,s),{u_height_factor:-Math.pow(2,a.overscaledZ)/s.tileSize/8})},Ti=function(t){return{u_matrix:t}},Pi=function(e,i,r,n){return t.extend(Ti(e),xi(r,i,n))},Ci=function(t,e){return{u_matrix:t,u_world:e}},ki=function(e,i,r,n,a){return t.extend(Pi(e,i,r,n),{u_world:a})},Ii=function(e,i,r,n){var a,o,s=e.transform;if("map"===n.paint.get("circle-pitch-alignment")){var l=pe(r,1,s.zoom);a=!0,o=[l,l]}else a=!1,o=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(i.posMatrix,r,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+a,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:o}},Ai=function(t,e,i){var r=pe(i,1,e.zoom),n=Math.pow(2,e.zoom-i.tileID.overscaledZ),a=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*n),e.pixelsToGLUnits[1]/(r*n)],u_overscale_factor:a}},Oi=function(t,e,i){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_viewport_size:[i.width,i.height]}},Di=function(t,e,i){return void 0===i&&(i=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}},Fi=function(t){return{u_matrix:t}},Mi=function(t,e,i,r){return{u_matrix:t,u_extrude_scale:pe(e,1,i),u_intensity:r}},Ei=function(e,i,r){var n=e.transform;return{u_matrix:zi(e,i,r),u_ratio:1/pe(i,1,n.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Li=function(e,i,r){return t.extend(Ei(e,i,r),{u_image:0})},Ri=function(e,i,r,n){var a=e.transform,o=ji(i,a);return{u_matrix:zi(e,i,r),u_texsize:i.imageAtlasTexture.size,u_ratio:1/pe(i,1,a.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[o,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Vi=function(e,i,r,n,a){var o=e.lineAtlas,s=ji(i,e.transform),l="round"===r.layout.get("line-cap"),u=o.getDash(n.from,l),c=o.getDash(n.to,l),h=u.width*a.fromScale,p=c.width*a.toScale;return t.extend(Ei(e,i,r),{u_patternscale_a:[s/h,-u.height/2],u_patternscale_b:[s/p,-c.height/2],u_sdfgamma:o.width/(256*Math.min(h,p)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:c.y,u_mix:a.t})};function ji(t,e){return 1/pe(t,1,e.tileZoom)}function zi(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var Bi=function(t,e,i,r,n){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(o=n.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(a=n.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Ni(n.paint.get("raster-hue-rotate"))};var a,o};function Ni(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}var Ui,Xi=function(t,e,i,r,n,a,o,s,l,u){var c=n.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:c.width/c.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:u,u_texture:0}},Hi=function(e,i,r,n,a,o,s,l,u,c,h){var p=a.transform;return t.extend(Xi(e,i,r,n,a,o,s,l,u,c),{u_gamma_scale:n?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+h})},Wi=function(e,i,r,n,a,o,s,l,u,c){return t.extend(Hi(e,i,r,n,a,o,s,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1})},Yi=function(t,e,i){return{u_matrix:t,u_opacity:e,u_color:i}},Gi=function(e,i,r,n,a,o){return t.extend(function(t,e,i,r){var n=i.imageManager.getPattern(t.from.toString()),a=i.imageManager.getPattern(t.to.toString()),o=i.imageManager.getPixelSize(),s=o.width,l=o.height,u=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,i.transform.tileZoom)/u,h=c*(r.tileID.canonical.x+r.tileID.wrap*u),p=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/pe(r,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(n,o,r,a),{u_matrix:e,u_opacity:i})},qi={fillExtrusion:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fillExtrusionPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fill:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},fillPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},fillOutline:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}},fillOutlinePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},circle:function(e,i){return{u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},collisionBox:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,i.u_overscale_factor)}},collisionCircle:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,i.u_viewport_size)}},debug:function(e,i){return{u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_overlay:new t.Uniform1i(e,i.u_overlay),u_overlay_scale:new t.Uniform1f(e,i.u_overlay_scale)}},clippingMask:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmap:function(e,i){return{u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmapTexture:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}},hillshade:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}},hillshadePrepare:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_maxzoom:new t.Uniform1f(e,i.u_maxzoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}},line:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels)}},lineGradient:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image)}},linePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},lineSDF:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}},raster:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}},symbolIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}},symbolSDF:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}},symbolTextAndIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texsize_icon:new t.Uniform2f(e,i.u_texsize_icon),u_texture:new t.Uniform1i(e,i.u_texture),u_texture_icon:new t.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}},background:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}},backgroundPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}}};function Ki(e,i,r,n,a,o,s){for(var l=e.context,u=l.gl,c=e.useProgram("collisionBox"),h=[],p=0,d=0,f=0;f<n.length;f++){var m=n[f],y=i.getTile(m),g=y.getBucket(r);if(g){var b=m.posMatrix;0===a[0]&&0===a[1]||(b=e.translatePosMatrix(m.posMatrix,y,a,o));var v=s?g.textCollisionBox:g.iconCollisionBox,_=g.collisionCircleArray;if(_.length>0){var x=t.create(),S=b;t.mul(x,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(x,x,g.placementViewportMatrix),h.push({circleArray:_,circleOffset:d,transform:S,invTransform:x}),d=p+=_.length/4}v&&c.draw(l,u.LINES,Pt.disabled,Ct.disabled,e.colorModeForRenderPass(),It.disabled,Ai(b,e.transform,y),r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,e.transform.zoom,null,null,v.collisionVertexBuffer)}}if(s&&h.length){var w=e.useProgram("collisionCircle"),T=new t.StructArrayLayout2f1f2i16;T.resize(4*p),T._trim();for(var P=0,C=0,k=h;C<k.length;C+=1)for(var I=k[C],A=0;A<I.circleArray.length/4;A++){var O=4*A,D=I.circleArray[O+0],F=I.circleArray[O+1],M=I.circleArray[O+2],E=I.circleArray[O+3];T.emplace(P++,D,F,M,E,0),T.emplace(P++,D,F,M,E,1),T.emplace(P++,D,F,M,E,2),T.emplace(P++,D,F,M,E,3)}(!Ui||Ui.length<2*p)&&(Ui=function(e){var i=2*e,r=new t.StructArrayLayout3ui6;r.resize(i),r._trim();for(var n=0;n<i;n++){var a=6*n;r.uint16[a+0]=4*n+0,r.uint16[a+1]=4*n+1,r.uint16[a+2]=4*n+2,r.uint16[a+3]=4*n+2,r.uint16[a+4]=4*n+3,r.uint16[a+5]=4*n+0}return r}(p));for(var L=l.createIndexBuffer(Ui,!0),R=l.createVertexBuffer(T,t.collisionCircleLayout.members,!0),V=0,j=h;V<j.length;V+=1){var z=j[V],B=Oi(z.transform,z.invTransform,e.transform);w.draw(l,u.TRIANGLES,Pt.disabled,Ct.disabled,e.colorModeForRenderPass(),It.disabled,B,r.id,R,L,t.SegmentVector.simpleSegment(0,2*z.circleOffset,z.circleArray.length,z.circleArray.length/2),null,e.transform.zoom,null,null,null)}R.destroy(),L.destroy()}}var Zi=t.identity(new Float32Array(16));function Ji(e,i,r,n,a,o){var s=t.getAnchorAlignment(e),l=-(s.horizontalAlign-.5)*i,u=-(s.verticalAlign-.5)*r,c=t.evaluateVariableOffset(e,n);return new t.Point((l/a+c[0])*o,(u/a+c[1])*o)}function $i(e,i,r,n,a,o,s,l,u,c,h){var p=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,m={};d.clear();for(var y=0;y<p.length;y++){var g=p.get(y),b=g.hidden||!g.crossTileID||e.allowVerticalPlacement&&!g.placedOrientation?null:n[g.crossTileID];if(b){var v=new t.Point(g.anchorX,g.anchorY),_=Qt(v,r?l:s),x=te(o.cameraToCenterDistance,_.signedDistanceFromCamera),S=a.evaluateSizeForFeature(e.textSizeData,c,g)*x/t.ONE_EM;r&&(S*=e.tilePixelRatio/u);for(var w=Ji(b.anchor,b.width,b.height,b.textOffset,b.textBoxScale,S),T=r?Qt(v.add(w),s).point:_.point.add(i?w.rotate(-o.angle):w),P=e.allowVerticalPlacement&&g.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,C=0;C<g.numGlyphs;C++)t.addDynamicAttributes(d,T,P);h&&g.associatedIconIndex>=0&&(m[g.associatedIconIndex]={shiftedAnchor:T,angle:P})}else ue(g.numGlyphs,d)}if(h){f.clear();for(var k=e.icon.placedSymbolArray,I=0;I<k.length;I++){var A=k.get(I);if(A.hidden)ue(A.numGlyphs,f);else{var O=m[I];if(O)for(var D=0;D<A.numGlyphs;D++)t.addDynamicAttributes(f,O.shiftedAnchor,O.angle);else ue(A.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function Qi(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function tr(e,i,r,n,a,o,s,l,u,c,h,p){for(var d=e.context,f=d.gl,m=e.transform,y="map"===l,g="map"===u,b=y&&"point"!==r.layout.get("symbol-placement"),v=y&&!g&&!b,_=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=e.depthModeForSublayer(0,Pt.ReadOnly),S=r.layout.get("text-variable-anchor"),w=[],T=0,P=n;T<P.length;T+=1){var C=P[T],k=i.getTile(C),I=k.getBucket(r);if(I){var A=a?I.text:I.icon;if(A&&A.segments.get().length){var O=A.programConfigurations.get(r.id),D=a||I.sdfIcons,F=a?I.textSizeData:I.iconSizeData,M=g||0!==m.pitch,E=e.useProgram(Qi(D,a,I),O),L=t.evaluateSizeForZoom(F,m.zoom),R=void 0,V=[0,0],j=void 0,z=void 0,B=null,N=void 0;if(a)j=k.glyphAtlasTexture,z=f.LINEAR,R=k.glyphAtlasTexture.size,I.iconsInText&&(V=k.imageAtlasTexture.size,B=k.imageAtlasTexture,N=M||e.options.rotating||e.options.zooming||"composite"===F.kind||"camera"===F.kind?f.LINEAR:f.NEAREST);else{var U=1!==r.layout.get("icon-size").constantOr(0)||I.iconsNeedLinear;j=k.imageAtlasTexture,z=D||e.options.rotating||e.options.zooming||U||M?f.LINEAR:f.NEAREST,R=k.imageAtlasTexture.size}var X=pe(k,1,e.transform.zoom),H=Jt(C.posMatrix,g,y,e.transform,X),W=$t(C.posMatrix,g,y,e.transform,X),Y=S&&I.hasTextData(),G="none"!==r.layout.get("icon-text-fit")&&Y&&I.hasIconData();b&&ie(I,C.posMatrix,e,a,H,W,g,c);var q=e.translatePosMatrix(C.posMatrix,k,o,s),K=b||a&&S||G?Zi:H,Z=e.translatePosMatrix(W,k,o,s,!0),J=D&&0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),$={program:E,buffers:A,uniformValues:D?I.iconsInText?Wi(F.kind,L,v,g,e,q,K,Z,R,V):Hi(F.kind,L,v,g,e,q,K,Z,a,R,!0):Xi(F.kind,L,v,g,e,q,K,Z,a,R),atlasTexture:j,atlasTextureIcon:B,atlasInterpolation:z,atlasInterpolationIcon:N,isSDF:D,hasHalo:J};if(_)for(var Q=0,tt=A.segments.get();Q<tt.length;Q+=1){var et=tt[Q];w.push({segments:new t.SegmentVector([et]),sortKey:et.sortKey,state:$})}else w.push({segments:A.segments,sortKey:0,state:$})}}}_&&w.sort((function(t,e){return t.sortKey-e.sortKey}));for(var it=0,rt=w;it<rt.length;it+=1){var nt=rt[it],at=nt.state;if(d.activeTexture.set(f.TEXTURE0),at.atlasTexture.bind(at.atlasInterpolation,f.CLAMP_TO_EDGE),at.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),at.atlasTextureIcon&&at.atlasTextureIcon.bind(at.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),at.isSDF){var ot=at.uniformValues;at.hasHalo&&(ot.u_is_halo=1,er(at.buffers,nt.segments,r,e,at.program,x,h,p,ot)),ot.u_is_halo=0}er(at.buffers,nt.segments,r,e,at.program,x,h,p,at.uniformValues)}}function er(t,e,i,r,n,a,o,s,l){var u=r.context;n.draw(u,u.gl.TRIANGLES,a,o,s,It.disabled,l,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,r.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function ir(t,e,i,r,n,a,o){var s,l,u,c,h,p=t.context.gl,d=i.paint.get("fill-pattern"),f=d&&d.constantOr(1),m=i.getCrossfadeParameters();o?(l=f&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(l=f?"fillPattern":"fill",s=p.TRIANGLES);for(var y=0,g=r;y<g.length;y+=1){var b=g[y],v=e.getTile(b);if(!f||v.patternsLoaded()){var _=v.getBucket(i);if(_){var x=_.programConfigurations.get(i.id),S=t.useProgram(l,x);f&&(t.context.activeTexture.set(p.TEXTURE0),v.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),x.updatePaintBuffers(m));var w=d.constantOr(null);if(w&&v.imageAtlas){var T=v.imageAtlas,P=T.patternPositions[w.to.toString()],C=T.patternPositions[w.from.toString()];P&&C&&x.setConstantPatternPositions(P,C)}var k=t.translatePosMatrix(b.posMatrix,v,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(o){c=_.indexBuffer2,h=_.segments2;var I=[p.drawingBufferWidth,p.drawingBufferHeight];u="fillOutlinePattern"===l&&f?ki(k,t,m,v,I):Ci(k,I)}else c=_.indexBuffer,h=_.segments,u=f?Pi(k,t,m,v):Ti(k);S.draw(t.context,s,n,t.stencilModeForClipping(b),a,It.disabled,u,i.id,_.layoutVertexBuffer,c,h,i.paint,t.transform.zoom,x)}}}}function rr(t,e,i,r,n,a,o){for(var s=t.context,l=s.gl,u=i.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),h=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity"),d=0,f=r;d<f.length;d+=1){var m=f[d],y=e.getTile(m),g=y.getBucket(i);if(g){var b=g.programConfigurations.get(i.id),v=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",b);c&&(t.context.activeTexture.set(l.TEXTURE0),y.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),b.updatePaintBuffers(h));var _=u.constantOr(null);if(_&&y.imageAtlas){var x=y.imageAtlas,S=x.patternPositions[_.to.toString()],w=x.patternPositions[_.from.toString()];S&&w&&b.setConstantPatternPositions(S,w)}var T=t.translatePosMatrix(m.posMatrix,y,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),P=i.paint.get("fill-extrusion-vertical-gradient"),C=c?wi(T,t,P,p,m,h,y):Si(T,t,P,p);v.draw(s,s.gl.TRIANGLES,n,a,o,It.backCCW,C,i.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,i.paint,t.transform.zoom,b)}}}function nr(e,i,r,n,a,o){var s=e.context,l=s.gl,u=i.fbo;if(u){var c=e.useProgram("hillshade");s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.colorAttachment.get());var h=function(e,i,r){var n=r.paint.get("hillshade-shadow-color"),a=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l,u,c,h=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(i.tileID.toUnwrapped(),h),u_image:0,u_latrange:(l=i.tileID,u=Math.pow(2,l.canonical.z),c=l.canonical.y,[new t.MercatorCoordinate(0,c/u).toLngLat().lat,new t.MercatorCoordinate(0,(c+1)/u).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:n,u_highlight:a,u_accent:o}}(e,i,r);c.draw(s,l.TRIANGLES,n,a,o,It.disabled,h,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function ar(e,i,r,n,a,o,s){var l=e.context,u=l.gl,c=i.dem;if(c&&c.data){var h=c.dim,p=c.stride,d=c.getPixels();if(l.activeTexture.set(u.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(p),i.demTexture){var f=i.demTexture;f.update(d,{premultiply:!1}),f.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else i.demTexture=new t.Texture(l,d,u.RGBA,{premultiply:!1}),i.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);l.activeTexture.set(u.TEXTURE0);var m=i.fbo;if(!m){var y=new t.Texture(l,{width:h,height:h,data:null},u.RGBA);y.bind(u.LINEAR,u.CLAMP_TO_EDGE),(m=i.fbo=l.createFramebuffer(h,h,!0)).colorAttachment.set(y.texture)}l.bindFramebuffer.set(m.framebuffer),l.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(l,u.TRIANGLES,a,o,s,It.disabled,function(e,i,r){var n=i.stride,a=t.create();return t.ortho(a,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(a,a,[0,-t.EXTENT,0]),{u_matrix:a,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_maxzoom:r,u_unpack:i.getUnpackVector()}}(i.tileID,c,n),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function or(e,i,r,n,a){var o=n.paint.get("raster-fade-duration");if(o>0){var s=t.browser.now(),l=(s-e.timeAdded)/o,u=i?(s-i.timeAdded)/o:-1,c=r.getSource(),h=a.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=p&&e.refreshedUponExpiration?1:t.clamp(p?l:1-u,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var sr=new t.Color(1,0,0,1),lr=new t.Color(0,1,0,1),ur=new t.Color(0,0,1,1),cr=new t.Color(1,0,1,1),hr=new t.Color(0,1,1,1);function pr(t,e,i,r){fr(t,0,e+i/2,t.transform.width,i,r)}function dr(t,e,i,r){fr(t,e-i/2,0,i,t.transform.height,r)}function fr(e,i,r,n,a,o){var s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,n*t.browser.devicePixelRatio,a*t.browser.devicePixelRatio),s.clear({color:o}),l.disable(l.SCISSOR_TEST)}function mr(e,i,r){var n=e.context,a=n.gl,o=r.posMatrix,s=e.useProgram("debug"),l=Pt.disabled,u=Ct.disabled,c=e.colorModeForRenderPass();n.activeTexture.set(a.TEXTURE0),e.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s.draw(n,a.LINE_STRIP,l,u,c,It.disabled,Di(o,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var h=i.getTileByID(r.key).latestRawTileData,p=Math.floor((h&&h.byteLength||0)/1024),d=i.getTile(r).tileSize,f=512/Math.min(d,512)*(r.overscaledZ/e.transform.zoom)*.5,m=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(m+=" => "+r.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var i=t.debugOverlayCanvas,r=t.context.gl,n=t.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(e,5,5),n.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,m+" "+p+"kb"),s.draw(n,a.TRIANGLES,l,u,kt.alphaBlended,It.disabled,Di(o,t.Color.transparent,f),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var yr={symbol:function(e,i,r,n,a){if("translucent"===e.renderPass){var o=Ct.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,i,r,n,a,o,s){for(var l=i.transform,u="map"===a,c="map"===o,h=0,p=e;h<p.length;h+=1){var d=p[h],f=n.getTile(d),m=f.getBucket(r);if(m&&m.text&&m.text.segments.get().length){var y=t.evaluateSizeForZoom(m.textSizeData,l.zoom),g=pe(f,1,i.transform.zoom),b=Jt(d.posMatrix,c,u,i.transform,g),v="none"!==r.layout.get("icon-text-fit")&&m.hasIconData();if(y){var _=Math.pow(2,l.zoom-f.tileID.overscaledZ);$i(m,u,c,s,t.symbolSize,l,b,d.posMatrix,_,y,v)}}}}(n,e,r,i,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),a),0!==r.paint.get("icon-opacity").constantOr(1)&&tr(e,i,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,s),0!==r.paint.get("text-opacity").constantOr(1)&&tr(e,i,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,s),i.map.showCollisionBoxes&&(Ki(e,i,r,n,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Ki(e,i,r,n,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(e,i,r,n){if("translucent"===e.renderPass){var a=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var u=e.context,c=u.gl,h=e.depthModeForSublayer(0,Pt.ReadOnly),p=Ct.disabled,d=e.colorModeForRenderPass(),f=[],m=0;m<n.length;m++){var y=n[m],g=i.getTile(y),b=g.getBucket(r);if(b){var v=b.programConfigurations.get(r.id),_={programConfiguration:v,program:e.useProgram("circle",v),layoutVertexBuffer:b.layoutVertexBuffer,indexBuffer:b.indexBuffer,uniformValues:Ii(e,y,g,r)};if(l)for(var x=0,S=b.segments.get();x<S.length;x+=1){var w=S[x];f.push({segments:new t.SegmentVector([w]),sortKey:w.sortKey,state:_})}else f.push({segments:b.segments,sortKey:0,state:_})}}l&&f.sort((function(t,e){return t.sortKey-e.sortKey}));for(var T=0,P=f;T<P.length;T+=1){var C=P[T],k=C.state;k.program.draw(u,c.TRIANGLES,h,p,d,It.disabled,k.uniformValues,r.id,k.layoutVertexBuffer,k.indexBuffer,C.segments,r.paint,e.transform.zoom,k.programConfiguration)}}}},heatmap:function(e,i,r,n){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var a=e.context,o=a.gl,s=Ct.disabled,l=new kt([o.ONE,o.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var n=i.heatmapFbo;if(n)r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{var a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,r){var n=t.gl;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e.width/4,e.height/4,0,n.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),r.colorAttachment.set(i)}(t,e,a,n)}}(a,e,r),a.clear({color:t.Color.transparent});for(var u=0;u<n.length;u++){var c=n[u];if(!i.hasRenderableParent(c)){var h=i.getTile(c),p=h.getBucket(r);if(p){var d=p.programConfigurations.get(r.id);e.useProgram("heatmap",d).draw(a,o.TRIANGLES,Pt.disabled,s,l,It.disabled,Mi(c.posMatrix,h,e.transform.zoom,r.paint.get("heatmap-intensity")),r.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,r.paint,e.transform.zoom,d)}}}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){var r=e.context,n=r.gl,a=i.heatmapFbo;if(a){r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,a.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);var o=i.colorRampTexture;o||(o=i.colorRampTexture=new t.Texture(r,i.colorRamp,n.RGBA)),o.bind(n.LINEAR,n.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,n.TRIANGLES,Pt.disabled,Ct.disabled,e.colorModeForRenderPass(),It.disabled,function(e,i,r,n){var a=t.create();t.ortho(a,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:a,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}}(e,i),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}}(e,r))},line:function(e,i,r,n){if("translucent"===e.renderPass){var a=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var s=e.depthModeForSublayer(0,Pt.ReadOnly),l=e.colorModeForRenderPass(),u=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),h=c.constantOr(1),p=r.paint.get("line-gradient"),d=r.getCrossfadeParameters(),f=h?"linePattern":u?"lineSDF":p?"lineGradient":"line",m=e.context,y=m.gl,g=!0;if(p){m.activeTexture.set(y.TEXTURE0);var b=r.gradientTexture;if(!r.gradient)return;b||(b=r.gradientTexture=new t.Texture(m,r.gradient,y.RGBA)),b.bind(y.LINEAR,y.CLAMP_TO_EDGE)}for(var v=0,_=n;v<_.length;v+=1){var x=_[v],S=i.getTile(x);if(!h||S.patternsLoaded()){var w=S.getBucket(r);if(w){var T=w.programConfigurations.get(r.id),P=e.context.program.get(),C=e.useProgram(f,T),k=g||C.program!==P,I=c.constantOr(null);if(I&&S.imageAtlas){var A=S.imageAtlas,O=A.patternPositions[I.to.toString()],D=A.patternPositions[I.from.toString()];O&&D&&T.setConstantPatternPositions(O,D)}var F=h?Ri(e,S,r,d):u?Vi(e,S,r,u,d):p?Li(e,S,r):Ei(e,S,r);h?(m.activeTexture.set(y.TEXTURE0),S.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),T.updatePaintBuffers(d)):u&&(k||e.lineAtlas.dirty)&&(m.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(m)),C.draw(m,y.TRIANGLES,s,e.stencilModeForClipping(x),l,It.disabled,F,r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,r.paint,e.transform.zoom,T),g=!1}}}}}},fill:function(e,i,r,n){var a=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(t.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?Pt.ReadWrite:Pt.ReadOnly);ir(e,i,r,n,c,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var h=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Pt.ReadOnly);ir(e,i,r,n,h,s,!0)}}},"fill-extrusion":function(t,e,i,r){var n=i.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===t.renderPass){var a=new Pt(t.context.gl.LEQUAL,Pt.ReadWrite,t.depthRangeFor3D);if(1!==n||i.paint.get("fill-extrusion-pattern").constantOr(1))rr(t,e,i,r,a,Ct.disabled,kt.disabled),rr(t,e,i,r,a,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var o=t.colorModeForRenderPass();rr(t,e,i,r,a,Ct.disabled,o)}}},hillshade:function(t,e,i,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var n=t.context,a=e.getSource().maxzoom,o=t.depthModeForSublayer(0,Pt.ReadOnly),s=t.colorModeForRenderPass(),l="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],u=l[0],c=0,h=l[1];c<h.length;c+=1){var p=h[c],d=e.getTile(p);d.needsHillshadePrepare&&"offscreen"===t.renderPass?ar(t,d,i,a,o,Ct.disabled,s):"translucent"===t.renderPass&&nr(t,d,i,o,u[p.overscaledZ],s)}n.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,i,r){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")&&r.length)for(var n=t.context,a=n.gl,o=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),u=o instanceof F?[{},r]:t.stencilConfigForOverlap(r),c=u[0],h=u[1],p=h[h.length-1].overscaledZ,d=!t.options.moving,f=0,m=h;f<m.length;f+=1){var y=m[f],g=t.depthModeForSublayer(y.overscaledZ-p,1===i.paint.get("raster-opacity")?Pt.ReadWrite:Pt.ReadOnly,a.LESS),b=e.getTile(y),v=t.transform.calculatePosMatrix(y.toUnwrapped(),d);b.registerFadeDuration(i.paint.get("raster-fade-duration"));var _=e.findLoadedParent(y,0),x=or(b,_,e,i,t.transform),S=void 0,w=void 0,T="nearest"===i.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;n.activeTexture.set(a.TEXTURE0),b.texture.bind(T,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(a.TEXTURE1),_?(_.texture.bind(T,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),S=Math.pow(2,_.tileID.overscaledZ-b.tileID.overscaledZ),w=[b.tileID.canonical.x*S%1,b.tileID.canonical.y*S%1]):b.texture.bind(T,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var P=Bi(v,w||[0,0],S||1,x,i);o instanceof F?s.draw(n,a.TRIANGLES,g,Ct.disabled,l,It.disabled,P,i.id,o.boundsBuffer,t.quadTriangleIndexBuffer,o.boundsSegments):s.draw(n,a.TRIANGLES,g,c[y.overscaledZ],l,It.disabled,P,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var r=i.paint.get("background-color"),n=i.paint.get("background-opacity");if(0!==n){var a=t.context,o=a.gl,s=t.transform,l=s.tileSize,u=i.paint.get("background-pattern");if(!t.isPatternMissing(u)){var c=!u&&1===r.a&&1===n&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var h=Ct.disabled,p=t.depthModeForSublayer(0,"opaque"===c?Pt.ReadWrite:Pt.ReadOnly),d=t.colorModeForRenderPass(),f=t.useProgram(u?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:l});u&&(a.activeTexture.set(o.TEXTURE0),t.imageManager.bind(t.context));for(var y=i.getCrossfadeParameters(),g=0,b=m;g<b.length;g+=1){var v=b[g],_=t.transform.calculatePosMatrix(v.toUnwrapped()),x=u?Gi(_,n,t,u,{tileID:v,tileSize:l},y):Yi(_,n,r);f.draw(a,o.TRIANGLES,p,h,d,It.disabled,x,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var r=0;r<i.length;r++)mr(t,e,i[r])},custom:function(t,e,i){var r=t.context,n=i.implementation;if("offscreen"===t.renderPass){var a=n.prerender;a&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),a.call(n,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(Ct.disabled);var o="3d"===n.renderingMode?new Pt(t.context.gl.LEQUAL,Pt.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Pt.ReadOnly);r.setDepthMode(o),n.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},gr=function(t,e){this.context=new At(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Ot.maxUnderzooming+Ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new je,this.gpuTimers={}};gr.prototype.resize=function(e,i){if(this.width=e*t.browser.devicePixelRatio,this.height=i*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,n=this.style._order;r<n.length;r+=1)this.style._layers[n[r]].resize()},gr.prototype.setup=function(){var e=this.context,i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,He.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,He.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var n=new t.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(t.EXTENT,0,t.EXTENT,0),n.emplaceBack(0,t.EXTENT,0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(n,D.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,He.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(o);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var l=this.context.gl;this.stencilClearMode=new Ct({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},gr.prototype.clearStencil=function(){var e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,Pt.disabled,this.stencilClearMode,kt.disabled,It.disabled,Fi(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},gr.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var i=this.context,r=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(kt.disabled),i.setDepthMode(Pt.disabled);var n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var a=0,o=e;a<o.length;a+=1){var s=o[a],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;n.draw(i,r.TRIANGLES,Pt.disabled,new Ct({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE),kt.disabled,It.disabled,Fi(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},gr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Ct({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},gr.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Ct({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},gr.prototype.stencilConfigForOverlap=function(t){var e,i=this.context.gl,r=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),n=r[r.length-1].overscaledZ,a=r[0].overscaledZ-n+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();for(var o={},s=0;s<a;s++)o[s+n]=new Ct({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=a,[o,r]}return[(e={},e[n]=Ct.disabled,e),r]},gr.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new kt([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?kt.unblended:kt.alphaBlended},gr.prototype.depthModeForSublayer=function(t,e,i){if(!this.opaquePassEnabledForLayer())return Pt.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Pt(i||this.context.gl.LEQUAL,e,[r,r])},gr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},gr.prototype.render=function(e,i){var r=this;this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var n=this.style._order,a=this.style.sourceCaches;for(var o in a){var s=a[o];s.used&&s.prepare(this.context)}var l,u,c={},h={},p={};for(var d in a){var f=a[d];c[d]=f.getVisibleCoordinates(),h[d]=c[d].slice().reverse(),p[d]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var m=0;m<n.length;m++)if(this.style._layers[n[m]].is3D()){this.opaquePassCutoff=m;break}this.renderPass="offscreen";for(var y=0,g=n;y<g.length;y+=1){var b=this.style._layers[g[y]];if(b.hasOffscreenPass()&&!b.isHidden(this.transform.zoom)){var v=h[b.source];("custom"===b.type||v.length)&&this.renderLayer(this,a[b.source],b,v)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){var _=this.style._layers[n[this.currentLayer]],x=a[_.source],S=c[_.source];this._renderTileClippingMasks(_,S),this.renderLayer(this,x,_,S)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){var w=this.style._layers[n[this.currentLayer]],T=a[w.source],P=("symbol"===w.type?p:h)[w.source];this._renderTileClippingMasks(w,c[w.source]),this.renderLayer(this,T,w,P)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(r.transform.zoom)&&(t.source!==(u&&u.id)&&(u=r.style.sourceCaches[t.source]),(!l||l.getSource().maxzoom<u.getSource().maxzoom)&&(l=u))})),l&&yr.debug(this,l,l.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;pr(t,t.transform.height-(e.top||0),3,sr),pr(t,e.bottom||0,3,lr),dr(t,e.left||0,3,ur),dr(t,t.transform.width-(e.right||0),3,cr);var i=t.transform.centerPoint;!function(t,e,i,r){fr(t,e-1,i-10,2,20,r),fr(t,e-10,i-1,20,2,r)}(t,i.x,t.transform.height-i.y,hr)}(this),this.context.setDefault()},gr.prototype.renderLayer=function(t,e,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||r.length)&&(this.id=i.id,this.gpuTimingStart(i),yr[i.type](t,e,i,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},gr.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}},gr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},gr.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},gr.prototype.queryGpuTimers=function(t){var e={};for(var i in t){var r=t[i],n=this.context.extTimerQuery,a=n.getQueryObjectEXT(r.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r.query),e[i]=a}return e},gr.prototype.translatePosMatrix=function(e,i,r,n,a){if(!r[0]&&!r[1])return e;var o=a?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);r=[r[0]*l-r[1]*s,r[0]*s+r[1]*l]}var u=[a?r[0]:pe(i,r[0],this.transform.zoom),a?r[1]:pe(i,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c},gr.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},gr.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},gr.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i},gr.prototype.useProgram=function(t,e){this.cache=this.cache||{};var i=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new _i(this.context,bi[t],e,qi[t],this._showOverdrawInspector)),this.cache[i]},gr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},gr.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},gr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},gr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var br=function(t,e){this.points=t,this.planes=e};br.fromInvProjectionMatrix=function(e,i,r){var n=Math.pow(2,r),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(i){return t.transformMat4([],i,e)})).map((function(e){return t.scale$1([],e,1/e[3]/i*n)})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var i=t.sub([],a[e[0]],a[e[1]]),r=t.sub([],a[e[2]],a[e[1]]),n=t.normalize([],t.cross([],i,r)),o=-t.dot(n,a[e[1]]);return n.concat(o)}));return new br(a,o)};var vr=function(e,i){this.min=e,this.max=i,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};vr.prototype.quadrant=function(e){for(var i=[e%2==0,e<2],r=t.clone$2(this.min),n=t.clone$2(this.max),a=0;a<i.length;a++)r[a]=i[a]?this.min[a]:this.center[a],n[a]=i[a]?this.center[a]:this.max[a];return n[2]=this.max[2],new vr(r,n)},vr.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},vr.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},vr.prototype.intersects=function(e){for(var i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,n=0;n<e.planes.length;n++){for(var a=e.planes[n],o=0,s=0;s<i.length;s++)o+=t.dot$1(a,i[s])>=0;if(0===o)return 0;o!==i.length&&(r=!1)}if(r)return 2;for(var l=0;l<3;l++){for(var u=Number.MAX_VALUE,c=-Number.MAX_VALUE,h=0;h<e.points.length;h++){var p=e.points[h][l]-this.min[l];u=Math.min(u,p),c=Math.max(c,p)}if(c<0||u>this.max[l]-this.min[l])return 0}return 1};var _r=function(t,e,i,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=r};_r.prototype.interpolate=function(e,i,r){return null!=i.top&&null!=e.top&&(this.top=t.number(e.top,i.top,r)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,i.bottom,r)),null!=i.left&&null!=e.left&&(this.left=t.number(e.left,i.left,r)),null!=i.right&&null!=e.right&&(this.right=t.number(e.right,i.right,r)),this},_r.prototype.getCenter=function(e,i){var r=t.clamp((this.left+e-this.right)/2,0,e),n=t.clamp((this.top+i-this.bottom)/2,0,i);return new t.Point(r,n)},_r.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},_r.prototype.clone=function(){return new _r(this.top,this.bottom,this.left,this.right)},_r.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var xr=function(e,i,r,n,a){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===a||a,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=null==r?0:r,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _r,this._posMatrixCache={},this._alignedPosMatrixCache={}},Sr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};xr.prototype.clone=function(){var t=new xr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},Sr.minZoom.get=function(){return this._minZoom},Sr.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Sr.maxZoom.get=function(){return this._maxZoom},Sr.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Sr.minPitch.get=function(){return this._minPitch},Sr.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Sr.maxPitch.get=function(){return this._maxPitch},Sr.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Sr.renderWorldCopies.get=function(){return this._renderWorldCopies},Sr.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Sr.worldSize.get=function(){return this.tileSize*this.scale},Sr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Sr.size.get=function(){return new t.Point(this.width,this.height)},Sr.bearing.get=function(){return-this.angle/Math.PI*180},Sr.bearing.set=function(e){var i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Sr.pitch.get=function(){return this._pitch/Math.PI*180},Sr.pitch.set=function(e){var i=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},Sr.fov.get=function(){return this._fov/Math.PI*180},Sr.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Sr.zoom.get=function(){return this._zoom},Sr.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Sr.center.get=function(){return this._center},Sr.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Sr.padding.get=function(){return this._edgeInsets.toJSON()},Sr.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},Sr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},xr.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},xr.prototype.interpolatePadding=function(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()},xr.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},xr.prototype.getVisibleUnwrappedCoordinates=function(e){var i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),n=this.pointCoordinate(new t.Point(this.width,0)),a=this.pointCoordinate(new t.Point(this.width,this.height)),o=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,n.x,a.x,o.x)),l=Math.floor(Math.max(r.x,n.x,a.x,o.x)),u=s-1;u<=l+1;u++)0!==u&&i.push(new t.UnwrappedTileID(u,e));return i},xr.prototype.coveringTiles=function(e){var i=this.coveringZoomLevel(e),r=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);var n=t.MercatorCoordinate.fromLngLat(this.center),a=Math.pow(2,i),o=[a*n.x,a*n.y,0],s=br.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),l=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=i);var u=function(t){return{aabb:new vr([t*a,0,0],[(t+1)*a,a,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},c=[],h=[],p=i,d=e.reparseOverscaled?r:i;if(this._renderWorldCopies)for(var f=1;f<=3;f++)c.push(u(-f)),c.push(u(f));for(c.push(u(0));c.length>0;){var m=c.pop(),y=m.x,g=m.y,b=m.fullyVisible;if(!b){var v=m.aabb.intersects(s);if(0===v)continue;b=2===v}var _=m.aabb.distanceX(o),x=m.aabb.distanceY(o),S=Math.max(Math.abs(_),Math.abs(x));if(m.zoom===p||S>3+(1<<p-m.zoom)-2&&m.zoom>=l)h.push({tileID:new t.OverscaledTileID(m.zoom===p?d:m.zoom,m.wrap,m.zoom,y,g),distanceSq:t.sqrLen([o[0]-.5-y,o[1]-.5-g])});else for(var w=0;w<4;w++){var T=(y<<1)+w%2,P=(g<<1)+(w>>1);c.push({aabb:m.aabb.quadrant(w),zoom:m.zoom+1,x:T,y:P,wrap:m.wrap,fullyVisible:b})}}return h.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},xr.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Sr.unmodified.get=function(){return this._unmodified},xr.prototype.zoomScale=function(t){return Math.pow(2,t)},xr.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},xr.prototype.project=function(e){var i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)},xr.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Sr.point.get=function(){return this.project(this.center)},xr.prototype.setLocationAtPoint=function(e,i){var r=this.pointCoordinate(i),n=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),o=new t.MercatorCoordinate(a.x-(r.x-n.x),a.y-(r.y-n.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},xr.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},xr.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},xr.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},xr.prototype.coordinateLocation=function(t){return t.toLngLat()},xr.prototype.pointCoordinate=function(e){var i=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var n=i[3],a=r[3],o=i[1]/n,s=r[1]/a,l=i[2]/n,u=r[2]/a,c=l===u?0:(0-l)/(u-l);return new t.MercatorCoordinate(t.number(i[0]/n,r[0]/a,c)/this.worldSize,t.number(o,s,c)/this.worldSize)},xr.prototype.coordinatePoint=function(e){var i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix),new t.Point(i[0]/i[3],i[1]/i[3])},xr.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},xr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},xr.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},xr.prototype.calculatePosMatrix=function(e,i){void 0===i&&(i=!1);var r=e.key,n=i?this._alignedPosMatrixCache:this._posMatrixCache;if(n[r])return n[r];var a=e.canonical,o=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*o,a.y*o,0]),t.scale(l,l,[o/t.EXTENT,o/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),n[r]=new Float32Array(l),n[r]},xr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},xr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,i,r,n,a=-90,o=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;a=t.mercatorYfromLat(h[1])*this.worldSize,e=(o=t.mercatorYfromLat(h[0])*this.worldSize)-a<u.y?u.y/(o-a):0}if(this.lngRange){var p=this.lngRange;s=t.mercatorXfromLng(p[0])*this.worldSize,i=(l=t.mercatorXfromLng(p[1])*this.worldSize)-s<u.x?u.x/(l-s):0}var d=this.point,f=Math.max(i||0,e||0);if(f)return this.center=this.unproject(new t.Point(i?(l+s)/2:d.x,e?(o+a)/2:d.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=d.y,y=u.y/2;m-y<a&&(n=a+y),m+y>o&&(n=o-y)}if(this.lngRange){var g=d.x,b=u.x/2;g-b<s&&(r=s+b),g+b>l&&(r=l-b)}void 0===r&&void 0===n||(this.center=this.unproject(new t.Point(void 0!==r?r:d.x,void 0!==n?n:d.y))),this._unmodified=c,this._constraining=!1}},xr.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var i=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),n=Math.sin(r)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-i-r,.01,Math.PI-.01)),a=this.point,o=a.x,s=a.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),u=this.height/50,c=new Float64Array(16);t.perspective(c,this._fov,this.width/this.height,u,l),c[8]=2*-e.x/this.width,c[9]=2*e.y/this.height,t.scale(c,c,[1,-1,1]),t.translate(c,c,[0,0,-this.cameraToCenterDistance]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle),t.translate(c,c,[-o,-s,0]),this.mercatorMatrix=t.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),t.scale(c,c,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c,this.invProjMatrix=t.invert([],this.projMatrix);var h=this.width%2/2,p=this.height%2/2,d=Math.cos(this.angle),f=Math.sin(this.angle),m=o-Math.round(o)+d*h+f*p,y=s-Math.round(s)+d*p+f*h,g=new Float64Array(c);if(t.translate(g,g,[m>.5?m-1:m,y>.5?y-1:y,0]),this.alignedProjMatrix=g,c=t.create(),t.scale(c,c,[this.width/2,-this.height/2,1]),t.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=t.create(),t.scale(c,c,[1,-1,1]),t.translate(c,c,[-1,-1,0]),t.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},xr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},xr.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},xr.prototype.getCameraQueryGeometry=function(e){var i=this.getCameraPoint();if(1===e.length)return[e[0],i];for(var r=i.x,n=i.y,a=i.x,o=i.y,s=0,l=e;s<l.length;s+=1){var u=l[s];r=Math.min(r,u.x),n=Math.min(n,u.y),a=Math.max(a,u.x),o=Math.max(o,u.y)}return[new t.Point(r,n),new t.Point(a,n),new t.Point(a,o),new t.Point(r,o),new t.Point(r,n)]},Object.defineProperties(xr.prototype,Sr);var wr=function(e){var i,r,n,a;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),r=!1,n=null,a=function(){n=null,r&&(i(),n=setTimeout(a,300),r=!1)},function(){return r=!0,n||a(),n})};wr.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},wr.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},wr.prototype.getHashString=function(e){var i=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,n=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,n),o=Math.round(i.lng*a)/a,s=Math.round(i.lat*a)/a,l=this._map.getBearing(),u=this._map.getPitch(),c="";if(c+=e?"/"+o+"/"+s+"/"+r:r+"/"+s+"/"+o,(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/"+Math.round(u)),this._hashName){var h=this._hashName,p=!1,d=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===h?(p=!0,e+"="+c):t})).filter((function(t){return t}));return p||d.push(h+"="+c),"#"+d.join("&")}return"#"+c},wr.prototype._getCurrentHash=function(){var e,i=this,r=t.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===i._hashName&&(e=t)})),(e&&e[1]||"").split("/")):r.split("/")},wr.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},wr.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var Tr={linearity:.3,easing:t.bezier(0,0,.3,1)},Pr=t.extend({deceleration:2500,maxSpeed:1400},Tr),Cr=t.extend({deceleration:20,maxSpeed:1400},Tr),kr=t.extend({deceleration:1e3,maxSpeed:360},Tr),Ir=t.extend({deceleration:1e3,maxSpeed:90},Tr),Ar=function(t){this._map=t,this.clear()};function Or(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Dr(e,i,r){var n=r.maxSpeed,a=r.linearity,o=r.deceleration,s=t.clamp(e*a/(i/1e3),-n,n),l=Math.abs(s)/(o*a);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}Ar.prototype.clear=function(){this._inertiaBuffer=[]},Ar.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},Ar.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,i=t.browser.now();e.length>0&&i-e[0].time>160;)e.shift()},Ar.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var i={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},r=0,n=this._inertiaBuffer;r<n.length;r+=1){var a=n[r].settings;i.zoom+=a.zoomDelta||0,i.bearing+=a.bearingDelta||0,i.pitch+=a.pitchDelta||0,a.panDelta&&i.pan._add(a.panDelta),a.around&&(i.around=a.around),a.pinchAround&&(i.pinchAround=a.pinchAround)}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(i.pan.mag()){var l=Dr(i.pan.mag(),o,t.extend({},Pr,e||{}));s.offset=i.pan.mult(l.amount/i.pan.mag()),s.center=this._map.transform.center,Or(s,l)}if(i.zoom){var u=Dr(i.zoom,o,Cr);s.zoom=this._map.transform.zoom+u.amount,Or(s,u)}if(i.bearing){var c=Dr(i.bearing,o,kr);s.bearing=this._map.transform.bearing+t.clamp(c.amount,-179,179),Or(s,c)}if(i.pitch){var h=Dr(i.pitch,o,Ir);s.pitch=this._map.transform.pitch+h.amount,Or(s,h)}if(s.zoom||s.bearing){var p=void 0===i.pinchAround?i.around:i.pinchAround;s.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var Fr=function(e){function r(r,n,a,o){void 0===o&&(o={});var s=i.mousePos(n.getCanvasContainer(),a),l=n.unproject(s);e.call(this,r,t.extend({point:s,lngLat:l,originalEvent:a},o)),this._defaultPrevented=!1,this.target=n}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var n={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,n),r}(t.Event),Mr=function(e){function r(r,n,a){var o="touchend"===r?a.changedTouches:a.touches,s=i.touchPos(n.getCanvasContainer(),o),l=s.map((function(t){return n.unproject(t)})),u=s.reduce((function(t,e,i,r){return t.add(e.div(r.length))}),new t.Point(0,0)),c=n.unproject(u);e.call(this,r,{points:s,point:u,lngLats:l,lngLat:c,originalEvent:a}),this._defaultPrevented=!1}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var n={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,n),r}(t.Event),Er=function(t){function e(e,i,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(t.Event),Lr=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Lr.prototype.reset=function(){delete this._mousedownPos},Lr.prototype.wheel=function(t){return this._firePreventable(new Er(t.type,this._map,t))},Lr.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Fr(t.type,this._map,t))},Lr.prototype.mouseup=function(t){this._map.fire(new Fr(t.type,this._map,t))},Lr.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Fr(t.type,this._map,t))},Lr.prototype.dblclick=function(t){return this._firePreventable(new Fr(t.type,this._map,t))},Lr.prototype.mouseover=function(t){this._map.fire(new Fr(t.type,this._map,t))},Lr.prototype.mouseout=function(t){this._map.fire(new Fr(t.type,this._map,t))},Lr.prototype.touchstart=function(t){return this._firePreventable(new Mr(t.type,this._map,t))},Lr.prototype.touchend=function(t){this._map.fire(new Mr(t.type,this._map,t))},Lr.prototype.touchcancel=function(t){this._map.fire(new Mr(t.type,this._map,t))},Lr.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Lr.prototype.isEnabled=function(){return!0},Lr.prototype.isActive=function(){return!1},Lr.prototype.enable=function(){},Lr.prototype.disable=function(){};var Rr=function(t){this._map=t};Rr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Rr.prototype.mousemove=function(t){this._map.fire(new Fr(t.type,this._map,t))},Rr.prototype.touchmove=function(t){this._map.fire(new Mr(t.type,this._map,t))},Rr.prototype.mousedown=function(){this._delayContextMenu=!0},Rr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Fr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Rr.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Fr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Rr.prototype.isEnabled=function(){return!0},Rr.prototype.isActive=function(){return!1},Rr.prototype.enable=function(){},Rr.prototype.disable=function(){};var Vr=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function jr(t,e){for(var i={},r=0;r<t.length;r++)i[t[r].identifier]=e[r];return i}Vr.prototype.isEnabled=function(){return!!this._enabled},Vr.prototype.isActive=function(){return!!this._active},Vr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Vr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Vr.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(i.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Vr.prototype.mousemoveWindow=function(t,e){if(this._active){var r=e;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=r,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var a=Math.min(n.x,r.x),o=Math.max(n.x,r.x),s=Math.min(n.y,r.y),l=Math.max(n.y,r.y);i.setTransform(this._box,"translate("+a+"px,"+s+"px)"),this._box.style.width=o-a+"px",this._box.style.height=l-s+"px"}}},Vr.prototype.mouseupWindow=function(e,r){var n=this;if(this._active&&0===e.button){var a=this._startPos,o=r;if(this.reset(),i.suppressClick(),a.x!==o.x||a.y!==o.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(a,o,n._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},Vr.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Vr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},Vr.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))};var zr=function(t){this.reset(),this.numTouches=t.numTouches};zr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},zr.prototype.touchstart=function(e,i){(this.centroid||e.targetTouches.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),e.targetTouches.length===this.numTouches&&(this.centroid=function(e){for(var i=new t.Point(0,0),r=0,n=e;r<n.length;r+=1)i._add(n[r]);return i.div(e.length)}(i),this.touches=jr(e.targetTouches,i)))},zr.prototype.touchmove=function(t,e){if(!this.aborted&&this.centroid){var i=jr(t.targetTouches,e);for(var r in this.touches){var n=i[r];(!n||n.dist(this.touches[r])>30)&&(this.aborted=!0)}}},zr.prototype.touchend=function(t){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===t.targetTouches.length){var e=!this.aborted&&this.centroid;if(this.reset(),e)return e}};var Br=function(t){this.singleTap=new zr(t),this.numTaps=t.numTaps,this.reset()};Br.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Br.prototype.touchstart=function(t,e){this.singleTap.touchstart(t,e)},Br.prototype.touchmove=function(t,e){this.singleTap.touchmove(t,e)},Br.prototype.touchend=function(t){var e=this.singleTap.touchend(t);if(e){var i=t.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(e)<30;if(i&&r||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=e,this.count===this.numTaps)return this.reset(),e}};var Nr=function(){this._zoomIn=new Br({numTouches:1,numTaps:2}),this._zoomOut=new Br({numTouches:2,numTaps:1}),this.reset()};Nr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Nr.prototype.touchstart=function(t,e){this._zoomIn.touchstart(t,e),this._zoomOut.touchstart(t,e)},Nr.prototype.touchmove=function(t,e){this._zoomIn.touchmove(t,e),this._zoomOut.touchmove(t,e)},Nr.prototype.touchend=function(t){var e=this,i=this._zoomIn.touchend(t),r=this._zoomOut.touchend(t);return i?(this._active=!0,t.preventDefault(),setTimeout((function(){return e.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}}):r?(this._active=!0,t.preventDefault(),setTimeout((function(){return e.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(r)},{originalEvent:t})}}):void 0},Nr.prototype.touchcancel=function(){this.reset()},Nr.prototype.enable=function(){this._enabled=!0},Nr.prototype.disable=function(){this._enabled=!1,this.reset()},Nr.prototype.isEnabled=function(){return this._enabled},Nr.prototype.isActive=function(){return this._active};var Ur=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Ur.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Ur.prototype._correctButton=function(t,e){return!1},Ur.prototype._move=function(t,e){return{}},Ur.prototype.mousedown=function(t,e){if(!this._lastPoint){var r=i.mouseButton(t);this._correctButton(t,r)&&(this._lastPoint=e,this._eventButton=r)}},Ur.prototype.mousemoveWindow=function(t,e){var i=this._lastPoint;if(i&&(t.preventDefault(),this._moved||!(e.dist(i)<this._clickTolerance)))return this._moved=!0,this._lastPoint=e,this._move(i,e)},Ur.prototype.mouseupWindow=function(t){i.mouseButton(t)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},Ur.prototype.enable=function(){this._enabled=!0},Ur.prototype.disable=function(){this._enabled=!1,this.reset()},Ur.prototype.isEnabled=function(){return this._enabled},Ur.prototype.isActive=function(){return this._active};var Xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,i){t.prototype.mousedown.call(this,e,i),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Ur),Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Ur),Wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Ur),Yr=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Yr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Yr.prototype.touchstart=function(t,e){return this._calculateTransform(t,e)},Yr.prototype.touchmove=function(t,e){if(this._active)return t.preventDefault(),this._calculateTransform(t,e)},Yr.prototype.touchend=function(t,e){this._calculateTransform(t,e),this._active&&t.targetTouches.length<this._minTouches&&this.reset()},Yr.prototype.touchcancel=function(){this.reset()},Yr.prototype._calculateTransform=function(e,i){e.targetTouches.length>0&&(this._active=!0);var r=jr(e.targetTouches,i),n=new t.Point(0,0),a=new t.Point(0,0),o=0;for(var s in r){var l=r[s],u=this._touches[s];u&&(n._add(l),a._add(l.sub(u)),o++,r[s]=l)}if(this._touches=r,!(o<this._minTouches)&&a.mag()){var c=a.div(o);if(this._sum._add(c),!(this._sum.mag()<this._clickTolerance))return{around:n.div(o),panDelta:c}}},Yr.prototype.enable=function(){this._enabled=!0},Yr.prototype.disable=function(){this._enabled=!1,this.reset()},Yr.prototype.isEnabled=function(){return this._enabled},Yr.prototype.isActive=function(){return this._active};var Gr=function(){this.reset()};function qr(t,e,i){for(var r=0;r<t.targetTouches.length;r++)if(t.targetTouches[r].identifier===i)return e[r]}function Kr(t,e){return Math.log(t/e)/Math.LN2}Gr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Gr.prototype._start=function(t){},Gr.prototype._move=function(t,e,i){return{}},Gr.prototype.touchstart=function(t,e){this._firstTwoTouches||t.targetTouches.length<2||(this._firstTwoTouches=[t.targetTouches[0].identifier,t.targetTouches[1].identifier],this._start([e[0],e[1]]))},Gr.prototype.touchmove=function(t,e){if(this._firstTwoTouches){t.preventDefault();var i=this._firstTwoTouches,r=i[1],n=qr(t,e,i[0]),a=qr(t,e,r);if(n&&a){var o=this._aroundCenter?null:n.add(a).div(2);return this._move([n,a],o,t)}}},Gr.prototype.touchend=function(t,e){if(this._firstTwoTouches){var r=this._firstTwoTouches,n=r[1],a=qr(t,e,r[0]),o=qr(t,e,n);a&&o||(this._active&&i.suppressClick(),this.reset())}},Gr.prototype.touchcancel=function(){this.reset()},Gr.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Gr.prototype.disable=function(){this._enabled=!1,this.reset()},Gr.prototype.isEnabled=function(){return this._enabled},Gr.prototype.isActive=function(){return this._active};var Zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Kr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Kr(this._distance,i),pinchAround:e}},e}(Gr);function Jr(t,e){return 180*t.angleWith(e)/Math.PI}var $r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Jr(this._vector,i),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,i=Jr(t,this._startVector);return Math.abs(i)<e},e}(Gr);function Qr(t){return Math.abs(t.y)>Math.abs(t.x)}var tn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,Qr(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,i){var r=t[0].sub(this._lastPoints[0]),n=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,n,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+n.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,i){if(void 0!==this._valid)return this._valid;var r=t.mag()>=2,n=e.mag()>=2;if(r||n){if(!r||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var a=t.y>0==e.y>0;return Qr(t)&&Qr(e)&&a}},e}(Gr),en={panStep:100,bearingStep:15,pitchStep:10},rn=function(){var t=en;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep};function nn(t){return t*(2-t)}rn.prototype.reset=function(){this._active=!1},rn.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=0,r=0,n=0,a=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),a=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),a=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?n=-1:(t.preventDefault(),o=1);break;default:return}return{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:nn,zoom:i?Math.round(l)+i*(t.shiftKey?2:1):l,bearing:s.getBearing()+r*e._bearingStep,pitch:s.getPitch()+n*e._pitchStep,offset:[-a*e._panStep,-o*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},rn.prototype.enable=function(){this._enabled=!0},rn.prototype.disable=function(){this._enabled=!1,this.reset()},rn.prototype.isEnabled=function(){return this._enabled},rn.prototype.isActive=function(){return this._active};var an=function(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};an.prototype.setZoomRate=function(t){this._defaultZoomRate=t},an.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},an.prototype.isEnabled=function(){return!!this._enabled},an.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},an.prototype.isZooming=function(){return!!this._zooming},an.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},an.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},an.prototype.wheel=function(e){if(this.isEnabled()){var i=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(n*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}},an.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},an.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var r=i.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},an.prototype.renderFrame=function(){return this._onScrollFrame()},an.prototype._onScrollFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,n=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==n&&(n=1/n);var a="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(a*n))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o,s="number"==typeof this._targetZoom?this._targetZoom:i.zoom,l=this._startZoom,u=this._easing,c=!1;if("wheel"===this._type&&l&&u){var h=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=u(h);o=t.number(l,s,p),h<1?this._frameId||(this._frameId=!0):c=!0}else o=s,c=!0;return this._active=!0,c&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!c,zoomDelta:o-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},an.prototype._smoothOutEasing=function(e){var i=t.ease;if(this._prevEase){var r=this._prevEase,n=(t.browser.now()-r.start)/r.duration,a=r.easing(n+.01)-r.easing(n),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);i=t.bezier(o,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:i},i},an.prototype.reset=function(){this._active=!1};var on=function(t,e){this._clickZoom=t,this._tapZoom=e};on.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},on.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},on.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},on.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var sn=function(){this.reset()};sn.prototype.reset=function(){this._active=!1},sn.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}},sn.prototype.enable=function(){this._enabled=!0},sn.prototype.disable=function(){this._enabled=!1,this.reset()},sn.prototype.isEnabled=function(){return this._enabled},sn.prototype.isActive=function(){return this._active};var ln=function(){this._tap=new Br({numTouches:1,numTaps:1}),this.reset()};ln.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ln.prototype.touchstart=function(t,e){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?t.targetTouches.length>0&&(this._swipePoint=e[0],this._swipeTouch=t.targetTouches[0].identifier):this._tap.touchstart(t,e))},ln.prototype.touchmove=function(t,e){if(this._tapTime){if(this._swipePoint){if(t.targetTouches[0].identifier!==this._swipeTouch)return;var i=e[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e)},ln.prototype.touchend=function(t){this._tapTime?this._swipePoint&&0===t.targetTouches.length&&this.reset():this._tap.touchend(t)&&(this._tapTime=t.timeStamp)},ln.prototype.touchcancel=function(){this.reset()},ln.prototype.enable=function(){this._enabled=!0},ln.prototype.disable=function(){this._enabled=!1,this.reset()},ln.prototype.isEnabled=function(){return this._enabled},ln.prototype.isActive=function(){return this._active};var un=function(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i};un.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},un.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},un.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},un.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var cn=function(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i};cn.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},cn.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},cn.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},cn.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var hn=function(t,e,i,r){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};hn.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},hn.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},hn.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},hn.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},hn.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},hn.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var pn=function(t){return t.zoom||t.drag||t.pitch||t.rotate},dn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event);function fn(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var mn=function(e,r){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ar(e),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r),t.bindAll(["handleEvent","handleWindowEvent"],this);var n=this._el;this._listeners=[[n,"touchstart",{passive:!1}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[t.window,"blur",void 0]];for(var a=0,o=this._listeners;a<o.length;a+=1){var s=o[a],l=s[0];i.addEventListener(l,s[1],l===t.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};mn.prototype.destroy=function(){for(var e=0,r=this._listeners;e<r.length;e+=1){var n=r[e],a=n[0];i.removeEventListener(a,n[1],a===t.window.document?this.handleWindowEvent:this.handleEvent,n[2])}},mn.prototype._addDefaultHandlers=function(t){var e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new Lr(e,t));var r=e.boxZoom=new Vr(e,t);this._add("boxZoom",r);var n=new Nr,a=new sn;e.doubleClickZoom=new on(a,n),this._add("tapZoom",n),this._add("clickZoom",a);var o=new ln;this._add("tapDragZoom",o);var s=e.touchPitch=new tn;this._add("touchPitch",s);var l=new Hr(t),u=new Wr(t);e.dragRotate=new cn(t,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new Xr(t),h=new Yr(t);e.dragPan=new un(i,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var p=new $r,d=new Zr;e.touchZoomRotate=new hn(i,d,p,o),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]);var f=e.scrollZoom=new an(e,this);this._add("scrollZoom",f,["mousePan"]);var m=e.keyboard=new rn;this._add("keyboard",m),this._add("blockableMapEvent",new Rr(e));for(var y=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];y<g.length;y+=1){var b=g[y];t.interactive&&t[b]&&e[b].enable(t[b])}},mn.prototype._add=function(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e},mn.prototype.stop=function(){if(!this._updatingCamera){for(var t=0,e=this._handlers;t<e.length;t+=1)e[t].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},mn.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},mn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},mn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},mn.prototype._blockedByActive=function(t,e,i){for(var r in t)if(r!==i&&(!e||e.indexOf(r)<0))return!0;return!1},mn.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},mn.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var r="renderFrame"===t.type?void 0:t,n={needsRenderFrame:!1},a={},o={},s=t?t.targetTouches?i.touchPos(this._el,t.targetTouches):i.mousePos(this._el,t):null,l=0,u=this._handlers;l<u.length;l+=1){var c=u[l],h=c.handlerName,p=c.handler,d=c.allowed;if(p.isEnabled()){var f=void 0;this._blockedByActive(o,d,h)?p.reset():p[e||t.type]&&(f=p[e||t.type](t,s),this.mergeHandlerResult(n,a,f,h,r),f&&f.needsRenderFrame&&this._triggerRenderFrame()),(f||p.isActive())&&(o[h]=p)}}var m={};for(var y in this._previousActiveHandlers)o[y]||(m[y]=r);this._previousActiveHandlers=o,(Object.keys(m).length||fn(n))&&(this._changes.push([n,a,m]),this._triggerRenderFrame()),(Object.keys(o).length||fn(n))&&this._map._stop(!0),this._updatingCamera=!1;var g=n.cameraAnimation;g&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],g(this._map))}else this.stop()},mn.prototype.mergeHandlerResult=function(e,i,r,n,a){if(r){t.extend(e,r);var o={handlerName:n,originalEvent:r.originalEvent||a};void 0!==r.zoomDelta&&(i.zoom=o),void 0!==r.panDelta&&(i.drag=o),void 0!==r.pitchDelta&&(i.pitch=o),void 0!==r.bearingDelta&&(i.rotate=o)}},mn.prototype._applyChanges=function(){for(var e={},i={},r={},n=0,a=this._changes;n<a.length;n+=1){var o=a[n],s=o[0],l=o[1],u=o[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(i,l),t.extend(r,u)}this._updateMapTransform(e,i,r),this._changes=[]},mn.prototype._updateMapTransform=function(t,e,i){var r=this._map,n=r.transform;if(!fn(t))return this._fireEvents(e,i);var a=t.panDelta,o=t.zoomDelta,s=t.bearingDelta,l=t.pitchDelta,u=t.around,c=t.pinchAround;void 0!==c&&(u=c),r._stop(!0),u=u||r.transform.centerPoint;var h=n.pointLocation(a?u.sub(a):u);s&&(n.bearing+=s),l&&(n.pitch+=l),o&&(n.zoom+=o),n.setLocationAtPoint(h,u),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,i)},mn.prototype._fireEvents=function(e,i){var r,n=this,a=pn(this._eventsInProgress),o=pn(e);for(var s in!a&&o&&this._fireEvent("movestart",o.originalEvent),e){var l=e[s].originalEvent,u=!this._eventsInProgress[s];this._eventsInProgress[s]=e[s],u&&this._fireEvent(s+"start",l)}for(var c in e.rotate&&(this._bearingChanged=!0),o&&this._fireEvent("move",o.originalEvent),e)this._fireEvent(c,e[c].originalEvent);for(var h in this._eventsInProgress){var p=this._eventsInProgress[h],d=p.handlerName,f=p.originalEvent;this._handlersById[d].isActive()||(delete this._eventsInProgress[h],this._fireEvent(h+"end",r=i[d]||f))}var m=pn(this._eventsInProgress);if((a||o)&&!m){this._updatingCamera=!0;var y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),g=function(t){return 0!==t&&-n._bearingSnap<t&&t<n._bearingSnap};y?(g(y.bearing||this._map.getBearing())&&(y.bearing=0),this._map.easeTo(y,{originalEvent:r})):(this._map.fire(new t.Event("moveend",{originalEvent:r})),g(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},mn.prototype._fireEvent=function(e,i){this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},mn.prototype._triggerRenderFrame=function(){var t=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame((function(e){delete t._frameId,t.handleEvent(new dn("renderFrame",{timeStamp:e})),t._applyChanges()})))};var yn=function(e){function i(i,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},i.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},i.prototype.panBy=function(e,i,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),r)},i.prototype.panTo=function(e,i,r){return this.easeTo(t.extend({center:e},i),r)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},i.prototype.zoomTo=function(e,i,r){return this.easeTo(t.extend({zoom:e},i),r)},i.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},i.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},i.prototype.getPadding=function(){return this.transform.padding},i.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},i.prototype.rotateTo=function(e,i,r){return this.easeTo(t.extend({bearing:e},i),r)},i.prototype.resetNorth=function(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this},i.prototype.resetNorthPitch=function(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this},i.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},i.prototype.cameraForBounds=function(e,i){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,i)},i.prototype._cameraForBoxAndBearing=function(e,i,r,n){var a={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=t.extend({padding:a,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var o=n.padding;n.padding={top:o,bottom:o,right:o,left:o}}n.padding=t.extend(a,n.padding);var s=this.transform,l=s.padding,u=s.project(t.LngLat.convert(e)),c=s.project(t.LngLat.convert(i)),h=u.rotate(-r*Math.PI/180),p=c.rotate(-r*Math.PI/180),d=new t.Point(Math.max(h.x,p.x),Math.max(h.y,p.y)),f=new t.Point(Math.min(h.x,p.x),Math.min(h.y,p.y)),m=d.sub(f),y=(s.width-(l.left+l.right+n.padding.left+n.padding.right))/m.x,g=(s.height-(l.top+l.bottom+n.padding.top+n.padding.bottom))/m.y;if(!(g<0||y<0)){var b=Math.min(s.scaleZoom(s.scale*Math.min(y,g)),n.maxZoom),v=t.Point.convert(n.offset),_=new t.Point(v.x+(n.padding.left-n.padding.right)/2,v.y+(n.padding.top-n.padding.bottom)/2).mult(s.scale/s.zoomScale(b));return{center:s.unproject(u.add(c).div(2).sub(_)),zoom:b,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},i.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},i.prototype.fitScreenCoordinates=function(e,i,r,n,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(i)),r,n),n,a)},i.prototype._fitInternal=function(e,i,r){return e?(delete(i=t.extend(e,i)).padding,i.linear?this.easeTo(i,r):this.flyTo(i,r)):this},i.prototype.jumpTo=function(e,i){this.stop();var r=this.transform,n=!1,a=!1,o=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(n=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(a=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(o=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),n&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),a&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),o&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))},i.prototype.easeTo=function(e,i){var r=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var n=this.transform,a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),l=this.getPadding(),u="zoom"in e?+e.zoom:a,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,h="pitch"in e?+e.pitch:s,p="padding"in e?e.padding:n.padding,d=t.Point.convert(e.offset),f=n.centerPoint.add(d),m=n.pointLocation(f),y=t.LngLat.convert(e.center||m);this._normalizeCenter(y);var g,b,v=n.project(m),_=n.project(y).sub(v),x=n.zoomScale(u-a);e.around&&(g=t.LngLat.convert(e.around),b=n.locationPoint(g));var S={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||u!==a,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||h!==s,this._padding=!n.isPaddingEqual(p),this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,S),clearTimeout(this._easeEndTimeoutID),this._ease((function(e){if(r._zooming&&(n.zoom=t.number(a,u,e)),r._rotating&&(n.bearing=t.number(o,c,e)),r._pitching&&(n.pitch=t.number(s,h,e)),r._padding&&(n.interpolatePadding(l,p,e),f=n.centerPoint.add(d)),g)n.setLocationAtPoint(g,b);else{var m=n.zoomScale(n.zoom-a),y=u>a?Math.min(2,x):Math.max(.5,x),S=Math.pow(y,1-e),w=n.unproject(v.add(_.mult(e*S)).mult(m));n.setLocationAtPoint(n.renderWorldCopies?w.wrap():w,f)}r._fireMoveEvents(i)}),(function(t){r._afterEase(i,t)}),e),this},i.prototype._prepareEase=function(e,i,r){void 0===r&&(r={}),this._moving=!0,i||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))},i.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},i.prototype._afterEase=function(e,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId;var r=this._zooming,n=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),n&&this.fire(new t.Event("rotateend",e)),a&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},i.prototype.flyTo=function(e,i){var r=this;if(!e.essential&&t.browser.prefersReducedMotion){var n=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var a=this.transform,o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in e?t.clamp(+e.zoom,a.minZoom,a.maxZoom):o,h="bearing"in e?this._normalizeBearing(e.bearing,s):s,p="pitch"in e?+e.pitch:l,d="padding"in e?e.padding:a.padding,f=a.zoomScale(c-o),m=t.Point.convert(e.offset),y=a.centerPoint.add(m),g=a.pointLocation(y),b=t.LngLat.convert(e.center||g);this._normalizeCenter(b);var v=a.project(g),_=a.project(b).sub(v),x=e.curve,S=Math.max(a.width,a.height),w=S/f,T=_.mag();if("minZoom"in e){var P=t.clamp(Math.min(e.minZoom,o,c),a.minZoom,a.maxZoom),C=S/a.zoomScale(P-o);x=Math.sqrt(C/T*2)}var k=x*x;function I(t){var e=(w*w-S*S+(t?-1:1)*k*k*T*T)/(2*(t?w:S)*k*T);return Math.log(Math.sqrt(e*e+1)-e)}function A(t){return(Math.exp(t)-Math.exp(-t))/2}function O(t){return(Math.exp(t)+Math.exp(-t))/2}var D=I(0),F=function(t){return O(D)/O(D+x*t)},M=function(t){return S*((O(D)*(A(e=D+x*t)/O(e))-A(D))/k)/T;var e},E=(I(1)-D)/x;if(Math.abs(T)<1e-6||!isFinite(E)){if(Math.abs(S-w)<1e-6)return this.easeTo(e,i);var L=w<S?-1:1;E=Math.abs(Math.log(w/S))/x,M=function(){return 0},F=function(t){return Math.exp(L*x*t)}}return e.duration="duration"in e?+e.duration:1e3*E/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==h,this._pitching=p!==l,this._padding=!a.isPaddingEqual(d),this._prepareEase(i,!1),this._ease((function(e){var n=e*E,f=1/F(n);a.zoom=1===e?c:o+a.scaleZoom(f),r._rotating&&(a.bearing=t.number(s,h,e)),r._pitching&&(a.pitch=t.number(l,p,e)),r._padding&&(a.interpolatePadding(u,d,e),y=a.centerPoint.add(m));var g=1===e?b:a.unproject(v.add(_.mult(M(n))).mult(f));a.setLocationAtPoint(a.renderWorldCopies?g.wrap():g,y),r._fireMoveEvents(i)}),(function(){return r._afterEase(i)}),e),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){return this._stop()},i.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,e)}if(!t){var r=this.handlers;r&&r.stop()}return this},i.prototype._ease=function(e,i,r){!1===r.animate||0===r.duration?(e(1),i()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(e,i){e=t.wrap(e,-180,180);var r=Math.abs(e-i);return Math.abs(e-360-i)<r&&(e-=360),Math.abs(e+360-i)<r&&(e+=360),e},i.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}},i}(t.Evented),gn=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};gn.prototype.getDefaultPosition=function(){return"bottom-right"},gn.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},gn.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},gn.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var r=i.reduce((function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<i.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},gn.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},gn.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var i=this._map.style.sourceCaches;for(var r in i){var n=i[r];if(n.used){var a=n.getSource();a.attribution&&t.indexOf(a.attribution)<0&&t.push(a.attribution)}}t.sort((function(t,e){return t.length-e.length}));var o=(t=t.filter((function(e,i){for(var r=i+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}))).join(" | ");o!==this._attribHTML&&(this._attribHTML=o,t.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},gn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var bn=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};bn.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},bn.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},bn.prototype.getDefaultPosition=function(){return"bottom-left"},bn.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},bn.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},bn.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var vn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};vn.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},vn.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,r=e?this._queue.concat(e):this._queue;i<r.length;i+=1){var n=r[i];if(n.id===t)return void(n.cancelled=!0)}},vn.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var i=0,r=e;i<r.length;i+=1){var n=r[i];if(!n.cancelled&&(n.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},vn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var _n={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},xn=t.window.HTMLImageElement,Sn=t.window.HTMLElement,wn=t.window.ImageBitmap,Tn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Pn=function(r){function n(e){var i=this;if(null!=(e=t.extend({},Tn,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var n=new xr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(r.call(this,n,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new vn,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},_n,e.locale),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Sn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return i._update(!1)})),this.on("moveend",(function(){return i._update(!1)})),this.on("zoom",(function(){return i._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new mn(this,e),this._hash=e.hash&&new wr("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new gn({customAttribution:e.customAttribution})),this.addControl(new bn,e.logoPosition),this.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),this.on("data",(function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){i.fire(new t.Event(e.dataType+"dataloading",e))}))}r&&(n.__proto__=r),(n.prototype=Object.create(r&&r.prototype)).constructor=n;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return n.prototype._getMapId=function(){return this._mapId},n.prototype.addControl=function(e,i){if(void 0===i&&e.getDefaultPosition&&(i=e.getDefaultPosition()),void 0===i&&(i="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var n=this._controlPositions[i];return-1!==i.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this},n.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this},n.prototype.resize=function(e){var i=this._containerDimensions(),r=i[0],n=i[1];this._resizeCanvas(r,n),this.transform.resize(r,n),this.painter.resize(r,n);var a=!this._moving;return a&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),a&&this.fire(new t.Event("moveend",e)),this},n.prototype.getBounds=function(){return this.transform.getBounds()},n.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},n.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},n.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},n.prototype.getMinPitch=function(){return this.transform.minPitch},n.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},n.prototype.getMaxPitch=function(){return this.transform.maxPitch},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},n.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},n.prototype.isMoving=function(){return this._moving||this.handlers.isActive()},n.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},n.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},n.prototype._createDelegatedListener=function(t,e,i){var r,n=this;if("mouseenter"===t||"mouseover"===t){var a=!1;return{layer:e,listener:i,delegates:{mousemove:function(r){var o=n.getLayer(e)?n.queryRenderedFeatures(r.point,{layers:[e]}):[];o.length?a||(a=!0,i.call(n,new Fr(t,n,r.originalEvent,{features:o}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===t||"mouseout"===t){var o=!1;return{layer:e,listener:i,delegates:{mousemove:function(r){(n.getLayer(e)?n.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?o=!0:o&&(o=!1,i.call(n,new Fr(t,n,r.originalEvent)))},mouseout:function(e){o&&(o=!1,i.call(n,new Fr(t,n,e.originalEvent)))}}}}return{layer:e,listener:i,delegates:(r={},r[t]=function(t){var r=n.getLayer(e)?n.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,i.call(n,t),delete t.features)},r)}},n.prototype.on=function(t,e,i){if(void 0===i)return r.prototype.on.call(this,t,e);var n=this._createDelegatedListener(t,e,i);for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(n),n.delegates)this.on(a,n.delegates[a]);return this},n.prototype.once=function(t,e,i){if(void 0===i)return r.prototype.once.call(this,t,e);var n=this._createDelegatedListener(t,e,i);for(var a in n.delegates)this.once(a,n.delegates[a]);return this},n.prototype.off=function(t,e,i){var n=this;return void 0===i?r.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(r){for(var a=r[t],o=0;o<a.length;o++){var s=a[o];if(s.layer===e&&s.listener===i){for(var l in s.delegates)n.off(l,s.delegates[l]);return a.splice(o,1),n}}}(this._delegatedListeners),this)},n.prototype.queryRenderedFeatures=function(e,i){if(!this.style)return[];var r;if(void 0!==i||void 0===e||e instanceof t.Point||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var n=t.Point.convert(e[0]),a=t.Point.convert(e[1]);r=[n,new t.Point(a.x,n.y),a,new t.Point(n.x,a.y),n]}return this.style.queryRenderedFeatures(r,i,this.transform)},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(e,i))},n.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},n.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Xe(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},n.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Xe(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},n.prototype._diffStyle=function(e,i){var r=this;if("string"==typeof e){var n=this._requestManager.normalizeStyleURL(e),a=this._requestManager.transformRequest(n,t.ResourceType.Style);t.getJSON(a,(function(e,n){e?r.fire(new t.ErrorEvent(e)):n&&r._updateDiff(n,i)}))}else"object"==typeof e&&this._updateDiff(e,i)},n.prototype._updateDiff=function(e,i){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,i)}},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},n.prototype.isSourceLoaded=function(e){var i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var r in i){var n=i[r];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,i,r){void 0===r&&(r={});var n=r.pixelRatio;void 0===n&&(n=1);var a=r.sdf;void 0===a&&(a=!1);var o=r.stretchX,s=r.stretchY,l=r.content;if(this._lazyInitEmptyStyle(),i instanceof xn||wn&&i instanceof wn){var u=t.browser.getImageData(i);this.style.addImage(e,{data:new t.RGBAImage({width:u.width,height:u.height},u.data),pixelRatio:n,stretchX:o,stretchY:s,content:l,sdf:a,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=i;this.style.addImage(e,{data:new t.RGBAImage({width:i.width,height:i.height},new Uint8Array(i.data)),pixelRatio:n,stretchX:o,stretchY:s,content:l,sdf:a,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}},n.prototype.updateImage=function(e,i){var r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var n=i instanceof xn||wn&&i instanceof wn?t.browser.getImageData(i):i,a=n.width,o=n.height,s=n.data;return void 0===a||void 0===o?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):a!==r.data.width||o!==r.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(i instanceof xn||wn&&i instanceof wn)),void this.style.updateImage(e,r))},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),i)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},n.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,i,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,i,r),this._update(!0)},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,i,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,i,r),this._update(!0)},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},n.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},n.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=i.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var n=this._controlContainer=i.create("div","mapboxgl-control-container",t),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){a[t]=i.create("div","mapboxgl-ctrl-"+t,n)}))},n.prototype._resizeCanvas=function(e,i){var r=t.browser.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*i,this._canvas.style.width=e+"px",this._canvas.style.height=i+"px"},n.prototype._setupPainter=function(){var i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);r?(this.painter=new gr(r,this.transform),t.webpSupported.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},n.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(e){var i,r=this,n=0,a=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=a.createQueryEXT(),a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),n=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=t.browser.now();this.style.zoomHistory.update(s,l);var u=new t.EvaluationParameters(s,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),c=u.crossFadingFactor();1===c&&c===this._crossFadingFactor||(o=!0,this._crossFadingFactor=c),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=t.browser.now()-n;a.endQueryEXT(a.TIME_ELAPSED_EXT,i),setTimeout((function(){var e=a.getQueryObjectEXT(i,a.QUERY_RESULT_EXT)/1e6;a.deleteQueryEXT(i),r.fire(new t.Event("gpu-timing-frame",{cpuTime:h,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout((function(){var e=r.painter.queryGpuTimers(p);r.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this}},n.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,i=this._controls;e<i.length;e+=1)i[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Cn(this._canvasContainer),Cn(this._controlContainer),Cn(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},n.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render(t)})))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(t){this._vertices=t,this._update()},n.prototype._setCacheLimits=function(e,i){t.setCacheLimits(e,i)},a.version.get=function(){return t.version},Object.defineProperties(n.prototype,a),n}(yn);function Cn(t){t.parentNode&&t.parentNode.removeChild(t)}var kn={showCompass:!0,showZoom:!0,visualizePitch:!1},In=function(e){var r=this;this.options=t.extend({},kn,e),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return r._map.zoomIn({},{originalEvent:t})})),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return r._map.zoomOut({},{originalEvent:t})})),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:t}):r._map.resetNorth({},{originalEvent:t})})),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};In.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},In.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},In.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new An(this._map,this._compass,this.options.visualizePitch)),this._container},In.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},In.prototype._createButton=function(t,e){var r=i.create("button",t,this._container);return r.type="button",r.addEventListener("click",e),r},In.prototype._setButtonTitle=function(t,e){var i=this._map._getUIString("NavigationControl."+e);t.title=i,t.setAttribute("aria-label",i)};var An=function(e,r,n){void 0===n&&(n=!1),this._clickTolerance=10,this.element=r,this.mouseRotate=new Hr({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,n&&(this.mousePitch=new Wr({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(r,"mousedown",this.mousedown),i.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(r,"touchmove",this.touchmove),i.addEventListener(r,"touchend",this.touchend),i.addEventListener(r,"touchcancel",this.reset)};function On(e,i,r){if(e=new t.LngLat(e.lng,e.lat),i){var n=new t.LngLat(e.lng-360,e.lat),a=new t.LngLat(e.lng+360,e.lat),o=r.locationPoint(e).distSqr(i);r.locationPoint(n).distSqr(i)<o?e=n:r.locationPoint(a).distSqr(i)<o&&(e=a)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}An.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),i.disableDrag()},An.prototype.move=function(t,e){var i=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&i.setBearing(i.getBearing()+r.bearingDelta),this.mousePitch){var n=this.mousePitch.mousemoveWindow(t,e);n&&n.pitchDelta&&i.setPitch(i.getPitch()+n.pitchDelta)}},An.prototype.off=function(){var t=this.element;i.removeEventListener(t,"mousedown",this.mousedown),i.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(t,"touchmove",this.touchmove),i.removeEventListener(t,"touchend",this.touchend),i.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},An.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(t.window,"mousemove",this.mousemove),i.removeEventListener(t.window,"mouseup",this.mouseup)},An.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),i.mousePos(this.element,e)),i.addEventListener(t.window,"mousemove",this.mousemove),i.addEventListener(t.window,"mouseup",this.mouseup)},An.prototype.mousemove=function(t){this.move(t,i.mousePos(this.element,t))},An.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},An.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},An.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},An.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},An.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Dn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Fn(t,e,i){var r=t.classList;for(var n in Dn)r.remove("mapboxgl-"+i+"-anchor-"+n);r.add("mapboxgl-"+i+"-anchor-"+e)}var Mn,En=function(e){function r(r,n){var a=this;if(e.call(this),(r instanceof t.window.HTMLElement||n)&&(r=t.extend({element:r},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._draggable=r&&r.draggable||!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&"auto"!==r.pitchAlignment?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=t.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var o=i.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill-rule","nonzero");var u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var c=0,h=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<h.length;c+=1){var p=h[c],d=i.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04"),d.setAttributeNS(null,"cx","10.5"),d.setAttributeNS(null,"cy","5.80029008"),d.setAttributeNS(null,"rx",p.rx),d.setAttributeNS(null,"ry",p.ry),u.appendChild(d)}var f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(m);var y=i.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"fill","#000000");var g=i.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),y.appendChild(g);var b=i.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(6.0, 7.0)"),b.setAttributeNS(null,"fill","#FFFFFF");var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=i.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var x=i.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),v.appendChild(_),v.appendChild(x),l.appendChild(u),l.appendChild(f),l.appendChild(y),l.appendChild(b),l.appendChild(v),o.appendChild(l),this._element.appendChild(o),this._offset=t.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),this._element.addEventListener("focus",(function(){var t=a._map.getContainer();t.scrollTop=0,t.scrollLeft=0})),Fn(this._element,this._anchor,"marker"),this._popup=null}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},r.prototype._onKeyPress=function(t){var e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()},r.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},r.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=On(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,Dn[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+e)}},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},r.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},r.prototype.getRotation=function(){return this._rotation},r.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},r.prototype.getRotationAlignment=function(){return this._rotationAlignment},r.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},r.prototype.getPitchAlignment=function(){return this._pitchAlignment},r}(t.Evented),Ln={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Rn=0,Vn=!1,jn=function(e){function r(i){e.call(this),this.options=t.extend({},Ln,i),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.onAdd=function(e){var r;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Mn?r(Mn):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){r(Mn="denied"!==t.state)})):r(Mn=!!t.window.navigator.geolocation),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Rn=0,Vn=!1},r.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())},r.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},r.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},r.prototype._updateCamera=function(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,n=this._map.getBearing(),a=t.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(r),a,{geolocateSource:!0})},r.prototype._updateMarker=function(e){if(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},r.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),r=e.distanceTo(i),n=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=n+"px",this._circleElement.style.height=n+"px"},r.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},r.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Vn)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(e){var r=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{var a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new En(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new En({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==r._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new t.Event("trackuserlocationend")))}))},r.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Rn--,Vn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Rn>1?(e={maximumAge:6e5,timeout:0},Vn=!0):(e=this.options.positionOptions,Vn=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(t.Evented),zn={maxWidth:100,unit:"metric"},Bn=function(e){this.options=t.extend({},zn,e),t.bindAll(["_onMove","setUnit"],this)};function Nn(t,e,i){var r=i&&i.maxWidth||100,n=t._container.clientHeight/2,a=t.unproject([0,n]),o=t.unproject([r,n]),s=a.distanceTo(o);if(i&&"imperial"===i.unit){var l=3.2808*s;l>5280?Un(e,r,l/5280,t._getUIString("ScaleControl.Miles")):Un(e,r,l,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?Un(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Un(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):Un(e,r,s,t._getUIString("ScaleControl.Meters"))}function Un(t,e,i,r){var n,a,o,s=(n=i,(a=Math.pow(10,(""+Math.floor(n)).length-1))*(o=(o=n/a)>=10?10:o>=5?5:o>=3?3:o>=2?2:o>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(o)));t.style.width=e*(s/i)+"px",t.innerHTML=s+"&nbsp;"+r}Bn.prototype.getDefaultPosition=function(){return"bottom-left"},Bn.prototype._onMove=function(){Nn(this._map,this._container,this.options)},Bn.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Bn.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Bn.prototype.setUnit=function(t){this.options.unit=t,Nn(this._map,this._container,this.options)};var Xn=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Xn.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Xn.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Xn.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Xn.prototype._setupUI=function(){var e=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Xn.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Xn.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Xn.prototype._isFullscreen=function(){return this._fullscreen},Xn.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Xn.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Hn={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Wn=function(e){function r(i){e.call(this),this.options=t.extend(Object.create(Hn),i),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},r.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},r.prototype.getElement=function(){return this._container},r.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},r.prototype.setHTML=function(e){var i,r=t.window.document.createDocumentFragment(),n=t.window.document.createElement("body");for(n.innerHTML=e;i=n.firstChild;)r.appendChild(i);return this.setDOMContent(r)},r.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},r.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},r.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},r.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},r.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},r.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},r.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},r.prototype._onMouseUp=function(t){this._update(t.point)},r.prototype._onMouseMove=function(t){this._update(t.point)},r.prototype._onDrag=function(t){this._update(t.point)},r.prototype._update=function(e){var r=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return r._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=On(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var n=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),a=this.options.anchor,o=function e(i){if(i){if("number"==typeof i){var r=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t.Point(0,0),top:new t.Point(0,i),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-i),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(i,0),right:new t.Point(-i,0)}}if(i instanceof t.Point||Array.isArray(i)){var n=t.Point.convert(i);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.Point.convert(i.center||[0,0]),top:t.Point.convert(i.top||[0,0]),"top-left":t.Point.convert(i["top-left"]||[0,0]),"top-right":t.Point.convert(i["top-right"]||[0,0]),bottom:t.Point.convert(i.bottom||[0,0]),"bottom-left":t.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(i["bottom-right"]||[0,0]),left:t.Point.convert(i.left||[0,0]),right:t.Point.convert(i.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!a){var s,l=this._container.offsetWidth,u=this._container.offsetHeight;s=n.y+o.bottom.y<u?["top"]:n.y>this._map.transform.height-u?["bottom"]:[],n.x<l/2?s.push("left"):n.x>this._map.transform.width-l/2&&s.push("right"),a=0===s.length?"bottom":s.join("-")}var c=n.add(o[a]).round();i.setTransform(this._container,Dn[a]+" translate("+c.x+"px,"+c.y+"px)"),Fn(this._container,a,"popup")}},r.prototype._onClose=function(){this.remove()},r}(t.Evented),Yn={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Pn,NavigationControl:In,GeolocateControl:jn,AttributionControl:gn,ScaleControl:Bn,FullscreenControl:Xn,Popup:Wn,Marker:En,Style:Xe,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){jt().acquire(Et)},clearPrewarmedResources:function(){var t=Rt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Et),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Lt.workerCount},set workerCount(t){Lt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Yn})),i}()},gFMj:function(t,e,i){"use strict";i.r(e);var r={};i.r(r),i.d(r,"indexOf",(function(){return lt})),i.d(r,"any",(function(){return ut})),i.d(r,"map",(function(){return ct})),i.d(r,"each",(function(){return ht})),i.d(r,"eachReverse",(function(){return pt})),i.d(r,"eachContinue",(function(){return dt})),i.d(r,"shiftLeft",(function(){return ft})),i.d(r,"last",(function(){return mt})),i.d(r,"first",(function(){return yt})),i.d(r,"insert",(function(){return gt})),i.d(r,"setIndex",(function(){return bt})),i.d(r,"pushAll",(function(){return vt})),i.d(r,"remove",(function(){return _t})),i.d(r,"move",(function(){return xt})),i.d(r,"add",(function(){return St})),i.d(r,"replace",(function(){return wt})),i.d(r,"toArray",(function(){return Tt})),i.d(r,"has",(function(){return Pt})),i.d(r,"copy",(function(){return Ct})),i.d(r,"slice",(function(){return kt})),i.d(r,"insertIndex",(function(){return It})),i.d(r,"removeIndex",(function(){return At})),i.d(r,"getSortedIndex",(function(){return Ot})),i.d(r,"findIndex",(function(){return Dt})),i.d(r,"find",(function(){return Ft})),i.d(r,"shuffle",(function(){return Mt})),i.d(r,"keepIf",(function(){return Et}));var n=i("Valr"),a=i("oW1M"),o=i("89/Q"),s=i("QJY3"),l=i("X2FZ"),u=i("R/Hu"),c=i("AytR"),h=i("4ZJM"),p=i("DUip"),d=i("mrSG"),f=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value/100},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"percent",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this._value+"%"},t}();function m(t){return new f(t)}function y(t){return Number(t)!==t}function g(t){return{}.toString.call(t)}function b(t){if("string"==typeof t)return t;if("number"==typeof t)return""+t;throw new Error("Expected a string or number but got "+g(t))}function v(t){return!!t}function _(t){if(S(t)&&!k(t)){var e=Number(t);return y(e)&&C(t)&&""!=t?_(t.replace(/[^0-9.\-]+/g,"")):e}return t}function x(t){if(S(t)&&!C(t)){if(k(t))return b(t);if(I(t))return t.toString()}return t}function S(t){return null!=t}function w(t){if(S(t))return t;throw new Error("Value doesn't exist")}function T(t,e){return S(t)?t:e}function P(t){return"[object Date]"===g(t)}function C(t){return"string"==typeof t}function k(t){return"number"==typeof t&&Number(t)==t}function I(t){return"object"==typeof t&&null!=t}function A(t){return Array.isArray(t)}var O=Math.PI,D=O/2,F=O/180,M=180/O;function E(t,e,i){return S(t)?V(t=_(t),e,i):t}function L(t,e,i){if(!k(e)||e<=0){var r=Math.round(t);return i&&r-t==.5&&r--,r}var n=Math.pow(10,e);return Math.round(t*n)/n}function R(t,e){if(!k(e)||e<=0)return Math.ceil(t);var i=Math.pow(10,e);return Math.ceil(t*i)/i}function V(t,e,i){if(k(e)){if(k(i)&&i<e){var r=i;i=e,e=r}t<e&&(t=e)}return k(i)&&t>i&&(t=i),t}function j(t){return L(Math.sin(F*t),10)}function z(t){return L(Math.tan(F*t),10)}function B(t){return L(Math.cos(F*t),10)}function N(t,e){return k(t)?k(e)&&e>t?e:t:k(e)?e:null}function U(t,e){return k(t)?k(e)&&e<t?e:t:k(e)?e:null}function X(t,e){var i=w(t.start),r=w(e.start),n=w(t.end),a=w(e.end);return Math.max(i,r)<=Math.min(n,a)}function H(t){var e=w(t.start);return{start:1-w(t.end),end:1-e}}function W(t,e){return t?(e||(e={x:0,y:0}),Math.sqrt(Math.pow(Math.abs(t.x-e.x),2)+Math.pow(Math.abs(t.y-e.y),2))):0}function Y(t,e,i,r,n){if(!t)return 0;e||(e={x:0,y:0});var a=0,o=t;if(n>0)for(var s=0;s<=n;s++){var l=Q(t,e,i,r,s/n);a+=W(o,l),o=l}return a}function G(t,e,i,r){var n=W(e,r),a=W(t,i);return Math.abs(a/n)}function q(t,e,i){return k(i)||(i=.5),{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}}function K(t,e){e||(e={x:2*t.x,y:2*t.y});var i=Math.atan2(e.y-t.y,e.x-t.x)*M;return i<0&&(i+=360),rt(i)}function Z(t){if(t){var e=t.length;if(0!==e){for(var i,r=void 0,n=void 0,a=void 0,o=0;o<e;o++){var s=t[o];(!k(n)||s.x>n)&&(n=s.x),(!k(r)||s.x<r)&&(r=s.x),(!k(i)||s.y<i)&&(i=s.y),(!k(a)||s.y>a)&&(a=s.y)}return{x:r,y:i,width:n-r,height:a-i}}}return{x:0,y:0,width:0,height:0}}function J(t){var e=t.length;if(0!==e){for(var i=void 0,r=void 0,n=void 0,a=void 0,o=0;o<e;o++){var s=t[o];i=U(s.x,i),r=U(s.y,r),n=N(s.x+s.width,n),a=N(s.y+s.height,a)}return{x:i,y:r,width:n-i,height:a-r}}}function $(t,e,i,r){return{x:(1-r)*(1-r)*t.x+2*(1-r)*r*i.x+r*r*e.x,y:(1-r)*(1-r)*t.y+2*(1-r)*r*i.y+r*r*e.y}}function Q(t,e,i,r,n){var a={x:0,y:0},o=1-n,s=o*o,l=s*o;return a.x=t.x*l+3*i.x*s*n+3*r.x*o*n*n+e.x*n*n*n,a.y=t.y*l+3*i.y*s*n+3*r.y*o*n*n+e.y*n*n*n,a}function tt(t,e,i,r,n,a){return n=it(n),a=it(a),{x:(e.x/n-t.x+i.x)*n,y:(e.y/a-t.y+i.y)*a}}function et(t,e,i,r,n,a){return n=it(n),a=it(a),{x:(e.x+i.x/n-r.x)*n,y:(e.y+i.y/a-r.y)*a}}function it(t){return 1-t+1e-5}function rt(t){return 360==t?360:t%360}function nt(t,e,i){if(e>i){var r=e;e=i,i=r}t=rt(t);var n=(e-rt(e))/360;return t<e&&(t+=360*(n+1)),t>i&&(t-360>e?t-=360:t=t<e+(i-e)/2+180?i:e),t<e&&(t=t>e+(i-e)/2-180?e:i),t}function at(t,e,i){var r=Number.MAX_VALUE,n=Number.MAX_VALUE,a=-Number.MAX_VALUE,o=-Number.MAX_VALUE,s=[];k(i)||(i=1),s.push(ot(i,t)),s.push(ot(i,e));for(var l=Math.min(90*Math.floor(t/90),90*Math.floor(e/90)),u=Math.max(90*Math.ceil(t/90),90*Math.ceil(e/90)),c=l;c<=u;c+=90)c>=t&&c<=e&&s.push(ot(i,c));for(var h=0;h<s.length;h++){var p=s[h];p.x<r&&(r=p.x),p.y<n&&(n=p.y),p.x>a&&(a=p.x),p.y>o&&(o=p.y)}return{x:r,y:n,width:a-r,height:o-n}}function ot(t,e){return{x:t*B(e),y:t*j(e)}}function st(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>e.y&&t.y<e.y+e.height}function lt(t,e){for(var i=t.length,r=0;r<i;++r)if(t[r]===e)return r;return-1}function ut(t,e){for(var i=t.length,r=0;r<i;++r)if(e(t[r]))return!0;return!1}function ct(t,e){for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=e(t[n],n);return r}function ht(t,e){for(var i=t.length,r=0;r<i;++r)e(t[r],r)}function pt(t,e){for(var i=t.length;i--;)e(t[i],i)}function dt(t,e){for(var i=t.length,r=0;r<i&&e(t[r],r);++r);}function ft(t,e){for(var i=t.length,r=e;r<i;++r)t[r-e]=t[r];t.length=i-e}function mt(t){var e=t.length;return e?t[e-1]:void 0}function yt(t){return t[0]}function gt(t,e,i){i=V(i,0,t.length),t.splice(i,0,e)}function bt(t,e,i){_t(t,e),gt(t,e,i)}function vt(t,e){for(var i=e.length,r=0;r<i;++r)t.push(e[r])}function _t(t,e){var i=!1,r=t.indexOf(e);if(-1!==r){i=!0,t.splice(r,1);for(var n=t.length;r<n;)t[r]===e?(t.splice(r,1),--n):++r}return i}function xt(t,e,i){var r=lt(t,e);-1!==r&&At(t,r),null==i?t.push(e):It(t,i,e)}function St(t,e,i){k(i)?0===i?t.unshift(e):t.splice(i,0,e):t.push(e)}function wt(t,e,i){var r=t.indexOf(e);-1!==r&&t.splice(r,1),k(i)?t.splice(i,0,e):t.push(e)}function Tt(t){return Array.isArray(t)?t:[t]}function Pt(t,e){return-1!==lt(t,e)}function Ct(t){for(var e=t.length,i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function kt(t,e,i){void 0===i&&(i=t.length);for(var r=new Array(i-e),n=e;n<i;++n)r[n-e]=t[n];return r}function It(t,e,i){t.splice(e,0,i)}function At(t,e){t.splice(e,1)}function Ot(t,e,i){for(var r=0,n=t.length,a=!1;r<n;){var o=r+n>>1,s=e(i,t[o]);s<0?n=o:0===s?(a=!0,r=o+1):r=o+1}return{found:a,index:a?r-1:r}}function Dt(t,e){for(var i=t.length,r=0;r<i;++r)if(e(t[r],r))return r;return-1}function Ft(t,e){var i=Dt(t,e);if(-1!==i)return t[i]}function Mt(t){for(var e,i,r=t.length;0!==r;)i=Math.floor(Math.random()*r),e=t[r-=1],t[r]=t[i],t[i]=e}function Et(t,e){for(var i=t.length,r=0;r<i;)e(t[r])?++r:(t.splice(r,1),--i)}var Lt=function(){function t(t){this._disposed=!1,this._dispose=t}return t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._dispose())},t}(),Rt=function(t){function e(e){return t.call(this,(function(){ht(e,(function(t){t.dispose()}))}))||this}return Object(d.d)(e,t),e}(Lt),Vt=function(t){function e(){var e=t.call(this,(function(){S(e._disposer)&&(e._disposer.dispose(),e._disposer=void 0)}))||this;return e}return Object(d.d)(e,t),e.prototype.get=function(){return this._value},e.prototype.set=function(t,e){S(this._disposer)&&this._disposer.dispose(),this._disposer=e,this._value=t},e.prototype.reset=function(){this.set(void 0,void 0)},e}(Lt),jt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._counter=0,e}return Object(d.d)(e,t),e.prototype.increment=function(){var t=this;return++this._counter,new Lt((function(){--t._counter,0===t._counter&&t.dispose()}))},e}(Lt),zt=!1,Bt=[],Nt=[],Ut=[],Xt=[],Ht="function"==typeof requestAnimationFrame?function(t){requestAnimationFrame(t)}:function(t){setTimeout(t,1e3/60)};function Wt(){for(var t=Date.now(),e=Bt.length,i=0;i<e;++i)Bt[i](t);for(ft(Bt,e),i=0;i<Nt.length;++i)Nt[i](t);for(Nt.length=0,i=0;i<Ut.length;++i)Ut[i](t);Ut.length=0,0===Bt.length&&0===Nt.length?zt=!1:Ht(Wt)}function Yt(){zt||(zt=!0,Ht(Wt))}function Gt(t){Ut.push(t),Yt()}var qt=function(){function t(){this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}return t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{ht(t,(function(t){t.disposer.dispose()}))}finally{this._killed=null,this._iterating=null}}},t.prototype.hasListeners=function(){return 0!==this._listeners.length},t.prototype.hasListenersByType=function(t){return ut(this._listeners,(function(e){return(null===e.type||e.type===t)&&!e.killed}))},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.enableType=function(t){delete this._disabled[t]},t.prototype.disableType=function(t,e){void 0===e&&(e=1/0),this._disabled[t]=e},t.prototype._removeListener=function(t){if(0===this._iterating){var e=this._listeners.indexOf(t);if(-1===e)throw new Error("Invalid state: could not remove listener");this._listeners.splice(e,1)}else this._killed.push(t)},t.prototype._removeExistingListener=function(t,e,i,r){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((function(n){n.once!==t||n.type!==e||null!=i&&n.callback!==i||n.context!==r||n.disposer.dispose()}))},t.prototype.isEnabled=function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(t)&&null==this._disabled[t]},t.prototype.has=function(t,e,i){return-1!==Dt(this._listeners,(function(r){return!0!==r.once&&r.type===t&&(null==e||r.callback===e)&&r.context===i}))},t.prototype._shouldDispatch=function(t){if(this._disposed)throw new Error("EventDispatcher is disposed");var e=this._disabled[t];return k(e)?(e<=1?delete this._disabled[t]:--this._disabled[t],!1):this._enabled},t.prototype._eachListener=function(t){var e=this;++this._iterating;try{ht(this._listeners,t)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(ht(this._killed,(function(t){e._removeListener(t)})),this._killed.length=0)}},t.prototype.dispatchImmediately=function(t,e){this._shouldDispatch(t)&&this._eachListener((function(i){i.killed||null!==i.type&&i.type!==t||i.dispatch(t,e)}))},t.prototype.dispatch=function(t,e){this._shouldDispatch(t)&&this._eachListener((function(i){i.killed||null!==i.type&&i.type!==t||Xt.push((function(){i.killed||i.dispatch(t,e)}))}))},t.prototype._on=function(t,e,i,r,n,a){var o=this;if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(t,e,i,r);var s={type:e,callback:i,context:r,shouldClone:n,dispatch:a,killed:!1,once:t,disposer:new Lt((function(){s.killed=!0,o._removeListener(s)}))};return this._listeners.push(s),s},t.prototype.onAll=function(t,e,i){return void 0===i&&(i=!0),this._on(!1,null,t,e,i,(function(i,r){return t.call(e,i,r)})).disposer},t.prototype.on=function(t,e,i,r){return void 0===r&&(r=!0),this._on(!1,t,e,i,r,(function(t,r){return e.call(i,r)})).disposer},t.prototype.once=function(t,e,i,r){void 0===r&&(r=!0);var n=this._on(!0,t,e,i,r,(function(t,r){n.disposer.dispose(),e.call(i,r)}));return n.disposer},t.prototype.off=function(t,e,i){this._removeExistingListener(!1,t,e,i)},t.prototype.copyFrom=function(t){var e=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");ht(t._listeners,(function(t){!t.killed&&t.shouldClone&&(null===t.type?e.onAll(t.callback,t.context):t.once?e.once(t.type,t.callback,t.context):e.on(t.type,t.callback,t.context))}))},t}(),Kt=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return Object(d.d)(e,t),e.prototype.copyFrom=function(t){var e=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(t===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");ht(t._listeners,(function(i){i.context!==t.target&&!i.killed&&i.shouldClone&&(null===i.type?e.onAll(i.callback,i.context):i.once?e.once(i.type,i.callback,i.context):e.on(i.type,i.callback,i.context))}))},e}(qt);function Zt(t){var e=[];for(var i in t)Jt(t,i)&&e.push(i);return e}function Jt(t,e){return{}.hasOwnProperty.call(t,e)}function $t(t,e){for(var i in t)if(Jt(t,i)&&!e(i,t[i]))break}function Qt(t,e){$t(t,(function(t,i){return e(t,i),!0}))}function te(t,e,i){ht(function(t,e){return Zt(t).sort(e)}(t,i),(function(i){e(i,t[i])}))}function ee(t,e){return Object.assign({},t,e)}function ie(t,e,i){ht(i,(function(i){S(t[i])&&(e[i]=t[i])}))}function re(t,e){ie(t,e,Zt(t))}function ne(t){return function(e){for(var i=t.length,r=0;r<i&&e(t[r]);++r);}}function ae(t){var e=[];return t((function(t){return e.push(t),!0})),e}function oe(t,e){t(e)}function se(t,e){t((function(t){return e(t),!0}))}function le(t,e){return ne(ae(t).sort(e))}function ue(t,e){return function(i){return t((function(t){return i(e(t))}))}}function ce(t){return function(e){var i=0;t((function(t){return e([i++,t])}))}}function he(t,e){var i=!1;return t((function(t){return!e(t)||(i=!0,!1)})),i}var pe=function(){function t(t,e){this.createNewItems=!1,this.list=t,this._create=e,this.reset()}return t.prototype.reset=function(){this._listCopy=ae(this.list.iterator())},t.prototype.clear=function(){this._listCopy.length=0},t.prototype.getFirst=function(){return this.returnItem(0)},t.prototype.getLast=function(){return this.returnItem(this._listCopy.length-1)},t.prototype.find=function(t){var e=Dt(this._listCopy,t);if(-1!==e){var i=this._listCopy[e];return _t(this._listCopy,i),i}return this.getLast()},t.prototype.removeItem=function(t){return _t(this._listCopy,t)},t.prototype.returnItem=function(t){if(t>=0&&t<this._listCopy.length){var e=this._listCopy[t];return _t(this._listCopy,e),e}if(this.createNewItems)return this._create()},t.prototype.iterator=function(){return ne(this._listCopy)},t}();function de(t,e){return t===e?0:t<e?-1:1}function fe(t,e){return new Array(e+1).join(t)}var me=function(t){function e(e){var i=e.events.on("removed",(function(t){t.oldValue.dispose()}),void 0,!1);return t.call(this,(function(){i.dispose(),se(e.iterator(),(function(t){t[1].dispose()}))}))||this}return Object(d.d)(e,t),e}(Lt),ye=function(){function t(){this.events=new qt,this._dictionary={}}return t.prototype.hasKey=function(t){return Jt(this._dictionary,t)},t.prototype.getKey=function(t){return this._dictionary[t]},t.prototype.insertKey=function(t,e){if(Jt(this._dictionary,t))throw new Error("Key "+t+" already exists in dictionary");this._dictionary[t]=e,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:t,newValue:e})},t.prototype.setKey=function(t,e){if(Jt(this._dictionary,t)){var i=this._dictionary[t];i!==e&&(this._dictionary[t]=e,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:t,oldValue:i,newValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}))}else this._dictionary[t]=e,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:t,newValue:e})},t.prototype.updateKey=function(t,e){if(!Jt(this._dictionary,t))throw new Error("Key "+t+" doesn't exist in dictionary");var i=this._dictionary[t],r=e(i);i!==r&&(this._dictionary[t]=r,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:t,oldValue:i,newValue:r}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}))},t.prototype.removeKey=function(t){if(Jt(this._dictionary,t)){var e=this._dictionary[t];delete this._dictionary[t],this.events.isEnabled("removeKey")&&this.events.dispatchImmediately("removeKey",{type:"removeKey",target:this,key:t,oldValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:e})}},t.prototype.insertKeyIfEmpty=function(t,e){return this.hasKey(t)||this.insertKey(t,e()),this.getKey(t)},t.prototype.clear=function(){var t=this;this.events.isEnabled("removed")&&Qt(this._dictionary,(function(e,i){t.events.dispatchImmediately("removed",{type:"removed",target:t,oldValue:i})})),this._dictionary={},this.events.isEnabled("cleared")&&this.events.dispatchImmediately("cleared",{type:"cleared",target:this})},t.prototype.copyFrom=function(t){var e=this;se(t.iterator(),(function(t){e.setKey(t[0],t[1])}))},t.prototype.iterator=function(){return t=this._dictionary,function(e){for(var i in t)if(Jt(t,i)&&!e([i,t[i]]))break};var t},t.prototype[Symbol.iterator]=function(){var t,e,i,r;return Object(d.e)(this,(function(n){switch(n.label){case 0:for(e in t=[],this._dictionary)t.push(e);i=0,n.label=1;case 1:return i<t.length?Jt(this._dictionary,r=t[i])?[4,[r,this._dictionary[r]]]:[3,3]:[3,4];case 2:n.sent(),n.label=3;case 3:return i++,[3,1];case 4:return[2]}}))},t.prototype.each=function(t){se(this.iterator(),(function(e){var i=Object(d.g)(e,2);return t(i[0],i[1])}))},t.prototype.sortedIterator=function(){return le(this.iterator(),(function(t,e){return de(t[0],e[0])}))},t}(),ge=function(t){function e(e){var i=t.call(this)||this;return i.template=e,i}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;se(t.iterator(),(function(t){e.setKey(t[0],t[1].clone())}))},e.prototype.create=function(t){var e=this;return this.insertKeyIfEmpty(t,(function(){return e.template.clone()}))},e}(ye),be=new(function(){function t(){this._storage=new ye,this.ttl=1e3}return t.prototype.set=function(t,e,i,r){var n=this._storage.insertKeyIfEmpty(t,(function(){return new ye})),a={touched:(new Date).getTime(),ttl:k(r)?r:this.ttl,value:i};n.setKey(e,a)},t.prototype.get=function(t,e,i){if(void 0===i&&(i=void 0),this._storage.hasKey(t)){var r=this._storage.getKey(t);if(r.hasKey(e)){var n=r.getKey(e);return n.ttl&&n.touched+n.ttl<(new Date).getTime()&&(n.expired=!0),n.expired?(r.removeKey(e),i):n.value}return i}return i},t.prototype.clear=function(t){t?this._storage.removeKey(t):this._storage.clear()},t}()),ve=new(function(){function t(){this.events=new qt,this.themes=[],this.loadedThemes={},this._uidCount=0,this.registeredClasses={},this._placeholders={},this.invalidSprites={},this.invalidDatas={},this.invalidRawDatas=[],this.invalidDataItems=[],this.invalidDataRange=[],this.invalidPositions={},this.invalidLayouts={},this.baseSprites=[],this.baseSpritesByUid={},this.queue=[],this.uid=this.getUniqueId(),this.invalidSprites.noBase=[],this.invalidDatas.noBase=[],this.invalidLayouts.noBase=[],this.invalidPositions.noBase=[]}return t.prototype.getUniqueId=function(){var t=this._uidCount;return this._uidCount+=1,"id-"+t},Object.defineProperty(t.prototype,"map",{get:function(){return this._map||(this._map=new ye),this._map},enumerable:!0,configurable:!0}),t.prototype.setCache=function(t,e,i){be.set(this.uid,t,e,i)},t.prototype.getCache=function(t,e){return void 0===e&&(e=void 0),be.get(this.uid,t,e)},t.prototype.dispatch=function(t,e){this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatch(t,{type:t,target:this})):this.events.dispatch(t,{type:t,target:this}))},t.prototype.dispatchImmediately=function(t,e){this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatchImmediately(t,e)):this.events.dispatchImmediately(t,{type:t,target:this}))},t.prototype.getPlaceholder=function(t){return S(this._placeholders[t])?this._placeholders[t]:(this._placeholders[t]="__amcharts_"+t+"_"+function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<8;r++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}()+"__",this._placeholders[t])},t.prototype.addToInvalidComponents=function(t){xt(t.baseId?this.invalidDatas[t.baseId]:this.invalidDatas.noBase,t)},t.prototype.removeFromInvalidComponents=function(t){t.baseId&&_t(this.invalidDatas[t.baseId],t),_t(this.invalidDatas.noBase,t)},t.prototype.addToInvalidSprites=function(t){St(t.baseId?this.invalidSprites[t.baseId]:this.invalidSprites.noBase,t)},t.prototype.removeFromInvalidSprites=function(t){t.baseId&&_t(this.invalidSprites[t.baseId],t),_t(this.invalidSprites.noBase,t)},t.prototype.addToInvalidPositions=function(t){St(t.baseId?this.invalidPositions[t.baseId]:this.invalidPositions.noBase,t)},t.prototype.removeFromInvalidPositions=function(t){t.baseId&&_t(this.invalidPositions[t.baseId],t),_t(this.invalidPositions.noBase,t)},t.prototype.addToInvalidLayouts=function(t){St(t.baseId?this.invalidLayouts[t.baseId]:this.invalidLayouts.noBase,t)},t.prototype.removeFromInvalidLayouts=function(t){t.baseId&&_t(this.invalidLayouts[t.baseId],t),_t(this.invalidLayouts.noBase,t)},t}());function _e(t,e){var i=ve.registeredClasses[e];return null!=i&&t instanceof i}var xe=function(){function t(t,e,i){this._array=t,this._start=e,this._end=i}return t.prototype.iterator=function(){var t=this;return function(e){if(t._start!==t._end)if(t._start<t._end)for(var i=t._start;i<t._end&&e(t._array[i]);++i);else for(i=t._start-1;i>=t._end&&e(t._array[i]);--i);}},t.prototype.backwards=function(){return new t(this._array,this._end,this._start)},t.prototype.range=function(e,i){if(e<=i){if(this._start===this._end)return this;if(this._start<this._end){var r=i-e;return e=Math.max(this._start+e,this._start),i=Math.min(e+r,this._end),new t(this._array,e,i)}return r=i-e,e=Math.max(this._start-e,this._end),i=Math.max(e-r,this._end),new t(this._array,e,i)}throw new Error("Start index must be lower than end index")},t}(),Se=(function(t){function e(e,i,r){var n=t.call(this,[e.events.on("inserted",(function(t){var i=t.newValue,r=n._getKey(i),a=0;oe(e.iterator(),(function(t){return t!==i&&(n._getKey(t)===r&&++a,!0)})),n._insert(i,r,a)}),void 0,!1),e.events.on("removed",(function(t){n._remove(t.oldValue)}),void 0,!1)])||this;return n._keys=[],n._groups={},n._getKey=i,n._sort=r,se(e.iterator(),(function(t){n._insert(t,i(t))})),n}Object(d.d)(e,t),e.prototype._insert=function(t,e,i){if(null==this._groups[e]){this._groups[e]=[];var r=Ot(this._keys,this._sort,e),n=r.index;if(r.found)throw new Error("Key already exists: "+e);It(this._keys,n,e)}null==i?this._groups[e].push(t):It(this._groups[e],i,t)},e.prototype._remove=function(t){var e=this._getKey(t),i=this._groups[e];if(null!=i&&(_t(i,t),0===i.length)){delete this._groups[e];var r=Ot(this._keys,this._sort,e),n=r.index;if(!r.found)throw new Error("Key doesn't exist: "+e);At(this._keys,n)}},e.prototype.iterator=function(){var t,e=this;return t=ue(ne(this._keys),(function(t){return ne(e._groups[t])})),function(e){var i=!0,r=function(t){return i=e(t)};t((function(t){return t(r),i}))}}}(Rt),function(t){function e(e,i){void 0===i&&(i=!0);var r=this;if(i){var n=e.events.on("removed",(function(t){t.oldValue.dispose()}),void 0,!1);r=t.call(this,(function(){n.dispose(),se(e.iterator(),(function(t){t.dispose()}))}))||this}else r=t.call(this,(function(){se(e.iterator(),(function(t){t.dispose()}))}))||this;return r}return Object(d.d)(e,t),e}(Lt));function we(t,e){if(!(t>=0&&t<e))throw new Error("Index out of bounds: "+t)}var Te=function(){function t(t){void 0===t&&(t=[]),this.events=new qt,this._values=t}return Object.defineProperty(t.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){return-1!==this._values.indexOf(t)},t.prototype.removeValue=function(t){for(var e=0,i=this._values.length;e<i;)this._values[e]===t?(this.removeIndex(e),--i):++e},t.prototype.indexOf=function(t){return lt(this._values,t)},Object.defineProperty(t.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.hasIndex=function(t){return t>=0&&t<this._values.length},t.prototype.getIndex=function(t){return this._values[t]},t.prototype.setIndex=function(t,e){we(t,this._values.length);var i=this._values[t];return i!==e&&(this._values[t]=e,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:t,oldValue:i,newValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e})),i},t.prototype.insertIndex=function(t,e){we(t,this._values.length+1),It(this._values,t,e),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:t,newValue:e}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e})},t.prototype._sortQuicksort=function(t,e,i){if(t<e){var r=this._sortPartition(t,e,i);this._sortQuicksort(t,r,i),this._sortQuicksort(r+1,e,i)}},t.prototype._sortPartition=function(t,e,i){for(var r=this._values,n=r[t],a=t-1,o=e+1;;){do{++a}while(i(r[a],n)<0);do{--o}while(i(r[o],n)>0);if(a>=o)return o;this.swap(a,o)}},t.prototype.sort=function(t){this._sortQuicksort(0,this._values.length-1,t)},t.prototype.swap=function(t,e){var i=this._values.length;if(we(t,i),we(e,i),t!==e){var r=this._values[t],n=this._values[e];this._values[t]=n,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:t,oldValue:r,newValue:n}),this._values[e]=r,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:e,oldValue:n,newValue:r})}},t.prototype.removeIndex=function(t){we(t,this._values.length);var e=this._values[t];return At(this._values,t),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:t,oldValue:e}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:e}),e},t.prototype.moveValue=function(t,e){var i=this.indexOf(t);if(-1!==i){var r=this._values[i];At(this._values,i),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:i,oldValue:r})}null==e?(e=this._values.length,this._values.push(t)):It(this._values,e,t),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t}),-1===i&&this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t})},t.prototype.push=function(t){var e=this._values.push(t)-1;return this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t}),t},t.prototype.unshift=function(t){this.insertIndex(0,t)},t.prototype.pushAll=function(t){var e=this;ht(t,(function(t){e.push(t)}))},t.prototype.copyFrom=function(t){this.pushAll(t._values)},t.prototype.pop=function(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)},t.prototype.shift=function(){return this._values.length?this.removeIndex(0):void 0},t.prototype.setAll=function(t){var e=this,i=Ct(this._values);this._values.length=0,ht(t,(function(t){e._values.push(t)})),this.events.isEnabled("setAll")&&this.events.dispatchImmediately("setAll",{type:"setAll",target:this,oldArray:i,newArray:this._values}),this.events.isEnabled("removed")&&ht(i,(function(t){e.events.dispatchImmediately("removed",{type:"removed",target:e,oldValue:t})})),this.events.isEnabled("inserted")&&ht(this._values,(function(t){e.events.dispatchImmediately("inserted",{type:"inserted",target:e,newValue:t})}))},t.prototype.clear=function(){this.setAll([])},t.prototype.iterator=function(){return ne(this._values)},t.prototype[Symbol.iterator]=function(){var t,e;return Object(d.e)(this,(function(i){switch(i.label){case 0:t=this._values.length,e=0,i.label=1;case 1:return e<t?[4,this._values[e]]:[3,4];case 2:i.sent(),i.label=3;case 3:return++e,[3,1];case 4:return[2]}}))},t.prototype.each=function(t){ht(this._values,t)},t.prototype.range=function(t,e){if(t<=e){var i=e-t;return t=Math.max(t,0),e=Math.min(t+i,this._values.length),new xe(this._values,t,e)}throw new Error("Start index must be lower than end index")},t.prototype.backwards=function(){return new xe(this._values,this._values.length,0)},t}(),Pe=function(t){function e(e){var i=t.call(this)||this;return i.template=e,i}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;se(t.iterator(),(function(t){e.push(t.clone())}))},e.prototype.create=function(t){var e=null!=t?new t:this.template.clone();return this.push(e),e},e.prototype.clone=function(){for(var t=new e(this.template),i=this.values,r=i.length,n=0;n<r;++n)t.push(i[n].clone());return t},e}(Te),Ce=function(){function t(t){this._values=[],this.events=new qt,null!=t&&this.setAll(t)}return Object.defineProperty(t.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),t.prototype._insert=function(t){return this._values.push(t),this._values.length-1},Object.defineProperty(t.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return lt(this._values,t)},t.prototype.contains=function(t){return-1!==this.indexOf(t)},t.prototype.getIndex=function(t){return this._values[t]},Object.defineProperty(t.prototype,"first",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._values[this._values.length-1]},enumerable:!0,configurable:!0}),t.prototype.insert=function(t){var e=this._insert(t);this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,index:e,newValue:t})},t.prototype.remove=function(t){var e=this.indexOf(t);if(-1!==e){var i=this._values[e];At(this._values,e),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,index:e,oldValue:i})}},t.prototype.setAll=function(t){var e=this;pt(this._values,(function(t,i){e._values.pop(),e.events.isEnabled("removed")&&e.events.dispatchImmediately("removed",{type:"removed",target:e,index:i,oldValue:t})})),ht(t,(function(t){e.insert(t)}))},t.prototype.clear=function(){this.setAll([])},t.prototype.slice=function(e,i){var r=new t;return r._values=this._values.slice(e,i),r},t.prototype.findClosestIndex=function(t,e,i){void 0===i&&(i="any");var r,n,a=-1,o=0;return oe(this.iterator(),(function(s){var l=e(s);if("any"===i){if(l===t)return a=o,!1;var u=Math.abs(t-l);(!S(n)||n>u)&&(a=o,r=l,n=u)}else"left"===i&&l<t?(!S(r)||r<l)&&(a=o,r=l):"right"===i&&l>=t&&(!S(r)||r>=l)&&(a=o,r=l);return++o,!0})),-1===a&&("left"===i?a=0:"right"===i&&(a=this.length-1)),a},t.prototype.iterator=function(){return ne(this._values)},t.prototype[Symbol.iterator]=function(){var t,e;return Object(d.e)(this,(function(i){switch(i.label){case 0:t=this._values.length,e=0,i.label=1;case 1:return e<t?[4,this._values[e]]:[3,4];case 2:i.sent(),i.label=3;case 3:return++e,[3,1];case 4:return[2]}}))},t.prototype.each=function(t){ht(this._values,t)},t}(),ke=function(t){function e(e){var i=t.call(this)||this;return i._ordering=e,i}return Object(d.d)(e,t),e.prototype._insert=function(t){var e=Ot(this._values,this._ordering,t).index;return It(this._values,e,t),e},e.prototype.indexOf=function(t){var e=Ot(this._values,this._ordering,t);return e.found?e.index:-1},e.prototype.update=function(t){var e=lt(this._values,t);if(-1!==e){var i=this._values.length-1;(0===e||this._ordering(this._values[e-1],t)<0)&&(e===i||this._ordering(t,this._values[e+1])<0)||(At(this._values,e),this._insert(t))}},e}(Ce),Ie=function(t){function e(e){var i=t.call(this)||this;return i.template=e,i}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;se(t.iterator(),(function(t){e.insert(t.clone())}))},e.prototype.slice=function(t,i){var r=new e(this.template);return r._values=this._values.slice(t,i),r},e.prototype.create=function(t){var e=null!=t?new t:this.template.clone();return this.insert(e),e},e}(Ce),Ae=function(t){function e(e,i){var r=t.call(this,i)||this;return r.template=e,r}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t.isTemplate=!0,this._template=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=this;se(t.iterator(),(function(t){e.insert(t.clone())}))},e.prototype.create=function(t){var e=null!=t?new t:this.template.clone();return this.insert(e),e},e}(ke);function Oe(t,e){return t===e?0:t<e?-1:1}function De(t){switch(t){case 0:return 0;case-1:return 1;case 1:return-1}}function Fe(t,e){return 0===t?e:t}var Me=new(function(){function t(){this._callbackId=0,this._callbacks=new ke((function(t,e){return Fe(Oe(t.priority,e.priority),Oe(t.id,e.id))}))}return t.prototype.addAll=function(t,e,i,r,n){void 0===r&&(r=0),this._callbacks.insert({id:++this._callbackId,key:e,callback:i,priority:r,scope:n,type:t})},t.prototype.isEnabled=function(t,e){return ut(this._callbacks.values,(function(i){return i.key===e&&t instanceof i.type}))},t.prototype.applyAll=function(t,e,i){var r=this._callbacks.values,n=r.length;if(0==n)return i;for(var a=0;a<n;++a){var o=r[a];o.key===e&&t instanceof o.type&&(i=o.callback.call(o.scope,i,t,e))}return i},t}()),Ee=function(){function t(t){this._callbackId=0,this._callbacks=new ke((function(t,e){return Fe(Oe(t.priority,e.priority),Oe(t.id,e.id))})),this._disabled={},this.object=t,this.events=this._callbacks.events}return t.prototype.add=function(t,e,i,r){void 0===i&&(i=0),this._callbacks.insert({id:++this._callbackId,key:t,callback:e,priority:i,scope:r})},t.prototype.has=function(t,e,i,r){return void 0===i&&(i=0),he(this._callbacks.iterator(),(function(n){return n.key===t&&n.callback===e&&n.priority===i&&n.scope===r}))},t.prototype.remove=function(t,e){var i=this;ht(ae(this._callbacks.iterator()),(function(r){r.key!==t||k(e)&&e!==r.priority||i._callbacks.remove(r)}))},t.prototype.enableKey=function(t){delete this._disabled[t]},t.prototype.disableKey=function(t,e){void 0===e&&(e=1/0),this._disabled[t]=e},t.prototype._hasListenersByType=function(t){return ut(this._callbacks.values,(function(e){return e.key===t}))},t.prototype.isEnabled=function(t){return null==this._disabled[t]&&(this._hasListenersByType(t)||Me.isEnabled(this.object,t))},t.prototype._shouldDispatch=function(t){var e=this._disabled[t];return!k(e)||(e<=1?delete this._disabled[t]:--this._disabled[t],!1)},t.prototype.apply=function(t,e){if(this._shouldDispatch(t)){var i=this._callbacks.values,r=i.length;if(r>0)for(var n=0;n<r;++n){var a=i[n];a.key===t&&(e=a.callback.call(a.scope,e,this.object,t))}return Me.applyAll(this.object,t,e)}return e},t.prototype.keys=function(){return ae(ue(this._callbacks.iterator(),(function(t){return t.key})))},t.prototype.copyFrom=function(t){var e=this;se(t._callbacks.iterator(),(function(t){e.add(t.key,t.callback,t.priority,t.scope)}))},t.prototype.clear=function(){this._callbacks.clear()},t}(),Le={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},rebeccapurple:{r:102,g:51,b:153},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};function Re(t){return 1==t.length?"0"+t:""+t}function Ve(t,e,i){return i=V(i,0,1),t?e?{r:t.r+Math.round((e.r-t.r)*i),g:t.g+Math.round((e.g-t.g)*i),b:t.b+Math.round((e.b-t.b)*i),a:(t.a||1)+Math.round(((e.a||1)-(t.a||1))*i)}:t:e||t}function je(t,e){return Math.round((e>0?255-t:t)*e)}function ze(t){var e,i,r,n=t.h,a=t.s,o=t.l;if(0==a)e=i=r=o;else{var s=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},l=o<.5?o*(1+a):o+a-o*a,u=2*o-l;e=s(u,l,n+1/3),i=s(u,l,n),r=s(u,l,n-1/3)}return{r:Math.round(255*e),g:Math.round(255*i),b:Math.round(255*r)}}function Be(t){var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.max(e,i,r),a=Math.min(e,i,r),o=0,s=0,l=(n+a)/2;if(n===a)o=s=0;else{var u=n-a;switch(s=l>.5?u/(2-n-a):u/(n+a),n){case e:o=(i-r)/u+(i<r?6:0);break;case i:o=(r-e)/u+2;break;case r:o=(e-i)/u+4}o/=6}return{h:o,s:s,l:l}}var Ne=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"rgb",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hex",{get:function(){return this._value?"#"+Re((t=this._value).r.toString(16))+Re(t.g.toString(16))+Re(t.b.toString(16)):"none";var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rgba",{get:function(){return this._value?S((t=this._value).a)&&1!==t.a?"rgba("+t.r+","+t.g+","+t.b+","+t.a+")":"rgb("+t.r+","+t.g+","+t.b+")":"none";var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return null!=this._value&&null!=this._value.a?this._value.a:1},set:function(t){this._value&&(this._value.a=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lightColor",{get:function(){return this._lightColor||(this._lightColor=new t({r:255,g:255,b:255})),this._lightColor},set:function(t){this._lightColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"darkColor",{get:function(){return this._darkColor||(this._darkColor=new t({r:0,g:0,b:0})),this._darkColor},set:function(t){this._darkColor=t},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.alpha<1?this.rgba:this.hex},t.prototype.lighten=function(e){return new t(function(t,e){return t?{r:Math.max(0,Math.min(255,t.r+je(t.r,e))),g:Math.max(0,Math.min(255,t.g+je(t.g,e))),b:Math.max(0,Math.min(255,t.b+je(t.b,e))),a:t.a}:t}(this.rgb,e))},t.prototype.brighten=function(e){return new t(function(t,e){if(t){var i=je(Math.min(Math.max(t.r,t.g,t.b),230),e);return{r:Math.max(0,Math.min(255,Math.round(t.r+i))),g:Math.max(0,Math.min(255,Math.round(t.g+i))),b:Math.max(0,Math.min(255,Math.round(t.b+i))),a:t.a}}return t}(this.rgb,e))},t.prototype.saturate=function(e){return new t(function(t,e){if(null==t||1==e)return t;var i=Be(t);return i.s=e,ze(i)}(this.rgb,e))},Object.defineProperty(t.prototype,"alternative",{get:function(){if(null!=this.rgb)return(299*(t=this.rgb).r+587*t.g+114*t.b)/1e3>=128?this.darkColor:this.lightColor;throw new Error("Color does not exist");var t},enumerable:!0,configurable:!0}),t}();function Ue(t,e){if(!S(t))return new Ne(void 0);if("string"==typeof t){var i="_color_"+t+"_"+(e||"1"),r=ve.getCache(i);if(r)return new Ne({r:r.r,g:r.g,b:r.b,a:r.a});var n=function(t,e){var i;return Le[t]?i=Le[t]:"#"===t.charAt(0)?i=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,r){return e+e+i+i+r+r}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:void 0}(t):t.match(/^rgba?\(/)&&(i=function(t){var e=(t=t.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(!(e=t.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i)))return;return{r:parseInt(e[1]),g:parseInt(e[2]),b:parseInt(e[3]),a:parseFloat(e[4])}}(t)),i||(i={r:0,g:0,b:0,a:1}),S(e)&&(i.a=e),i}(t,e);return ve.setCache(i,n),new Ne(n)}return t instanceof Ne?(S(e)&&(t.alpha=e),t):new Ne(t)}function Xe(t){return S(t)&&!function(t){return t instanceof Ne}(t)?function(t){return Ue(t)}(t):t}var He=function(){function t(){this._disposed=!1,this._disposers=[],this.className="BaseObject"}return t.prototype.debug=function(){},Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid||(this._uid=ve.getUniqueId(),ve.map.setKey(this._uid,this)),this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"map",{get:function(){return this._map||(this._map=new ye),this._map},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delayedMap",{get:function(){return this._delayedMap||(this._delayedMap=new ye),this._delayedMap},enumerable:!0,configurable:!0}),t.prototype.addDelayedMap=function(t,e){var i=this.delayedMap;i.hasKey(e)||i.setKey(e,[]),i.getKey(e).push({property:t,target:this})},t.prototype.processDelayedMap=function(){var t=this;this.delayedMap.each((function(e,i){if(t.map.hasKey(e)){var r=t.map.getKey(e);ht(i,(function(t){t.target[t.property]=r})),t.delayedMap.removeKey(e)}}))},t.prototype.applyTheme=function(){var t=this;if(ve){var e=this.getCurrentThemes();e&&ht(e,(function(e,i){e(t)}))}},Object.defineProperty(t.prototype,"themes",{get:function(){return this._themes},set:function(t){this._themes=t},enumerable:!0,configurable:!0}),t.prototype.getCurrentThemes=function(){return this.themes||ve.themes},t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._disposers;for(this._disposers=null;0!==t.length;)t.shift().dispose();this.clearCache(),this.clonedFrom&&this.clonedFrom.clones.removeValue(this);var e=this._uid;null!=e&&ve.map.removeKey(e)}},t.prototype.addDisposer=function(t){this._disposers.push(t)},t.prototype.removeDispose=function(t){if(!this._disposed){var e=lt(this._disposers,t);e>-1&&this._disposers.splice(e,1)}t.dispose()},t.prototype.clone=function(t){t||(t="clone-"+ve.getUniqueId());var e=new this.constructor;return e.cloneId=t,e.copyFrom(this),e},Object.defineProperty(t.prototype,"clones",{get:function(){return this._clones||(this._clones=new Te),this._clones},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){t.clones.push(this),this.clonedFrom=t},Object.defineProperty(t.prototype,"className",{get:function(){return this._className},set:function(t){this._className=t},enumerable:!0,configurable:!0}),t.prototype.setCache=function(t,e,i){be.set(this.uid,t,e,i)},t.prototype.getCache=function(t,e){return void 0===e&&(e=void 0),be.get(this.uid,t,e)},t.prototype.clearCache=function(){be.clear(this.uid)},t.prototype.setTimeout=function(t,e){var i=this,r=setTimeout((function(){i.removeDispose(n),t()}),e),n=new Lt((function(){clearTimeout(r)}));return this._disposers.push(n),n},t.prototype.setInterval=function(t,e){var i=this,r=setInterval((function(){i.removeDispose(n),t()}),e),n=new Lt((function(){clearTimeout(r)}));return this._disposers.push(n),n},Object.defineProperty(t.prototype,"config",{set:function(t){try{this.processConfig(t)}catch(e){this.raiseCriticalError(e)}},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(e){var i=this;if(e){var r=this;if(te(e,(function(e,n){var a,o=n;if("callback"==e&&"function"==typeof n&&n.call(r),i.hasProperty(e))if(!I(o)||!S(o.type)||I(r[e])&&S(r[e].className)&&!o.forceCreate&&r[e].className==o.type||i.asIs(e)?a=r[e]:(a=i.createClassInstance(o.type))?r[e]=a:a=r[e],a instanceof Ee)i.processAdapters(a,o);else if(a instanceof qt)i.processEvents(a,o);else if("locale"==e&&C(o))window["am4lang_"+o]&&(r[e]=window["am4lang_"+o]);else if("parent"==e&&C(o)){var s=i.map.getKey(o);s?r[e]=s:i.addDelayedMap("parent",o)}else if(i.asIs(e))r[e]=o;else if(i.asFunction(e)&&C(o)){if(!S(ve.registeredClasses[o]))throw Error("Invalid easing function: "+o);r[e]=ve.registeredClasses[o]}else if(o instanceof t)r[e]=o;else if(a instanceof t)a.config=o;else if(a instanceof Pe||a instanceof Ie||a instanceof Ae){if(A(o))a instanceof Pe?i.processListTemplate(o,a):i.processOrderedTemplate(o,a);else if(I(o))if(o instanceof t)a.template=o;else{var l;l=S(o.template)?o.template:o,a.template instanceof t?a.template.config=l:Qt(l,(function(e,r){var n=a.template[e];n instanceof Ee?i.processAdapters(n,r):n instanceof qt?i.processEvents(n,r):n instanceof ge?i.processDictionaryTemplate(n,r):a.template[e]instanceof t?a.template[e].config=r:I(r)&&S(r.type)?(n=i.createClassInstance(r.type))?(n instanceof t&&(n.config=r),a.template[e]=n):a.template[e]=r:n instanceof Te?i.processList(r,n):a.template[e]=i.maybeColorOrPercent(r)})),S(o.values)&&(a instanceof Pe?i.processListTemplate(o.values,a):i.processOrderedTemplate(o.values,a))}}else a instanceof Te?"children"==e?i.processList(o,a,i):i.processList(o,a):a instanceof ge?i.processDictionaryTemplate(a,o):a instanceof ye?i.processDictionary(a,o):a instanceof Ne||a instanceof f?r[e]=i.maybeColorOrPercent(o):I(a)&&I(o)?re(o,a):(o=i.maybeColorOrPercent(o),r[e]=o);else i.isReserved(e)||(r[e]=o)}),this.configOrder),this.processingErrors.length){var n=this.processingErrors.join("\n");throw this._processingErrors=[],Error(n)}}},t.prototype.maybeColorOrPercent=function(t){if(C(t)){if(t.match(/^[\-]?[0-9.]+\%$/))return m(_(t));if(t.match(/^\#[0-9abcdef]{3,}$/i))return Ue(t)}return t},t.prototype.processAdapters=function(t,e){var i=this;A(e)?ht(e,(function(e,r){t.add(e.key,e.callback,e.priority||0,i)})):I(e)&&Qt(e,(function(e,i){t.has(e,i)||t.add(e,i)}))},t.prototype.processEvents=function(t,e){var i=this;I(e)?Qt(e,(function(e,i){t.has(e,i)||t.on(e,i)})):A(e)&&ht(e,(function(e,r){t.on(e.type,e.callback,i)}))},t.prototype.processDictionaryTemplate=function(e,i){I(i)&&Qt(i,(function(i,r){var n;(n="template"==i?e.template:e.hasKey(i)?e.getKey(i):e.create(i))instanceof t?n.config=r:I(n)&&I(r)?re(r,n):n.setKey(i,r)}))},t.prototype.processDictionary=function(t,e){I(e)&&Qt(e,(function(e,i){t.setKey(e,i)}))},t.prototype.processListTemplate=function(e,i){var r=this;for(ht(e,(function(e,n){var a,o=r.getConfigEntryType(e);if(i.hasIndex(n)&&!e.forceCreate)a=i.getIndex(n);else{if(e instanceof t)return void i.push(e);a=o?i.create(o):i.create()}e===a||I(e)&&(a instanceof t?a.config=e:I(a)&&I(e)?re(e,a):i.setIndex(i.indexOf(a),e))}));e.length>i.length;)i.pop()},t.prototype.processOrderedTemplate=function(e,i){var r=this;ht(e,(function(e,n){var a,o=r.getConfigEntryType(e);a=o?i.create(o):i.create(),I(e)&&(a instanceof t?a.config=e:I(a)&&I(e)?re(e,a):i.insert(e))}))},t.prototype.processList=function(e,i,r){var n=this;A(e)||(e=[e]);var a=i.length;for(ht(e,(function(e,o){if(I(e)){var s=void 0;if(o<a&&!e.forceCreate)s=i.getIndex(o);else{if(e instanceof t)return void i.push(e);s=n.createEntryInstance(e),r?s.parent=r:i.push(s)}s instanceof t?s.config=e:I(s)&&I(e)&&re(e,s)}else i.hasIndex(o)?i.setIndex(o,e):i.push(e)}));e.length>i.length;)i.pop()},t.prototype.configOrder=function(t,e){return t==e?0:"language"==t?-1:"language"==e?1:0},t.prototype.asIs=function(t){return-1!=lt(["locale"],t)},t.prototype.asFunction=function(t){return!1},t.prototype.createClassInstance=function(t){if(S(ve.registeredClasses[t]))return new ve.registeredClasses[t];throw Error('Invalid type: "'+t+'".')},t.prototype.createEntryInstance=function(t){var e;return S(t.type)&&(e=this.createClassInstance(t.type)),e||t},t.prototype.getConfigEntryType=function(t){if(S(t.type)){if(S(ve.registeredClasses[t.type]))return ve.registeredClasses[t.type];throw Error('Invalid type: "'+t.type+'".')}},t.prototype.hasProperty=function(t){return t in this},t.prototype.isReserved=function(t){return-1!==["type","forceCreate"].indexOf(t)},Object.defineProperty(t.prototype,"processingErrors",{get:function(){return this._processingErrors||(this._processingErrors=[]),this._processingErrors},enumerable:!0,configurable:!0}),t}(),We=function(t){function e(){var e=t.call(this)||this;return e.className="BaseObjectEvents",e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventDispatcher||(this._eventDispatcher=new qt,this._disposers.push(this._eventDispatcher)),this._eventDispatcher},enumerable:!0,configurable:!0}),e.prototype.dispatch=function(t,e){this._eventDispatcher&&this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatch(t,{type:t,target:this})):this.events.dispatch(t,{type:t,target:this}))},e.prototype.dispatchImmediately=function(t,e){this._eventDispatcher&&this.events.isEnabled(t)&&(e?(e.type=t,e.target=e.target||this,this.events.dispatchImmediately(t,e)):this.events.dispatchImmediately(t,{type:t,target:this}))},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e._eventDispatcher&&this.events.copyFrom(e._eventDispatcher)},e}(He);function Ye(t,e){return Qt(t,(function(t,i){S(i)&&(e[t]=i)})),e}function Ge(t){return/^[^#]*/.exec(t)[0]}function qe(){var t="#";if(/apple/i.test(navigator.vendor)){var e=document.baseURI;if(e){e=Ge(e);var i=Ge(location.href);e!==i&&(t=i+t)}}return t}function Ke(t){return S(t)&&""!==t.toString()}function Ze(t,e){return k(t)?t:null!=t&&k(t.value)&&k(e)?e*t.value:0}function Je(t,e,i){var r;return k(t)?(r=t)<0&&(r=i?e+r:e-r):null!=t&&k(t.value)&&(r=e*t.value),r}function $e(t){var e=t.split("");return e[0]=e[0].toUpperCase(),e.join("")}function Qe(t){return JSON.stringify(t)}function ti(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function ei(t,e,i,r){if(t.length<=e)return[t];var n=[];if(i)for(var a=-1,o=t.replace(/([,;:!?\\\/\.]+[\s]+|[\s])/g,"__\xa7\xa7\xa7__$1__\xa7\xa7\xa7__").split("__\xa7\xa7\xa7__"),s=0;s<o.length;s++){var l=o[s],u=l.length;if(0!==u){var c;if(u>e){if(r&&(l=ai(l)),c=l.match(new RegExp(".{1,"+e+"}","g"))){if(r)for(var h=0;h<c.length;h++)c[h]=ai(c[h]);n=n.concat(c)}}else-1===a&&(n.push(""),a=0),n[a].length+u+1>e&&""!==n[a]&&(n.push(""),a++),n[a]+=l;a=n.length-1}}else if(c=t.match(new RegExp(".{1,"+e+"}","g"))){if(r)for(h=0;h<c.length;h++)c[h]=ai(c[h]);n=c}return 1==n.length&&i&&n[0].length>e&&(n=[]),n}function ii(t,e,i,r,n){return t.length<=e?t:((e-=i.length)<1&&(e=1),(ei(t,e,r,n)[0]||"")+i)}function ri(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function ni(t){return t.replace(/[\s\uFEFF\xA0]+$/g,"")}function ai(t){return t.split("").reverse().join("")}function oi(t,e,i){return void 0===e&&(e=0),void 0===i&&(i="0"),"string"!=typeof t&&(t=t.toString()),e>t.length?Array(e-t.length+1).join(i)+t:t}function si(t){return t.replace(/\/(date|number|duration)$/i,"")}function li(t){return t?t.replace(/<[^>]*>/g,""):t}function ui(t){return t?li(t.replace(/[\n\r]+/g,". ")):t}function ci(t){if(P(t))return new Date(t);if(k(t))return new Date(t);var e=Number(t);return k(e)?new Date(e):new Date(t)}function hi(t){if(P(t))return t.getTime();if(k(t))return t;if(C(t)){var e=Number(t);return k(e)?e:void 0}}function pi(t,e){void 0===e&&(e=!1);var i=new Date(t.getFullYear(),0,0),r=t.getTime()-i.getTime()+60*(i.getTimezoneOffset()-t.getTimezoneOffset())*1e3;return Math.floor(r/864e5)}function di(t,e){void 0===e&&(e=!1);var i=pi(t,e)-1,r=Math.floor((i-(t.getDay()||7)+10)/7);return 0===r?r=53:53===r&&(r=1),r}function fi(t,e){void 0===e&&(e=!1);var i=di(new Date(t.getFullYear(),t.getMonth(),1),e),r=di(t,e);return 1==r&&(r=53),r-i+1}function mi(t,e){return t>12?t-=12:0===t&&(t=12),S(e)?t+(e-1):t}function yi(t,e,i,r){if(void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),r)return e?"Coordinated Universal Time":"UTC";var n=t.toLocaleString("UTC"),a=t.toLocaleString("UTC",{timeZoneName:e?"long":"short"}).substr(n.length);return!1===i&&(a=a.replace(/ (standard|daylight|summer|winter) /i," ")),a}function gi(t,e,i){return t>i?i:t<e?e:t}function bi(t,e,i){var r=i-e;return t>i?t=e+(t-r*Math.floor(t/r)):t<e&&(t=e+(t-r*Math.floor(t/r))),t}function vi(t,e){var i=t.x,r=t.y,n=[];if(e){for(;S(e.parent);)n.push(e),e=e.parent;n.reverse();for(var a=0;a<n.length;a++){var o=n[a],s=o.rotation,l=i-o.pixelX-o.ex,u=r-o.pixelY-o.ey;o.dx&&(i-=o.dx),o.dy&&(r-=o.dy);var c=o.scale;o.group&&(c=o.group.scale),i=(B(-s)*l-j(-s)*u)/c-o.pixelPaddingLeft,r=(B(-s)*u+j(-s)*l)/c-o.pixelPaddingTop}}return{x:i,y:r}}function _i(t,e){var i=t.x,r=t.y;if(e)for(;S(e.parent);){var n=e.rotation;r+=e.pixelPaddingTop+e.ey;var a=e.scale;e.group&&(a=e.group.scale);var o=e.pixelX+((i+=e.pixelPaddingLeft+e.ex)*B(n)-r*j(n))*a,s=e.pixelY+(i*j(n)+r*B(n))*a;e.dx&&(o+=e.dx),e.dy&&(s+=e.dy),i=o,r=s,e=e.parent}return{x:i,y:r}}function xi(t,e,i){return vi(_i(t,e),i)}function Si(t,e){var i=_i(t,e),r=_i({x:t.x+t.width,y:t.y+t.height},e);return{x:i.x,y:i.y,width:r.x-i.x,height:r.y-i.y}}function wi(t,e,i){try{var r=e.getBoundingClientRect();return k(i)||(i=1),{x:(t.x-r.left)/i,y:(t.y-r.top)/i}}catch(n){return t}}function Ti(t,e){try{var i=e.getBoundingClientRect();return{x:t.x+i.left,y:t.y+i.top}}catch(r){return t}}function Pi(t,e){return e&&e.htmlContainer?vi(wi(t,w(e.htmlContainer),e.svgContainer.cssScale),e):t}function Ci(t,e){return e&&e.htmlContainer?Ti(_i(t,e),w(e.htmlContainer)):t}var ki=/^([a-zA-Z][a-zA-Z0-9\+\.\-]*:)?(?:(\/\/)([^\@]+\@)?([^\/\?\#\:]*)(\:[0-9]+)?)?([^\?\#]*)(\?[^\#]*)?(\#.*)?$/;function Ii(t){var e=ki.exec(t);return{protocol:e&&e[1]||"",separator:e&&e[2]||"",authority:e&&e[3]||"",domain:e&&e[4]||"",port:e&&e[5]||"",path:e&&e[6]||"",query:e&&e[7]||"",hash:e&&e[8]||""}}function Ai(t){return t.protocol+t.separator+t.authority+t.domain+t.port+t.path+t.query+t.hash}function Oi(t){return""===t.protocol&&""===t.separator&&""===t.authority&&""===t.domain&&""===t.port}function Di(t,e){var i=Ii(t),r=Ii(e);if(Oi(i))throw new Error("Left URL is not absolute");if(Oi(r)){if(""!==r.path)if("/"===r.path[0])i.path=r.path;else{var n=i.path.split(/\//),a=r.path.split(/\//);if(0===n.length?0!==a.length&&n.push(""):n.length>1&&n.pop(),vt(n,a),i.path=n.join("/"),""!==i.path&&"/"!==i.path[0])throw new Error("URL path must start with /")}return i.query=r.query,i.hash=r.hash,Ai(i)}return Ai(r)}function Fi(){return!!window.MSInputMethodContext&&!!document.documentMode}function Mi(t){return+t}function Ei(t,e){return Math.pow(t,e)}function Li(t,e){return 1-Math.pow(1-t,e)}function Ri(t,e){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}function Vi(t){return Li(t,3)}function ji(t){return Math.sin(t*D)}function zi(t){return t*t*t}function Bi(t){return--t*t*t+1}function Ni(t){return(t=+t)<4/11?7.5625*t*t:t<8/11?7.5625*(t-=6/11)*t+.75:t<10/11?7.5625*(t-=9/11)*t+.9375:7.5625*(t-=21/22)*t+63/64}ve.registeredClasses["ease.linear"]=Mi,ve.registeredClasses["ease.quadIn"]=function(t){return t*t},ve.registeredClasses["ease.quadOut"]=function(t){return t*(2-t)},ve.registeredClasses["ease.quadInOut"]=function(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2},ve.registeredClasses["ease.polyIn"]=Ei,ve.registeredClasses["ease.polyOut"]=Li,ve.registeredClasses["ease.polyInOut"]=Ri,ve.registeredClasses["ease.polyIn3"]=function(t){return Ei(t,3)},ve.registeredClasses["ease.polyOut3"]=Vi,ve.registeredClasses["ease.polyInOut3"]=function(t){return Ri(t,3)},ve.registeredClasses["ease.expIn"]=function(t){return Math.pow(2,10*t-10)},ve.registeredClasses["ease.expOut"]=function(t){return 1-Math.pow(2,-10*t)},ve.registeredClasses["ease.expInOut"]=function(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2},ve.registeredClasses["ease.sinIn"]=function(t){return 1-Math.cos(t*D)},ve.registeredClasses["ease.sinOut"]=ji,ve.registeredClasses["ease.sinInOut"]=function(t){return(1-Math.cos(O*t))/2},ve.registeredClasses["ease.cubicIn"]=zi,ve.registeredClasses["ease.cubicOut"]=Bi,ve.registeredClasses["ease.cubicInOut"]=function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2},ve.registeredClasses["ease.circleIn"]=function(t){return 1-Math.sqrt(1-t*t)},ve.registeredClasses["ease.circleOut"]=function(t){return Math.sqrt(1- --t*t)},ve.registeredClasses["ease.circleInOut"]=function(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2},ve.registeredClasses["ease.bounceIn"]=function(t){return 1-Ni(1-t)},ve.registeredClasses["ease.bounceOut"]=Ni,ve.registeredClasses["ease.bounceInOut"]=function(t){return((t*=2)<=1?1-Ni(1-t):Ni(t-1)+1)/2};var Ui=.3/(2*Math.PI),Xi=Math.asin(1)*Ui;ve.registeredClasses["ease.elasticIn"]=function(t){return 1*Math.pow(2,10*--t)*Math.sin((Xi-t)/Ui)},ve.registeredClasses["ease.elasticOut"]=function(t){return 1-1*Math.pow(2,-10*(t=+t))*Math.sin((t+Xi)/Ui)},ve.registeredClasses["ease.elasticInOut"]=function(t){return((t=2*t-1)<0?1*Math.pow(2,10*t)*Math.sin((Xi-t)/Ui):2-1*Math.pow(2,-10*t)*Math.sin((Xi+t)/Ui))/2};var Hi=function(t){function e(){var e=t.call(this)||this;return e.transitionDuration=0,e.transitionEasing=Bi,e.properties={},e.propertyFields={},e.filters=new Te,e.isTemplate=!1,e.className="SpriteState",e._disposers.push(new Se(e.filters)),e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"adapter",{get:function(){var t=this;return this._adapterO||(this._adapterO=new Ee(this),this._adapterO.events.on("inserted",(function(e){t[e.newValue.key]=t[e.newValue.key]}),void 0,!1),this._adapterO.events.on("removed",(function(e){t[e.newValue.key]=t[e.newValue.key]}),void 0,!1)),this._adapterO},enumerable:!0,configurable:!0}),e.prototype.getPropertyValue=function(t){var e=this.properties[t],i=this.sprite;if(i){var r=this.propertyFields[t];if(S(r)&&(i.dataItem&&(e=i.dataItem.dataContext[r]),null==e&&(e="__unset")),S(e))this._adapterO&&(e=this._adapterO.apply(t,e));else{var n=i.getPropertyValue(t);(e=this._adapterO?this._adapterO.apply(t,n):n)==n&&(e=void 0)}}return e},e.prototype.copyFrom=function(t){t&&t!=this&&(this.transitionDuration=t.transitionDuration,this.transitionEasing=t.transitionEasing,Ye(t.properties,this.properties),Ye(t.propertyFields,this.propertyFields),this.filters.copyFrom(t.filters),t._adapterO&&this.adapter.copyFrom(t._adapterO))},Object.defineProperty(e.prototype,"allValues",{get:function(){var t=this,e={};return Qt(this.properties,(function(i,r){e[i]=t.getPropertyValue(i)})),this._adapterO&&Qt(this._adapterO.keys(),(function(i,r){var n=t.getPropertyValue(r);e[r]=n})),Qt(this.propertyFields,(function(i){var r=t.getPropertyValue(i);e[i]=r})),e},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.properties={},this.filters.clear()},e.prototype.processConfig=function(e){S(e)&&S(e.properties)&&Qt(e.properties,(function(t,i){C(i)&&(i.match(/^[0-9.\-]+\%$/)?e.properties[t]=m(_(i)):i.match(/^\#[0-9abcdef]{3,}$/i)&&(e.properties[t]=Xe(i)))})),t.prototype.processConfig.call(this,e)},e.prototype.asFunction=function(e){return"transitionEasing"==e||t.prototype.asIs.call(this,e)},e}(He);ve.registeredClasses.SpriteState=Hi;var Wi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._interactionEvents=new ye,e}return Object(d.d)(e,t),e.prototype._dispatchSpriteEvent=function(t){if(!this.target.disabled&&!this.target.isTemplate&&this.target.events.isEnabled(t.type)){var e=ee(t,{target:this.target});this.target.events.dispatchImmediately(e.type,e)}},e.prototype._dispatchSpritePointEvent=function(t){if(!this.target.disabled&&!this.target.isTemplate&&this.target.events.isEnabled(t.type)){var e=ee(t,{target:this.target,spritePoint:Pi(t.point,this.target),svgPoint:this.target.getSvgPoint(t.point)});this.target.events.dispatchImmediately(e.type,e)}},e.prototype._addInteractionObjectEvent=function(t,e,i,r){var n=this,a=r+"-"+t;return this._interactionEvents.insertKeyIfEmpty(a,(function(){var o=n.target.interactions.events.on(t,e,i,r);return new jt((function(){n._interactionEvents.removeKey(a),o.dispose()}))})).increment()},e.prototype._on=function(e,i,r,n,a,o){var s=t.prototype._on.call(this,e,i,r,n,a,o),l=[s.disposer];switch(i){case"hit":case"track":case"doublehit":case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":l.push(this._addInteractionObjectEvent(i,this._dispatchSpritePointEvent,this,a));break;case"rightclick":case"down":case"up":case"drag":case"dragged":case"dragstart":case"dragstop":case"over":case"out":case"swipe":case"swipeleft":case"swiperight":case"resize":case"focus":case"blur":case"toggled":l.push(this._addInteractionObjectEvent(i,this._dispatchSpriteEvent,this,a))}switch(i){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"toggled":this.target.togglable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":this.target.hoverable=!0;case"out":this.target.hoverable=!0;break;case"focus":case"blur":this.target.focusable=!0}return s.disposer=new Rt(l),s},e}(Kt),Yi=function(){function t(){}return t.opacity=1,t.strokeOpacity=1,t.strokeWidth=1,t.fillOpacity=1,t.fill=Ue("#000000"),t.stroke=Ue("#000000"),t.focusable=void 0,t.tabindex=0,t}(),Gi={verbose:!0,commercialLicense:!1,classNamePrefix:"amcharts-",autoSetClassName:!1,minPolylineStep:.5,onlyShowOnViewport:!1,queue:!1,licenses:[],suppressErrors:!1,animationsEnabled:!0,nonce:""};function qi(t,e,i){return e+(i-e)*t}function Ki(t,e,i){return new f(qi(t,e.percent,i.percent))}function Zi(t,e,i){var r=new Ne(Ve(e.rgb,i.rgb,t));return e.alpha!=i.alpha&&(r.alpha=e.alpha+(i.alpha-e.alpha)*t),r}function Ji(t,e){return e+t.charAt(0).toUpperCase()+t.substr(1)}var $i,Qi=function(){function t(t){this._disposer=new Lt((function(){for(;0!==t.length;)t[0].dispose()}))}return t.prototype.isDisposed=function(){return this._disposer.isDisposed()},t.prototype.dispose=function(){this._disposer.dispose()},t}(),tr=function(t){function e(e,i,r,n){var a=t.call(this)||this;return a.duration=0,a.easing=Mi,a.progress=0,a._loop=0,a._pause=!1,a._delayTimeout=null,a._time=0,a._isFinished=!1,a.className="Animation",!1===Gi.animationsEnabled&&(r=0),a.object=e,a.animationOptions=Tt(i),a.duration=r,n&&(a.easing=n),a.applyTheme(),a}return Object(d.d)(e,t),e.prototype.debug=function(){},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.pause()},e.prototype.delay=function(t){var e=this;if(t>0){this.pause(),xt(this.object.animations,this);var i=setTimeout((function(){e._delayTimeout=null,e.start()}),t);this._delayTimeout=new Lt((function(){clearTimeout(i)}))}return this},e.prototype._start=function(){this._isFinished=!1,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),this.stopSameAnimations(),this._pause=!1,xt(wn.animations,this),xt(this.object.animations,this),wn.requestFrame()},e.prototype.start=function(){this._start(),this._startTime=Date.now(),this._time=0,this.staticOptions=[];for(var t=this.animationOptions.length-1;t>=0;t--){var e=this.animationOptions[t];if(S(e.from)||(e.childObject?e.from=e.childObject[e.property]:(e.from=this.object[e.property],S(e.from)||(e.from=Yi[e.property]))),e.from==e.to)_t(this.animationOptions,e);else if(!S(e.from)||!(e.from instanceof f)&&e.to instanceof f||e.from instanceof f&&!(e.to instanceof f))this.staticOptions.push(e),_t(this.animationOptions,e);else if(k(e.to))if(e.updateMethod=qi,e.from instanceof f){var i=this.object[Ji(e.property,"pixel")];isNaN(i)?(this.staticOptions.push(e),_t(this.animationOptions,e)):e.from=i}else isNaN(e.from)&&(this.staticOptions.push(e),_t(this.animationOptions,e));else e.to instanceof Ne?e.from?e.updateMethod=Zi:(this.staticOptions.push(e),_t(this.animationOptions,e)):e.to instanceof f?(e.updateMethod=Ki,isNaN(e.from)||(i=this.object[Ji(e.property,"relative")],isNaN(i)||(e.from=m(100*i)))):(this.staticOptions.push(e),_t(this.animationOptions,e))}return this.applyStaticOptions(),this.events.isEnabled("animationstarted")&&this.events.dispatchImmediately("animationstarted",{type:"animationstarted",target:this,progress:this.progress}),this.update(),0===this.duration&&this.end(),this},e.prototype.loop=function(t){return k(t)||(t=1/0),this._loop=t,this},e.prototype.pause=function(){return this._pause=!0,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),_t(wn.animations,this),_t(this.object.animations,this),this},e.prototype.resume=function(){return this._start(),this._startTime=Date.now()-this._time,this},e.prototype.end=function(){return 0==this._loop&&this.pause(),this.setProgress(1),this.applyStaticOptions(),this.events.isEnabled("animationended")&&this.events.dispatchImmediately("animationended",{type:"animationended",target:this,progress:this.progress}),this._loop>0?(this._loop--,this.start()):(this.stop(),this._isFinished=!0),this},e.prototype.kill=function(){this.pause(),this._isFinished=!0},e.prototype.isFinished=function(){return this._isFinished},e.prototype.applyStaticOptions=function(){var t=this;ht(this.staticOptions,(function(e){e.childObject?e.childObject[e.property]=1==t.progress?e.to:e.from:t.object[e.property]=1==t.progress?e.to:e.from}))},e.prototype.stop=function(t){return this.pause(),t||this.events.isEnabled("animationstopped")&&this.events.dispatchImmediately("animationstopped",{type:"animationstopped",target:this,progress:this.progress}),this},e.prototype.setProgress=function(t){var e=this;this._time=this.duration*t,ht(this.animationOptions,(function(i){if(i.updateMethod&&S(i.from)){var r=i.updateMethod(t,i.from,i.to);i.childObject?i.childObject[i.property]=r:e.object[i.property]=r}})),this.progress=t,this.events.isEnabled("animationprogress")&&this.events.dispatchImmediately("animationprogress",{type:"animationprogress",target:this,progress:this.progress}),wn.requestFrame()},e.prototype.update=function(){if(!this._pause){var t=void 0;this._time=V(Date.now()-this._startTime,0,this.duration);var e=this._time/this.duration;t=this.easing(e),(0==this.duration||!k(t)||e>=1)&&(t=1),this.setProgress(t),1==L(this._time/this.duration,6)&&this.end()}return this},Object.defineProperty(e.prototype,"delayed",{get:function(){return!!this._delayTimeout},enumerable:!0,configurable:!0}),e.prototype.stopSameAnimations=function(){var t=this;ht(Ct(this.object.animations),(function(e){if(e!==t&&!e.delayed){var i=[];ht(t.animationOptions,(function(t){ht(e.animationOptions,(function(r){t.property==r.property&&t.childObject==r.childObject&&(i.push(r),0==e.animationOptions.length&&e.kill())}))})),ht(i,(function(t){_t(e.animationOptions,t)}))}}))},e.prototype.asFunction=function(e){return"easing"==e||t.prototype.asIs.call(this,e)},e}(We),er="http://www.w3.org/2000/svg",ir="http://www.w3.org/2000/xmlns/",rr="http://www.w3.org/1999/xlink";function nr(t,e,i,r){return t.addEventListener(e,i,r||!1),new Lt((function(){t.removeEventListener(e,i,r||!1)}))}function ar(t,e){if(t)if(t.classList)t.classList.add(e);else{var i=t.getAttribute("class");t.setAttribute("class",i?i.split(" ").filter((function(t){return t!==e})).join(" ")+" "+e:e)}}function or(t,e){if(t)if(t.classList)t.classList.remove(e);else{var i=t.getAttribute("class");i&&t.setAttribute("class",i.split(" ").filter((function(t){return t!==e})).join(" "))}}function sr(t,e,i){t.style[e]=i}function lr(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function ur(){var t=document.createElement("input");t.style.position="fixed",t.style.top="0px",t.style.left="-10000px",document.body.appendChild(t),t.focus(),t.blur(),document.body.removeChild(t)}function cr(t,e){for(var i=e;;){if(t===i)return!0;if(null==i.parentNode){if(null==i.host)return!1;i=i.host}else i=i.parentNode}}function hr(t){for(var e=t;;){if(null==e.parentNode)return null!=e.host?e:null;e=e.parentNode}}function pr(t){for(var e=t.ownerDocument,i=t;;){if(null==i.parentNode)return i===e||null!=i.host?i:null;i=i.parentNode}}var dr=function(t){function e(e,i,r){var n=this,a=function(t){return null==t?(S($i)||((e=document.createElement("style")).type="text/css",""!=Gi.nonce&&e.setAttribute("nonce",Gi.nonce),document.head.appendChild(e),$i=e.sheet),$i):((e=document.createElement("style")).type="text/css",""!=Gi.nonce&&e.setAttribute("nonce",Gi.nonce),t.appendChild(e),e.sheet);var e}(e);return(n=t.call(this,(function(){var t=lt(a.cssRules,n._rule);if(-1===t)throw new Error("Could not dispose StyleRule");a.deleteRule(t)}))||this)._rule=function(t,e){var i=t.cssRules.length;return t.insertRule(e+"{}",i),t.cssRules[i]}(a,i),Qt(r,(function(t,e){n.setStyle(t,e)})),n}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"selector",{get:function(){return this._rule.selectorText},set:function(t){this._rule.selectorText=t},enumerable:!0,configurable:!0}),e.prototype._setVendorPrefixName=function(t,e){var i=this._rule.style;i.setProperty("-webkit-"+t,e,""),i.setProperty("-moz-"+t,e,""),i.setProperty("-ms-"+t,e,""),i.setProperty("-o-"+t,e,""),i.setProperty(t,e,"")},e.prototype.setStyle=function(t,e){"transition"===t?this._setVendorPrefixName(t,e):this._rule.style.setProperty(t,e,"")},e}(Lt),fr=0;function mr(t){var e=lr(t,"font-family");if(e)return e;var i=t.parentElement||t.parentNode;return i?mr(i):void 0}function yr(t){var e=lr(t,"font-size");if(e)return e;var i=t.parentElement||t.parentNode;return i?yr(i):void 0}function gr(t,e){var i=t.getBoundingClientRect(),r=A(e)?e:e?[e]:[];if(r.length){for(var n=0;n<r.length;n++){var a=r[n];if(!gr(a))return!1;var o=a.getBoundingClientRect();if(i.top>=0&&i.left>=0&&i.top<=o.top+o.height&&i.left<=o.left+o.width)return!0}return!1}return i.top>=0&&i.left>=0&&i.top<=(window.innerHeight||document.documentElement.clientHeight)&&i.left<=(window.innerWidth||document.documentElement.clientWidth)}!function(t){function e(e,i,r){var n=this,a=S(r)?r:"__style_"+ ++fr+"__";return(n=t.call(this,e,"."+a,i)||this)._className=a,n}Object(d.d)(e,t),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(t){this._className=t,this.selector="."+t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._className}}(dr);var br=function(){function t(t){this._isDisposed=!1,this._x=0,this._y=0,this._rotationY=0,this._rotationX=0,this._rotation=0,this._scale=1,this.node="string"==typeof t?document.createElementNS(er,t):t}return t.prototype.removeNode=function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)},Object.defineProperty(t.prototype,"transformString",{get:function(){if(this.node)return this._transformString},enumerable:!0,configurable:!0}),t.prototype.transform=function(){var t="translate("+this._x+","+this._y+")";if(1!=this._scale&&(t+=(t?" ":"")+"scale("+this._scale+")"),0!=this._rotation){var e="rotate("+this._rotation+")";this._rotationX&&this._rotationY&&(e="rotate("+this._rotation+" "+this._rotationX+" "+this._rotationY+")"),t+=(t?" ":"")+e}this._transformString=t,this.node.setAttribute("transform",t)},t.prototype.getBBox=function(){var t={width:0,height:0,x:0,y:0};if(this.node&&this.node.parentNode)try{var e=this.node.getBBox();t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height}catch(i){}return t},t.prototype.moveTo=function(t){if(t){var e=t.x,i=t.y;this._x==e&&this._y==i||(this._x=e,this._y=i,this.transform())}},Object.defineProperty(t.prototype,"content",{get:function(){return this.node.innerHTML||""},set:function(t){this.node.innerHTML=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.node.textContent||""},set:function(t){this.node.textContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!=t&&(this._rotation=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationX",{get:function(){return this._rotationX},set:function(t){this._rotationX!=t&&(this._rotationX=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY},set:function(t){this._rotationY!=t&&(this._rotationY=t,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale!=t&&(this._scale=t,this.transform())},enumerable:!0,configurable:!0}),t.prototype.removeAttr=function(t){this.node.removeAttribute(t)},t.prototype.attr=function(t){var e=this;return Qt(t,(function(t,i){S(i)?e.node.setAttribute(t,i):e.node.removeAttribute(t)})),this},t.prototype.getAttr=function(t){return this.node.getAttribute(t)},t.prototype.attrNS=function(t,e,i){return this.node.setAttributeNS(t,e,i),this},t.prototype.getAttrNS=function(t,e){return this.node.getAttributeNS(t,e)},t.prototype.removeStyle=function(t){this.node.style[t]=null,delete this.node.style[t]},t.prototype.getStyle=function(t){return this.node.style[t]},t.prototype.addStyle=function(t){var e=this;return Qt(t,(function(t,i){S(i)?e.node.style[t]=i:e.removeStyle(t)})),this},t.prototype.addClass=function(t){ar(this.node,t)},t.prototype.removeClass=function(t){or(this.node,t)},t.prototype.setClass=function(t){this.node.setAttribute("class",t)},t.prototype.removeChildNodes=function(){for(;this.node.childNodes.length>0;)this.node.removeChild(this.node.firstChild)},t.prototype.isDisposed=function(){return this._isDisposed},t.prototype.dispose=function(){this.removeNode()},t}(),vr=function(t){function e(e){return t.call(this,e)||this}return Object(d.d)(e,t),e.prototype.add=function(t){t&&this.node.appendChild(t.node)},e.prototype.addToBack=function(t){if(t){var e=this.node.childNodes[0];e?e!=t.node&&this.node.insertBefore(t.node,e):this.node.appendChild(t.node)}},e.prototype.removeElement=function(t){if(t)try{t.node&&t.node.parentNode==this.node&&this.node.removeChild(t.node)}catch(e){}},e.prototype.hasChild=function(t){for(var e=0;e<this.node.childNodes.length;e++)if(this.node.childNodes[e]==t.node)return!0;return!1},Object.defineProperty(e.prototype,"content",{get:function(){return this.node.innerHTML},set:function(t){this.node.innerHTML=t},enumerable:!0,configurable:!0}),e.prototype.removeChildren=function(){if(this.node.childNodes)for(;this.node.childNodes.length>0;){var t=this.node.firstChild;t&&t.parentNode&&t.parentNode.removeChild(t)}},e}(br),_r=function(t){function e(){var e=t.call(this)||this;return e._purposes={stroke:Ue("#e5e5e5"),fill:Ue("#f3f3f3"),primaryButton:Ue("#6794dc"),primaryButtonHover:Ue("#6771dc"),primaryButtonDown:Ue("#68dc75"),primaryButtonActive:Ue("#68dc75"),primaryButtonText:Ue("#FFFFFF"),primaryButtonStroke:Ue("#FFFFFF"),secondaryButton:Ue("#d9d9d9"),secondaryButtonHover:Ue("#d9d9d9").brighten(-.25),secondaryButtonDown:Ue("#d9d9d9").brighten(-.35),secondaryButtonActive:Ue("#d9d9d9").brighten(.35),secondaryButtonText:Ue("#000000"),secondaryButtonStroke:Ue("#FFFFFF"),grid:Ue("#000000"),background:Ue("#ffffff"),alternativeBackground:Ue("#000000"),text:Ue("#000000"),alternativeText:Ue("#FFFFFF"),disabledBackground:Ue("#999999"),positive:Ue("#67dc75"),negative:Ue("#dc6788")},e.className="InterfaceColorSet",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.debug=function(){},e.prototype.getFor=function(t){return this._purposes[t]},e.prototype.setFor=function(t,e){this._purposes[t]=e},e}(He);ve.registeredClasses.InterfaceColorSet=_r;var xr=new ye,Sr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._domEvents={},e}return Object(d.d)(e,t),e.prototype._addDOMEvent=function(t,e,i,r){var n=this;if(!this._domEvents[t]){var a=function(t){i.call(r,e,t)};this.target.element.addEventListener(t,a,!1),this._domEvents[t]=new jt((function(){delete n._domEvents[t],n.target.element.removeEventListener(t,a,!1)}))}return this._domEvents[t].increment()},e.prototype._dispatchKeyboardEvent=function(t,e){this.target.events.isEnabled(t)&&this.target.events.dispatchImmediately(t,{type:t,target:this.target,event:e})},e.prototype._on=function(e,i,r,n,a,o){var s=t.prototype._on.call(this,e,i,r,n,a,o),l=[s.disposer];switch(i){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":case"out":this.target.hoverable=!0;break;case"focus":case"blur":case"focusin":case"focusout":this.target.focusable=!0;break;case"keydown":case"keyup":case"keypress":case"input":l.push(this._addDOMEvent(i,i,this._dispatchKeyboardEvent,this))}return s.disposer=new Rt(l),s},e}(Kt),wr=function(t){function e(e){var i=t.call(this)||this;return i._eventDispatcher=new Sr(i),i.eventDisposers=new ye,i.replacedStyles=new ye,i._clickable=!1,i._contextMenuDisabled=!1,i._hoverable=!1,i._trackable=!1,i._draggable=!1,i._swipeable=!1,i._resizable=!1,i._wheelable=!1,i._inert=!1,i._isHover=!1,i.isRealHover=!1,i._isHoverByTouch=!1,i._isDown=!1,i._isFocused=!1,i._isTouchProtected=!1,i._inertiaOptions=new ye,i.inertias=new ye,i._hitOptions={},i._hoverOptions={},i._swipeOptions={},i._keyboardOptions={},i._mouseOptions={},i._cursorOptions={defaultStyle:[{property:"cursor",value:"default"}]},i._disposers.push(i._eventDispatcher),i._element=e,i.className="InteractionObject",i._disposers.push(new me(i.inertias)),i._disposers.push(new me(i.eventDisposers)),i.applyTheme(),i}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHover",{get:function(){return this._isHover},set:function(t){this.isHover!=t&&(this._isHover=t,t?Vr().overObjects.moveValue(this):(this.isRealHover=!1,Vr().overObjects.removeValue(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHoverByTouch",{get:function(){return this._isHoverByTouch},set:function(t){this.isHoverByTouch!=t&&(this._isHoverByTouch=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overPointers",{get:function(){return this._overPointers||(this._overPointers=new Te),this._overPointers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDown",{get:function(){return this._isDown},set:function(t){this.isDown!=t&&(this._isDown=t,t?Vr().downObjects.moveValue(this):Vr().downObjects.removeValue(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"downPointers",{get:function(){return this._downPointers||(this._downPointers=new Te),this._downPointers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFocused",{get:function(){return this._isFocused},set:function(t){this.isFocused!=t&&(this._isFocused=t,Vr().focusedObject=t?this:void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTouchProtected",{get:function(){return this._isTouchProtected},set:function(t){this._isTouchProtected!=t&&(this._isTouchProtected=t,t?Vr().unprepElement(this):(this.draggable||this.swipeable||this.trackable||this.resizable)&&Vr().prepElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return this._clickable},set:function(t){this._clickable!==t&&(this._clickable=t,Vr().processClickable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contextMenuDisabled",{get:function(){return this._contextMenuDisabled},set:function(t){this._contextMenuDisabled!==t&&(this._contextMenuDisabled=t,Vr().processContextMenu(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverable",{get:function(){return this._hoverable},set:function(t){this._hoverable!==t&&(this._hoverable=t,Vr().processHoverable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackable",{get:function(){return this._trackable},set:function(t){this._trackable!==t&&(this._trackable=t,Vr().processTrackable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggable",{get:function(){return this._draggable},set:function(t){this._draggable!==t&&(this._draggable=t,Vr().processDraggable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeable",{get:function(){return this._swipeable},set:function(t){this._swipeable!==t&&(this._swipeable=t,Vr().processSwipeable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){this._resizable!==t&&(this._resizable=t,Vr().processResizable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelable",{get:function(){return this._wheelable},set:function(t){this._wheelable!==t&&(this._wheelable=t,Vr().processWheelable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inert",{get:function(){return this._inert},set:function(t){this._inert!==t&&(this._inert=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusable",{get:function(){return this._focusable},set:function(t){this._focusable!==t&&(this._focusable=t,this._focusable&&-1==this.tabindex&&(this._tabindex=1),Vr().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){return T(this._tabindex,-1)},set:function(t){this._tabindex!==t&&(this._tabindex=t,t>-1&&(this.focusable=!0),Vr().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},set:function(t){this._element=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalPosition",{get:function(){return this._originalPosition||{x:0,y:0}},set:function(t){this._originalPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalScale",{get:function(){return T(this._originalScale,1)},set:function(t){this._originalScale!==t&&(this._originalScale=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalAngle",{get:function(){return T(this._originalAngle,0)},set:function(t){this._originalAngle!==t&&(this._originalAngle=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inertiaOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("inertiaOptions",this._inertiaOptions):this._inertiaOptions},set:function(t){this._inertiaOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hitOptions",this._hitOptions):this._hitOptions},set:function(t){this._hitOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hoverOptions",this._hoverOptions):this._hoverOptions},set:function(t){this._hoverOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("swipeOptions",this._swipeOptions):this._swipeOptions},set:function(t){this._swipeOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyboardOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("keyboardOptions",this._keyboardOptions):this._keyboardOptions},set:function(t){this._keyboardOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("mouseOptions",this._mouseOptions):this._mouseOptions},set:function(t){this._mouseOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("cursorOptions",this._cursorOptions):this._cursorOptions},set:function(t){this._cursorOptions=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.inertiaOptions=e.inertiaOptions,this.hitOptions=e.hitOptions,this.hoverOptions=e.hoverOptions,this.swipeOptions=e.swipeOptions,this.keyboardOptions=e.keyboardOptions,this.cursorOptions=e.cursorOptions,this.contextMenuDisabled=e.contextMenuDisabled,Vr().applyCursorOverStyle(this)},e.prototype.setEventDisposer=function(t,e,i){var r=this.eventDisposers.getKey(t);e?null==r&&this.eventDisposers.setKey(t,i()):null!=r&&(r.dispose(),this.eventDisposers.removeKey(t))},e.prototype.dispose=function(){t.prototype.dispose.call(this);var e=Vr();e.overObjects.removeValue(this),e.downObjects.removeValue(this),e.trackedObjects.removeValue(this),e.transformedObjects.removeValue(this),this.isHover&&this.wheelable&&e.unlockWheel(),e.focusedObject===this&&(e.focusedObject=void 0)},e}(We),Tr=function(){function t(t,e){this._disposed=!1,this.directionX=0,this.directionY=0,this.interaction=t,this.keyboardEvent=e,this._startedOn=(new Date).getTime(),Vr().processDragStart(t),wn.animations.push(this),this.update()}return t.prototype.update=function(){var t=this.interaction,e=Vr().getKeyboardOption(t,"speed"),i=Vr().getKeyboardOption(t,"accelleration"),r=Vr().getKeyboardOption(t,"accellerationDelay"),n={x:0,y:0};this.keyboardEvent.shiftKey?(e*=.5,i=1):this.keyboardEvent.ctrlKey&&(e*=2);var a=(new Date).getTime()-this._startedOn,o=a-r;if(i>0&&o>0){var s=a/r;a=r,n.x+=this.directionX*(e*i*s*o),n.y+=this.directionY*(e*i*s*o)}n.x+=this.directionX*(e*a),n.y+=this.directionY*(e*a),Vr().handleTransformMove(t,n,{x:0,y:0},this.keyboardEvent,!0,!1)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||(Vr().processDragStop(this.interaction),_t(wn.animations,this))},t}(),Pr=function(t){function e(e,i,r,n){var a=t.call(this)||this;return a.animations=[],a.className="Inertia",a.interaction=e,a.type=i,a.point=r,a.startPoint=n,a._disposers.push(new Qi(a.animations)),a}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.point.x},set:function(t){k(t)&&(this.point.x=t,this.handleMove())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.point.y},set:function(t){k(t)&&(this.point.y=t,this.handleMove())},enumerable:!0,configurable:!0}),e.prototype.handleMove=function(){this.interaction.events.isEnabled("drag")&&this.interaction.events.dispatchImmediately("drag",{type:"drag",target:this.interaction,shift:{x:this.x-this.startPoint.x,y:this.y-this.startPoint.y},startPoint:this.startPoint,point:{x:this.x,y:this.y},touch:!1})},e.prototype.done=function(){this.interaction.inertias.removeKey(this.type),"move"===this.type&&Vr().processDragStop(this.interaction),this.dispose()},e}(He),Cr=new(function(){function t(){}return t.prototype.getEventKey=function(t){var e;switch(t.keyCode||t.which){case 38:e="up";break;case 40:e="down";break;case 37:e="left";break;case 39:e="right";break;case 13:e="enter";break;case 27:e="esc";break;case 36:e="home";break;case 35:e="end";break;case 9:e="tab";break;case 17:e="ctrl";break;case 18:e="alt";break;case 16:e="shift";break;case 32:e="space";break;case 36:e="home";break;case 35:e="end";break;case 33:e="pgup";break;case 34:e="pgdn";break;case 45:e="ins";break;case 46:e="del";break;case 107:e="plus";break;case 109:e="minus";break;default:e="other"}return e},t.prototype.isKey=function(t,e){var i=this.getEventKey(t);return C(e)&&(e=[e]),-1!==e.indexOf(i)},t.prototype.shiftKey=function(t){return t.shiftKey},t.prototype.ctrlKey=function(t){return t.ctrlKey},t.prototype.altKey=function(t){return t.altKey},t.prototype.metaKey=function(t){return t.metaKey},t}()),kr={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6};function Ir(t){switch(t){case"year":return;case"month":return"year";case"week":case"day":return"month";case"hour":return"day";case"minute":return"hour";case"second":return"minute";case"millisecond":return"second"}}function Ar(t,e){return S(e)||(e=1),kr[t]*e}function Or(){return(new Date).getTime()}function Dr(t){return new Date(t.getTime())}function Fr(t,e,i,r){t=new Date(t.getTime()),e=new Date(e.getTime());var n=0,a=0;r||"millisecond"==i||(n=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-n),a=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-a));var o=!1;switch(i){case"year":t.getUTCFullYear()!=e.getUTCFullYear()&&(o=!0);break;case"month":t.getUTCFullYear()!=e.getUTCFullYear()?o=!0:t.getUTCMonth()!=e.getUTCMonth()&&(o=!0);break;case"day":t.getUTCMonth()!=e.getUTCMonth()?o=!0:t.getUTCDate()!=e.getUTCDate()&&(o=!0);break;case"hour":t.getUTCHours()!=e.getUTCHours()&&(o=!0);break;case"minute":t.getUTCMinutes()!=e.getUTCMinutes()&&(o=!0);break;case"second":t.getUTCSeconds()!=e.getUTCSeconds()&&(o=!0);break;case"millisecond":t.getTime()!=e.getTime()&&(o=!0)}if(o)return!0;var s=Ir(i);return!!s&&(t.setUTCMinutes(t.getUTCMinutes()+n),e.setUTCMinutes(e.getUTCMinutes()+a),Fr(t,e,s,r))}function Mr(t,e,i,r){var n=0;switch(r||"millisecond"==e||(n=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-n)),e){case"day":var a=t.getUTCDate();t.setUTCDate(a+i);break;case"second":var o=t.getUTCSeconds();t.setUTCSeconds(o+i);break;case"millisecond":var s=t.getUTCMilliseconds();t.setUTCMilliseconds(s+i);break;case"hour":var l=t.getUTCHours();t.setUTCHours(l+i);break;case"minute":var u=t.getUTCMinutes();t.setUTCMinutes(u+i);break;case"year":var c=t.getUTCFullYear();t.setUTCFullYear(c+i);break;case"month":var h=t.getUTCMonth();t.setUTCMonth(h+i);break;case"week":var p=t.getUTCDate();t.setUTCDate(p+7*i)}if(!r&&"millisecond"!=e&&(t.setUTCMinutes(t.getUTCMinutes()+n),"day"==e||"week"==e||"month"==e||"year"==e)){var d=t.getTimezoneOffset();if(d!=n){var f=d-n;t.setUTCMinutes(t.getUTCMinutes()+f),t.getTimezoneOffset()!=d&&t.setUTCMinutes(t.getUTCMinutes()-f)}}return t}function Er(t,e,i,r,n,a){k(i)||(i=1);var o=0;switch(n||"millisecond"==e||(o=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-o)),e){case"day":var s=t.getUTCDate();if(i>1){if(a){a=Er(a,"day",1);var l=t.getTime()-a.getTime(),u=Math.floor(l/Ar("day")/i),c=Ar("day",u*i);t.setTime(a.getTime()+c-o*Ar("minute"))}}else t.setUTCDate(s);t.setUTCHours(0,0,0,0);break;case"second":var h=t.getUTCSeconds();i>1&&(h=Math.floor(h/i)*i),t.setUTCSeconds(h,0);break;case"millisecond":if(1==i)return t;var p=t.getUTCMilliseconds();p=Math.floor(p/i)*i,t.setUTCMilliseconds(p);break;case"hour":var d=t.getUTCHours();i>1&&(d=Math.floor(d/i)*i),t.setUTCHours(d,0,0,0);break;case"minute":var f=t.getUTCMinutes();p=t.getUTCMilliseconds(),i>1&&(f=Math.floor(f/i)*i),t.setUTCMinutes(f,0,0);break;case"month":var m=t.getUTCMonth();i>1&&(m=Math.floor(m/i)*i),t.setUTCMonth(m,1),t.setUTCHours(0,0,0,0);break;case"year":var y=t.getUTCFullYear();i>1&&(y=Math.floor(y/i)*i),t.setUTCFullYear(y,0,1),t.setUTCHours(0,0,0,0);break;case"week":var g=t.getUTCDate(),b=t.getUTCDay();k(r)||(r=1),t.setUTCDate(g=b>=r?g-b+r:g-(7+b)+r),t.setUTCHours(0,0,0,0)}if(!n&&"millisecond"!=e&&(t.setUTCMinutes(t.getUTCMinutes()+o),"day"==e||"week"==e||"month"==e||"year"==e)){var v=t.getTimezoneOffset();if(v!=o){var _=v-o;t.setUTCMinutes(t.getUTCMinutes()+_)}}return t}var Lr=function(t){function e(){var i=t.call(this)||this;return i._globalEventsAdded=!1,i._pointerEvents={pointerdown:"mousedown",pointerup:"mouseup",pointermove:"mousemove",pointercancel:"mouseup",pointerover:"mouseover",pointerout:"mouseout",wheel:"wheel"},i._usePointerEventsOnly=!1,i._useTouchEventsOnly=!1,i._addHoverEvents=!0,i._passiveSupported=!1,i._delayedEvents={out:[]},i.overObjects=new Te,i.downObjects=new Te,i.trackedObjects=new Te,i.transformedObjects=new Te,i.pointers=new ye,i.inertiaOptions=new ye,i.hitOptions={doubleHitTime:300,hitTolerance:10,noFocus:!0},i.hoverOptions={touchOutBehavior:"leave",touchOutDelay:1e3},i.swipeOptions={time:500,verticalThreshold:75,horizontalThreshold:30},i.keyboardOptions={speed:.1,accelleration:1.2,accellerationDelay:2e3},i.mouseOptions={sensitivity:1},i.className="Interaction",i.body=i.getInteraction(document.body),i._disposers.push(i.body),window.hasOwnProperty("PointerEvent")?(i._pointerEvents.pointerdown="pointerdown",i._pointerEvents.pointerup="pointerup",i._pointerEvents.pointermove="pointermove",i._pointerEvents.pointercancel="pointercancel",i._pointerEvents.pointerover="pointerover",i._pointerEvents.pointerout="pointerout"):window.hasOwnProperty("MSPointerEvent")?(i._pointerEvents.pointerdown="MSPointerDown",i._pointerEvents.pointerup="MSPointerUp",i._pointerEvents.pointermove="MSPointerMove",i._pointerEvents.pointercancel="MSPointerUp",i._pointerEvents.pointerover="MSPointerOver",i._pointerEvents.pointerout="MSPointerOut"):"undefined"!=typeof matchMedia&&matchMedia("(pointer:fine)").matches?"ontouchstart"in window&&(i._addHoverEvents=!1,i._useTouchEventsOnly=!0):window.navigator.userAgent.match(/MSIE /)?i._usePointerEventsOnly=!0:i.fullFF()?i._usePointerEventsOnly=!0:i._useTouchEventsOnly=!0,"onwheel"in document.createElement("div")?i._pointerEvents.wheel="wheel":S(document.onmousewheel)&&(i._pointerEvents.wheel="mousewheel"),i.inertiaOptions.setKey("move",{time:100,duration:500,factor:1,easing:Vi}),i.inertiaOptions.setKey("resize",{time:100,duration:500,factor:1,easing:Vi}),i._passiveSupported=e.passiveSupported,i.applyTheme(),i}return Object(d.d)(e,t),e.prototype.fullFF=function(){return window.navigator.userAgent.match(/Firefox/)&&!window.navigator.userAgent.match(/Android/)},e.prototype.debug=function(){},e.prototype.addGlobalEvents=function(){var t=this;this._globalEventsAdded||(this._useTouchEventsOnly||(this._disposers.push(nr(document,this._pointerEvents.pointerdown,(function(e){t.handleGlobalPointerDown(e)}))),this._disposers.push(nr(document,this._pointerEvents.pointermove,(function(e){t.handleGlobalPointerMove(e)}))),this._disposers.push(nr(document,this._pointerEvents.pointerup,(function(e){t.handleGlobalPointerUp(e)}))),this._disposers.push(nr(document,this._pointerEvents.pointercancel,(function(e){t.handleGlobalPointerUp(e,!0)}))),this._disposers.push(nr(document,"mouseenter",(function(e){S(e.relatedTarget)||0!=e.buttons&&0!=e.which||t.handleDocumentLeave(e)})))),this._usePointerEventsOnly||(this._disposers.push(nr(document,"touchstart",(function(e){t.handleGlobalTouchStart(e)}))),this._disposers.push(nr(document,"touchmove",(function(e){t.handleGlobalTouchMove(e)}))),this._disposers.push(nr(document,"touchend",(function(e){t.handleGlobalTouchEnd(e)})))),this._disposers.push(nr(document,"keydown",(function(e){t.handleGlobalKeyDown(e)}))),this._disposers.push(nr(document,"keyup",(function(e){t.handleGlobalKeyUp(e)}))),this._globalEventsAdded=!0)},e.prototype.processClickable=function(t){this.processTouchable(t)},e.prototype.processContextMenu=function(t){t.contextMenuDisabled?t.eventDisposers.hasKey("contextMenuDisabled")||t.eventDisposers.setKey("contextMenuDisabled",nr(t.element,"contextmenu",(function(t){t.preventDefault()}))):t.eventDisposers.hasKey("contextMenuDisabled")&&t.eventDisposers.getKey("contextMenuDisabled").dispose()},e.prototype.processHoverable=function(t){var e=this;if(t.hoverable||t.trackable)this.addGlobalEvents(),this.applyCursorOverStyle(t),!t.eventDisposers.hasKey("hoverable")&&this._addHoverEvents&&t.eventDisposers.setKey("hoverable",new Rt([nr(t.element,this._pointerEvents.pointerout,(function(i){return e.handlePointerOut(t,i)})),nr(t.element,this._pointerEvents.pointerover,(function(i){return e.handlePointerOver(t,i)}))]));else{var i=t.eventDisposers.getKey("hoverable");null!=i&&(i.dispose(),t.eventDisposers.removeKey("hoverable"))}this.processTouchable(t)},e.prototype.processMovable=function(t){(t.draggable||t.swipeable||t.trackable||t.resizable)&&(this.isGlobalElement(t)||t.isTouchProtected||this.prepElement(t),this.applyCursorOverStyle(t)),this.processTouchable(t)},e.prototype.processTrackable=function(t){this.processHoverable(t),this.processMovable(t),t.trackable?this.trackedObjects.moveValue(t):this.trackedObjects.removeValue(t)},e.prototype.processDraggable=function(t){this.processMovable(t)},e.prototype.processSwipeable=function(t){this.processMovable(t)},e.prototype.processResizable=function(t){this.processMovable(t)},e.prototype.processWheelable=function(t){var e=this;if(t.wheelable)t.eventDisposers.hasKey("wheelable")||t.eventDisposers.setKey("wheelable",new Rt([nr(t.element,this._pointerEvents.wheel,(function(i){return e.handleMouseWheel(t,i)}),!!this._passiveSupported&&{passive:!1}),t.events.on("out",(function(i){t.wheelable&&e.unlockWheel()})),t.events.on("over",(function(i){t.wheelable&&e.lockWheel()}))]));else{var i=t.eventDisposers.getKey("wheelable");null!=i&&(i.dispose(),t.eventDisposers.removeKey("wheelable"))}},e.prototype.processFocusable=function(t){var e=this;if(!0===t.focusable&&t.tabindex>-1&&!this._useTouchEventsOnly)t.eventDisposers.hasKey("focusable")||t.eventDisposers.setKey("focusable",new Rt([nr(t.element,"focus",(function(i){return e.handleFocus(t,i)})),nr(t.element,"blur",(function(i){return e.handleBlur(t,i)})),nr(t.element,this._pointerEvents.pointerdown,(function(i){return e.handleFocusBlur(t,i)})),nr(t.element,"touchstart",(function(i){return e.handleFocusBlur(t,i)}),!!this._passiveSupported&&{passive:!1})]));else{var i=t.eventDisposers.getKey("focusable");null!=i&&(i.dispose(),t.eventDisposers.removeKey("focusable"))}},e.prototype.processTouchable=function(t){var e=this;if(t.clickable||t.hoverable||t.trackable||t.draggable||t.swipeable||t.resizable)this.addGlobalEvents(),t.eventDisposers.hasKey("touchable")||(this._useTouchEventsOnly||this._usePointerEventsOnly?this._useTouchEventsOnly?this._usePointerEventsOnly||t.eventDisposers.setKey("touchable",nr(t.element,"touchstart",(function(i){return e.handleTouchDown(t,i)}),!!this._passiveSupported&&{passive:!1})):t.eventDisposers.setKey("touchable",nr(t.element,this._pointerEvents.pointerdown,(function(i){return e.handlePointerDown(t,i)}))):t.eventDisposers.setKey("touchable",new Rt([nr(t.element,this._pointerEvents.pointerdown,(function(i){return e.handlePointerDown(t,i)})),nr(t.element,"touchstart",(function(i){return e.handleTouchDown(t,i)}),!!this._passiveSupported&&{passive:!1})])));else{var i=t.eventDisposers.getKey("touchable");null!=i&&(i.dispose(),t.eventDisposers.removeKey("touchable"))}},e.prototype.handleFocus=function(t,e){t.focusable?(t.isFocused=!0,t.events.isEnabled("focus")&&!wn.isPaused&&t.events.dispatchImmediately("focus",{type:"focus",target:t,event:e})):e.preventDefault()},e.prototype.handleFocusBlur=function(t,e){!1!==t.focusable&&this.getHitOption(t,"noFocus")&&t.events.once("focus",(function(){t.events.disableType("blur"),ur(),t.sprite&&t.sprite.handleBlur(),t.events.enableType("blur")}))},e.prototype.handleBlur=function(t,e){t.focusable?(t.isFocused=!1,t.events.isEnabled("blur")&&!wn.isPaused&&t.events.dispatchImmediately("blur",{type:"blur",target:t,event:e})):e.preventDefault()},e.prototype.handleGlobalKeyDown=function(t){if(this.focusedObject)if(Cr.isKey(t,"esc"))ur();else if(this.focusedObject.draggable&&Cr.isKey(t,["up","down","left","right"])){t.preventDefault();var e=this.focusedObject;if(e.eventDisposers.hasKey("interactionKeyboardObject"))return;var i=new Tr(e,t);switch(e.eventDisposers.setKey("interactionKeyboardObject",i),Cr.getEventKey(t)){case"up":i.directionY=-1;break;case"down":i.directionY=1;break;case"left":i.directionX=-1;break;case"right":i.directionX=1}}},e.prototype.handleGlobalKeyUp=function(t){if(this.focusedObject){var e=this.focusedObject.eventDisposers.getKey("interactionKeyboardObject");null!=e&&(t.preventDefault(),e.dispose(),this.focusedObject.eventDisposers.removeKey("interactionKeyboardObject"))}},e.prototype.handleGlobalPointerMove=function(t){var e=this.getPointer(t);e.point=this.getPointerPoint(t),this.events.isEnabled("track")&&!wn.isPaused&&this.events.dispatchImmediately("track",{type:"track",target:this,event:t,pointer:e,touch:e.touch}),this.addBreadCrumb(e,e.point),this.handleGlobalMove(e,t)},e.prototype.handleGlobalPointerDown=function(t){this.processDelayed();var e=this.getPointer(t);this.events.isEnabled("down")&&!wn.isPaused&&this.events.dispatchImmediately("down",{type:"down",target:this,event:t,pointer:e,touch:e.touch})},e.prototype.preventTouchAction=function(t){t.defaultPrevented||t.preventDefault()},e.prototype.handleGlobalPointerUp=function(t,e){void 0===e&&(e=!1);var i=this.getPointer(t);this.events.isEnabled("up")&&!wn.isPaused&&this.events.dispatchImmediately("up",{type:"up",target:this,event:t,pointer:i,touch:i.touch}),this.handleGlobalUp(i,t,e)},e.prototype.handleGlobalTouchMove=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=this.getPointer(t.changedTouches[e]);i.point=this.getPointerPoint(t.changedTouches[e]),this.events.isEnabled("track")&&!wn.isPaused&&this.events.dispatchImmediately("track",{type:"track",target:this,event:t,pointer:i,touch:i.touch}),this.addBreadCrumb(i,i.point),this.handleGlobalMove(i,t)}},e.prototype.handleGlobalTouchStart=function(t){this.processDelayed();for(var e=0;e<t.changedTouches.length;e++){var i=this.getPointer(t.changedTouches[e]);this._usePointerEventsOnly||!this.events.isEnabled("down")||wn.isPaused||this.events.dispatchImmediately("down",{type:"down",target:this,event:t,pointer:i,touch:i.touch})}},e.prototype.handleGlobalTouchEnd=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=this.getPointer(t.changedTouches[e]);this.events.isEnabled("up")&&!wn.isPaused&&this.events.dispatchImmediately("up",{type:"up",target:this,event:t,pointer:i,touch:i.touch}),this.handleGlobalUp(i,t)}},e.prototype.handlePointerDown=function(t,e){var i=this.getPointer(e);(i.touch||1==e.which||3==e.which)&&(i.button=e.which,this.resetPointer(i,e),this.handleDown(t,i,e))},e.prototype.handlePointerOver=function(t,e){var i=this.getPointer(e);this.handleOver(t,i,e)},e.prototype.handlePointerOut=function(t,e){var i=this.getPointer(e);this.handleOut(t,i,e)},e.prototype.handleMouseWheel=function(t,e){var i=this.getPointer(e);i.point=this.getPointerPoint(e);var r,n,a=1;if(1==e.deltaMode&&(a=50),a*=this.getMouseOption(t,"sensitivity"),!(e instanceof WheelEvent))throw new Error("Invalid event type");r=Math.round(-1*e.wheelDeltaX||e.deltaX)*a,n=Math.round(-1*e.wheelDeltaY||e.deltaY)*a,this.handleWheel(t,i,r,n,e)},e.prototype.handleTouchDown=function(t,e){for(var i=0;i<e.changedTouches.length;i++){var r=this.getPointer(e.changedTouches[i]);this.maybePreventDefault(t,e,r),this.resetPointer(r,e.changedTouches[i]),this.handleDown(t,r,e)}},e.prototype.handleHit=function(t,e,i){var r=Or();if(t.lastHit&&t.lastHit>=r-this.getHitOption(t,"doubleHitTime")){if(r-t.lastHit<100)return;t.lastHit=void 0,t.lastHitPointer=void 0,t.events.isEnabled("doublehit")&&!wn.isPaused&&t.events.dispatchImmediately("doublehit",{type:"doublehit",target:t,point:e.point,event:i,touch:e.touch})}else t.lastHit=r,t.lastHitPointer=e,3===e.button?t.events.isEnabled("rightclick")&&!wn.isPaused&&t.events.dispatchImmediately("rightclick",{type:"rightclick",target:t,event:i}):t.events.isEnabled("hit")&&!wn.isPaused&&t.events.dispatchImmediately("hit",{type:"hit",target:t,event:i,point:e.point,touch:e.touch})},e.prototype.handleOver=function(t,e,i,r){void 0===r&&(r=!1),t.hoverable&&(this.processDelayed(),t.overPointers.moveValue(e),t.isRealHover||(t.isHover=!0,t.isRealHover=!0,this.overObjects.moveValue(t),this.handleTrack(this.body,e,i,!0),t.events.isEnabled("over")&&!wn.isPaused&&t.events.dispatchImmediately("over",{type:"over",target:t,event:i,pointer:e,touch:e.touch})))},e.prototype.handleOut=function(t,e,i,r,n){var a=this;if(void 0===r&&(r=!1),void 0===n&&(n=!1),t.hoverable&&(t.overPointers.removeValue(e),t.isHover&&(!t.hasDelayedOut||n))){if(r&&t.overPointers.length)return;if(e.touch&&!n&&!this.old(e)){var o=this.getHoverOption(t,"touchOutBehavior");if("leave"==o)return this._delayedEvents.out.push({type:"out",io:t,pointer:e,event:i,keepUntil:Or()+500}),void(t.hasDelayedOut=!0);if("delay"==o&&this.getHoverOption(t,"touchOutDelay"))return void this._delayedEvents.out.push({type:"out",io:t,pointer:e,event:i,keepUntil:Or()+500,timeout:this.setTimeout((function(){a.handleOut(t,e,i,!0)}),this.getHoverOption(t,"touchOutDelay"))})}t.isHover=!1,this.overObjects.removeValue(t),t.events.isEnabled("out")&&!wn.isPaused&&t.events.dispatchImmediately("out",{type:"out",target:t,event:i,pointer:e,touch:e.touch}),t.overPointers.clear(),t.hasDelayedOut=!1}},e.prototype.processDelayed=function(){for(var t;t=this._delayedEvents.out.pop();)t.timeout&&t.timeout.dispose(),this.handleOut(t.io,t.pointer,t.event,!1,!0)},e.prototype.handleDown=function(t,e,i){this.maybePreventDefault(t,i,e),t.inert&&this.stopInertia(t),this.handleOver(t,e,i,!0),t.downPointers.moveValue(e),this.applyCursorDownStyle(t,e),t.isDown||(!1!==t.focusable&&this.getHitOption(t,"noFocus")&&this.focusedObject&&ur(),t.isDown=!0,this.downObjects.moveValue(t),t.draggable&&this.processDragStart(t,e,i),t.resizable&&this.processResizeStart(t,e,i)),t.events.isEnabled("down")&&!wn.isPaused&&t.events.dispatchImmediately("down",{type:"down",target:t,event:i,pointer:e,touch:e.touch})},e.prototype.handleGlobalUp=function(t,e,i){var r=this;void 0===i&&(i=!1);var n=this.downObjects.values.slice();n.sort((function(t,e){if(t&&e){var i=t.element.compareDocumentPosition(e.element);return i&Node.DOCUMENT_POSITION_CONTAINED_BY?1:i&Node.DOCUMENT_POSITION_CONTAINS?-1:0}return 0})),ht(n,(function(n){n&&n.downPointers.contains(t)&&r.handleUp(n,t,e,i)}))},e.prototype.handleDocumentLeave=function(t){var e=this;se(this.downObjects.backwards().iterator(),(function(i){i.downPointers.each((function(r){e.handleUp(i,r,t)}))}))},e.prototype.handleUp=function(t,e,i,r){void 0===r&&(r=!1),this.restoreCursorDownStyle(t,e),t.downPointers.removeValue(e),(e.touch||this._useTouchEventsOnly)&&this.handleOut(t,e,i,!0),t.isDown&&(0==t.downPointers.length&&(t.isDown=!1,this.downObjects.removeValue(t)),t.events.isEnabled("up")&&!wn.isPaused&&t.events.dispatchImmediately("up",{type:"up",target:t,event:i,pointer:e,touch:e.touch}),r||(t.swipeable&&this.swiped(t,e)?this.handleSwipe(t,e,i):(t.clickable&&!this.moved(e,this.getHitOption(t,"hitTolerance"))&&this.handleHit(t,e,i),t.inert&&this.moved(e,this.getHitOption(t,"hitTolerance"))?this.handleInertia(t,e):t.draggable&&this.processDragStop(t,e,i),t.resizable&&this.processResizeStop(t,e,i))))},e.prototype.maybePreventDefault=function(t,e,i){!S(e)||!(t.draggable||t.swipeable||t.trackable||t.resizable)||this.isGlobalElement(t)||!1===e.cancelable||t.isTouchProtected&&i&&i.touch||e.preventDefault()},e.prototype.handleGlobalMove=function(t,e){var i,r=this;if(!t.touch){var n="function"==typeof(i=t.lastEvent).composedPath?i.composedPath()[0]:i.target;se(this.overObjects.backwards().iterator(),(function(i){if(i&&i.overPointers.contains(t)&&i.hoverable){var a=!1;i.element&&t.lastEvent&&cr(i.element,n)||(a=!0),a&&r.handleOut(i,t,e,!0)}}))}se(this.transformedObjects.backwards().iterator(),(function(i){!i.downPointers.contains(t)||i.swipeable&&r.swiping(i,t)||!i.draggable&&!i.resizable||r.handleTransform(i,e)})),se(this.trackedObjects.backwards().iterator(),(function(i){i.overPointers.contains(t)||r.handleTrack(i,t,e)}))},e.prototype.handleTrack=function(t,e,i,r){void 0===r&&(r=!1),(r||this.moved(e,0))&&t.events.isEnabled("track")&&!wn.isPaused&&t.events.dispatchImmediately("track",{type:"track",target:t,event:i,point:e.point,pointer:e,touch:e.touch})},e.prototype.handleSwipe=function(t,e,i){t.events.isEnabled("swipe")&&!wn.isPaused&&t.events.dispatchImmediately("swipe",{type:"swipe",target:t,event:i,touch:e.touch}),e.startPoint.x<e.point.x?t.events.isEnabled("swiperight")&&!wn.isPaused&&t.events.dispatchImmediately("swiperight",{type:"swiperight",target:t,event:i,touch:e.touch}):t.events.isEnabled("swipeleft")&&!wn.isPaused&&t.events.dispatchImmediately("swipeleft",{type:"swipeleft",target:t,event:i,touch:e.touch})},e.prototype.handleWheel=function(t,e,i,r,n){var a={x:i,y:r};t.events.isEnabled("wheel")&&!wn.isPaused&&t.events.dispatchImmediately("wheel",{type:"wheel",target:t,event:n,point:e.point,shift:a}),i<0?t.events.isEnabled("wheelleft")&&!wn.isPaused&&t.events.dispatchImmediately("wheelleft",{type:"wheelleft",target:t,event:n,point:e.point,shift:a}):i>0?t.events.isEnabled("swiperight")&&!wn.isPaused&&t.events.dispatchImmediately("wheelright",{type:"wheelright",target:t,event:n,point:e.point,shift:a}):r<0?t.events.isEnabled("wheelup")&&!wn.isPaused&&t.events.dispatchImmediately("wheelup",{type:"wheelup",target:t,event:n,point:e.point,shift:a}):r>0&&t.events.isEnabled("wheeldown")&&!wn.isPaused&&t.events.dispatchImmediately("wheeldown",{type:"wheeldown",target:t,event:n,point:e.point,shift:a})},e.prototype.handleInertia=function(t,e){t.draggable&&0===t.downPointers.length&&this.handleMoveInertia(t,e),t.resizable&&t.downPointers.length>1&&this.handleResizeInertia(t,e)},e.prototype.handleMoveInertia=function(t,e){var i=new Pr(t,"move",{x:e.point.x,y:e.point.y},{x:e.startPoint.x,y:e.startPoint.y}),r=this.getTrailPoint(e,Or()-this.getInertiaOption(t,"move","time"));if(void 0!==r){var n=this.getInertiaOption(t,"move","factor"),a=new tr(i,[{to:e.point.x+(e.point.x-r.point.x)*n,property:"x"},{to:e.point.y+(e.point.y-r.point.y)*n,property:"y"}],this.getInertiaOption(t,"move","duration"),this.getInertiaOption(t,"move","easing")).start();this._disposers.push(a.events.on("animationended",(function(t){i.done()}))),t.inertias.setKey("move",i)}else this.processDragStop(t,e,e.lastUpEvent)},e.prototype.handleResizeInertia=function(t,e){},e.prototype.handleTransform=function(t,e){var i,r,n,a=t.downPointers.getIndex(0),o=null,s=null;a&&(o=a.point,s=a.startPoint),n=r={x:t.originalPosition.x,y:t.originalPosition.y};for(var l=!0,u=1;u<t.downPointers.length;u++){var c=t.downPointers.getIndex(u);if(s.x!=c.startPoint.x&&s.y!=c.startPoint.y){l=!1,r=(i=c).point,n=i.startPoint;break}}var h=a&&this.moved(a,0);if(t.draggable&&a&&a.dragStartEvents&&a.dragStartEvents.length&&h&&t.events.isEnabled("dragstart")&&!wn.isPaused&&t.events.dispatchImmediately("dragstart",a.dragStartEvents.shift()),l&&t.draggable)this.handleTransformMove(t,o,s,e,h,a.touch);else{var p=i&&this.moved(i,0);t.draggable&&t.resizable?(this.handleTransformMove(t,o,s,e,h&&p,a.touch),this.handleTransformResize(t,o,s,r,n,e,h&&p,a.touch)):(t.draggable&&this.handleTransformMove(t,o,s,e,h,a.touch),!t.resizable||l&&!e.ctrlKey||this.handleTransformResize(t,o,s,r,n,e,h&&p,a.touch))}},e.prototype.handleTransformMove=function(t,e,i,r,n,a){n&&(!t.events.isEnabled("drag")||wn.isPaused||t.isTouchProtected&&a||t.events.dispatchImmediately("drag",{type:"drag",target:t,event:r,shift:{x:e.x-i.x,y:e.y-i.y},startPoint:i,point:e,touch:a}))},e.prototype.handleTransformResize=function(t,e,i,r,n,a,o,s){if(t.events.isEnabled("resize")&&!wn.isPaused&&(!t.isTouchProtected||!s)){var l={type:"resize",target:t,event:a,scale:G(e,i,r,n),startPoint1:i,point1:e,startPoint2:n,point2:r,touch:s};t.events.dispatchImmediately("resize",l)}},e.prototype.processDragStart=function(t,e,i){this.transformedObjects.moveValue(t);var r={type:"dragstart",target:t,event:i,touch:!!e&&e.touch};e&&(e.dragTarget=t),e&&e.dragStartEvents?e.dragStartEvents.push(r):wn.isPaused||t.dispatchImmediately("dragstart",r)},e.prototype.processDragStop=function(t,e,i){e||(e=this.getDragPointer(t)),e&&(e.dragTarget=void 0),this.transformedObjects.removeValue(t),(!e||this.moved(e,0))&&t.events.isEnabled("dragstop")&&!wn.isPaused&&t.events.dispatchImmediately("dragstop",{type:"dragstop",target:t,touch:!!e&&e.touch})},e.prototype.processResizeStart=function(t,e,i){this.transformedObjects.moveValue(t)},e.prototype.processResizeStop=function(t,e,i){this.transformedObjects.removeValue(t)},e.prototype.dragStart=function(t,e){e||(e=this.getDragPointer(t)),e&&this.handleDown(t,e,e.lastDownEvent)},e.prototype.dragStop=function(t,e,i){e||(e=this.getDragPointer(t)),e&&!i&&this.handleGlobalUp(e,e.lastUpEvent,i)},e.prototype.getDragPointer=function(t){return t?t.downPointers.getIndex(0):this.transformedObjects.length?this.getDragPointer(this.transformedObjects.getIndex(0)):void 0},e.prototype.getPointerId=function(t){return(S(t.identifier)?""+t.identifier:S(t.pointerId)?""+t.pointerId:"m").replace("-","")},e.prototype.getPointerPoint=function(t){return{x:t.clientX,y:t.clientY}},e.prototype.getPointer=function(t){var e,i=this.getPointerId(t),r=this.getPointerPoint(t);return this.pointers.hasKey(i)?(e=this.pointers.getKey(i)).touch=this.isPointerTouch(t):(e={id:i,touch:this.isPointerTouch(t),startPoint:r,startTime:Or(),point:r,track:[],swipeCanceled:!1,dragStartEvents:[]},this.addBreadCrumb(e,r),this.pointers.setKey(i,e)),e.lastEvent=t,this.lastPointer=e,e},e.prototype.isPointerTouch=function(t){if("undefined"!=typeof Touch&&t instanceof Touch)return!0;if("undefined"!=typeof PointerEvent&&t instanceof PointerEvent&&S(t.pointerType))switch(t.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(t instanceof MouseEvent)}else if(S(t.type)&&t.type.match(/^mouse/))return!1;return!0},e.prototype.resetPointer=function(t,e){var i=this.getPointerPoint(e);t.startTime=Or(),t.startPoint={x:i.x,y:i.y},t.point={x:i.x,y:i.y},t.track=[],t.swipeCanceled=!1},e.prototype.addBreadCrumb=function(t,e){t.track.push({timestamp:Or(),point:e})},e.prototype.lockDocument=function(){this.prepElement(this.body)},e.prototype.unlockDocument=function(){0==this.transformedObjects.length&&this.restoreAllStyles(this.body)},e.prototype.lockElement=function(t){this.prepElement(t)},e.prototype.unlockElement=function(t){this.restoreAllStyles(t)},e.prototype.lockWheel=function(){window.addEventListener(this._pointerEvents.wheel,this.wheelLockEvent,!!this._passiveSupported&&{passive:!1})},e.prototype.unlockWheel=function(){window.removeEventListener(this._pointerEvents.wheel,this.wheelLockEvent)},e.prototype.isLocalElement=function(t,e,i){var r=this.getCache("local_pointer_"+t.id);if(S(r))return r;var n=pr(e)||document;if(n.elementFromPoint){var a=n.elementFromPoint(t.point.x,t.point.y),o=a&&cr(e,a);return this.setCache("local_pointer_"+t.id+"_"+i,o,100),o}return!1},e.prototype.wheelLockEvent=function(t){return t.preventDefault(),!1},e.prototype.prepElement=function(t){var e=t.element;if(e){for(var i=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],r=0;r<i.length;r++)i[r]in e.style&&this.setTemporaryStyle(t,i[r],"none");this.setTemporaryStyle(t,"tapHighlightColor","rgba(0, 0, 0, 0)")}},e.prototype.unprepElement=function(t){var e=t.element;if(e){for(var i=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],r=0;r<i.length;r++)i[r]in e.style&&this.restoreStyle(t,i[r]);this.restoreStyle(t,"tapHighlightColor")}},e.prototype.getHitOption=function(t,e){var i=t.hitOptions[e];return void 0===i&&(i=this.hitOptions[e]),i},e.prototype.getHoverOption=function(t,e){var i=t.hoverOptions[e];return void 0===i&&(i=this.hoverOptions[e]),i},e.prototype.getSwipeOption=function(t,e){var i=t.swipeOptions[e];return void 0===i&&(i=this.swipeOptions[e]),i},e.prototype.getKeyboardOption=function(t,e){var i=t.keyboardOptions[e];return void 0===i&&(i=this.keyboardOptions[e]),i},e.prototype.getMouseOption=function(t,e){var i=t.mouseOptions[e];return void 0===i&&(i=this.mouseOptions[e]),i},e.prototype.getInertiaOption=function(t,e,i){var r=t.inertiaOptions.getKey(e);return r&&S(r[i])?r[i]:this.inertiaOptions.getKey(e)[i]},e.prototype.stopInertia=function(t){for(var e,i=["move","resize"],r=0;r<i.length;r++)if(t.inertias.hasKey(e=i[r])){var n=t.inertias.getKey(e);if(n){n.dispose();continue}}},e.prototype.swiping=function(t,e){var i=Or();return!(e.swipeCanceled||!t.swipeable)&&Math.abs(e.startPoint.y-e.point.y)<this.getSwipeOption(t,"verticalThreshold")&&e.startTime>i-this.getSwipeOption(t,"time")},e.prototype.swiped=function(t,e){var i=Or();return!e.swipeCanceled&&Math.abs(e.startPoint.x-e.point.x)>this.getSwipeOption(t,"horizontalThreshold")&&Math.abs(e.startPoint.y-e.point.y)<this.getSwipeOption(t,"verticalThreshold")&&e.startTime>i-this.getSwipeOption(t,"time")},e.prototype.applyCursorOverStyle=function(t){var e=t.cursorOptions;if(S(e.overStyle))for(var i=0;i<e.overStyle.length;i++)sr(t.element,e.overStyle[i].property,e.overStyle[i].value)},e.prototype.applyCursorDownStyle=function(t,e){if(!e.touch){var i=t.cursorOptions.downStyle;if(t.downPointers.contains(e)&&S(i))for(var r=0;r<i.length;r++)this.setTemporaryStyle(this.body,i[r].property,i[r].value),this.setTemporaryStyle(t,i[r].property,i[r].value)}},e.prototype.restoreCursorDownStyle=function(t,e){if(!e.touch){var i=t.cursorOptions.downStyle;if(t.downPointers.contains(e)&&S(i))for(var r=0;r<i.length;r++)this.restoreStyle(this.body,i[r].property),this.restoreStyle(t,i[r].property)}},e.prototype.setGlobalStyle=function(t){for(var e=Vr().body,i=A(t)?t:[t],r=0;r<i.length;r++)this.setTemporaryStyle(e,i[r].property,i[r].value)},e.prototype.restoreGlobalStyle=function(t){for(var e=Vr().body,i=A(t)?t:[t],r=0;r<i.length;r++)this.restoreStyle(e,i[r].property)},e.prototype.isGlobalElement=function(t){return document.body===t.element},e.prototype.moved=function(t,e,i){void 0===i&&(i=300);var r=this.getShift(t);return Math.abs(r.x)>e||Math.abs(r.y)>e},e.prototype.old=function(t,e){return void 0===e&&(e=300),Or()-t.startTime>e},e.prototype.getShift=function(t){return{x:t.startPoint.x-t.point.x,y:t.startPoint.y-t.point.y}},e.prototype.getTrailPoint=function(t,e){for(var i,r=0;r<t.track.length;r++)if(t.track[r].timestamp>=e){i=t.track[r];break}return i},e.prototype.pointerExists=function(t,e){var i=!1;return t.each((function(t){t!=e&&(i=t.point.x==e.point.x&&t.point.y==e.point.y)})),i},e.prototype.getInteraction=function(t){return new wr(t)},e.prototype.setTemporaryStyle=function(t,e,i){var r=t.element;S(r.style[e])&&!t.replacedStyles.hasKey(e)&&t.replacedStyles.setKey(e,r.style[e]),sr(r,e,i)},e.prototype.restoreStyle=function(t,e){t.replacedStyles.hasKey(e)?(t.element.style[e]=t.replacedStyles.getKey(e),t.replacedStyles.removeKey(e)):delete t.element.style[e]},e.prototype.restoreAllStyles=function(t){se(t.replacedStyles.iterator(),(function(e){var i=e[0];t.element.style[i]=e[1],t.replacedStyles.removeKey(i)}))},e.prototype.dispose=function(){this.isDisposed()||(t.prototype.dispose.call(this),this.restoreAllStyles(this.body),this.unlockWheel())},e.prototype.log=function(t,e,i){if(e.changedTouches)for(var r=0;r<e.changedTouches.length;r++)this.logTouch(t,e.type,e.changedTouches[r]);else{var n,a="";if(e.pointerType)switch(e.pointerType){case 2:a="touch";break;case 4:a="mouse";break;default:a=e.pointerType}else a="undefined"!=typeof TouchEvent&&e instanceof TouchEvent?"touch":e.type.match(/^mouse/)?"mouse":"???";n=S(e.identifier)?e.identifier:S(e.pointerId)?e.pointerId:"???",i?console.log(t+" ("+i.uid+")  "+e.type+"  "+a+"  "+n):console.log(t+"  "+e.type+"  "+a+"  "+n)}},e.prototype.areTransformed=function(t){var e=this.transformedObjects.length;if(t)for(var i=A(t)?t:[t],r=0;r<i.length;r++)this.transformedObjects.contains(i[r])&&e--;return e>0},e.prototype.logTouch=function(t,e,i){console.log(t+"  "+e+"  touch  "+i.identifier)},Object.defineProperty(e,"passiveSupported",{get:function(){var t=this;if(null==this._passiveSupported)try{var e=Object.defineProperty({},"passive",{get:function(){t._passiveSupported=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(i){this._passiveSupported=!1}return this._passiveSupported},enumerable:!0,configurable:!0}),e}(We),Rr=null;function Vr(){return null==Rr&&(Rr=new Lr),Rr}var jr=function(t){function e(){var e=t.call(this)||this;return e.adapter=new Ee(e),e._elements={},e._IOs={},e._content="",e._title="",e._classPrefix="ampopup",e._defaultStyles=!0,e._showCurtain=!1,e._draggable=!0,e._align="center",e._dynamicResize=!0,e._verticalAlign="middle",e._shift={x:0,y:0},e._tempShift={x:0,y:0},e._readerTitle="",e._closable=!0,e._cssLoaded=!1,e._fitTo="window",e.isTemplate=!1,e._sized=!1,e.className="Popup",e}return Object(d.d)(e,t),e.prototype.open=function(){this.container&&(this._elements.wrapper&&this.container.appendChild(this._elements.wrapper),this._elements.curtain&&(this.container.appendChild(this._elements.curtain),this.showCurtain=this.showCurtain),this.positionElement(),this.dispatchImmediately("opened"))},e.prototype.close=function(){this._elements.wrapper&&this._elements.wrapper.parentElement&&this._elements.wrapper.parentElement.removeChild(this._elements.wrapper),this._elements.curtain&&this._elements.curtain.parentElement&&this._elements.curtain.parentElement.removeChild(this._elements.curtain),this.dispatchImmediately("closed"),this.releasePointers()},e.prototype.dispose=function(){this.close(),t.prototype.dispose.call(this)},e.prototype.positionElement=function(t){var e=this;void 0===t&&(t=!0),this._elements.wrapper&&setTimeout((function(){if(e._elements.wrapper){if(t||!e._sized){e._elements.wrapper.style.opacity="0.01",e._elements.wrapper.style.left="0",e._elements.wrapper.style.top="0",e._elements.wrapper.style.margin="0 0 0 0",e._elements.wrapper.style.width="",e._elements.wrapper.style.height="";var i=e._elements.wrapper.getBoundingClientRect();e._elements.wrapper.style.width=i.width+"px",e._elements.wrapper.style.height=i.height+"px",e._sized=!0}if(e.dynamicResize)for(var r=e._elements.wrapper.getElementsByTagName("img"),n=0;n<r.length;n++){var a=r[n];if(!a.complete){a.addEventListener("load",(function(){e.positionElement(!0)}));break}}setTimeout((function(){if(e._elements.wrapper){var i;switch(!t&&e._sized||!e._bbox?(i=e._elements.wrapper.getBoundingClientRect(),e._elements.wrapper.style.opacity=""):i=e._bbox,e.align){case"left":e._elements.wrapper.style.left="0",e._elements.wrapper.style.right="auto",e._elements.wrapper.style.marginLeft=e.toStyle(e._shift.x+e._tempShift.x);break;case"center":e._elements.wrapper.style.left="50%",e._elements.wrapper.style.right="auto",e._elements.wrapper.style.marginLeft=e.toStyle(Math.round(-i.width/2)+(e._shift.x+e._tempShift.x));break;case"right":e._elements.wrapper.style.left="auto",e._elements.wrapper.style.right="0",e._elements.wrapper.style.marginLeft=e.toStyle(e._shift.x+e._tempShift.x);break;default:e._elements.wrapper.style.left=e.toStyle(e.left)||"auto",e._elements.wrapper.style.right=e.toStyle(e.right)||"auto",e._elements.wrapper.style.marginLeft=e.toStyle(e._shift.x+e._tempShift.x)}switch(e.verticalAlign){case"top":e._elements.wrapper.style.top="0",e._elements.wrapper.style.bottom="auto",e._elements.wrapper.style.marginTop=e.toStyle(e._shift.y+e._tempShift.y);break;case"middle":e._elements.wrapper.style.top="50%",e._elements.wrapper.style.bottom="auto",e._elements.wrapper.style.marginTop=e.toStyle(Math.round(-i.height/2)+(e._shift.y+e._tempShift.y));break;case"bottom":e._elements.wrapper.style.top="auto",e._elements.wrapper.style.bottom="0",e._elements.wrapper.style.marginTop=e.toStyle(e._shift.y+e._tempShift.y);break;default:e._elements.wrapper.style.top=e.toStyle(e.top)||"auto",e._elements.wrapper.style.bottom=e.toStyle(e.bottom)||"auto",e._elements.wrapper.style.marginTop=e.toStyle(e._shift.y+e._tempShift.y)}}}),1)}}),1)},e.prototype.setupDragging=function(){var t=this;this.draggable?(this._IOs.header.events.has("drag")||this._IOs.header.events.on("drag",(function(e){t._tempShift.x=e.shift.x,t._tempShift.y=e.shift.y,t.positionElement(!1)})),this._IOs.header.events.has("dragstop")||this._IOs.header.events.on("dragstop",(function(e){t._shift.x+=t._tempShift.x,t._shift.y+=t._tempShift.y,t._tempShift.x=0,t._tempShift.y=0,t.positionElement(!1)}))):this._IOs.header&&(Vr().unprepElement(this._IOs.header),this._IOs.header.events.has("drag")&&this._IOs.header.events.off("drag"),this._IOs.header.events.has("dragstop")&&this._IOs.header.events.off("dragstop"))},e.prototype.toStyle=function(t){return S(t)?k(t)?t+"px":t.toString():null},Object.defineProperty(e.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",this._classPrefix)},set:function(t){this._classPrefix=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classPrefixRaw",{get:function(){return this._classPrefix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.adapter.apply("content",this._content)},set:function(t){this._content!=t&&(this._content=t,this._elements.content||this.createContentElement(),this._elements.content.innerHTML=t,this.positionElement())},enumerable:!0,configurable:!0}),e.prototype.getClassNames=function(){return this.adapter.apply("classNames",{wrapperClass:this.classPrefix+"",headerClass:this.classPrefix+"-header",titleClass:this.classPrefix+"-title",contentClass:this.classPrefix+"-content",insideClass:this.classPrefix+"-inside",curtainClass:this.classPrefix+"-curtain",closeClass:this.classPrefix+"-close"})},e.prototype.createContentElement=function(){if(!this._elements.wrapper){var t=this.getClassNames(),e=document.createElement("div");e.className=t.contentClass,e.style.opacity="0.01";var i=document.createElement("a");i.className=t.closeClass;var r=document.createElement("div");r.className=t.headerClass;var n=document.createElement("div");n.innerHTML=this.title,n.className=t.titleClass,this.title||(n.style.display="none");var a=document.createElement("div");a.className=t.insideClass,a.innerHTML=this.content,this._IOs.wrapper=Vr().getInteraction(e),this._IOs.header=Vr().getInteraction(r),this._disposers.push(this._IOs.wrapper),this._IOs.wrapper.events.on("over",this.disablePointers,this),this._IOs.wrapper.events.on("out",this.releasePointers,this),this._IOs.close=Vr().getInteraction(i),this._disposers.push(this._IOs.close),i.style.visibility="hidden",e.setAttribute("role","dialog"),r.appendChild(i),r.appendChild(n),e.appendChild(r),e.appendChild(a),this.container.appendChild(e),this._elements.wrapper=e,this._elements.header=r,this._elements.content=a,this._elements.title=n,this._elements.close=i,this.defaultStyles&&this.loadDefaultCSS(),this.createCurtainElement(),this.applyEvents(),this.applyReaderSettings(),this.setupDragging()}},Object.defineProperty(e.prototype,"title",{get:function(){return this.adapter.apply("title",this._title)},set:function(t){this._title!=t&&(this._title=t,this._elements.content||this.createContentElement(),this._elements.title.innerHTML=t,this.positionElement(),this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerTitle",{get:function(){return this.adapter.apply("readerTitle",""!=this._readerTitle?this._readerTitle:this.title)},set:function(t){this._readerTitle!=t&&(this._readerTitle=t,this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closable",{get:function(){return this.adapter.apply("closable",this._closable)},set:function(t){t!==this._closable&&(this._closable=t,this.applyEvents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitTo",{get:function(){return this.adapter.apply("fitTo",this._fitTo)},set:function(t){t!=this._fitTo&&(this._fitTo=t,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",this._defaultStyles)},set:function(t){this._defaultStyles!=t&&(this._defaultStyles=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showCurtain",{get:function(){return this.adapter.apply("showCurtain",this._showCurtain)},set:function(t){this._showCurtain!=t&&(this._showCurtain=t,this._elements.curtain&&(this._elements.curtain.style.display=t?"block":"none"))},enumerable:!0,configurable:!0}),e.prototype.createCurtainElement=function(){var t=this.getClassNames(),e=document.createElement("div");e.className=t.curtainClass,this.container.appendChild(e),this._IOs.curtain=Vr().getInteraction(e),this._disposers.push(this._IOs.curtain),this._IOs.curtain.events.on("over",this.disablePointers,this),this._IOs.curtain.events.on("out",this.releasePointers,this),e.style.display=this.showCurtain?"block":"none",this._elements.curtain=e},Object.defineProperty(e.prototype,"draggable",{get:function(){return this.adapter.apply("draggable",this._draggable)},set:function(t){this._draggable!=t&&(this._draggable=t,this.setupDragging())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dynamicResize",{get:function(){return this.adapter.apply("dynamicResize",this._dynamicResize)},set:function(t){this._dynamicResize!=t&&(this._dynamicResize=t,this.positionElement(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.adapter.apply("align",this._align)},set:function(t){this._align!=t&&(this._align=t,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",this._verticalAlign)},set:function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.adapter.apply("left",this._left)},set:function(t){this.left!=t&&(this._left=t,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.adapter.apply("right",this._right)},set:function(t){this.right!=t&&(this._right=t,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.adapter.apply("top",this._top)},set:function(t){this.top!=t&&(this._top=t,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.adapter.apply("bottom",this._bottom)},set:function(t){this.bottom!=t&&(this._bottom=t,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),e.prototype.loadDefaultCSS=function(){this._cssLoaded||(this._disposers.push(function(t,e){e||(e="ampopup");var i=new _r,r=i.getFor("text"),n=i.getFor("background");n.alpha=.8;var a=i.getFor("alternativeBackground");return a.alpha=.05,xr.insertKeyIfEmpty(e,(function(){var i=new Rt([new dr(t,"."+e,{overflow:"visible",position:"absolute",top:"0",left:"0","z-index":"2000"}),new dr(t,"."+e+"-curtain",{width:"100%",height:"100%",position:"absolute",top:"0",left:"0","z-index":"2001","background-color":n.hex,opacity:"0.5"}),new dr(t,"."+e+"-header",{display:"block",width:"100%","min-height":"1.8em",background:a.rgba}),new dr(t,"."+e+"-title",{"font-weight":"bold","font-size":"110%",padding:"0.5em 1.2em 0.5em 1em"}),new dr(t,"."+e+"-content",{background:n.hex,"background-color":n.rgba,color:r.hex,display:"inline-block",position:"absolute",top:"0",left:"0","max-width":"90%","max-height":"90%",overflow:"auto","z-index":"2002"}),new dr(t,"."+e+"-inside",{padding:"1em"}),new dr(t,"."+e+"-close",{display:"block",position:"absolute",top:"0.3em",right:"0.3em","background-color":"rgb(100, 100, 100)",background:"rgba(100, 100, 100, 0.1) url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=) no-repeat center","background-size":"80%",width:"1.2em",height:"1.2em",cursor:"pointer"})]);return new jt((function(){xr.removeKey(e),i.dispose()}))})).increment()}(hr(this.container),this.classPrefix)),Qt(this._elements,(function(t,e){e.style.display=""})),this._cssLoaded=!0)},e.prototype.applyEvents=function(){var t=this;if(this._IOs.close)if(this.closable){this._IOs.close.element.style.visibility="visible";var e=[Vr().body.events.on("keyup",(function(e){Cr.isKey(e.event,"esc")&&t.closable&&t.close()})),this._IOs.close.events.on("hit",(function(e){t.close()}))];e.push(this._IOs.curtain.events.on("hit",(function(e){t.showCurtain&&t.closable&&t.close()}))),this._disposers.push(new Rt(e))}else this._IOs.close.element.style.visibility="hidden"},e.prototype.disablePointers=function(){this.sprite&&(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled,this.sprite.interactionsEnabled=!1)},e.prototype.releasePointers=function(){S(this._spriteInteractionsEnabled)&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled,this._spriteInteractionsEnabled=void 0)},e.prototype.applyReaderSettings=function(){this.elements.wrapper.setAttribute("aria-label",this.readerTitle)},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.container=e.container,this.sprite=e.sprite,this.classPrefix=e.classPrefixRaw,this.content=e.content,this.title=e.title,this.readerTitle=e.readerTitle,this.defaultStyles=e.defaultStyles,this.showCurtain=e.showCurtain,this.align=e.align,this.verticalAlign=e.verticalAlign,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.adapter.copyFrom(e.adapter)},e}(We),zr=function(t){function e(){var e=t.call(this)||this;return e.adapter=new Ee(e),e.className="Modal",e.showCurtain=!0,e.draggable=!1,e}return Object(d.d)(e,t),e}(jr),Br=function(){function t(){var t=this;this._targets=[],this._observer=new ResizeObserver((function(e){ht(e,(function(e){ht(t._targets,(function(t){t.target===e.target&&t.callback()}))}))}))}return t.prototype.addTarget=function(t,e){this._observer.observe(t,{box:"content-box"}),this._targets.push({target:t,callback:e})},t.prototype.removeTarget=function(t){this._observer.unobserve(t),Et(this._targets,(function(e){return e.target!==t}))},t}(),Nr=function(){function t(){this._targets=[]}return t.prototype.addTarget=function(e,i){var r=this;if(0===this._targets.length){var n=null,a=function(){var e=Date.now();(null===n||e>n+t.delay)&&(n=e,ht(r._targets,(function(t){var e=t.target.getBoundingClientRect();e.width===t.size.width&&e.height===t.size.height||(t.size=e,t.callback())}))),r._timer=requestAnimationFrame(a)};this._timer=requestAnimationFrame(a)}var o=e.getBoundingClientRect();this._targets.push({target:e,callback:i,size:o})},t.prototype.removeTarget=function(t){Et(this._targets,(function(e){return e.target!==t})),0===this._targets.length&&cancelAnimationFrame(this._timer)},t.delay=200,t}(),Ur=null,Xr=function(){function t(t,e){this._disposed=!1,this._sensor=(null===Ur&&(Ur="undefined"!=typeof ResizeObserver?new Br:new Nr),Ur),this._element=t,this._sensor.addTarget(t,e)}return t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element))},t.prototype.reset=function(){console.warn("resizeSensor.reset() is no longer needed and can be removed")},t}(),Hr=[],Wr=function(){function t(t,e){var i=this;this._disposed=!1,this.autoResize=!0,this.nonExportableSprites=[],this._disposers=[],this.cssScale=1,this.htmlElement=t,e||(this.resizeSensor=new Xr(t,(function(){i.autoResize&&i.measure()})),this._disposers.push(this.resizeSensor)),Hr.push(this);var r=document.createElement("div"),n=r.style;n.width="100%",n.height="100%",n.position="relative",t.appendChild(r),this.SVGContainer=r}return t.prototype.measure=function(){var t,e,i,r,n,a=(t=this.htmlElement,e=getComputedStyle(t),i=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),r=parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth),t.clientWidth-i-r),o=function(t){var e=getComputedStyle(t),i=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),r=parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth);return t.clientHeight-i-r}(this.htmlElement),s=this.container;s&&(this.width==a&&this.height==o||(this.width=a,this.height=o,a>0&&(s.maxWidth=a),o>0&&(s.maxHeight=o),n=this.SVGContainer,Nt.push((function(){try{var t=n.getBoundingClientRect(),e=t.left-Math.round(t.left),i=t.top-Math.round(t.top);0!==e&&Gt((function(){n.style.left=e+"px"})),0!==i&&Gt((function(){n.style.top=i+"px"}))}catch(r){}})),Yt()),s.maxWidth||(s.maxWidth=0),s.maxHeight||(s.maxHeight=0),this.cssScale=1,this.checkTransform(this.htmlElement))},Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){this._container=t,this.measure()},enumerable:!0,configurable:!0}),t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){this._disposed||_t(Hr,this),ht(this._disposers,(function(t){t.dispose()}))},Object.defineProperty(t.prototype,"hideOverflow",{set:function(t){this.SVGContainer.style.overflow=t?"hidden":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modal",{get:function(){return S(this._modal)||(this._modal=new zr,this._modal.container=this.SVGContainer,this._disposers.push(this._modal)),this._modal},enumerable:!0,configurable:!0}),t.prototype.openModal=function(t,e){this.closeModal();var i=this.modal;return i.content=t,i.readerTitle=e||"",i.title=e||"",i.open(),i},t.prototype.closeModal=function(){this._modal&&this.modal.close()},Object.defineProperty(t.prototype,"popups",{get:function(){if(!S(this._popups)){var t=new jr;t.container=this.SVGContainer,this._popups=new Pe(t),this._disposers.push(new Se(this._popups)),this._disposers.push(this._popups.template)}return this._popups},enumerable:!0,configurable:!0}),t.prototype.openPopup=function(t,e){var i=this.popups.create();return i.content=t,S(e)&&(i.title=e),i.open(),i},t.prototype.closeAllPopups=function(){this.popups.each((function(t){t.close()}))},Object.defineProperty(t.prototype,"readerAlertElement",{get:function(){if(!S(this._readerAlertElement)){var t=document.createElement("div");t.setAttribute("role","alert"),t.style.zIndex="-100000",t.style.opacity="0",this.SVGContainer.appendChild(t),this._readerAlertElement=t}return this._readerAlertElement},enumerable:!0,configurable:!0}),t.prototype.readerAlert=function(t){this.readerAlertElement.innerHTML=t},t.prototype.checkTransform=function(t){if(window.getComputedStyle){if(t&&t.style){var e=window.getComputedStyle(t,null);if(e){var i=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");if(i&&"none"!==i){var r=i.split("(")[1].split(")")[0].split(","),n=Number(r[0]),a=Number(r[1]),o=Math.sqrt(n*n+a*a);isNaN(o)||(this.cssScale*=o)}}}t.parentNode&&t.parentNode instanceof HTMLElement&&this.checkTransform(t.parentNode)}},t}(),Yr=function(){function t(t,e){this.container=t,this.id=e;var i=document.createElementNS(er,"svg");i.setAttribute("version","1.1"),i.setAttributeNS(ir,"xmlns",er),i.setAttributeNS(ir,"xmlns:xlink",rr),i.setAttribute("role","group"),this.container.appendChild(i),this.defs=document.createElementNS(er,"defs"),i.appendChild(this.defs),i.style.width="100%",i.style.height="100%",i.style.overflow="visible",this.svg=i}return t.prototype.add=function(t){return new br(t)},t.prototype.addGroup=function(t){return new vr(t)},t.prototype.append=function(t){t&&this.svg.appendChild(t.node)},t.prototype.appendDef=function(t){t&&this.defs.appendChild(t.node)},t.prototype.foreignObject=function(){return new br("foreignObject")},t.prototype.supportsForeignObject=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1")},t}(),Gr=null;function qr(){if(null===Gr){var t=document.createElement("div");t.hidden=!0,document.body.appendChild(t);var e=new Wr(t,!0);Gr=new Yr(e.SVGContainer,"ghost")}return Gr}var Kr=function(t){function e(){var e=t.call(this)||this;e._elements=new Te,e.properties={},e.className="Pattern",e.width=10,e.height=10,e.x=0,e.y=0,e.patternUnits="userSpaceOnUse";var i=new _r;return e.backgroundFill=i.getFor("background"),e.backgroundOpacity=0,e.fillOpacity=1,e.fill=i.getFor("alternativeBackground"),e.stroke=i.getFor("alternativeBackground"),e.strokeOpacity=1,e.strokeWidth=1,e.shapeRendering="crispEdges",e.rotation=0,e.element=e.paper.addGroup("pattern"),e.id="pattern-"+ve.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e._disposers.push(new Se(e._elements)),e.patternUnits=e.patternUnits,e.width=e.width,e.height=e.height,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){var t=this,e=this.element;if(e){e.removeChildNodes();var i=this.paper.add("rect");i.attr({width:this.width,height:this.height,"shape-rendering":"crispEdges",fill:this.backgroundFill.hex,"fill-opacity":this.backgroundOpacity,stroke:this.backgroundFill.hex,"stroke-opacity":this.backgroundOpacity}),e.add(i),e.attr({x:this.x,y:this.y,width:this.width,height:this.height,stroke:this.stroke.hex,fill:this.fill.hex,"fill-opacity":this.fillOpacity,"stroke-opacity":this.strokeOpacity,"stroke-width":this.strokeWidth,"shape-rendering":this.shapeRendering,patternUnits:this.patternUnits,"stroke-dasharray":this.strokeDasharray}),se(this._elements.iterator(),(function(e){e.rotation=t.rotation,e.rotationX=t.properties.rotationX,e.rotationY=t.properties.rotationY,t.element.add(e)}))}},e.prototype.animate=function(t,e,i){return new tr(this,t,e,i).start()},e.prototype.addElement=function(t){this._elements.push(t),this._disposers.push(t)},e.prototype.removeElement=function(t){this._elements.removeValue(t),this.removeDispose(t)},Object.defineProperty(e.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.properties.fillOpacity},set:function(t){this.properties.fillOpacity=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.properties.fill},set:function(t){this.properties.fill=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundFill",{get:function(){return this.properties.backgroundFill},set:function(t){this.properties.backgroundFill=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundOpacity",{get:function(){return this.properties.backgroundOpacity},set:function(t){this.properties.backgroundOpacity=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(t){this.properties.stroke=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeOpacity",{get:function(){return this.properties.strokeOpacity},set:function(t){this.properties.strokeOpacity=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(t){this.properties.strokeWidth=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeRendering",{get:function(){return this.properties.shapeRendering},set:function(t){this.properties.shapeRendering=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.properties.rotation},set:function(t){this.properties.rotation=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patternUnits",{get:function(){return this.properties.patternUnits},set:function(t){this.properties.patternUnits=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.properties.width},set:function(t){this.properties.width=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.properties.height},set:function(t){this.properties.height=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.properties.x},set:function(t){this.properties.x=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.properties.y},set:function(t){this.properties.y=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:qr()},set:function(t){this._paper!=t&&(this._paper=t,this.draw(),t.appendDef(this.element))},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),Qt(e.properties,(function(t,e){i[t]=e}))},Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new Qi(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeDasharray",{get:function(){return this.properties.strokeDashArray},set:function(t){this.properties.strokeDashArray=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){if(e&&S(e.elements)&&A(e.elements))for(var i=0,r=e.elements.length;i<r;i++){var n=e.elements[i];if(S(n.type)){var a=this.createEntryInstance(n);a instanceof He&&(a.config=n),this.addElement(S(n.typeProperty)?a[n.typeProperty]:a.element)}}t.prototype.processConfig.call(this,e)},e}(He);ve.registeredClasses.Pattern=Kr;var Zr=function(t){function e(){var e=t.call(this)||this;return e._stops=new Te,e._rotation=0,e.className="LinearGradient",e._stops.events.on("setIndex",e.validate,e),e._stops.events.on("inserted",e.validate,e),e.element=e.paper.addGroup("linearGradient"),e.id="gradient-"+ve.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validate=function(){var t=this,e=(this._rotation+90)*F,i=Math.round(50+50*Math.sin(e+Math.PI))+"%",r=Math.round(50+50*Math.cos(e))+"%",n=Math.round(50+50*Math.sin(e))+"%",a=Math.round(50+50*Math.cos(e+Math.PI))+"%",o=this.element;o.removeChildNodes(),o.attr({x1:i,x2:n,y1:r,y2:a}),se(ce(this._stops.iterator()),(function(e){var i=e[0],r=e[1],n=r.offset;k(n)||(n=i/(t._stops.length-1));var a=t.paper.add("stop");S(r.color)&&a.attr({"stop-color":r.color.toString()}),k(r.opacity)&&a.attr({"stop-opacity":r.opacity}),k(n)&&a.attr({offset:n}),o.add(a)}))},e.prototype.clear=function(){this._stops.clear()},e.prototype.addColor=function(t,e,i){this._stops.push({color:t,opacity:e,offset:i})},Object.defineProperty(e.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:qr()},set:function(t){this._paper!=t&&(this._paper=t,this.validate(),t.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this.validate()},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.stops.copyFrom(e.stops),this._rotation=e.rotation},Object.defineProperty(e.prototype,"gradientUnits",{set:function(t){this.element.attr({gradientUnits:t})},enumerable:!0,configurable:!0}),e}(He);ve.registeredClasses.LinearGradient=Zr;var Jr=function(t){function e(){var e=t.call(this)||this;return e._stops=new Te,e.element=e.paper.addGroup("radialGradient"),e.id="gradient-"+ve.getUniqueId(),e.element.attr({id:e.id}),e._disposers.push(e.element),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){var t,e=this,i=this.element;k(this.cx)&&((t=this.cx)instanceof f&&(t=t.percent+"%"),i.attr({cx:t})),k(this.cy)&&((t=this.cy)instanceof f&&(t=t.percent+"%"),i.attr({cy:t})),this.fx&&((t=this.fx)instanceof f&&(t=t.percent+"%"),i.attr({fx:t})),this.fy&&((t=this.fy)instanceof f&&(t=t.percent+"%"),i.attr({fy:t})),i.removeChildNodes(),se(ce(this._stops.iterator()),(function(t){var r=t[0],n=t[1],a=n.offset;k(a)||(a=r/(e._stops.length-1));var o=e.paper.add("stop");S(n.color)&&o.attr({"stop-color":n.color.toString()}),k(n.opacity)&&o.attr({"stop-opacity":n.opacity}),k(a)&&o.attr({offset:a}),i.add(o)}))},e.prototype.addColor=function(t,e,i){this._stops.push({color:t,opacity:e,offset:i}),this.draw()},Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:qr()},set:function(t){this._paper!=t&&(this._paper=t,this.draw(),t.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cx",{get:function(){return this._cx},set:function(t){this._cx=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cy",{get:function(){return this._cy},set:function(t){this._cy=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fx",{get:function(){return this._fx},set:function(t){this._fx=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fy",{get:function(){return this._fy},set:function(t){this._fy=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.stops.copyFrom(e.stops),this.cx=e.cx,this.cy=e.cy,this.fx=e.fx,this.fy=e.fy},Object.defineProperty(e.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._stops.clear()},e}(He);ve.registeredClasses.RadialGradient=Jr;var $r,Qr=function(){function t(){}return t.grab=[{property:"cursor",value:"move"},{property:"cursor",value:"grab"},{property:"cursor",value:"-webkit-grab"}],t.grabbing=[{property:"cursor",value:"move"},{property:"cursor",value:"grabbing"},{property:"cursor",value:"-webkit-grabbing"}],t.pointer=[{property:"cursor",value:"pointer"}],t.default=[{property:"cursor",value:"default"}],t.horizontalResize=[{property:"cursor",value:"ew-resize"}],t.verticalResize=[{property:"cursor",value:"ns-resize"}],t.notAllowed=[{property:"cursor",value:"not-allowed"}],t.text=[{property:"cursor",value:"text"}],t}(),tn={_decimalSeparator:".",_thousandSeparator:",",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_second:"HH:mm:ss",_date_minute:"HH:mm",_date_hour:"HH:mm",_date_day:"MMM dd",_date_week:"ww",_date_month:"MMM",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(t){var e="th";if(t<11||t>13)switch(t%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},"Zoom Out":"",Play:"",Stop:"",Legend:"","Click, tap or press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Click, tap or press ENTER to open":"","Click, tap or press ENTER to print.":"","Click, tap or press ENTER to export as %1.":"",'To save the image, right-click this link and choose "Save picture as..."':"",'To save the image, right-click thumbnail on the left and choose "Save picture as..."':"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""},en=function(t){function e(){var e=t.call(this)||this;return e.adapter=new Ee(e),e._locale=tn,e._defaultLocale=tn,e.className="Language",S(Gi.defaultLocale)&&(e.locale=Gi.defaultLocale),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.getLocale=function(t){return null==t&&(t=this._locale),this.adapter.apply("locale",{locale:t}).locale},e.prototype.translate=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];e=this.getLocale(e);var n=t,a=this.getTranslations(e),o=a[t];if(null===o)o="";else if(S(o))o&&(n=o);else if(e!==this._defaultLocale)return this.translate.apply(this,Object(d.h)([t,this._defaultLocale],i));if(i.length)for(var s=i.length,l=0;l<s;++l)n=n.split("%"+(l+1)).join(i[l]);return this.adapter.apply("translate",{translation:n,locale:e}).translation},e.prototype.translateAny=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return this.translate(t,e)},e.prototype.translateEmpty=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var n=this.translate.apply(this,Object(d.h)([t,e],i));return n==t?"":n},e.prototype.translateFunc=function(t,e){e=this.getLocale(e);var i=this.getTranslations(e)[t];return null!=i?i:e!==this._defaultLocale?this.translateFunc(t,this._defaultLocale):function(){return""}},e.prototype.translateAll=function(t,e){var i=this;return this.isDefault()?t:ct(t,(function(t){return i.translate(t,e)}))},e.prototype.isDefault=function(){return this._defaultLocale===this._locale},Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale!=t&&(this._locale=t,this.events.isEnabled("localechanged")&&this.events.dispatchImmediately("localechanged",{type:"localechanged",locale:t,target:this}))},enumerable:!0,configurable:!0}),e.prototype.getTranslations=function(t){return this.adapter.apply("translations",{translations:t,locale:t}).translations},e}(We),rn=function(t){function e(){var e=t.call(this)||this;return e.adapter=new Ee(e),e.className="TextFormatter",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.debug=function(){},e.prototype.format=function(t,e){S(e)||(e="svg");var i="",r=(t=this.escape(t)).match(/\[([^\]]*?)\]/gm);if(!r)return this.wrap(t,"",e);for(var n=t.split(/\[[^\[\]]*\]/),a=0,o=n.length;a<o;a++){var s=n[a];if(""!==s){s=this.adapter.apply("chunk",s);var l="";a>0&&(l=r[a-1].replace("[","").replace("]","")),i+=this.wrap(s,l,e)}}return i=this.unescape(i),this.cleanUp(i)},e.prototype.escape=function(t){return t.replace(/\[\[/g,ve.getPlaceholder("1")).replace(/([^\/]{1})\]\]/g,"$1"+ve.getPlaceholder("2")).replace(/\]\]/g,ve.getPlaceholder("2")).replace(/\{\{/g,ve.getPlaceholder("3")).replace(/\}\}/g,ve.getPlaceholder("4")).replace(/\'\'/g,ve.getPlaceholder("5"))},e.prototype.unescape=function(t){return t.replace(new RegExp(ve.getPlaceholder("1"),"g"),"[[").replace(new RegExp(ve.getPlaceholder("2"),"g"),"]]").replace(new RegExp(ve.getPlaceholder("3"),"g"),"{{").replace(new RegExp(ve.getPlaceholder("4"),"g"),"}}").replace(new RegExp(ve.getPlaceholder("5"),"g"),"'")},e.prototype.cleanUp=function(t){return t.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")},e.prototype.wrap=function(t,e,i){switch(""!==e&&"/"!==e||(e=""),i){case"html":return this.wrapHtml(t,this.translateStyleShortcuts(e));default:return this.wrapSvg(t,this.translateStyleShortcuts(e))}},e.prototype.wrapSvg=function(t,e){return""===e?"<tspan>"+t+"</tspan>":"<tspan style='"+e+"'>"+t+"</tspan>"},e.prototype.getSvgElement=function(t,e){var i=new br("tspan");return i.textContent=t,e&&i.node.setAttribute("style",e),i},e.prototype.wrapHtml=function(t,e){return""===e?"<span>"+t+"</span>":"<span style='"+this.styleSvgToHtml(e)+"'>"+t+"</span>"},e.prototype.getHtmlElement=function(t,e){var i=document.createElement("span");return i.innerHTML=t,e&&i.setAttribute("style",e),i},e.prototype.styleSvgToHtml=function(t){return t.replace(/fill:/,"color:")},e.prototype.translateStyleShortcuts=function(t){if(""==t||"[ ]"==t)return"";var e=ve.getCache("translateStyleShortcuts_"+t);if(e)return e;var i=t.match(/('[^']*')|("[^"]*")/gi);if(i)for(var r=0;r<i.length;r++)t=t.replace(i[r],i[r].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));var n=t.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w]+)|(\/)/gi);if(!n)return t;for(r=0;r<n.length;r++)n[r]=n[r].match(/^bold$/i)?"font-weight:"+n[r]:"/"==n[r]?"":n[r].match(/:/)?n[r].replace(/\+/g," "):"fill:"+n[r];var a=n.join(";");return ve.setCache("translateStyleShortcuts_"+t,a),a},e.prototype.chunk=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var r=[];t=this.escape(t);for(var n=e?t.split("'"):[t],a=0;a<n.length;a++){var o=n[a];if(""!==o)if(a%2==0)for(var s=(o=(o=o.replace(/\]\[/g,"]__\xa7\xa7\xa7__[")).replace(/\[\]/g,"[ ]")).split(/[\[\]]+/),l=0;l<s.length;l++)"__\xa7\xa7\xa7__"!==(u=this.cleanUp(this.unescape(s[l])))&&""!==u&&r.push(l%2==0?{type:"value",text:this.adapter.apply("chunk",u)}:{type:i?"value":"format",text:"["+u+"]"});else for(s=o.split(/[\[\]]+/),l=0;l<s.length;l++){var u;""!==(u=this.cleanUp(this.unescape(s[l])))&&(l%2==0?r.push({type:"text",text:u}):this.isImage(u)?r.push({type:"image",text:"["+u+"]"}):r.push({type:"format",text:"["+u+"]"}))}}return r},e.prototype.isImage=function(t){return!!t.match(/img[ ]?:/)},e}(He);function nn(){return null==$r&&($r=new rn),$r}ve.registeredClasses.TextFormatter=rn;var an=function(t){function e(){var e=t.call(this)||this;return e._negativeBase=0,e._numberFormat="#,###.#####",e._outputFormat="svg",e._smallNumberThreshold=1,e.className="NumberFormatter",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.language&&this.language.dispose()},Object.defineProperty(e.prototype,"language",{get:function(){return this._language||(this._language=this.sprite?this.sprite.language:new en),this._language},set:function(t){this._language=t},enumerable:!0,configurable:!0}),e.prototype.format=function(t,e,i){var r;(void 0===e||C(e)&&"number"===e.toLowerCase())&&(e=this._numberFormat);var n=Number(t);if(e instanceof Object)try{return this.intlLocales?new Intl.NumberFormat(this.intlLocales,e).format(n):new Intl.NumberFormat(void 0,e).format(n)}catch(s){return"Invalid"}else{e=si(e);var a=this.parseFormat(e,this.language),o=void 0;o=n>this._negativeBase?a.positive:n<this._negativeBase?a.negative:a.zero,S(i)&&!o.mod&&((o=JSON.parse(JSON.stringify(o))).decimals.active=0==n?0:i),r=o.template.split("__\xa7\xa7\xa7__").join(this.applyFormat(n,o))}return r},e.prototype.parseFormat=function(t,e){var i=this,r=this.getCache(t);if(S(r))return r;var n={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:e.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:e.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:e.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:e.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:e.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:e.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1}},a=(t=t.replace("||","__\xa7\xa7\xa7\xa7__")).split("|");return n.positive.source=a[0],void 0===a[2]?n.zero=n.positive:n.zero.source=a[2],void 0===a[1]?n.negative=n.positive:n.negative.source=a[1],Qt(n,(function(t,e){if(!e.parsed)if(void 0===i.getCache(e.source)){var r=e.source;"number"===r.toLowerCase()&&(r=C(i._numberFormat)?i._numberFormat:"#,###.#####");for(var a=nn().chunk(r,!0),o=0;o<a.length;o++){var s=a[o];if(s.text=s.text.replace("__\xa7\xa7\xa7\xa7__","|"),"value"===s.type){var l=s.text.match(/[#0.,]+[ ]?[abesABES%!]?[abesABES\u2030!]?/);if(l)if(null===l||""===l[0])e.template+=s.text;else{var u=l[0].match(/[abesABES%\u2030!]{2}|[abesABES%\u2030]{1}$/);u&&(e.mod=u[0].toLowerCase(),e.modSpacing=!!l[0].match(/[ ]{1}[abesABES%\u2030!]{1}$/));var c=l[0].split(".");if(""===c[0]);else{e.thousands.active=(c[0].match(/0/g)||[]).length,e.thousands.passive=(c[0].match(/\#/g)||[]).length+e.thousands.active;var h=c[0].split(",");1===h.length||(e.thousands.interval=w(h.pop()).length,0===e.thousands.interval&&(e.thousands.interval=-1))}void 0===c[1]||(e.decimals.active=(c[1].match(/0/g)||[]).length,e.decimals.passive=(c[1].match(/\#/g)||[]).length+e.decimals.active),e.template+=s.text.split(l[0]).join("__\xa7\xa7\xa7__")}}else e.template+=s.text}i.setCache(e.source,e),e.parsed=!0}else n[t]=i.getCache(e.source)})),this.setCache(t,n),n},e.prototype.applyFormat=function(t,e){var i=t<0;t=Math.abs(t);var r,n="",a="",o=e.mod?e.mod.split(""):[];if(-1!==o.indexOf("b")){var s=this.applyPrefix(t,this.bytePrefixes,-1!==o.indexOf("!"));t=s[0],n=s[1],a=s[2],e.modSpacing&&(a=" "+a)}else if(-1!==o.indexOf("a")){var l=this.applyPrefix(t,t<this.smallNumberThreshold?this.smallNumberPrefixes:this.bigNumberPrefixes,-1!==o.indexOf("!"));t=l[0],n=l[1],a=l[2],e.modSpacing&&(a=" "+a)}else if(-1!==o.indexOf("%")){var u=U(t.toString().length+2,21);t*=100,t=parseFloat(t.toPrecision(u)),a="%"}else-1!==o.indexOf("\u2030")&&(u=U(t.toString().length+3,21),t*=1e3,t=parseFloat(t.toPrecision(u)),a="\u2030");if(-1!==o.indexOf("e"))r=e.decimals.passive>=0?t.toExponential(e.decimals.passive).split("e"):t.toExponential().split("e"),t=Number(r[0]),a="e"+r[1],e.modSpacing&&(a=" "+a);else if(0===e.decimals.passive)t=Math.round(t);else if(e.decimals.passive>0){var c=Math.pow(10,e.decimals.passive);t=Math.round(t*c)/c}var h="",p=function(t){if(y(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(0===t&&1/t==-1/0)return"-0";var e=t<0;t=Math.abs(t);var i,r=w(/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+t)),n=r[1],a=r[2]||"";if(null==r[3])i=""===a?n:n+"."+a;else{var o,s=+r[3];i=t<1?"0."+fe("0",o=s-1)+n+a:0==(o=s-a.length)?n+a:o<0?n+a.slice(0,o)+"."+a.slice(o):n+a+fe("0",o)}return e?"-"+i:i}(t).split("."),d=p[0];if(d.length<e.thousands.active&&(d=Array(e.thousands.active-d.length+1).join("0")+d),e.thousands.interval>0){for(var f=[],m=d.split("").reverse().join(""),g=0,b=d.length;g<=b;g+=e.thousands.interval){var v=m.substr(g,e.thousands.interval).split("").reverse().join("");""!==v&&f.unshift(v)}d=f.join(e.thousands.separator)}h+=d,1===p.length&&p.push("");var _=p[1];return _.length<e.decimals.active&&(_+=Array(e.decimals.active-_.length+1).join("0")),""!==_&&(h+=e.decimals.separator+_),""===h&&(h="0"),0!==t&&i&&-1===o.indexOf("s")&&(h="-"+h),n&&(h=n+h),a&&(h+=a),h},e.prototype.applyPrefix=function(t,e,i){void 0===i&&(i=!1);for(var r=t,n="",a="",o=!1,s=1,l=0,u=e.length;l<u;l++)e[l].number<=t&&(0===e[l].number?r=0:(r=t/e[l].number,s=e[l].number),n=e[l].prefix,a=e[l].suffix,o=!0);return!o&&i&&e.length&&0!=t&&(r=t/e[0].number,n=e[0].prefix,a=e[0].suffix,o=!0),o&&(r=parseFloat(r.toPrecision(U(s.toString().length+Math.floor(r).toString().replace(/[^0-9]*/g,"").length,21)))),[r,n,a]},e.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){this._numberFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(t){this._intlLocales=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negativeBase",{get:function(){return this._negativeBase},set:function(t){this._negativeBase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bigNumberPrefixes",{get:function(){return S(this._bigNumberPrefixes)||(this._bigNumberPrefixes=[{number:1e3,suffix:this.language.translate("_big_number_suffix_3")},{number:1e6,suffix:this.language.translate("_big_number_suffix_6")},{number:1e9,suffix:this.language.translate("_big_number_suffix_9")},{number:1e12,suffix:this.language.translate("_big_number_suffix_12")},{number:1e15,suffix:this.language.translate("_big_number_suffix_15")},{number:1e18,suffix:this.language.translate("_big_number_suffix_18")},{number:1e21,suffix:this.language.translate("_big_number_suffix_21")},{number:1e24,suffix:this.language.translate("_big_number_suffix_24")}]),this._bigNumberPrefixes},set:function(t){this._bigNumberPrefixes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smallNumberPrefixes",{get:function(){return S(this._smallNumberPrefixes)||(this._smallNumberPrefixes=[{number:1e-24,suffix:this.language.translate("_small_number_suffix_24")},{number:1e-21,suffix:this.language.translate("_small_number_suffix_21")},{number:1e-18,suffix:this.language.translate("_small_number_suffix_18")},{number:1e-15,suffix:this.language.translate("_small_number_suffix_15")},{number:1e-12,suffix:this.language.translate("_small_number_suffix_12")},{number:1e-9,suffix:this.language.translate("_small_number_suffix_9")},{number:1e-6,suffix:this.language.translate("_small_number_suffix_6")},{number:.001,suffix:this.language.translate("_small_number_suffix_3")}]),this._smallNumberPrefixes},set:function(t){this._smallNumberPrefixes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smallNumberThreshold",{get:function(){return this._smallNumberThreshold},set:function(t){this._smallNumberThreshold=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytePrefixes",{get:function(){return S(this._bytePrefixes)||(this._bytePrefixes=[{number:1,suffix:this.language.translate("_byte_suffix_B")},{number:1024,suffix:this.language.translate("_byte_suffix_KB")},{number:1048576,suffix:this.language.translate("_byte_suffix_MB")},{number:1073741824,suffix:this.language.translate("_byte_suffix_GB")},{number:1099511627776,suffix:this.language.translate("_byte_suffix_TB")},{number:0x4000000000000,suffix:this.language.translate("_byte_suffix_PB")}]),this._bytePrefixes},set:function(t){this._bytePrefixes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(t){this._outputFormat=t.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),e.prototype.escape=function(t){return t.replace("||","__\xa7\xa7\xa7\xa7__")},e.prototype.unescape=function(t){return t.replace("__\xa7\xa7\xa7\xa7__","|")},e}(He);ve.registeredClasses.NumberFormatter=an;var on=function(t){function e(){var e=t.call(this)||this;return e._dateFormat="yyyy-MM-dd",e._inputDateFormat="yyyy-MM-dd",e._utc=!1,e._firstDayOfWeek=1,e.months=["January","February","March","April","May","June","July","August","September","October","November","December"],e.monthsShort=["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e._outputFormat="svg",e.capitalize=!0,e.className="DateFormatter",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"language",{get:function(){return this._language},set:function(t){this._language=t,this.dateFormat=this._language.translate("_date")},enumerable:!0,configurable:!0}),e.prototype.format=function(t,e){var i,r;if(this.language||(this.language=this.sprite?this.sprite.language:new en),void 0!==e&&""!==e||(e=this._dateFormat),r=C(t)?this.parse(t):ci(t),e instanceof Object)try{return this.intlLocales?new Intl.DateTimeFormat(this.intlLocales,e).format(r):new Intl.DateTimeFormat(void 0,e).format(r)}catch(a){return"Invalid"}else{e=si(e);var n=this.parseFormat(e);if(S(this.timezoneOffset)&&r.setMinutes(r.getMinutes()+r.getTimezoneOffset()-this.timezoneOffset),!k(r.getTime()))return this.language.translate("Invalid date");i=this.applyFormat(r,n,this.language),this.capitalize&&(i=i.replace(/^.{1}/,i.substr(0,1).toUpperCase()))}return i},e.prototype.parseFormat=function(t){var e=this.getCache(t);if(S(e))return e;for(var i={template:"",parts:[]},r=nn().chunk(t,!0),n=0;n<r.length;n++){var a=r[n];if("value"===a.type){a.text.match(/^date$/i)&&C(this._dateFormat)&&(a.text=this._dateFormat);var o=a.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(o)for(var s=0;s<o.length;s++)i.parts.push(o[s]),a.text=a.text.replace(o[s],"__\xa7\xa7\xa7__")}i.template+=a.text}return this.setCache(t,i),i},e.prototype.applyFormat=function(t,e,i){var r,n,a,o,s,l,u,c,h=e.template,p=t.getTimezoneOffset(),d=t.getTime();this.utc?(r=t.getUTCFullYear(),n=t.getUTCMonth(),a=t.getUTCDay(),o=t.getUTCDate(),s=t.getUTCHours(),l=t.getUTCMinutes(),u=t.getUTCSeconds(),c=t.getUTCMilliseconds()):(r=t.getFullYear(),n=t.getMonth(),a=t.getDay(),o=t.getDate(),s=t.getHours(),l=t.getMinutes(),u=t.getSeconds(),c=t.getMilliseconds());for(var f=0,m=e.parts.length;f<m;f++){var y="";switch(e.parts[f]){case"G":y=i.translate(r<0?"_era_bc":"_era_ad");break;case"yyyy":y=Math.abs(r).toString(),r<0&&(y+=i.translate("_era_bc"));break;case"yyy":case"yy":case"y":y=Math.abs(r).toString().substr(-e.parts[f].length),r<0&&(y+=i.translate("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":var g=r;1==di(t)&&a>1&&g--,y="YYYY"==e.parts[f]?Math.abs(g).toString():Math.abs(g).toString().substr(-e.parts[f].length),g<0&&(y+=i.translate("_era_bc"));break;case"u":break;case"MMMMM":y=i.translate(this.months[n]).substr(0,1);break;case"MMMM":y=i.translate(this.months[n]);break;case"MMM":y=i.translate(this.monthsShort[n]);break;case"MM":y=oi(n+1,2,"0");break;case"M":y=(n+1).toString();break;case"ww":y=oi(di(t,this.utc),2,"0");break;case"w":y=di(t,this.utc).toString();break;case"W":y=fi(t,this.utc).toString();break;case"dd":y=oi(o,2,"0");break;case"d":y=o.toString();break;case"DD":case"DDD":y=oi(pi(t,this.utc).toString(),e.parts[f].length,"0");break;case"D":y=pi(t,this.utc).toString();break;case"F":case"g":break;case"t":y=i.translateFunc("_dateOrd").call(this,o);break;case"E":y=(a||7).toString();break;case"EE":y=oi((a||7).toString(),2,"0");break;case"EEE":case"eee":y=i.translate(this.weekdaysShort[a]);break;case"EEEE":case"eeee":y=i.translate(this.weekdays[a]);break;case"EEEEE":case"eeeee":y=i.translate(this.weekdays[a]).substr(0,1);break;case"e":case"ee":y=(a-this.firstDayOfWeek+1).toString(),"ee"==e.parts[f]&&(y=oi(y,2,"0"));break;case"a":y=i.translate(s>=12?"PM":"AM");break;case"aa":y=i.translate(s>=12?"P.M.":"A.M.");break;case"aaa":y=i.translate(s>=12?"P":"A");break;case"h":y=mi(s).toString();break;case"hh":y=oi(mi(s),2,"0");break;case"H":y=s.toString();break;case"HH":y=oi(s,2,"0");break;case"K":y=mi(s,0).toString();break;case"KK":y=oi(mi(s,0),2,"0");break;case"k":y=(s+1).toString();break;case"kk":y=oi(s+1,2,"0");break;case"m":y=l.toString();break;case"mm":y=oi(l,2,"0");break;case"s":y=u.toString();break;case"ss":y=oi(u,2,"0");break;case"S":case"SS":case"SSS":y=Math.round(c/1e3*Math.pow(10,e.parts[f].length)).toString();break;case"x":y=d.toString();break;case"n":case"nn":case"nnn":y=oi(c,e.parts[f].length,"0");break;case"z":y=yi(t,!1,!1,this.utc);break;case"zz":y=yi(t,!0,!1,this.utc);break;case"zzz":y=yi(t,!1,!0,this.utc);break;case"zzzz":y=yi(t,!0,!0,this.utc);break;case"Z":case"ZZ":var b=Math.abs(p)/60,v=Math.floor(b),_=60*b-60*v;this.utc&&(v=0,_=0),"Z"==e.parts[f]?(y="GMT",y+=p>0?"-":"+",y+=oi(v,2)+":"+oi(_,2)):(y=p>0?"-":"+",y+=oi(v,2)+oi(_,2));break;case"i":y=t.toISOString();break;case"I":y=t.toUTCString()}h=h.replace("__\xa7\xa7\xa7__",y)}return h},e.prototype.parse=function(t,e){if(S(e)||(e=this.inputDateFormat),t instanceof Date)return t;if("number"==typeof t)return new Date(t);var i;"string"!=typeof t&&(t=t.toString()),this.language||(this.language=this.sprite?this.sprite.language:new en);var r="";e=(e=si(e)).substr(0,t.length);for(var n=this.parseFormat(e),a={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},o={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this.utc},s=0,l=0,u=0;u<n.parts.length;u++){switch(l=u+s+1,n.parts[u]){case"yyyy":case"YYYY":r+="([0-9]{4})",a.year=l;break;case"yyy":case"YYY":r+="([0-9]{3})",a.year3=l;break;case"yy":case"YY":r+="([0-9]{2})",a.year2=l;break;case"y":case"Y":r+="([0-9]{1})",a.year1=l;break;case"MMMM":r+="("+this.getStringList(this.months).join("|")+")",a.monthLong=l;break;case"MMM":r+="("+this.getStringList(this.monthsShort).join("|")+")",a.monthShort=l;break;case"MM":case"M":r+="([0-9]{2}|[0-9]{1})",a.month=l;break;case"ww":case"w":r+="([0-9]{2}|[0-9]{1})",a.week=l;break;case"dd":case"d":r+="([0-9]{2}|[0-9]{1})",a.day=l;break;case"DDD":case"DD":case"D":r+="([0-9]{3}|[0-9]{2}|[0-9]{1})",a.yearDay=l;break;case"dddd":r+="("+this.getStringList(this.weekdays).join("|")+")",a.weekdayLong=l;break;case"ddd":r+="("+this.getStringList(this.weekdaysShort).join("|")+")",a.weekdayShort=l;break;case"aaa":case"aa":case"a":r+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",a.am=l;break;case"hh":case"h":r+="([0-9]{2}|[0-9]{1})",a.hour12Base1=l;break;case"HH":case"H":r+="([0-9]{2}|[0-9]{1})",a.hourBase0=l;break;case"KK":case"K":r+="([0-9]{2}|[0-9]{1})",a.hour12Base0=l;break;case"kk":case"k":r+="([0-9]{2}|[0-9]{1})",a.hourBase1=l;break;case"mm":case"m":r+="([0-9]{2}|[0-9]{1})",a.minute=l;break;case"ss":case"s":r+="([0-9]{2}|[0-9]{1})",a.second=l;break;case"SSS":case"SS":case"S":r+="([0-9]{3}|[0-9]{2}|[0-9]{1})",a.millisecond=l,a.millisecondDigits=n.parts[u].length;break;case"nnn":case"nn":case"n":r+="([0-9]{3}|[0-9]{2}|[0-9]{1})",a.millisecond=l;break;case"x":r+="([0-9]{1,})",a.timestamp=l;break;case"Z":r+="GMT([-+]+[0-9]{2}:[0-9]{2})",a.zone=l;break;case"ZZ":r+="([\\-+]+[0-9]{2}[0-9]{2})",a.zone=l;break;case"i":r+="([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2}).([0-9]{3})[0-9]*([Zz]?)",a.iso=l,s+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":s--}r+="[^0-9]*"}var c=new RegExp(r),h=t.match(c);if(h){if(a.year>-1&&(o.year=parseInt(h[a.year])),a.year3>-1){var p=parseInt(h[a.year3]);o.year=p+=1e3}if(a.year2>-1&&(p=parseInt(h[a.year2]),o.year=p+=p>50?1e3:2e3),a.year1>-1&&(p=parseInt(h[a.year1]),p=10*Math.floor((new Date).getFullYear()/10)+p,o.year=p),a.monthLong>-1&&(o.month=this.resolveMonth(h[a.monthLong])),a.monthShort>-1&&(o.month=this.resolveShortMonth(h[a.monthShort])),a.month>-1&&(o.month=parseInt(h[a.month])-1),a.week>-1&&-1===a.day&&(o.month=0,o.day=function(t,e,i,r){void 0===i&&(i=1),void 0===r&&(r=!1);var n=new Date(e,0,4,0,0,0,0);return r&&n.setUTCFullYear(e),7*t+i-((n.getDay()||7)+3)}(parseInt(h[a.week]),o.year,1,this.utc)),a.day>-1&&(o.day=parseInt(h[a.day])),a.yearDay>-1&&(o.month=0,o.day=parseInt(h[a.yearDay])),a.hourBase0>-1&&(o.hour=parseInt(h[a.hourBase0])),a.hourBase1>-1&&(o.hour=parseInt(h[a.hourBase1])-1),a.hour12Base0>-1&&(11==(p=parseInt(h[a.hour12Base0]))&&(p=0),a.am>-1&&!this.isAm(h[a.am])&&(p+=12),o.hour=p),a.hour12Base1>-1&&(12==(p=parseInt(h[a.hour12Base1]))&&(p=0),a.am>-1&&!this.isAm(h[a.am])&&(p+=12),o.hour=p),a.minute>-1&&(o.minute=parseInt(h[a.minute])),a.second>-1&&(o.second=parseInt(h[a.second])),a.millisecond>-1&&(p=parseInt(h[a.millisecond]),2==a.millisecondDigits?p*=10:1==a.millisecondDigits&&(p*=100),o.millisecond=p),a.timestamp>-1&&(o.timestamp=parseInt(h[a.timestamp])),a.zone>-1){var d=w(h[a.zone].replace(/:/,"").match(/([+\-]?)([0-9]{2})([0-9]{2})/)),f=d[1],m=d[3],y=60*parseInt(d[2])+parseInt(m);"+"==f&&(y*=-1);var g=(new Date).getTimezoneOffset();o.offset=y-g}a.iso>-1&&("Z"!=h[a.iso+7]&&"z"!=h[a.iso+7]||(o.utc=!0),o.year=_(h[a.iso+0]),o.month=_(h[a.iso+1])-1,o.day=_(h[a.iso+2]),o.hour=_(h[a.iso+3]),o.minute=_(h[a.iso+4]),o.second=_(h[a.iso+5]),o.millisecond=_(h[a.iso+6])),i=o.utc?new Date(Date.UTC(o.year,o.month,o.day,o.hour,o.minute,o.second,o.millisecond)):new Date(o.year,o.month,o.day,o.hour,o.minute,o.second,o.millisecond)}else i=new Date(t);return i},e.prototype.resolveMonth=function(t){var e=this.months.indexOf(t);return e>-1?e:this.language&&!this.language.isDefault()&&(e=this.language.translateAll(this.months).indexOf(t))>-1?e:0},e.prototype.resolveShortMonth=function(t){var e=this.monthsShort.indexOf(t);return e>-1?e:(e=this.months.indexOf(t))>-1?e:this.language&&!this.language.isDefault()&&(e=this.language.translateAll(this.monthsShort).indexOf(t))>-1?e:0},e.prototype.isAm=function(t){return this.getStringList(["AM","A.M.","A"]).indexOf(t.toUpperCase())>-1},e.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},e.prototype.getStringList=function(t){for(var e=[],i=0;i<t.length;i++)e.push(ti(this.language?this.language.translate(t[i]):t[i]));return e},Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(t){this._dateFormat=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDateFormat",{get:function(){return this._inputDateFormat},set:function(t){this._inputDateFormat=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(t){this._intlLocales=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"utc",{get:function(){return this._utc},set:function(t){this._utc=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezoneOffset",{get:function(){return this._timezoneOffset},set:function(t){this._timezoneOffset!=t&&(this._timezoneOffset=t,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstDayOfWeek",{get:function(){return this._firstDayOfWeek},set:function(t){this._firstDayOfWeek=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(t){this._outputFormat=t.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),e}(He);ve.registeredClasses.DateFormatter=on;var sn=function(t){function e(){var e=t.call(this)||this;return e._negativeBase=0,e._baseUnit="second",e._outputFormat="svg",e._unitValues={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},e._unitAliases={Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"},e.className="DurationFormatter",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.format=function(t,e,i){this.language||(this.language=this.sprite?this.sprite.language:new en);var r=i||this._baseUnit;void 0!==e&&""!==e||(e=S(this.durationFormat)?this.durationFormat:this.getFormat(_(t),null,r)),e=si(e);var n,a=this.parseFormat(e,r),o=Number(t),s=this.applyFormat(o,n=o>this._negativeBase?a.positive:o<this._negativeBase?a.negative:a.zero);return""!==n.color&&("svg"===this._outputFormat?s="<tspan fill='"+n.color+"'>"+s+"</tspan>":"html"===this._outputFormat&&(s="<span style='color: "+n.color+";'>"+s+"</span>")),s},e.prototype.parseFormat=function(t,e){var i=this,r=this.getCache(t);if(S(r))return r;var n=e||this._baseUnit,a={positive:{color:"",template:"",parts:[],source:"",baseUnit:n,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:n,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:n,parsed:!1,absolute:!1}},o=(t=t.replace("||","__\xa7\xa7\xa7\xa7__")).split("|");return a.positive.source=o[0],void 0===o[2]?a.zero=a.positive:a.zero.source=o[2],void 0===o[1]?a.negative=a.positive:a.negative.source=o[1],Qt(a,(function(t,e){if(!e.parsed)if(void 0===i.getCache(e.source)){var r,n=e.source;(r=e.source.match(/^\[([^\]]*)\]/))&&r.length&&""!==r[0]&&(n=e.source.substr(r[0].length),e.color=r[1]);for(var o=nn().chunk(n,!0),s=0;s<o.length;s++){var l=o[s];if(l.text=l.text.replace("__\xa7\xa7\xa7\xa7__","|"),"value"===l.type){l.text.match(/[yYMdDwhHKkmsSn]+a/)&&(e.absolute=!0,l.text=l.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));var u=l.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(u)for(var c=0;c<u.length;c++)S(u[c])||(u[c]=i._unitAliases[u[c]]),e.parts.push(u[c]),l.text=l.text.replace(u[c],"__\xa7\xa7\xa7__")}e.template+=l.text}i.setCache(e.source,e),e.parsed=!0}else a[t]=i.getCache(e.source)})),this.setCache(t,a),a},e.prototype.applyFormat=function(t,e){var i=!e.absolute&&t<this._negativeBase;t=Math.abs(t);for(var r=this.toTimeStamp(t,e.baseUnit),n=e.template,a=0,o=e.parts.length;a<o;a++){var s=e.parts[a],l=this.toTimeUnit(s.substr(0,1)),u=s.length,c=Math.floor(r/this._unitValues[l]);n=n.replace("__\xa7\xa7\xa7__",oi(c,u,"0")),r-=c*this._unitValues[l]}return i&&(n="-"+n),n},e.prototype.toTimeStamp=function(t,e){return t*this._unitValues[e]},e.prototype.toTimeUnit=function(t){switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}},e.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(e.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(t){this._baseUnit=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(t){this._outputFormat=t.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),e.prototype.getFormat=function(t,e,i){if(S(this.durationFormat))return this.durationFormat;if(i||(i=this.baseUnit),S(e)&&t!=e){t=Math.abs(t),e=Math.abs(e);var r=this.getValueUnit(N(t,e),i);return this.durationFormats[i][r]}var n=this.getValueUnit(t,i);return this.durationFormats[i][n]},e.prototype.getValueUnit=function(t,e){var i;e||(e=this.baseUnit);var r=this.getMilliseconds(t,e);return $t(this._unitValues,(function(t,n){if(t==e||i){if(r/n<=1)return i||(i=t),!1;i=t}return!0})),i},e.prototype.getMilliseconds=function(t,e){return e||(e=this.baseUnit),t*this._unitValues[e]},Object.defineProperty(e.prototype,"durationFormat",{get:function(){return this._durationFormat},set:function(t){this._durationFormat!=t&&(this._durationFormat=t,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormats",{get:function(){return this._durationFormats||(this._durationFormats={millisecond:{millisecond:this.language.translate("_duration_millisecond"),second:this.language.translate("_duration_millisecond_second"),minute:this.language.translate("_duration_millisecond_minute"),hour:this.language.translate("_duration_millisecond_hour"),day:this.language.translate("_duration_millisecond_day"),week:this.language.translate("_duration_millisecond_week"),month:this.language.translate("_duration_millisecond_month"),year:this.language.translate("_duration_millisecond_year")},second:{second:this.language.translate("_duration_second"),minute:this.language.translate("_duration_second_minute"),hour:this.language.translate("_duration_second_hour"),day:this.language.translate("_duration_second_day"),week:this.language.translate("_duration_second_week"),month:this.language.translate("_duration_second_month"),year:this.language.translate("_duration_second_year")},minute:{minute:this.language.translate("_duration_minute"),hour:this.language.translate("_duration_minute_hour"),day:this.language.translate("_duration_minute_day"),week:this.language.translate("_duration_minute_week"),month:this.language.translate("_duration_minute_month"),year:this.language.translate("_duration_minute_year")},hour:{hour:this.language.translate("_duration_hour"),day:this.language.translate("_duration_hour_day"),week:this.language.translate("_duration_hour_week"),month:this.language.translate("_duration_hour_month"),year:this.language.translate("_duration_hour_year")},day:{day:this.language.translate("_duration_day"),week:this.language.translate("_duration_day_week"),month:this.language.translate("_duration_day_month"),year:this.language.translate("_duration_day_year")},week:{week:this.language.translate("_duration_week"),month:this.language.translate("_duration_week_month"),year:this.language.translate("_duration_week_year")},month:{month:this.language.translate("_duration_month"),year:this.language.translate("_duration_month_year")},year:{year:this.language.translate("_duration_year")}}),this._durationFormats},set:function(t){this._durationFormats=t,this.invalidateSprite()},enumerable:!0,configurable:!0}),e}(He);ve.registeredClasses.DurationFormatter=sn;var ln,un=new ye,cn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._validateDisposer=null,e}return Object(d.d)(e,t),e.prototype.invalidate=function(){null===this._validateDisposer&&(this._validateDisposer=ve.events.on("exitframe",this.validate,this))},e.prototype.validate=function(){null!==this._validateDisposer&&(this._validateDisposer.dispose(),this._validateDisposer=null)},e.prototype.dispose=function(){null!==this._validateDisposer&&(this._validateDisposer.dispose(),this._validateDisposer=null),t.prototype.dispose.call(this)},e}(We),hn=function(t){function e(){var e=t.call(this)||this;return e.adapter=new Ee(e),e.closeDelay=1e3,e.closeOnClick=!0,e._language=new Vt,e._menuTag="ul",e._itemTag="li",e._labelTag="a",e._iconTag="img",e._classPrefix="amexport",e._defaultStyles=!0,e._align="right",e._verticalAlign="top",e._tabindex=0,e._ignoreNextClose=!1,e._items=[{label:"...",menu:[{label:"Image",menu:[{type:"png",label:"PNG"},{type:"jpg",label:"JPG"},{type:"svg",label:"SVG"},{type:"pdf",label:"PDF"}]},{label:"Data",menu:[{type:"json",label:"JSON"},{type:"csv",label:"CSV"},{type:"xlsx",label:"XLSX"},{type:"html",label:"HTML"},{type:"pdfdata",label:"PDF"}]},{label:"Print",type:"print"}]}],e.className="ExportMenu",e._disposers.push(e._language),e.invalidate(),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validate=function(){this.draw(),t.prototype.validate.call(this)},e.prototype.draw=function(){var t=this;this._element?(this._element.innerHTML="",this._element.className=this.getMenuItemClass(0)):this._element=this.createMenuElement(0),this.defaultStyles&&(this._element.style.display="none"),w(this._container).appendChild(this._element);for(var e=this.adapter.apply("items",{items:this._items}).items,i=e.length,r=0;r<i;r++)this.drawBranch(this._element,e[r],0);this._element=this.adapter.apply("menuElement",{menuElement:this._element}).menuElement,this._disposers.push(Vr().body.events.on("down",(function(e){e.pointer.touch||(t._ignoreNextClose=!1),t.close()}))),this._disposers.push(Vr().body.events.on("keyup",(function(e){var i=Cr.getEventKey(e.event);switch(i){case"esc":t.close();break;case"up":case"down":case"left":case"right":t.moveSelection(i)}}))),this.defaultStyles&&this.loadDefaultCSS()},e.prototype.drawBranch=function(t,e,i){var r=this;if(!0!==(e=this.adapter.apply("branch",{branch:e,level:i}).branch).unsupported){e.ascendants||(e.ascendants=new Te);var n,a=e.type,o=this.createItemElement(i,a);e.icon?((n=this.createIconElement(i,a)).src=e.icon,e.label&&(n.title=e.label)):e.svg?(n=this.createSvgElement(i,a,e.svg),e.label&&(n.title=e.label)):(n=this.createLabelElement(i,a)).innerHTML=e.label?this.language.translate(e.label):"";var s=this.getReaderLabel(e,n.innerHTML);n.setAttribute("aria-label",s),o.appendChild(n),e.interactions=Vr().getInteraction(n),e.element=o,this.typeClickable(a)&&(e.interactions.events.on("hit",(function(t){r.events.isEnabled("hit")&&r.events.dispatchImmediately("hit",{type:"hit",event:t.event,target:r,branch:e})})),e.interactions.events.on("keyup",(function(t){Cr.isKey(t.event,"enter")&&r.events.isEnabled("enter")&&r.events.dispatchImmediately("enter",{type:"enter",event:t.event,target:r,branch:e})})));var l=this.getSubMenu(e);null!=l&&(e.interactions.events.on("keyup",(function(t){Cr.isKey(t.event,"enter")&&(r.selectBranch(l[0]),r.setFocus(l[0]))})),e.interactions.events.on("hit",(function(t){r.selectBranch(e)}))),e.interactions.events.on("over",(function(t){t.pointer.touch&&(r._ignoreNextClose=!0),r.selectBranch(e),r.events.isEnabled("over")&&r.events.dispatchImmediately("over",{type:"over",event:t.event,target:r,branch:e})})),e.interactions.events.on("out",(function(t){t.pointer.touch||r.delayUnselectBranch(e),r.events.isEnabled("out")&&r.events.dispatchImmediately("out",{type:"out",event:t.event,target:r,branch:e})})),e.interactions.events.on("focus",(function(t){r.selectBranch(e)})),e.interactions.events.on("blur",(function(t){r.delayUnselectBranch(e)}));var u=i+1;if(e.menu){for(var c=this.createMenuElement(u),h=e.menu.length,p=0;p<h;p++){var d=new Te;e.menu[p].ascendants=d,e.ascendants.length&&d.copyFrom(e.ascendants),d.push(e),this.drawBranch(c,e.menu[p],u)}if(""==c.innerHTML)return;o.appendChild(c)}e.hidden&&this.hideBranch(e),e.id&&o.setAttribute("id",e.id),e.color&&(o.style.backgroundColor=e.color.hex),t.appendChild(o)}},e.prototype.createMenuElement=function(t){var e=document.createElement(this.menuTag);return e.className=this.getMenuItemClass(t),0===t&&e.setAttribute("role","menu"),e},e.prototype.getMenuItemClass=function(t){var e=this.classPrefix+"-menu "+this.classPrefix+"-menu-level-"+t;return 0===t&&(e+=" "+this.classPrefix+"-menu-root "+this.classPrefix+"-"+this.align+" "+this.classPrefix+"-"+this.verticalAlign),this.adapter.apply("menuClass",{className:e,level:t}).className},e.prototype.createItemElement=function(t,e){var i=document.createElement(this.itemTag);return i.className=this.adapter.apply("itemClass",{className:this.classPrefix+"-item "+this.classPrefix+"-item-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank"),level:t,type:e}).className,i.setAttribute("role","menuitem"),i},e.prototype.createLabelElement=function(t,e){var i=document.createElement(this.labelTag),r=this.classPrefix+"-label "+this.classPrefix+"-label-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank");return this.typeClickable(e)&&(r+=" "+this.classPrefix+"-clickable"),i.className=this.adapter.apply("labelClass",{className:r,level:t,type:e}).className,i.setAttribute("tabindex",this.tabindex.toString()),i.setAttribute("role","menuitem"),i},e.prototype.createIconElement=function(t,e){var i=document.createElement(this.iconTag),r=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank");return this.typeClickable(e)&&(r+=" "+this.classPrefix+"-clickable"),i.className=this.adapter.apply("labelClass",{className:r,level:t,type:e}).className,i.setAttribute("tabindex",this.tabindex.toString()),i.setAttribute("role","menuitem"),i},e.prototype.createSvgElement=function(t,e,i){var r=(new DOMParser).parseFromString(i,"image/svg+xml").documentElement,n=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+t+" "+this.classPrefix+"-item-"+(e||"blank");return this.typeClickable(e)&&(n+=" "+this.classPrefix+"-clickable"),r.setAttribute("class",this.adapter.apply("labelClass",{className:n,level:t,type:e}).className),r.setAttribute("tabindex",this.tabindex.toString()),r.setAttribute("role","menuitem"),r},e.prototype.dispose=function(){this._disposed||(t.prototype.dispose.call(this),this._element&&this._element.parentNode&&this._element.parentNode.removeChild(this._element))},e.prototype.typeClickable=function(t){return S(t)},e.prototype.hasSubMenu=function(t){return!(!t.menu||!t.menu.length)},e.prototype.getSubMenu=function(t){if(t.menu&&t.menu.length)return t.menu},e.prototype.getReaderLabel=function(t,e){return e=li(e),this.hasSubMenu(t)?e+=" ["+this.language.translate("Click, tap or press ENTER to open")+"]":"print"==t.type?e=this.language.translate("Click, tap or press ENTER to print."):this.typeClickable(t.type)&&(e=this.language.translate("Click, tap or press ENTER to export as %1.",void 0,e)),this.adapter.apply("rederLabel",{label:e,branch:t}).label},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},set:function(t){this._container=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{set:function(t){this._menuTag=t,this._itemTag="ul"==t?"li":"div",this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menuTag",{get:function(){return this.adapter.apply("menuTag",{tag:this._menuTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemTag",{get:function(){return this.adapter.apply("itemTag",{tag:this._itemTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelTag",{get:function(){return this.adapter.apply("labelTag",{tag:this._labelTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconTag",{get:function(){return this.adapter.apply("iconTag",{tag:this._iconTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.adapter.apply("align",{align:this._align}).align},set:function(t){this._align=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",{verticalAlign:this._verticalAlign}).verticalAlign},set:function(t){this._verticalAlign=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",{classPrefix:this._classPrefix}).classPrefix},set:function(t){this._classPrefix=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",{defaultStyles:this._defaultStyles}).defaultStyles},set:function(t){this._defaultStyles!=t&&(this._defaultStyles=t,t&&this.loadDefaultCSS()),this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.loadDefaultCSS=function(){var t,e,i;this._disposers.push((t=hr(this.container),e=this.classPrefix||"amexport",i=new _r,un.insertKeyIfEmpty(e,(function(){var r=new Rt([new dr(t,"."+e+"-menu *",{"box-sizing":"border-box"}),new dr(t,"."+e+"-menu-level-0",{position:"absolute",top:"5px",right:"5px"}),new dr(t,"."+e+"-menu-level-0."+e+"-left",{right:"auto",left:"5px"}),new dr(t,"."+e+"-menu-level-0."+e+"-right",{right:"5px",left:"auto"}),new dr(t,"."+e+"-menu-level-0."+e+"-top",{top:"5px",bottom:"auto"}),new dr(t,"."+e+"-menu-level-0."+e+"-bottom",{top:"auto",bottom:"5px"}),new dr(t,"."+e+"-item."+e+"-item-level-0",{opacity:"0.3",width:"30px","min-height":"30px",transition:"all 100ms ease-in-out"}),new dr(t,"div:hover ."+e+"-item."+e+"-item-level-0, ."+e+"-item."+e+"-item-level-0.active",{opacity:"0.9"}),new dr(t,"."+e+"-item."+e+"-item-level-0 > a",{padding:"0","text-align":"center",overflow:"hidden"}),new dr(t,"."+e+"-item."+e+"-item-level-0:before",{display:"block"}),new dr(t,"."+e+"-item",{position:"relative",display:"block",opacity:"0","z-index":"1","border-radius":"3px","background-color":i.getFor("secondaryButton").hex,padding:"0",margin:"1px 1px 0 0",color:i.getFor("secondaryButton").alternative.hex,transition:"all 100ms ease-in-out, opacity 0.5s ease 0.5s"}),new dr(t,"."+e+"-left ."+e+"-item",{margin:"1px 0 0 1px"}),new dr(t,"."+e+"-item:hover, ."+e+"-item.active",{background:i.getFor("secondaryButtonHover").hex,color:i.getFor("secondaryButtonText").hex}),new dr(t,"."+e+"-item > ."+e+"-menu",{position:"absolute",top:"-1px",right:"0","margin-right":"100%"}),new dr(t,"."+e+"-left ."+e+"-item > ."+e+"-menu",{left:"0",right:"auto","margin-left":"100%","margin-right":"auto"}),new dr(t,"."+e+"-right ."+e+"-item > ."+e+"-menu",{left:"auto",right:"0","margin-left":"auto","margin-right":"100%"}),new dr(t,"."+e+"-top ."+e+"-item > ."+e+"-menu",{top:"-1px",bottom:"auto"}),new dr(t,"."+e+"-bottom ."+e+"-item > ."+e+"-menu",{top:"auto",bottom:"0"}),new dr(t,"."+e+"-item > ."+e+"-menu",{display:"none"}),new dr(t,"."+e+"-item:hover > ."+e+"-menu, ."+e+"-item.active > ."+e+"-menu",{display:"block"}),new dr(t,"."+e+"-item:hover > ."+e+"-menu > ."+e+"-item, ."+e+"-item.active > ."+e+"-menu > ."+e+"-item",{opacity:"1"}),new dr(t,"."+e+"-menu",{display:"block","list-style":"none",margin:"0",padding:"0"}),new dr(t,"."+e+"-label",{display:"block",cursor:"default",padding:"0.5em 1em"}),new dr(t,"."+e+"-icon",{display:"block",cursor:"default",padding:"0.2em 0.4em",width:"1.2em",height:"1.2em","min-width":"32px","min-height":"32px",margin:"auto auto","border-radius":"3px"}),new dr(t,"."+e+"-item-level-0 > ."+e+"-icon",{padding:"0.1em 0.2em"}),new dr(t,"."+e+"-clickable",{cursor:"pointer"})]);return new jt((function(){un.removeKey(e),r.dispose()}))})).increment())),this._element&&(this._element.style.display="")},Object.defineProperty(e.prototype,"tabindex",{get:function(){return this.adapter.apply("tabindex",{tabindex:this._tabindex}).tabindex},set:function(t){this._tabindex=t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){var t=this,e=this._language.get();return null==e&&(e=new en,this._language.set(e,e.events.on("localechanged",(function(e){t.invalidate()})))),e},set:function(t){var e=this;this._language.set(t,t.events.on("localechanged",(function(t){e.invalidate()}))),this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.close=function(){var t=this;if(this._ignoreNextClose)this._ignoreNextClose=!1;else{if(this.closeOnClick&&(this._element.style.pointerEvents="none",setTimeout((function(){t._element.style.pointerEvents="auto"}),100)),this._currentSelection&&(this.setBlur(this._currentSelection),this._currentSelection=void 0),this._element)for(var e=this._element.getElementsByClassName("active"),i=e.length-1;i>=0;i--)e[i]&&or(e[i],"active");this.events.dispatchImmediately("closed",{type:"closed",target:this})}},e.prototype.selectBranch=function(t){var e=this;t.closeTimeout&&(this.removeDispose(t.closeTimeout),t.closeTimeout=void 0),ar(t.interactions.element.parentElement,"active"),this._currentSelection&&this._currentSelection!==t&&this._currentSelection.ascendants&&se(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var i=!0,r=function(t){return i=e(t)},n=t.length,a=0;a<n&&(t[a](r),i);++a);}}(ne([this._currentSelection]),this._currentSelection.ascendants.iterator()),(function(i){t.ascendants.contains(i)||t===i||e.unselectBranch(i,!0)})),se(t.ascendants.iterator(),(function(t){t.closeTimeout&&(e.removeDispose(t.closeTimeout),t.closeTimeout=void 0),ar(t.interactions.element.parentElement,"active")})),this._currentSelection=t,this.events.isEnabled("branchselected")&&this.events.dispatchImmediately("branchselected",{type:"branchselected",target:this,branch:t})},e.prototype.unselectBranch=function(t,e){or(t.interactions.element.parentElement,"active"),this._currentSelection==t&&(this._currentSelection=void 0),this.events.isEnabled("branchunselected")&&this.events.dispatchImmediately("branchunselected",{type:"branchunselected",target:this,branch:t})},e.prototype.delayUnselectBranch=function(t,e){var i=this;t.closeTimeout&&(this.removeDispose(t.closeTimeout),t.closeTimeout=void 0),t.closeTimeout=this.setTimeout((function(){i.unselectBranch(t,e)}),this.closeDelay),!0!==e&&t.ascendants&&se(t.ascendants.iterator(),(function(t){i.delayUnselectBranch(t,!0)}))},e.prototype.moveSelection=function(t){if(this._currentSelection){var e;if("up"==t)e=this.getPrevSibling(this._currentSelection);else if("down"==t)e=this.getNextSibling(this._currentSelection);else if("left"==t&&"right"==this.align||"right"==t&&"left"==this.align){var i=this.getSubMenu(this._currentSelection);null!=i&&(e=i[0])}else("right"==t&&"right"==this.align||"left"==t&&"left"==this.align)&&(e=this.getParentItem(this._currentSelection));e&&e!==this._currentSelection&&(this.selectBranch(e),this.setFocus(e),this._currentSelection=e)}},e.prototype.getSiblings=function(t){var e=this.getParentItem(t);return e&&e.menu?e.menu:[]},e.prototype.getParentItem=function(t){return t.ascendants&&t.ascendants.length?t.ascendants.getIndex(t.ascendants.length-1):void 0},e.prototype.getNextSibling=function(t){var e=this.getSiblings(t);if(e.length>1){var i=e.indexOf(t)+1;return e[i=e.length==i?0:i].unsupported?this.getNextSibling(e[i]):e[i]}return t},e.prototype.getPrevSibling=function(t){var e=this.getSiblings(t);if(e.length>1){var i=e.indexOf(t)-1;return e[i=-1==i?e.length-1:i].unsupported?this.getPrevSibling(e[i]):e[i]}return t},e.prototype.setFocus=function(t){if(t.interactions)try{t.interactions.element.focus()}catch(e){}},e.prototype.setBlur=function(t){if(t.interactions)try{t.interactions.element.blur()}catch(e){}},e.prototype.hideBranch=function(t){t.element.style.display="none"},e.prototype.showBranch=function(t){t.element.style.display=""},e}(cn);function pn(t,e,i){return new Promise((function(r,n){var a=S(i)&&"blob"==i.responseType,o=new XMLHttpRequest;if(o.onload=function(){if(200===o.status){var t;if(a)return void(s=t=o.response,new Promise((function(t,e){var i=new FileReader;i.onload=function(e){t(i.result)},i.onerror=function(t){e(t)},i.readAsText(s)}))).then((function(i){var n={xhr:o,error:!1,response:i,blob:t,type:o.getResponseHeader("Content-Type"),target:e};r(n)}));var i={xhr:o,error:!1,response:o.responseText||o.response,blob:t,type:o.getResponseHeader("Content-Type"),target:e};r(i)}else n({xhr:o,error:!0,type:o.getResponseHeader("Content-Type"),target:e});var s},o.onerror=function(){n({xhr:o,error:!0,type:o.getResponseHeader("Content-Type"),target:e})},o.open("GET",t,!0),i&&i.withCredentials&&(o.withCredentials=!0),S(i)){if(S(i.requestHeaders))for(var s=0;s<i.requestHeaders.length;s++){var l=i.requestHeaders[s];o.setRequestHeader(l.key,l.value)}S(i.responseType)&&(o.responseType=i.responseType)}o.send()}))}var dn=/src: ([^;]+);/;function fn(t){return Object(d.b)(this,void 0,void 0,(function(){var e;return Object(d.e)(this,(function(i){switch(i.label){case 0:e=t.sheet,i.label=1;case 1:return i.trys.push([1,2,,4]),[2,e.cssRules];case 2:return i.sent(),[4,new Promise((function(i,r){t.addEventListener("load",(function(){i(e.cssRules)}),!0),t.addEventListener("error",(function(t){r(t)}),!0),setTimeout((function(){r(new Error("Timeout while waiting for <style> to load"))}),1e4)}))];case 3:return[2,i.sent()];case 4:return[2]}}))}))}function mn(t,e,i){return Object(d.b)(this,void 0,void 0,(function(){var r,n,a,o;return Object(d.e)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,pn(e)];case 1:return r=s.sent(),[3,3];case 2:return n=s.sent(),console.error("Failed to load stylesheet",e,n),[2];case 3:(a=t.createElement("style")).textContent=r.response,t.head.appendChild(a),s.label=4;case 4:return s.trys.push([4,,7,8]),[4,fn(a)];case 5:return o=s.sent(),[4,yn(t,e,o,i)];case 6:return s.sent(),[3,8];case 7:return t.head.removeChild(a),[7];case 8:return[2]}}))}))}function yn(t,e,i,r){return Object(d.b)(this,void 0,void 0,(function(){var n,a,o,s,l;return Object(d.e)(this,(function(u){switch(u.label){case 0:for(n=[],a=i.length,o=0;o<a;o++)(s=i[o]).type===CSSRule.IMPORT_RULE?(l=s.href)&&(l=Di(e,l),n.push(mn(t,l,r))):r(e,s);return n.length?[4,Promise.all(n)]:[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}}))}))}function gn(t){return Object(d.b)(this,void 0,void 0,(function(){var e,i;return Object(d.e)(this,(function(r){switch(r.label){case 0:(e=document.createElement("iframe")).src="about:blank",e.setAttribute("title",""),document.head.appendChild(e),r.label=1;case 1:return r.trys.push([1,,3,4]),i=e.contentDocument,[4,Promise.all(ct(document.styleSheets,(function(e){var r=e.href;return null==r?yn(i,location.href,e.cssRules,t):(r=Di(location.href,r),mn(i,r,t))})))];case 2:return r.sent(),[3,4];case 3:return document.head.removeChild(e),[7];case 4:return[2]}}))}))}var bn=function(t){function e(e){var i=t.call(this)||this;return i.adapter=new Ee(i),i._formatOptions=new ye,i._extraSprites=[],i._validateSprites=[],i.dataFieldsOrder=[],i._dynamicDataFields=!0,i._removedObjects=new Te,i._hiddenObjects=[],i._objectsAlreadyHidden=!1,i._filePrefix="amCharts",i.useWebFonts=!0,i.useRetina=!0,i.useSimplifiedExport=!0,i.timeoutDelay=2e3,i._exportRunning=!1,i._container=e,i.className="Export",i._formatOptions.setKey("png",{}),i._formatOptions.setKey("jpg",{quality:.8}),i._formatOptions.setKey("gif",{}),i._formatOptions.setKey("svg",{}),i._formatOptions.setKey("pdf",{fontSize:14,imageFormat:"png",align:"left",addURL:!0,addColumnNames:!0}),i._formatOptions.setKey("json",{indent:2,useLocale:!0}),i._formatOptions.setKey("csv",{addColumnNames:!0,emptyAs:""}),i._formatOptions.setKey("xlsx",{addColumnNames:!0,useLocale:!0,emptyAs:""}),i._formatOptions.setKey("html",{addColumnNames:!0,emptyAs:""}),i._formatOptions.setKey("pdfdata",{fontSize:14,imageFormat:"png",addURL:!0,addColumnNames:!0,emptyAs:""}),i._formatOptions.setKey("print",{delay:500,printMethod:"iframe"}),i.adapter.add("options",(function(t){var e=i._formatOptions.getKey(t.type);return t.options=t.options?ee(e,t.options):e,t})),i.applyTheme(),i.dispatchImmediately("inited"),i}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"menu",{get:function(){return this._menu},set:function(t){var e=this;this._menu&&this.removeDispose(this._menu),this._menu=t,this._menu.container=this.container,this._menu.language=this._language,this._menu.adapter.add("branch",(function(t){return t.branch.unsupported=!e.typeSupported(t.branch.type),t})),this._menu.events.on("hit",(function(t){e.export(t.branch.type,t.branch.options),e.menu.close()})),this._menu.events.on("enter",(function(t){e.export(t.branch.type,t.branch.options),e.menu.close()})),this._menu.events.on("over",(function(t){e._disablePointers()})),this._menu.events.on("out",(function(t){setTimeout((function(){e._releasePointers()}),10)})),this.dispatchImmediately("menucreated"),this._menu.adapter.add("classPrefix",(function(t){return t.classPrefix=Gi.classNamePrefix+t.classPrefix,t})),this._disposers.push(this._menu)},enumerable:!0,configurable:!0}),e.prototype.typeSupported=function(t){var e=!0,i=this.getFormatOptions(t);return S(i)&&i.disabled?e=!1:"pdf"===t||("xlsx"===t?e=!!this._hasData():("print"!=t||window.print)&&(-1===["json","csv","html","pdfdata"].indexOf(t)||this._hasData())||(e=!1)),this.adapter.apply("supported",{supported:e,type:t}).supported},e.prototype._hasData=function(){return this.data&&this.data.length},e.prototype._getFunction=function(t){switch(t){case"png":case"gif":case"jpg":return this.getImage;case"svg":return this.getSVG;case"pdf":case"pdfdata":return this.getPDF;case"xlsx":return this.getExcel;case"csv":return this.getCSV;case"json":return this.getJSON;case"html":return this.getHTML;case"print":return this.getPrint;default:return this.unsupported}},e.prototype.export=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){var i,r,n=this;return Object(d.e)(this,(function(a){switch(a.label){case 0:return"custom"==t?(this.handleCustom(e),[2,!0]):(this._exportRunning=!0,this.events.isEnabled("exportstarted")&&this.events.dispatchImmediately("exportstarted",{type:"exportstarted",target:this,format:t,options:e}),this.showPreloader(),this.timeoutDelay&&(this.hideTimeout(),this._timeoutTimeout=this.setTimeout((function(){n.events.isEnabled("exporttimedout")&&n.events.dispatchImmediately("exporttimedout",{type:"exporttimedout",target:n,format:t,options:e}),n.showTimeout()}),this.timeoutDelay)),this.hideNonExportableSprites(),i=this._getFunction(t),e=this.adapter.apply("options",{options:e,type:t}).options,[4,(i=this.adapter.apply("exportFunction",{func:i,type:t,options:e}).func).call(this,t,e)]);case 1:return r=a.sent(),this._exportRunning=!1,this._releasePointers(),this.restoreNonExportableSprites(),r?(this.events.isEnabled("exportfinished")&&this.events.dispatchImmediately("exportfinished",{type:"exportfinished",target:this,format:t,options:e}),this.hidePreloader(),this.hideTimeout(),this.menu&&this.menu.close(),"print"===t?[2,this.print(r,e,this.adapter.apply("title",{title:this.title,options:e}).title)]:"pdfdata"==t?[2,this.download(r,this.filePrefix+".pdf")]:[2,this.download(r,this.filePrefix+"."+t)]):(this.events.isEnabled("error")&&this.events.dispatchImmediately("error",{type:"error",target:this,format:t,options:e}),[2,!1])}}))}))},e.prototype.unsupported=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){return Object(d.e)(this,(function(t){return[2,""]}))}))},e.prototype.handleCustom=function(t){S(t)&&S(t.callback)&&t.callback.call(t.callbackTarget||this,t)},e.prototype.getPrint=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){return Object(d.e)(this,(function(t){return[2,this.getImage("png",e)]}))}))},e.prototype.getFontFamilies=function(){return Object(d.b)(this,void 0,void 0,(function(){var t,e,i,r,n=this;return Object(d.e)(this,(function(a){switch(a.label){case 0:return t=this.getDOMURL(),e=[],i=[],[4,gn((function(r,a){if(a.type===CSSRule.FONT_FACE_RULE){var o=a.cssText,s=dn.exec(o);if(null!==s){var l=s[1].split(/ *, */).map((function(i){return Object(d.b)(n,void 0,void 0,(function(){var n,a,o,s,l,u;return Object(d.e)(this,(function(c){switch(c.label){case 0:return null!==(n=/^url\(["']?([^"'\)]+)["']?\)([^,]*)$/.exec(i))?[3,1]:[2,i];case 1:a=n[2],o=Di(r,n[1]),c.label=2;case 2:return c.trys.push([2,7,,8]),[4,pn(o,void 0,{responseType:"blob"})];case 3:return s=c.sent(),null==window.navigator.msSaveOrOpenBlob?[3,4]:(l=t.createObjectURL(s.blob),e.push(l),[3,6]);case 4:return[4,(h=s.blob,new Promise((function(t,e){var i=new FileReader;i.onload=function(e){t(i.result)},i.onerror=function(t){e(t)},i.readAsDataURL(h)})))];case 5:l=c.sent(),c.label=6;case 6:return[2,'url("'+l+'")'+a];case 7:return u=c.sent(),console.error("Failed to load font",o,u),[2,null];case 8:return[2]}var h}))}))}));i.push(Promise.all(l).then((function(t){return 0===(t=t.filter((function(t){return null!=t}))).length?"":o.replace(dn,"src: "+t.join(", ")+";")})))}}}))];case 1:return a.sent(),[4,Promise.all(i)];case 2:return r=a.sent(),[2,{blobs:e,cssText:r.filter((function(t){return!!t})).join("\n")}]}}))}))},e.prototype.getImage=function(t,e,i){return Object(d.b)(this,void 0,void 0,(function(){var r,n,a,o,s;return Object(d.e)(this,(function(l){switch(l.label){case 0:return(r=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),S(e)||(e=this.getFormatOptions(t)),[4,this.awaitValidSprites()];case 1:return l.sent(),[4,this.simplifiedImageExport()];case 2:if(!l.sent())return[3,10];l.label=3;case 3:return l.trys.push([3,7,,9]),[4,this.getCanvas(e)];case 4:return n=l.sent(),!1===i?[3,6]:[4,this.addExtras(n,e)];case 5:n=l.sent(),l.label=6;case 6:return a=n.toDataURL(this.getContentType(t),e.quality),this.disposeCanvas(n),r||this.restoreNonExportableSprites(),[2,a];case 7:return o=l.sent(),console.error(o.message+"\n"+o.stack),console.warn("Simple export failed, falling back to advanced export"),[4,this.getImageAdvanced(t,e,i)];case 8:return s=l.sent(),r||this.restoreNonExportableSprites(),[2,s];case 9:return[3,12];case 10:return[4,this.getImageAdvanced(t,e,i)];case 11:return s=l.sent(),r||this.restoreNonExportableSprites(),[2,s];case 12:return[2]}}))}))},e.prototype.addExtras=function(t,e,i){return Object(d.b)(this,void 0,void 0,(function(){var r,n,a,o,s,l,u,c,h,p,f,m,y,g,b=this;return Object(d.e)(this,(function(v){switch(v.label){case 0:return this.extraSprites.length?(r=0,n=0,a=t.width,o=t.height,s=0,l=0,[4,Promise.all(ct(this.extraSprites,(function(t){return Object(d.b)(b,void 0,void 0,(function(){var u,c,h,p;return Object(d.e)(this,(function(d){switch(d.label){case 0:return(u=t instanceof _n?{sprite:t,position:"bottom"}:t).position=u.position||"bottom",u.marginTop=u.marginTop||0,u.marginRight=u.marginRight||0,u.marginBottom=u.marginBottom||0,u.marginLeft=u.marginLeft||0,i?[4,u.sprite.exporting.getCanvasAdvanced(e)]:[3,2];case 1:return c=d.sent(),[3,4];case 2:return[4,u.sprite.exporting.getCanvas(e)];case 3:c=d.sent(),d.label=4;case 4:return h=c.width+u.marginLeft+u.marginRight,p=c.height+u.marginTop+u.marginBottom,"top"==u.position?(a=u.crop?o:N(a,h),n+=p):"right"==u.position?(o=u.crop?o:N(o,p),s+=h):"left"==u.position?(o=u.crop?o:N(o,p),r+=h):"bottom"===u.position&&(a=u.crop?o:N(a,h),l+=p),[2,{canvas:c,position:u.position,left:u.marginLeft,top:u.marginTop,width:h,height:p}]}}))}))})))]):[3,2];case 1:return u=v.sent(),(c=this.getDisposableCanvas()).width=r+a+s,c.height=n+o+l,h=c.getContext("2d"),(p=this.backgroundColor||this.findBackgroundColor(this.sprite.dom))&&(h.fillStyle=p.toString(),h.fillRect(0,0,c.width,c.height)),y=(f=r)+a,g=(m=n)+o,ht(u,(function(t){"top"==t.position?h.drawImage(t.canvas,r+t.left,(m-=t.height)+t.top):"right"==t.position?(h.drawImage(t.canvas,y+t.left,n+t.top),y+=t.width):"left"==t.position?h.drawImage(t.canvas,(f-=t.width)+t.left,n+t.top):"bottom"===t.position&&(h.drawImage(t.canvas,r+t.left,g+t.top),g+=t.height),b.disposeCanvas(t.canvas)})),h.drawImage(t,r,n),[2,c];case 2:return[2,t]}}))}))},e.prototype.getCanvas=function(t){return Object(d.b)(this,void 0,void 0,(function(){var e,i,r,n,a,o,s,l,u,c,h,p,f,m,y,g;return Object(d.e)(this,(function(d){switch(d.label){case 0:S(t)||(t={}),e=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),i=this.getDOMURL(),r=null,n=null,d.label=1;case 1:return d.trys.push([1,,4,5]),o=this.sprite.pixelWidth,s=this.sprite.pixelHeight,l=mr(this.sprite.dom),u=yr(this.sprite.dom),a=this.getDisposableCanvas(),c=this.getPixelRatio(t),a.style.width=o+"px",a.style.height=s+"px",a.width=o*c,a.height=s*c,h=a.getContext("2d"),1!=c&&h.setTransform(c,0,0,c,0,0),e&&(h.fillStyle=e.toString(),h.fillRect(0,0,o,s)),p=[],this.useWebFonts&&p.push(this.getFontFamilies().then((function(t){return n=t.blobs,t.cssText}))),p.push(this.imagesToDataURI(this.sprite.dom,t)),p.push(this.prepForeignObjects(this.sprite.dom,t)),[4,Promise.all(p)];case 2:return f=d.sent(),m=this.normalizeSVG("<style>"+f[0]+"</style>"+this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),t,o,s,l,u),y=new Blob([m],{type:"image/svg+xml"}),r=i.createObjectURL(y),[4,this.loadNewImage(r,o,s,"anonymous")];case 3:return g=d.sent(),h.drawImage(g,0,0),[3,5];case 4:return null!==r&&i.revokeObjectURL(r),null!==n&&ht(n,(function(t){i.revokeObjectURL(t)})),this.restoreRemovedObjects(),[7];case 5:return[2,a]}}))}))},e.prototype.getCanvasAdvanced=function(t){return Object(d.b)(this,void 0,void 0,(function(){var e,i,r,n,a,o,s,l,u,c;return Object(d.e)(this,(function(h){switch(h.label){case 0:return S(t)||(t={}),[4,this.imagesToDataURI(this.sprite.dom,t)];case 1:return h.sent(),e=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),[4,this.canvg];case 2:return i=h.sent(),r=this.sprite.pixelWidth,n=this.sprite.pixelHeight,a=mr(this.sprite.dom),o=yr(this.sprite.dom),s=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),t,r,n,a,o,e),l=this.getDisposableCanvas(),u=this.getPixelRatio(t),l.style.width=r*u+"px",l.style.height=n*u+"px",l.width=r*u,l.height=n*u,c={useCORS:!0},1!=u&&(c.ignoreDimensions=!0,c.scaleWidth=r*u,c.scaleHeight=n*u),[4,i.fromString(l.getContext("2d"),s,c).render()];case 3:return h.sent(),[2,l]}}))}))},e.prototype.getImageAdvanced=function(t,e,i){return Object(d.b)(this,void 0,void 0,(function(){var r,n,a;return Object(d.e)(this,(function(o){switch(o.label){case 0:return(r=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),S(e)||(e=this.getFormatOptions(t)),[4,this.getCanvasAdvanced(e)];case 1:return n=o.sent(),!1===i?[3,3]:[4,this.addExtras(n,e,!0)];case 2:n=o.sent(),o.label=3;case 3:return a=n.toDataURL(this.getContentType(t),e.quality),this.disposeCanvas(n),r||this.restoreNonExportableSprites(),[2,a]}}))}))},e.prototype.getDisposableCanvas=function(){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="-10000px",document.body.appendChild(t),t},e.prototype.disposeCanvas=function(t){document.body.removeChild(t)},e.prototype.getPixelRatio=function(t){return(this.useRetina&&window.devicePixelRatio||1)*(t&&t.scale?t.scale:1)},e.prototype.imagesToDataURI=function(t,i){return Object(d.b)(this,void 0,void 0,(function(){var r,n,a,o,s,l;return Object(d.e)(this,(function(u){switch(u.label){case 0:if(!(r=t.querySelectorAll("image")).length)return[3,2];for(n=[],a=r.length,o=0;o<a;o++)(l=(s=r[o]).getAttributeNS(e.XLINK,"href"))&&(-1!==l.indexOf("data:image")||(-1!==l.indexOf(".svg")?n.push(this.svgToDataURI(s,i)):n.push(this.imageToDataURI(s,i))));return[4,Promise.all(n)];case 1:return u.sent(),[2];case 2:return[2]}}))}))},e.prototype.prepForeignObjects=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){var e,i,r;return Object(d.e)(this,(function(n){if((e=t.querySelectorAll("foreignObject")).length)for(i=e.length,r=0;r<i;r++)this.temporarilyRemoveObject(e[r]);return[2]}))}))},e.prototype.imageToDataURI=function(t,i){return Object(d.b)(this,void 0,void 0,(function(){var r,n,a;return Object(d.e)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.loadNewImage(t.getAttributeNS(e.XLINK,"href"),null,null,"anonymous")];case 1:r=o.sent(),(n=document.createElement("canvas")).width=r.width,n.height=r.height,n.getContext("2d").drawImage(r,0,0);try{return a=n.toDataURL(),t.setAttribute("href",a),[2,a]}catch(s){return!1!==i.keepTainted&&this.temporarilyRemoveObject(t),[2,void 0]}return[3,3];case 2:return o.sent(),i&&!1===i.keepTainted||this.temporarilyRemoveObject(t),[2,void 0];case 3:return[2]}}))}))},e.prototype.svgToDataURI=function(t,i){return Object(d.b)(this,void 0,void 0,(function(){var r,n,a,o;return Object(d.e)(this,(function(s){switch(s.label){case 0:r=t.getAttributeNS(e.XLINK,"href"),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,pn(r)];case 2:return n=s.sent(),a=this.adapter.apply("charset",{charset:"base64",type:"svg",options:i}).charset,o=this.adapter.apply("svgToDataURI",{data:"data:"+this.getContentType("svg")+";"+a+","+btoa(n.response),options:i}).data,t.setAttributeNS(e.XLINK,"href",o),[2,o];case 3:return s.sent(),i&&!1===i.keepTainted||this.temporarilyRemoveObject(t),[2,void 0];case 4:return[2]}}))}))},e.prototype.temporarilyRemoveObject=function(t,e){var i=t.parentElement||t.parentNode;e||(e=this.sprite.paper.add("g").node),i.insertBefore(e,t),i.removeChild(t),this._removedObjects.push({element:t,placeholder:e})},e.prototype.restoreRemovedObjects=function(){for(var t;t=this._removedObjects.pop();)(t.placeholder.parentElement||t.placeholder.parentNode).insertBefore(t.element,t.placeholder)},e.prototype.simplifiedImageExport=function(){return Object(d.b)(this,void 0,void 0,(function(){var t,e,i,r,n,a,o;return Object(d.e)(this,(function(s){switch(s.label){case 0:if(!1===this.useSimplifiedExport)return[2,!1];if(!1===(t=ve.getCache("simplifiedImageExport"))||!0===t)return[2,t];s.label=1;case 1:s.trys.push([1,6,,7]),(e=document.createElement("canvas")).width=1,e.height=1,i=e.getContext("2d"),r=this.getDOMURL(),n=new Blob([this.normalizeSVG("<g></g>",{},1,1)],{type:"image/svg+xml"}),a=r.createObjectURL(n),o=void 0,s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.loadNewImage(a,1,1)];case 3:return o=s.sent(),[3,5];case 4:return s.sent(),[2,!1];case 5:i.drawImage(o,0,0),r.revokeObjectURL(a);try{return ve.setCache("simplifiedImageExport",!0),[2,!0]}catch(l){return ve.setCache("simplifiedImageExport",!1),[2,!1]}return[3,7];case 6:return s.sent(),ve.setCache("simplifiedImageExport",!1),[2,!1];case 7:return[2]}}))}))},e.prototype.loadNewImage=function(t,e,i,r){return new Promise((function(n,a){var o;function s(){if(r){var e=o.src;o.onerror=function(){a(new Error('Loading image "'+t+'" failed'))},o.removeAttribute("crossorigin"),o.src="",o.src=e}else a(new Error('Loading image "'+t+'" failed'))}o=e&&i?new Image(e,i):new Image,r&&o.setAttribute("crossOrigin",r),o.onload=function(){n(o)},o.onabort=s,o.onerror=s,o.src=t}))},e.prototype.getDOMURL=function(){return self.URL||self.webkitURL||self},e.prototype.getSVG=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){var i,r,n,a,o,s,l,u;return Object(d.e)(this,(function(c){switch(c.label){case 0:return(i=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),[4,this.awaitValidSprites()];case 1:return c.sent(),r=this.sprite.pixelWidth,n=this.sprite.pixelHeight,a=mr(this.sprite.dom),o=yr(this.sprite.dom),s=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),e,r,n,a,o),l=this.adapter.apply("charset",{charset:"charset=utf-8",type:"svg",options:e}).charset,u=this.adapter.apply("getSVG",{data:"data:"+this.getContentType(t)+";"+l+","+encodeURIComponent(s),options:e}).data,i||this.restoreNonExportableSprites(),[2,u]}}))}))},e.prototype.normalizeSVG=function(t,e,i,r,n,a,o){var s="";i&&(s+='width="'+i+'px" '),r&&(s+='height="'+r+'px" ');var l="";n&&(l+="font-family: "+n.replace(/"/g,"")+";"),a&&(l+="font-size: "+a+";");var u=[],c=t.match(/<foreignObject[\s\S]*<\/foreignObject>/gi);if(c)for(var h=0;h<c.length;h++)t=t.replace(c[h],"__\xa7\xa7\xa7__"),u.push(c[h]);t.match(/<svg/)?""!==s&&(t=(t=(t=t.replace(/(<svg[^>]*)width="[^"]*"/,"$1")).replace(/(<svg[^>]*)height="[^"]*"/,"$1")).replace(/(<svg)/,"$1"+s)):t='<?xml version="1.0" encoding="utf-8"?><svg '+s+' style="'+l+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+t+"</svg>",o&&(t=t.replace(/(<svg[^>]*>)/,'$1<rect width="100%" height="100%" fill="'+o.rgba+'"/>')),/MSIE |Trident\//.test(navigator.userAgent)&&(t=t.replace(/<feColorMatrix [^\/>]*\/>/gi,""));var p=new RegExp("url\\("+ti(qe()),"g");if(t=t.replace(p,"url(#"),u.length)for(h=0;h<u.length;h++)t=t.replace("__\xa7\xa7\xa7__",u[h]);return this.adapter.apply("normalizeSVG",{data:t,options:e}).data},e.prototype.serializeElement=function(t){return(new XMLSerializer).serializeToString(t)},e.prototype.getPDF=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){function i(t){var e={};e.normal=t.normal.path,f[t.normal.path]=t.normal.bytes,t.bold?(e.bold=t.bold.path,f[t.bold.path]=t.bold.bytes):e.bold=t.normal.path,t.italics?(e.italics=t.italics.path,f[t.italics.path]=t.italics.bytes):e.italics=t.normal.path,t.bolditalics?(e.bolditalics=t.bolditalics.path,f[t.bolditalics.path]=t.bolditalics.bytes):e.bolditalics=t.normal.path,p[t.name]=e}var r,n,a,o,s,l,u,c,h,p,f;return Object(d.e)(this,(function(d){switch(d.label){case 0:return[4,this.getImage(e.imageFormat||"png",e)];case 1:return r=d.sent(),[4,this.pdfmake];case 2:return n=d.sent(),a=[30,30,30,30],o={pageSize:e.pageSize||"A4",pageOrientation:e.pageOrientation||"portrait",pageMargins:e.pageMargins||a,defaultStyle:{font:e.font?e.font.name:void 0},content:[]},s=this.adapter.apply("title",{title:this.title,options:e}).title,l=0,s&&(o.content.push({text:s,fontSize:e.fontSize,bold:!0,margin:[0,0,0,15]}),l+=50),e.addURL&&(o.content.push({text:this.language.translate("Saved from")+": "+document.location.href,fontSize:e.fontSize,margin:[0,0,0,15]}),l+=50),"pdfdata"!=t&&o.content.push({image:r,alignment:e.align||"left",fit:this.getPageSizeFit(o.pageSize,o.pageMargins,l)}),"pdfdata"==t||e.addData?(c=(u=o.content).push,h={},[4,this.getPDFData("pdf",e)]):[3,4];case 3:c.apply(u,[(h.table=d.sent(),h)]),d.label=4;case 4:return o=this.adapter.apply("pdfmakeDocument",{doc:o,options:e}).doc,p=null,f=null,e.font&&(p={},f={},i(e.font),e.extraFonts&&ht(e.extraFonts,i)),[4,new Promise((function(t,e){n.createPdf(o,null,p,f).getDataUrl((function(e){t(e)}))}))];case 5:return[2,d.sent()]}}))}))},e.prototype.getPDFData=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){var t,i,r,n,a,o,s=this;return Object(d.e)(this,(function(l){if(t={body:[]},i=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"pdf"}).dataFields,r=this.data,e.pivot)n=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder,te(i,(function(i,n){var a=[];e.addColumnNames&&a.push(n);for(var o=r.length,l=0;l<o;l++)a.push(s.convertToSpecialFormat(i,r[l][i],e,!0));t.body.push(s.getPDFDataRow(a,e,void 0,!0))}),(function(t,e){var i=n.indexOf(t),r=n.indexOf(e);return i>r?1:i<r?-1:0}));else for(e.addColumnNames&&(t.body.push(this.getPDFDataRow(i,e,void 0,!0)),t.headerRows=1),a=r.length,o=0;o<a;o++)t.body.push(this.getPDFDataRow(r[o],e,i));return[2,this.adapter.apply("pdfmakeTable",{table:t,options:e}).table]}))}))},e.prototype.getPDFDataRow=function(t,e,i,r){var n=this;void 0===r&&(r=!1);var a=[];i||(i=t);var o=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder;return te(i,(function(i,o){var s=n.convertEmptyValue(i,t[i],e),l=r?s:n.convertToSpecialFormat(i,s,e);a.push(l=""+l)}),(function(t,e){var i=o.indexOf(t),r=o.indexOf(e);return i>r?1:i<r?-1:0})),a},e.prototype.getPageSizeFit=function(t,e,i){void 0===i&&(i=0);var r=[0,0,0,0];"number"==typeof e?r=[e,e,e,e]:2==e.length?r=[e[0],e[1],e[0],e[1]]:4==e.length&&(r=e);var n={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]}[t];return n[0]-=r[0]+r[2],n[1]-=r[1]+r[3]+i,n},e.prototype.getExcel=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){var i,r,n,a,o,s,l,u,c,h=this;return Object(d.e)(this,(function(p){switch(p.label){case 0:return[4,this.xlsx];case 1:if(i=p.sent(),r=this.adapter.apply("xlsxWorkbookOptions",{options:{bookType:"xlsx",bookSST:!1,type:"base64"}}).options,n=this.normalizeExcelSheetName(this.adapter.apply("xlsxSheetName",{name:this.title||this.language.translate("Data")}).name),a={SheetNames:[n],Sheets:{}},o=[],s=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"xslx"}).dataFields,e.pivot)l=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder,te(s,(function(t,i){var r=[];e.addColumnNames&&r.push(i);for(var n=h.data.length,a=0;a<n;a++)r.push(h.convertToSpecialFormat(t,h.data[a][t],e,!0));o.push(h.getExcelRow(r,e,void 0,!0))}),(function(t,e){var i=l.indexOf(t),r=l.indexOf(e);return i>r?1:i<r?-1:0}));else for(e.addColumnNames&&o.push(this.getExcelRow(s,e,void 0,!0)),u=this.data.length,c=0;c<u;c++)o.push(this.getExcelRow(this.data[c],e,s));return a.Sheets[n]=i.utils.aoa_to_sheet(o),[2,this.adapter.apply("getExcel",{data:"data:"+this.getContentType(t)+";base64,"+i.write(a,r),options:e}).data]}}))}))},e.prototype.normalizeExcelSheetName=function(t){return ii(t=t.replace(/([:\\\/?*\[\]]+)/g," "),31,"...",!0)},e.prototype.getExcelRow=function(t,e,i,r){var n=this;void 0===r&&(r=!1);var a=[];i||(i=t);var o=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder;return te(i,(function(i,o){var s=n.convertEmptyValue(i,t[i],e),l=r?s:n.convertToSpecialFormat(i,s,e,!0);a.push(l)}),(function(t,e){var i=o.indexOf(t),r=o.indexOf(e);return i>r?1:i<r?-1:0})),a},e.prototype.getCSV=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){var i,r,n,a,o,s,l,u,c,h=this;return Object(d.e)(this,(function(p){if(i="",r=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields,n="",a=this.data,e.pivot)o=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder,te(r,(function(t,r){var o=[];e.addColumnNames&&o.push(r);for(var s=a.length,l=0;l<s;l++)o.push(h.convertToSpecialFormat(t,a[l][t],e,!0));i+=n+h.getCSVRow(o,e,void 0,!0),n="\n"}),(function(t,e){var i=o.indexOf(t),r=o.indexOf(e);return i>r?-1:i<r?1:0}));else{for(s=a.length,l=0;l<s;l++)u=this.getCSVRow(a[l],e,r),e.reverse?i=u+n+i:i+=n+u,n="\n";e.addColumnNames&&(i=this.getCSVRow(r,e,void 0,!0)+n+i)}return c=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getCSV",{data:"data:"+this.getContentType(t)+";"+c+","+encodeURIComponent(i),options:e}).data]}))}))},e.prototype.getCSVRow=function(t,e,i,r){var n=this;void 0===r&&(r=!1);var a=e.separator||",",o=[];i||(i=t);var s=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder;return te(i,(function(i,s){var l=n.convertEmptyValue(i,t[i],e),u=r?l:n.convertToSpecialFormat(i,l,e);u=(u=""+u).replace(/"/g,'""'),(e.forceQuotes||u.search(new RegExp('"|\n|'+a,"g"))>=0)&&(u='"'+u+'"'),o.push(u)}),(function(t,e){var i=s.indexOf(t),r=s.indexOf(e);return i>r?1:i<r?-1:0})),o.join(a)},e.prototype.getHTML=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){var i,r,n,a,o,s,l,u=this;return Object(d.e)(this,(function(c){if(i="<table>",e.tableClass&&(i='<table class="'+e.tableClass+'">'),r=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"html"}).dataFields,n=this.data,e.pivot)a=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,te(r,(function(t,r){var a=[];e.addColumnNames&&a.push(r);for(var o=n.length,s=0;s<o;s++)a.push(u.convertToSpecialFormat(t,n[s][t],e,!0));i+="\n"+u.getHTMLRow(a,e,void 0,!0)}),(function(t,e){var i=a.indexOf(t),r=a.indexOf(e);return i>r?-1:i<r?1:0}));else for(e.addColumnNames&&(i+="\n"+this.getHTMLRow(r,e,void 0,!0,!0)),o=n.length,s=0;s<o;s++)i+="\n"+this.getHTMLRow(n[s],e,r);return i+="</table>",l=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getHTML",{data:"data:"+this.getContentType(t)+";"+l+","+encodeURIComponent(i),options:e}).data]}))}))},e.prototype.getHTMLRow=function(t,e,i,r,n){var a=this;void 0===r&&(r=!1),void 0===n&&(n=!1);var o="\t<tr>";e.rowClass&&(o='\t<tr class="'+e.rowClass+'">'),i||(i=t);var s=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,l=n?"th":"td",u=!0;return te(i,(function(i,n){var s=a.convertEmptyValue(i,t[i],e),c=r?s:a.convertToSpecialFormat(i,s,e);c=(c=""+c).replace(/[\u00A0-\u9999<>\&]/gim,(function(t){return"&#"+t.charCodeAt(0)+";"}));var h=l;e.pivot&&u&&(h="th"),o+=e.cellClass?"\n\t\t<"+h+' class="'+e.cellClass+'">'+c+"</"+h+">":"\n\t\t<"+h+">"+c+"</"+h+">",u=!1}),(function(t,e){var i=s.indexOf(t),r=s.indexOf(e);return i>r?1:i<r?-1:0})),o+="\n\t</tr>"},e.prototype.getJSON=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){var i,r,n,a,o,s,l,u,c=this;return Object(d.e)(this,(function(h){if(r=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields,this._dynamicDataFields)i=this.data;else for(i=[],a=function(t,a){var o=n[a];if("object"==typeof o){var s={};Qt(o,(function(t,i){S(r[t])&&(s[r[t]]=c.convertToSpecialFormat(t,i,e))})),i.push(s)}},o=(n=this.data).length,s=0;s<o;s++)a(0,s);return l=JSON.stringify(i,(function(t,i){return"object"==typeof i&&Qt(i,(function(t,r){i[t]=c.convertToSpecialFormat(t,r,e)})),i}),e.indent),u=this.adapter.apply("charset",{charset:"charset=utf-8",type:t,options:e}).charset,[2,this.adapter.apply("getJSON",{data:"data:"+this.getContentType(t)+";"+u+","+encodeURIComponent(l),options:e}).data]}))}))},e.prototype.convertToSpecialFormat=function(t,e,i,r){if("number"==typeof e)if(this.isDateField(t))e=new Date(e);else{if(this.isDurationField(t))return this.durationFormatter.format(e,this.durationFormat);if(this.isNumberField(t)&&this.numberFormat)return this.numberFormatter.format(e,this.numberFormat)}return e instanceof Date?i.useTimestamps?e=e.getTime():i.useLocale?r||(e=e.toLocaleString()):e=this.dateFormatter.format(e,this.dateFormat):C(e)&&this.isDateField(t)&&this.dateFormat&&(e=this.dateFormatter.format(this.dateFormatter.parse(e),this.dateFormat)),e},e.prototype.convertEmptyValue=function(t,e,i){return S(e)?e:i.emptyAs},e.prototype.download=function(t,e){return Object(d.b)(this,void 0,void 0,(function(){var i,r,n,a,o,s,l,u,c,h,p,f,m,y,g;return Object(d.e)(this,(function(d){if(this.msBlobDownloadSupport()){if(f=t.split(";"),m=f.shift().replace(/data:/,""),t=decodeURIComponent(f.join(";").replace(/^[^,]*,/,"")),-1!=["image/svg+xml","application/json","text/csv"].indexOf(m))return i=new Blob([t],{type:m}),window.navigator.msSaveBlob(i,e),[2,!0];try{n=atob(t),t=n}catch(b){return[2,!1]}for(s=new Array(t.length),l=0;l<t.length;++l)u=t.charCodeAt(l),s[l]=u;c=new Blob([new Uint8Array(s)],{type:m}),window.navigator.msSaveBlob(c,e)}else if(this.blobDownloadSupport()){if((r=document.createElement("a")).download=e,document.body.appendChild(r),f=t.split(";"),m=f.shift().replace(/data:/,""),t=decodeURIComponent(f.join(";").replace(/^[^,]*,/,"")),-1!=["image/svg+xml","application/json","text/csv","text/html"].indexOf(m))return a=new Blob([t],{type:m}),o=window.URL.createObjectURL(a),r.href=o,r.download=e,r.click(),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(o)}),100),[2,!0];try{n=atob(t),t=n}catch(b){return[2,!1]}for(s=new Array(t.length),l=0;l<t.length;++l)u=t.charCodeAt(l),s[l]=u;c=new Blob([new Uint8Array(s)],{type:m}),h=window.URL.createObjectURL(c),r.href=h,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout((function(){window.URL.revokeObjectURL(h)}),100)}else this.linkDownloadSupport()?((p=document.createElement("a")).download=e,p.href=t,document.body.appendChild(p),p.click(),document.body.removeChild(p)):this.legacyIE()?4===(f=t.match(/^data:(.*);[ ]*([^,]*),(.*)$/)).length&&("base64"==f[2]?f[1].match(/^image\//)&&this.showModal('<img src="'+t+'" style="float: left; max-width: 50%; max-height: 80%; margin: 0 1em 0.5em 0; border: 1px solid #eee;" /><p>'+this.language.translate('To save the image, right-click thumbnail on the left and choose "Save picture as..."')+'</p><p style="text-align: center;"><small>'+this.language.translate("(Press ESC to close this message)")+"</small></p>",this.language.translate("Image Export Complete")):(m=void 0,e.match(/\.svg$/)?m="image/svg+xml":(m="text/plain",e+=".txt"),(y=document.createElement("iframe")).width="1px",y.height="1px",y.style.display="none",document.body.appendChild(y),(g=y.contentDocument).open(m,"replace"),g.write(decodeURIComponent(f[3])),g.close(),g.execCommand("SaveAs",!0,e),document.body.removeChild(y))):window.location.href=t;return[2,!0]}))}))},e.prototype.downloadSupport=function(){return this.linkDownloadSupport()||this.msBlobDownloadSupport()},e.prototype.linkDownloadSupport=function(){var t=ve.getCache("linkDownloadSupport");if(!1===t||!0===t)return t;var e=void 0!==document.createElement("a").download;return ve.setCache("linkDownloadSupport",e),e},e.prototype.blobDownloadSupport=function(){return S(window.Blob)},e.prototype.msBlobDownloadSupport=function(){return S(window.navigator.msSaveOrOpenBlob)},e.prototype.legacyIE=function(){var t=document.createElement("div");return t.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e",1==t.getElementsByTagName("i").length},e.prototype.print=function(t,e,i){return Object(d.b)(this,void 0,void 0,(function(){return Object(d.e)(this,(function(r){return"css"==e.printMethod?[2,this.printViaCSS(t,e,i)]:[2,this.printViaIframe(t,e,i)]}))}))},e.prototype.printViaCSS=function(t,e,i){return Object(d.b)(this,void 0,void 0,(function(){var r,n,a,o;return Object(d.e)(this,(function(s){return r=document.documentElement.scrollTop||document.body.scrollTop,n=new dr(hr(this.container),"body > *",{display:"none",position:"fixed",visibility:"hidden",opacity:"0",clipPath:"polygon(0px 0px,0px 0px,0px 0px,0px 0px);"}),i&&document&&document.title&&(a=document.title,document.title=i),(o=new Image).src=t,o.style.maxWidth="100%",o.style.display="block",o.style.position="relative",o.style.visibility="visible",o.style.opacity="1",o.style.clipPath="none",document.body.appendChild(o),this.setTimeout((function(){window.print()}),50),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.delay<1e3?e.delay=1e3:e.delay<100&&(e.delay=100),this.setTimeout((function(){document.body.removeChild(o),n.dispose(),a&&(document.title=document.title),document.documentElement.scrollTop=document.body.scrollTop=r}),e.delay||500),[2,!0]}))}))},e.prototype.printViaIframe=function(t,e,i){return Object(d.b)(this,void 0,void 0,(function(){var r,n;return Object(d.e)(this,(function(a){return(r=document.createElement("iframe")).style.visibility="hidden",document.body.appendChild(r),r.contentWindow.document.open(),r.contentWindow.document.close(),(n=new Image).src=t,n.style.maxWidth="100%",i&&(r.contentWindow.document.title=i),r.contentWindow.document.body.appendChild(n),r.load=function(){r.contentWindow.document.body.appendChild(n)},this.setTimeout((function(){try{r.contentWindow.document.execCommand("print",!1,null)||r.contentWindow.print()}catch(t){r.contentWindow.print()}}),e.delay||50),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.delay<1e3?e.delay=1e3:e.delay<100&&(e.delay=100),this.setTimeout((function(){document.body.removeChild(r)}),e.delay+50||100),[2,!0]}))}))},e.prototype.findBackgroundColor=function(t){var e=1,i=lr(t,"background-color");if((i.match(/[^,]*,[^,]*,[^,]*,[ ]?0/)||"transparent"==i)&&(e=0),0==e){var r=t.parentElement;return r?this.findBackgroundColor(r):Ue("#fff")}return Ue(i,e)},Object.defineProperty(e.prototype,"container",{get:function(){return this.adapter.apply("container",{container:this._container}).container},set:function(t){this._container=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sprite",{get:function(){return this.adapter.apply("sprite",{sprite:this._sprite}).sprite},set:function(t){this._sprite=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraSprites",{get:function(){return this.adapter.apply("extraSprites",{extraSprites:this._extraSprites}).extraSprites},set:function(t){this._extraSprites=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validateSprites",{get:function(){return this.adapter.apply("validateSprites",{validateSprites:this._validateSprites}).validateSprites},set:function(t){this._validateSprites=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.adapter.apply("data",{data:this._data}).data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataFields",{get:function(){return this._dataFields||this.generateDataFields(),this.adapter.apply("dataFields",{dataFields:this._dataFields}).dataFields},set:function(t){this._dataFields=t,this._dynamicDataFields=!1},enumerable:!0,configurable:!0}),e.prototype.handleDataUpdated=function(){this._dynamicDataFields&&(this._dataFields=void 0)},Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this._dateFormatter||(this._dateFormatter=new on,this._dateFormatter.language=this.language),this.adapter.apply("dateFormatter",{dateFormatter:this._dateFormatter}).dateFormatter},set:function(t){this._dateFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this.adapter.apply("dateFormat",{dateFormat:this._dateFormat}).dateFormat},set:function(t){this._dateFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFields",{get:function(){return this._dateFields||(this._dateFields=new Te),this.adapter.apply("dateFields",{dateFields:this._dateFields}).dateFields},set:function(t){this._dateFields=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter||(this._numberFormatter=new an,this._numberFormatter.language=this.language),this.adapter.apply("numberFormatter",{numberFormatter:this._numberFormatter}).numberFormatter},set:function(t){this._numberFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this.adapter.apply("numberFormat",{numberFormat:this._numberFormat}).numberFormat},set:function(t){this._numberFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFields",{get:function(){return this._numberFields||(this._numberFields=new Te),this.adapter.apply("numberFields",{numberFields:this._numberFields}).numberFields},set:function(t){this._numberFields=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormatter",{get:function(){return this._durationFormatter||(this._durationFormatter=new sn,this._durationFormatter.language=this.language),this.adapter.apply("durationFormatter",{durationFormatter:this._durationFormatter}).durationFormatter},set:function(t){this._durationFormatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormat",{get:function(){return this.adapter.apply("durationFormat",{durationFormat:this._durationFormat}).durationFormat},set:function(t){this._durationFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFields",{get:function(){return this._durationFields||(this._durationFields=new Te),this.adapter.apply("durationFields",{durationFields:this._durationFields}).durationFields},set:function(t){this._durationFields=t},enumerable:!0,configurable:!0}),e.prototype.generateDataFields=function(){var t=this;this._dataFields={},this.data.length&&ht(this.data,(function(e){Qt(e,(function(e,i){S(t._dataFields[e])||(t._dataFields[e]=t.adapter.apply("dataFieldName",{name:e,field:e}).name)}))}))},e.prototype.isDateField=function(t){return this.adapter.apply("isDateField",{isDateField:this.dateFields.contains(t),field:t}).isDateField},e.prototype.isNumberField=function(t){return this.adapter.apply("isNumberField",{isNumberField:this.numberFields.contains(t),field:t}).isNumberField},e.prototype.isDurationField=function(t){return this.adapter.apply("isDurationField",{isDurationField:this.durationFields.contains(t),field:t}).isDurationField},e.prototype.getContentType=function(t){var e="";switch(t){case"png":case"gif":e="image/"+t;break;case"jpg":e="image/jpeg";break;case"svg":e="image/svg+xml";break;case"csv":e="text/csv";break;case"json":e="application/json";break;case"html":e="text/html";break;case"pdf":case"pdfdata":e="application/pdf";break;case"xlsx":e="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}return this.adapter.apply("contentType",{contentType:e,type:t}).contentType},Object.defineProperty(e.prototype,"filePrefix",{get:function(){return this.adapter.apply("filePrefix",{filePrefix:this._filePrefix}).filePrefix},set:function(t){this._filePrefix=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this.adapter.apply("backgroundColor",{backgroundColor:this._backgroundColor}).backgroundColor},set:function(t){this._backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.adapter.apply("title",{title:this._title}).title},set:function(t){this._title=t},enumerable:!0,configurable:!0}),e.prototype.showPreloader=function(){var t=this.preloader;t&&(t.progress=.5,t.label.text="...")},e.prototype.hidePreloader=function(){var t=this.preloader;t&&(t.progress=1)},Object.defineProperty(e.prototype,"preloader",{get:function(){return this._sprite&&this._sprite.parent&&this._sprite.parent.preloader?this._sprite.parent.preloader:void 0},enumerable:!0,configurable:!0}),e.prototype.showTimeout=function(){this.showModal(this.adapter.apply("timeoutMessage",{message:this.language.translate("Export operation took longer than expected. Something might have gone wrong.")}).message)},e.prototype.hideTimeout=function(){this._timeoutTimeout&&(this.removeDispose(this._timeoutTimeout),this._timeoutTimeout=null),this.hideModal()},Object.defineProperty(e.prototype,"language",{get:function(){return this._language||(this._language=new en),this._language},set:function(t){this._language=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return this._modal||(this._modal=new zr,this._modal.adapter.add("classPrefix",(function(t){return Gi.classNamePrefix+t}))),this._modal},enumerable:!0,configurable:!0}),e.prototype.showModal=function(t,e){this.hideModal(),this.hidePreloader();var i=this.modal;i.container=this.sprite.svgContainer.SVGContainer,i.content=t,i.readerTitle=e,i.open()},e.prototype.hideModal=function(){this._modal&&this.modal.close()},e.prototype._canvg=function(){return Object(d.b)(this,void 0,void 0,(function(){var t;return Object(d.e)(this,(function(e){switch(e.label){case 0:return[4,i.e(8).then(i.bind(null,"iJDN"))];case 1:return null!=(t=e.sent()).default?[2,t.default]:[2,t]}}))}))},Object.defineProperty(e.prototype,"canvg",{get:function(){return this._canvg()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pdfmake",{get:function(){return null==ln&&(ln=function(){return Object(d.b)(this,void 0,void 0,(function(){var t,e,r,n;return Object(d.e)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([i.e(10).then(i.t.bind(null,"5JmO",7)),i.e(10).then(i.bind(null,"b0eU"))])];case 1:return t=a.sent(),e=t[0],r=t[1],(n=window).pdfMake=n.pdfMake||{},n.pdfMake.vfs=r.default,e.vfs=r.default,[2,e]}}))}))}()),ln},enumerable:!0,configurable:!0}),e.prototype._xlsx=function(){return Object(d.b)(this,void 0,void 0,(function(){return Object(d.e)(this,(function(t){switch(t.label){case 0:return[4,i.e(14).then(i.t.bind(null,"EUZL",7))];case 1:return[2,t.sent()]}}))}))},Object.defineProperty(e.prototype,"xlsx",{get:function(){return this._xlsx()},enumerable:!0,configurable:!0}),e.prototype.setFormatOptions=function(t,e){this._formatOptions.setKey(t,e)},e.prototype.getFormatOptions=function(t){return this._formatOptions.getKey(t)},Object.defineProperty(e.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!0,configurable:!0}),e.prototype._disablePointers=function(){S(this._spriteInteractionsEnabled)||(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled),this.sprite.interactionsEnabled=!1},e.prototype._releasePointers=function(){S(this._spriteInteractionsEnabled)&&!this._exportRunning&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled)},e.prototype.hideNonExportableSprites=function(){var t=this;if(!this._objectsAlreadyHidden){var e=this.sprite.svgContainer;e&&ht(e.nonExportableSprites,(function(e){e.isHidden||e.isHiding||!e.visible||t._hiddenObjects.push(e),e.hide(0)})),this._objectsAlreadyHidden=!0}},e.prototype.restoreNonExportableSprites=function(){this._objectsAlreadyHidden&&(ht(this._hiddenObjects,(function(t){t.show(0)})),this._hiddenObjects=[],this._objectsAlreadyHidden=!1)},e.prototype.awaitValidSprites=function(){return Object(d.b)(this,void 0,void 0,(function(){var t;return Object(d.e)(this,(function(e){switch(e.label){case 0:return t=[],this.validateSprites.length&&ht(this.validateSprites,(function(e,i){e.invalid&&t.push(new Promise((function(t,i){e.events.once("validated",(function(e){t()}))})))})),t.length?[4,Promise.all(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.processConfig=function(e){ve.registeredClasses.ExportMenu=hn,e&&S(e.menu)&&!S(e.menu.type)&&(e.menu.type="ExportMenu"),t.prototype.processConfig.call(this,e)},e.XLINK="http://www.w3.org/1999/xlink",e}(cn),vn=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin"],_n=function(t){function e(){var e=t.call(this)||this;return e.properties={},e._eventDispatcher=new Wi(e),e._bindings={},e._isTemplate=!1,e._isPath=!1,e._inited=!1,e._ready=!1,e.isHiding=!1,e._isHidden=!1,e.isShowing=!1,e.isStandaloneInstance=!1,e._isActive=!1,e._mask=new Vt,e._positionPrecision=3,e._language=new Vt,e._exporting=new Vt,e._exportable=!0,e._bbox={x:0,y:0,width:0,height:0},e.invalid=!1,e.positionInvalid=!1,e.propertyFields={},e.applyOnClones=!1,e._measuredWidthSelf=0,e._measuredHeightSelf=0,e.maxLeft=0,e.maxRight=0,e.maxTop=0,e.maxBottom=0,e.maxLeftSelf=0,e.maxRightSelf=0,e.maxTopSelf=0,e.maxBottomSelf=0,e._isDragged=!1,e._isResized=!1,e._disabled=!1,e._internalDisabled=!1,e._updateDisabled=!1,e._internalDefaultsApplied=!1,e.rollOutDelay=0,e.isBaseSprite=!1,e.shouldClone=!0,e.appeared=!1,e.ex=0,e.ey=0,e.dragWhileResize=!1,e.measureFailed=!1,e.preventShow=!1,e.cloneTooltip=!0,e.className="Sprite",e._disposers.push(e._eventDispatcher),e.group=e.paper.addGroup("g"),e.setPropertyValue("scale",1),e.setPropertyValue("rotation",0),e.setPropertyValue("align","none"),e.setPropertyValue("valign","none"),e.setPropertyValue("pixelPerfect",!1),e.setPropertyValue("visible",!0),e.setPropertyValue("tooltipPosition","fixed"),e.setPropertyValue("verticalCenter","none"),e.setPropertyValue("horizontalCenter","none"),e.setPropertyValue("tooltipX",m(50)),e.setPropertyValue("tooltipX",m(50)),e.setPropertyValue("marginTop",0),e.setPropertyValue("marginBottom",0),e.setPropertyValue("marginLeft",0),e.setPropertyValue("marginRight",0),e.setPropertyValue("dx",0),e.setPropertyValue("dy",0),e.setPropertyValue("paddingTop",0),e.setPropertyValue("paddingBottom",0),e.setPropertyValue("paddingRight",0),e.setPropertyValue("paddingLeft",0),e.setPropertyValue("togglable",!1),e.setPropertyValue("hidden",!1),e.setPropertyValue("urlTarget","_self"),e.setPropertyValue("alwaysShowTooltip",!1),e.setPropertyValue("showTooltipOn","hover"),e._prevMeasuredWidth=0,e._prevMeasuredHeight=0,e._measuredWidth=0,e._measuredHeight=0,e._isMeasured=!0,e.invalidate(),e.applyTheme(),e._disposers.push(e.events),e._disposers.push(e.group),e._disposers.push(e._mask),e._disposers.push(e._language),e._disposers.push(e._exporting),e._disposers.push(new Lt((function(){Qt(e._bindings,(function(t,e){e.dispose()}))}))),e.setPropertyValue("interactionsEnabled",!0),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new Ee(this)),this._adapterO},enumerable:!0,configurable:!0}),e.prototype.applyTheme=function(){t.prototype.applyTheme.call(this),Gi.autoSetClassName&&this.setClassName()},e.prototype.getCurrentThemes=function(){var t=this._themes;if(t)return t;var e=this._parent;return e?e.getCurrentThemes():ve.themes},e.prototype.applyInternalDefaults=function(){this._internalDefaultsApplied=!0},e.prototype.invalidate=function(){this.disabled||this._isTemplate||this.invalid||(this.invalid=!0,ve.addToInvalidSprites(this),wn.requestFrame())},e.prototype.validate=function(){this.dispatchImmediately("beforevalidated"),this._internalDefaultsApplied||this.applyInternalDefaults(),this.beforeDraw(),this.draw(),this.invalid=!1,ve.removeFromInvalidSprites(this),this.afterDraw()},e.prototype.invalidatePosition=function(){this.disabled||this._isTemplate||this.positionInvalid||(this.positionInvalid=!0,ve.addToInvalidPositions(this),wn.requestFrame())},e.prototype.validatePosition=function(){var t=this.pixelX,e=this.pixelY,i=this.dx,r=this.dy,n=t+i,a=e+r;this._updateDisabled&&(this._internalDisabled?this.group.attr({display:"none"}):this.disabled||this.removeSVGAttribute("display"),this._updateDisabled=!1);var o=this.measure(),s=this.group.transformString;this.group.moveTo({x:n,y:a}),this.group.rotation=this.rotation,this.group.scale=this.nonScaling?this.scale/this.globalScale:this.scale,(s!=this.group.transformString||o)&&(null==s?this.dispatch("transformed"):this.dispatchImmediately("transformed"),this.dispatch("positionchanged"),"hit"!=this.showTooltipOn&&"always"!=this.showTooltipOn||this.updateTooltipPosition()),t+i==n&&e+r==a&&(ve.removeFromInvalidPositions(this),this.positionInvalid=!1);var l=this._maskRectangle;l&&this._clipElement.moveTo({x:l.x-t,y:l.y-e})},e.prototype.beforeDraw=function(){},e.prototype.draw=function(){},e.prototype.afterDraw=function(){var t,e;if((this.isMeasured||"none"!==this.horizontalCenter||"none"!==this.verticalCenter)&&this.measureElement(),this._inited)this.dispatch("validated");else{if(this._adapterO)try{for(var i=Object(d.i)(this._adapterO.keys()),r=i.next();!r.done;r=i.next()){var n=r.value;switch(n){case"mask":case"fill":case"opacity":case"fillOpacity":case"stroke":case"strokeOpacity":case"strokeWidth":case"shapeRendering":case"strokeDasharray":case"strokeDashoffset":case"strokeLinecap":case"strokeLinejoin":case"textDecoration":case"fontSize":case"fontFamily":case"fontWeight":this[n]=this[n]}}}catch(a){t={error:a}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.applyFilters(),this.visible=this.visible,this.interactionsEnabled=this.getPropertyValue("interactionsEnabled"),this._inited=!0,this.showOnInit||(this.appeared=!0),this.hidden&&this.hide(0),this.applyMask(),this.dispatch("validated"),this.dispatch("inited"),this.dispatchReady()}"always"==this.showTooltipOn&&(!this.visible||this.disabled||this.__disabled?this.hideTooltip(0):this.showTooltip())},e.prototype.dispatchReady=function(){this.isReady()||(this._ready=!0,this.dispatch("ready"))},e.prototype.reinit=function(){this._inited=!1,this.setState(this.defaultState),this.invalidate()},e.prototype.handleGlobalScale=function(){this.dispatch("globalscalechanged"),this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth),this.nonScaling&&this.validatePosition(),this.updateFilterScale()},e.prototype.updateFilterScale=function(){var t=this;se(this.filters.iterator(),(function(e){e.scale=t.globalScale}))},e.prototype.removeFromInvalids=function(){ve.removeFromInvalidSprites(this),ve.removeFromInvalidPositions(this)},e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),this.isMeasured=e.isMeasured,this.states.copyFrom(e.states),e.filters.length>0&&e.filters.each((function(t){i.filters.push(t.clone())})),e._adapterO&&this.adapter.copyFrom(e._adapterO),e._interaction&&this.interactions.copyFrom(e.interactions),e._plugins&&this.plugins.copyFrom(e.plugins),this.configField=e.configField,this.applyOnClones=e.applyOnClones,this.disabled=e.disabled,this.virtualParent=e.virtualParent,this.exportable=e.exportable,e._tooltip&&(this._tooltip?this._tooltip.copyFrom(e.tooltip):e.cloneTooltip?this.tooltip=e.tooltip.clone():this._tooltip=e.tooltip),this._showSystemTooltip=e.showSystemTooltip,Ye(e.propertyFields,this.propertyFields),Ye(e.properties,this),e.fillModifier&&(this.fillModifier=e.fillModifier.clone()),e.strokeModifier&&(this.strokeModifier=e.strokeModifier.clone())},e.prototype.dispose=function(){if(!this.isDisposed()){if("always"==this.showTooltipOn&&this.tooltip&&this.tooltip.hide(),this.dispatchImmediately("beforedisposed"),this.isBaseSprite){if(this.htmlContainer)for(;this.htmlContainer.childNodes.length>0;)this.htmlContainer.removeChild(this.htmlContainer.firstChild);this.isBaseSprite=!1}if(t.prototype.dispose.call(this),this._adapterO&&this._adapterO.clear(),this.applyOnClones&&this._clones)for(var e=this._clones.length-1;e>=0;e--)this._clones.getIndex(e).dispose();this._svgContainer&&this._svgContainer.dispose(),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0),this._urlDisposer&&this._urlDisposer.dispose(),this.removeFromInvalids(),this.element&&this.element.dispose(),this.group&&this.group.dispose(),this._numberFormatter&&this._numberFormatter.dispose(),this._focusFilter&&this._focusFilter.dispose();var i=this.stroke;!i||i instanceof Ne||!i.dispose||this.clonedFrom&&this.clonedFrom.stroke==i||i.dispose();var r=this.fill;if(!r||r instanceof Ne||!r.dispose||this.clonedFrom&&this.clonedFrom.fill==r||r.dispose(),S(this.id)&&this.map.removeKey(this.id),this.parent=void 0,this._filters)for(;this._filters.length>0;){var n=this._filters.getIndex(0);n.dispose(),this._filters.removeValue(n)}this._alwaysShowDisposers=void 0}},Object.defineProperty(e.prototype,"isTemplate",{get:function(){return this._isTemplate},set:function(t){t=v(t),this._isTemplate!=t&&(this._isTemplate=t,this instanceof Sn&&se(this.children.iterator(),(function(e){e.isTemplate=t})),t?(this.parent=this._parent,this.removeFromInvalids()):this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSystemTooltip",{get:function(){return S(this._showSystemTooltip)?this._showSystemTooltip:this.virtualParent?this.virtualParent.showSystemTooltip:!!this._parent&&this._parent.showSystemTooltip},set:function(t){t=v(t),this._showSystemTooltip!=t&&(this._showSystemTooltip=t,this.applyAccessibility())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topParent",{get:function(){return this._topParent?this._topParent:this._parent?this._parent.topParent:void 0},set:function(t){this._topParent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(t){if(!this._isTemplate){var e=this._parent;e!=t&&(e&&e.children.removeValue(this),this._parent=t,t?(this.topParent=t.topParent,t.isTemplate&&(this.isTemplate=!0),this.baseId=t.baseId,t.children.push(this),this._tooltip&&!this._tooltipContainer&&(this._tooltip.parent=t.tooltipContainer),this._dataItem||(this.dataItem=t.dataItem),this.handleAlwaysShowTooltip(),this.dispatchImmediately("parentset")):this.topParent=void 0)}},enumerable:!0,configurable:!0}),e.prototype.handleAlwaysShow=function(){this.showTooltip()},e.prototype.handleAlwaysShowTooltip=function(){var t=this,e=this._alwaysShowDisposers;if(e&&ht(e,(function(t){t.dispose()})),this._alwaysShowDisposers=[],"always"==this.showTooltipOn)for(;null!=t;){var i=t.events.on("visibilitychanged",this.handleAlwaysShow,this,!1);this.addDisposer(i),this._alwaysShowDisposers.push(i),t=t.parent}},Object.defineProperty(e.prototype,"virtualParent",{get:function(){return this._virtualParent},set:function(t){this._virtualParent=t},enumerable:!0,configurable:!0}),e.prototype.appendDefs=function(){this.filterElement&&this.paper.appendDef(this.filterElement);var t=this.fill;t&&t.element&&this.paper.appendDef(t.element);var e=this.stroke;if(e&&e.element&&this.paper.appendDef(e.element),this.fillModifier&&this.fill instanceof Ne){var i=this.fillModifier.modify(this.fill);i&&i.element&&this.paper.appendDef(i.element)}if(this.strokeModifier&&this.stroke instanceof Ne){var r=this.strokeModifier.modify(this.stroke);r&&r.element&&this.paper.appendDef(r.element)}this._clipPath&&this.paper.appendDef(this._clipPath),!1===this._exportable&&(this.exportable=!1)},Object.defineProperty(e.prototype,"map",{get:function(){var t=this.topParent;return t?t.map:(this._map||(this._map=new ye),this._map)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delayedMap",{get:function(){var t=this.topParent;return t?t.delayedMap:(this._delayedMap||(this._delayedMap=new ye),this._delayedMap)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){if(this._id!=t){if(this._id=t,this.map.hasKey(t))throw Error("Duplicate id ("+t+") used on multiple objects.");this.map.setKey(t,this),Gi.autoSetClassName&&this.setClassName()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dom",{get:function(){return this.group.node},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paper",{get:function(){if(this._paper)return this._paper;var t=this._parent;return t?t.paper:qr()},set:function(t){this.setPaper(t)},enumerable:!0,configurable:!0}),e.prototype.setPaper=function(t){return this._paper!=t&&(this._paper=t,this.appendDefs(),!0)},Object.defineProperty(e.prototype,"htmlContainer",{get:function(){if(this._htmlContainer)return this._htmlContainer;var t=this._parent;return t?t.htmlContainer:void 0},set:function(t){this._htmlContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleElement",{get:function(){return this._titleElement||(this._titleElement=this.paper.add("title"),this.group.add(this._titleElement)),this._titleElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptionElement",{get:function(){return this._descriptionElement||(this._descriptionElement=this.paper.add("desc"),this.group.add(this._descriptionElement)),this._descriptionElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters||(this._filters=new Te,this._disposers.push(this._filters.events.onAll(this.applyFilters,this)),this._disposers.push(new Se(this._filters))),this._filters},enumerable:!0,configurable:!0}),e.prototype.setSVGAttributes=function(){this.fill=this.fill,this.opacity=this.opacity,this.fillOpacity=this.fillOpacity,this.stroke=this.stroke,this.strokeOpacity=this.strokeOpacity,this.shapeRendering=this.shapeRendering,this.strokeDasharray=this.strokeDasharray,this.strokeDashoffset=this.strokeDashoffset,this.strokeLinecap=this.strokeLinecap,this.strokeLinejoin=this.strokeLinejoin,this.focusable=this.focusable,this.tabindex=this.tabindex,this.role=this.role},e.prototype.setSVGAttribute=function(t){this.group.attr(t)},e.prototype.removeSVGAttribute=function(t){this.group.removeAttr(t)},e.prototype.setClassName=function(){var t=this.className,e=Gi.classNamePrefix;this.element&&this.element.addClass(e+t),this.group.addClass(e+t+"-group"),S(this.id)&&this.group.addClass(e+this.id),this.userClassName&&this.group.addClass(this.userClassName)},e.prototype.uidAttr=function(){return this.setSVGAttribute({id:this.uid}),this.uid},e.prototype.updateClipPath=function(){var t=this._clipElement;t&&t.moveTo({x:this.mask.pixelX,y:this.mask.pixelY})},e.prototype.createClipPath=function(){if(!this._clipPath){this._clipPath=this.paper.addGroup("clipPath"),this.paper.appendDef(this._clipPath),this._disposers.push(this._clipPath);var t=ve.getUniqueId();this._clipPath.attr({id:t}),this.group.attr({"clip-path":'url("'+qe()+t+'")'})}},e.prototype.applyMask=function(){var t=this.mask;if(this._clipPath&&t)if(t instanceof Sn){this._clipElement.attr({width:N(0,t.pixelWidth),height:N(0,t.pixelHeight)});var e=xi({x:t.pixelX,y:t.pixelY},t.parent,this);this._clipPath.x=e.x,this._clipPath.y=e.y}else t.element&&t.element!=this._clipElement&&(this._clipElement=t.element,this._clipPath.add(this._clipElement)),this._clipPath.scale=t.scale,this._clipPath.x=t.pixelX,this._clipPath.y=t.pixelY,this._clipPath.rotation=t.rotation},e.prototype.applyFilters=function(){var t=this;if(this._filters&&this._filters.length>0){var e=100,i=100;this.filterElement?this.filterElement.removeChildNodes():(this.filterElement=this.paper.addGroup("filter"),this._disposers.push(this.filterElement)),this.paper.appendDef(this.filterElement);var r="filter-"+this.uid;this.filterElement.attr({id:r}),se(this.filters.iterator(),(function(r){r.sprite=t,r.paper=t.paper,t.filterElement.attr({filterUnits:r.filterUnits}),r.appendPrimitives(t.filterElement),r.width>e&&(e=r.width),r.height>i&&(i=r.height),r.scale=t.globalScale})),this.filterElement.attr({width:e+"%",height:i+"%",x:-(e-100)/2+"%",y:-(i-100)/2+"%"}),this.group.attr({filter:'url("'+qe()+r+'")'})}else this.filterElement&&(this.group.removeAttr("filter"),this.filterElement.removeChildNodes())},e.prototype.removeClipPath=function(){this._clipPath&&(this.removeDispose(this._clipPath),this._clipPath=void 0)},e.prototype.setElement=function(t){this.element=t,this.setSVGAttributes(),this.applyAccessibility()},Object.defineProperty(e.prototype,"element",{get:function(){return this._element},set:function(t){this.removeElement(),this._element=t,this.group.add(t),t.node instanceof SVGPathElement&&(this._isPath=!0),this.invalid||this.validate(),Gi.autoSetClassName&&this.setClassName()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"svgContainer",{get:function(){return this._svgContainer?this._svgContainer:this._parent?this._parent.svgContainer:void 0},set:function(t){this._svgContainer=t},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){if(this.element)if(this.definedBBox)this._bbox=this.definedBBox;else{var t=this.element.getBBox();this._bbox={x:t.x,y:t.y,width:t.width,height:t.height}}},e.prototype.updateCenter=function(){if(this.element){var t=this.element.transformString,e=this.bbox,i=0,r=0,n=e.x,a=e.y,o=e.width,s=e.height,l=this.pixelPaddingLeft,u=this.pixelPaddingRight,c=this.pixelPaddingTop,h=this.pixelPaddingBottom,p=N(o+l+u,this.pixelWidth),d=N(s+c+h,this.pixelHeight),f=e.x,m=e.x+p,y=e.y,g=e.y+d,b=this.verticalCenter;switch(this.horizontalCenter){case"none":i=n+l;break;case"left":i=l;break;case"middle":i=l-(o+u+l)/2;break;case"right":i=-u-o}switch(b){case"none":r=a+c;break;case"top":r=c;break;case"middle":r=c-(s+h+c)/2;break;case"bottom":r=-h-s}this._measuredHeight=d,this._measuredWidth=p;var v=L(i-n,this._positionPrecision,!0),_=L(r-a,this._positionPrecision,!0);this.ex=v-l,this.ey=_-c,this.maxLeft=f+v-l,this.maxRight=m+v-l,this.maxTop=y+_-c,this.maxBottom=g+_-c,this.pixelPerfect&&(v-=.5,_-=.5),this.element.moveTo({x:v,y:_}),t!=this.element.transformString&&this.dispatchImmediately("transformed")}},e.prototype.measure=function(){this.updateCenter();var t=this._measuredWidth,e=this._measuredHeight,i=this.maxLeft,r=this.maxRight,n=this.maxTop,a=this.maxBottom;this._measuredWidthSelf=t,this._measuredHeightSelf=e;var o=this._positionPrecision;if(this.maxLeftSelf=this.maxLeft,this.maxRightSelf=this.maxRight,this.maxTopSelf=this.maxTop,this.maxBottomSelf=this.maxBottom,0!==this.rotation||1!==this.scale){this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth);var s=this.paper.svg,l=s.createSVGMatrix(),u=this.rotation;l.a=B(u)*this.scale,l.c=-j(u)*this.scale,l.e=0,l.b=j(u)*this.scale,l.d=B(u)*this.scale,l.f=0;var c=s.createSVGPoint();c.x=i,c.y=n;var h=s.createSVGPoint();h.x=r,h.y=n;var p=s.createSVGPoint();p.x=r,p.y=a;var d=s.createSVGPoint();d.x=i,d.y=a;var f=c.matrixTransform(l),m=h.matrixTransform(l),y=p.matrixTransform(l),g=d.matrixTransform(l);i=Math.min(f.x,m.x,y.x,g.x),r=Math.max(f.x,m.x,y.x,g.x),n=Math.min(f.y,m.y,y.y,g.y),t=r-i,e=(a=Math.max(f.y,m.y,y.y,g.y))-n,this.maxLeft=L(i,o,!0),this.maxRight=L(r,o,!0),this.maxTop=L(n,o,!0),this.maxBottom=L(a,o,!0)}return this._measuredWidth=L(t,o,!0),this._measuredHeight=L(e,o,!0),(this._measuredWidth!=this._prevMeasuredWidth||this._measuredHeight!=this._prevMeasuredHeight)&&(this._prevMeasuredHeight=this._measuredHeight,this._prevMeasuredWidth=this._measuredWidth,this.dispatch("sizechanged"),(this.isHover||"hit"==this.showTooltipOn||"always"==this.showTooltipOn)&&this.tooltip&&this.tooltip.visible&&(S(this.tooltipText)||S(this.tooltipHTML))&&this.updateTooltipPosition(),!0)},e.prototype.insertBefore=function(t){var e=this._parent;if(e){var i=e.children.indexOf(t);-1!==i&&(e.children.moveValue(this,i),e.sortChildren())}return this},e.prototype.insertAfter=function(t){var e=this._parent;if(e){var i=e.children.indexOf(t);-1!==i&&(e.children.moveValue(this,i+1),e.sortChildren())}return this},e.prototype.removeElement=function(){this._element&&(this.removeDispose(this._element),this._element=void 0)},e.prototype.getRelativeX=function(t){return t instanceof f?t.value:this._parent?t/this._parent.innerWidth:0},e.prototype.getRelativeY=function(t){return t instanceof f?t.value:this._parent?t/this._parent.innerHeight:0},e.prototype.getPixelX=function(t){var e=0;return k(t)?e=t:t instanceof f&&this._parent&&(e=L(this._parent.innerWidth*t.value,this._positionPrecision,!0)),e},e.prototype.getPixelY=function(t){var e=0;return k(t)?e=t:t instanceof f&&this._parent&&(e=L(this._parent.innerHeight*t.value,this._positionPrecision,!0)),e},e.prototype.moveTo=function(t,e,i,r){this.isDragged&&!r||(t&&(k(t.x)&&this.setPropertyValue("x",L(t.x,this._positionPrecision,!0)),k(t.y)&&this.setPropertyValue("y",L(t.y,this._positionPrecision,!0))),k(e)&&(this.rotation=e),k(i)&&(this.scale=i),this.invalidatePosition())},Object.defineProperty(e.prototype,"mask",{get:function(){return this._adapterO?this._adapterO.apply("mask",this._mask.get()):this._mask.get()},set:function(t){var e=this;this._mask.get()!==t&&(t?(this.createClipPath(),t instanceof Sn?this._clipElement=this.paper.add("rect"):(t.isMeasured=!1,t.element&&(this._clipElement=t.element)),this._clipElement&&this._clipPath.add(this._clipElement),this._mask.set(t,new Rt([t.events.on("maxsizechanged",(function(){e.inited&&e.applyMask()}),void 0,!1),t.events.on("validated",this.applyMask,this,!1),t.events.on("positionchanged",this.applyMask,this,!1)])),this.applyMask()):(this._mask.reset(),this.group.removeAttr("clip-path"),this.removeClipPath()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskRectangle",{get:function(){return this._maskRectangle},set:function(t){t?(this.createClipPath(),this._clipElement||(this._clipElement=this.paper.add("rect"),this._clipPath.add(this._clipElement)),this._clipElement.attr({width:t.width,height:t.height})):(this.removeClipPath(),this._clipElement=void 0),this._maskRectangle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMeasured",{get:function(){return this._isMeasured},set:function(t){(t=v(t))||(this._measuredWidth=0,this._measuredHeight=0),this._isMeasured!=t&&(this._isMeasured=t,this.invalidatePosition())},enumerable:!0,configurable:!0}),e.prototype.hitTest=function(t){this.invalid&&this.validate(),t.invalid&&t.validate();var e=this.pixelX,i=this.pixelY,r=t.pixelX,n=t.pixelY;return!(r>e+this.measuredWidth||r+t.measuredWidth<e||n>i+this.measuredHeight||n+t.measuredHeight<i)},Object.defineProperty(e.prototype,"inited",{get:function(){return this._inited},enumerable:!0,configurable:!0}),e.prototype.isReady=function(){return this._ready},Object.defineProperty(e.prototype,"states",{get:function(){if(!this._states){var t=new Hi;this._states=new ge(t),this._disposers.push(this._states.events.on("insertKey",this.processState,this,!1)),this._disposers.push(this._states.events.on("setKey",this.processState,this,!1)),this._disposers.push(new me(this._states)),this._disposers.push(t)}return this._states},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenState",{get:function(){if(!this.states.getKey("hidden")){var t=this.states.create("hidden");t.properties.opacity=0,t.properties.visible=!1}return this.states.getKey("hidden")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultState",{get:function(){return this.states.getKey("default")||(this.states.create("default").properties.opacity=1),this.states.getKey("default")},enumerable:!0,configurable:!0}),e.prototype.processState=function(t){var e=t.newValue;if(e.sprite=this,e.name=t.key,(this.states.hasKey("hover")||"hover"==this.showTooltipOn&&(S(this.tooltipHTML)||S(this.tooltipText)))&&(this.hoverable=!0),(this.states.hasKey("down")||"hover"==this.showTooltipOn&&(S(this.tooltipHTML)||S(this.tooltipText)))&&(this.clickable=!0),this.states.hasKey("focus")&&(this.focusable=!0),this.applyOnClones)for(var i=this.clones.values,r=i.length,n=0;n<r;++n){var a=i[n];a.isDisposed()||a.states.setKey(e.name,e)}},Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new Qi(this._animations))),this._animations},enumerable:!0,configurable:!0}),e.prototype.getSvgPoint=function(t){try{var e=this.htmlContainer.getBoundingClientRect();return{x:t.x-e.left,y:t.y-e.top}}catch(i){return t}},e.prototype.animate=function(t,e,i){return new tr(this,t,e,i).start()},e.prototype.setState=function(t,e,i){var r;if(t instanceof Hi)this.states.setKey(t.name,t),r=t;else if(!(r=this.states.getKey(t)))return;if("hover"==r.name){if(this.isHidden)return;this.isHover=!0}return"hidden"==r.name?this.isHiding=!0:this.visible||this.setVisibility(r.properties.visible||this.defaultState.properties.visible),"active"==r.name&&(this.isActive=!0),k(e)||(e=r.transitionDuration),S(i)||(i=r.transitionEasing),this.transitTo(r,e,i)},e.prototype.applyCurrentState=function(t){var e=this.setState(this.defaultState,t);return this.isHover&&(e=this.setState("hover",t)),this.isDown&&this.interactions.downPointers.length&&(e=this.setState("down",t)),this.isFocused=this.isFocused,this.isActive&&(e=this.setState("active",t),this.isHover&&this.states.hasKey("hoverActive")&&(e=this.setState("hoverActive",t))),e},e.prototype.transitTo=function(t,e,i){var r,n=this,a=[];if(Qt(t.allValues,(function(t,e){var i=n[t];e!=i&&null==n.defaultState.properties[t]&&(n.defaultState.properties[t]=i),"__unset"!=e&&a.push({from:i,to:e,property:t})})),a.length>0&&((r=this.animate(a,e,i))&&!r.isFinished()?this._disposers.push(r.events.on("animationended",(function(){n.dispatchImmediately("transitionended")}))):this.dispatchImmediately("transitionended")),t.filters.length>0){var o=[];se(t.filters.iterator(),(function(t){var r=t.clone();o.push(r);var a=[];se(n.filters.iterator(),(function(t){t.className==r.className&&(he(n.defaultState.filters.iterator(),(function(t){return t.className===r.className}))||n.defaultState.filters.push(t),Qt(r.properties,(function(e,i){var r=t.properties[e];r!=i&&a.push({property:e,from:r,to:i})})))})),r.animate(a,e,i)})),this.filters.clear(),this.filters.pushAll(o)}return r},e.prototype.isInTransition=function(){return this.animations.length>0},Object.defineProperty(e.prototype,"isHover",{get:function(){return!!this.isInteractive()&&this.interactions.isHover},set:function(t){(t=v(t))!==this.isHover&&this.isInteractive()&&(this.interactions.isHover=t,t?this.handleOver():(this.interactions.isRealHover=!1,this.handleOut()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDragged",{get:function(){return this._isDragged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResized",{get:function(){return this._isResized},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDown",{get:function(){return!!this.isInteractive()&&this.interactions.isDown},set:function(t){t=v(t),this.isInteractive()&&this.isDown!=t&&(this.interactions.isDown=t,t?this.handleDown():this.handleUp())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFocused",{get:function(){return!!this.isInteractive()&&this.interactions.isFocused},set:function(t){t=v(t),this.focusable&&this.isFocused!=t&&this.isInteractive()&&(this.interactions.isFocused=t,!0===t?this.handleFocus():this.handleBlur())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},set:function(t){this.setActive(t)},enumerable:!0,configurable:!0}),e.prototype.setActive=function(t){t=v(t),this._isActive!==t&&(this._isActive=t,t&&this.states.hasKey("active")?(this.setState("active"),this.isHover&&this.states.hasKey("hoverActive")&&this.setState("hoverActive")):this.applyCurrentState(),this.dispatchImmediately("toggled"))},Object.defineProperty(e.prototype,"disabled",{get:function(){var t=this.getPropertyValue("disabled");return S(t)?t:this.virtualParent?this.virtualParent.disabled:!!this._parent&&this._parent.disabled},set:function(t){this.setDisabled(t)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(t){if(t=v(t),this.getPropertyValue("disabled")!=t){if(this.setPropertyValue("disabled",t,!0),t)this.parent=this._parent,this.removeFromInvalids(),this.group.attr({display:"none"}),this.dispatch("disabled");else{if(this._parent){var e=this._parent.element;e.hasChild(this.group)||e.add(this.group)}this instanceof Sn?(this.deepInvalidate(),this._background&&this._background.invalidate()):this.invalidate(),this.__disabled||this.removeSVGAttribute("display"),this.dispatch("enabled")}return this.dispatch("transformed"),wn.requestFrame(),!0}return!1},Object.defineProperty(e.prototype,"__disabled",{get:function(){return this._internalDisabled},set:function(t){this._internalDisabled!=t&&(this._internalDisabled=t,this._updateDisabled=!0,this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter?this._numberFormatter:this.virtualParent?this.virtualParent.numberFormatter:this._parent?this._parent.numberFormatter:(this._numberFormatter=new an,this._numberFormatter.language=this.language,this.numberFormatter)},set:function(t){this._numberFormatter=t,this._numberFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.virtualParent?this.virtualParent.dateFormatter:this._parent?this._parent.dateFormatter:(this._dateFormatter=new on,this._dateFormatter.language=this.language,this.dateFormatter)},set:function(t){this._dateFormatter=t,this._dateFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durationFormatter",{get:function(){return this._durationFormatter?this._durationFormatter:this.virtualParent?this.virtualParent.durationFormatter:this._parent?this._parent.durationFormatter:(this._durationFormatter=new sn,this._durationFormatter.language=this.language,this.durationFormatter)},set:function(t){this._durationFormatter=t,this._durationFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){var t=this._language.get();return t||(this.virtualParent?this.virtualParent.language:this._parent?this._parent.language:(t=new en,this.language=t,t))},set:function(t){var e=this;this._language.get()!==t&&this._language.set(t,t.events.on("localechanged",(function(t){if(e._numberFormatter&&(e._numberFormatter.language=e.language),e._dateFormatter&&(e._dateFormatter.language=e.language),e._durationFormatter&&(e._durationFormatter.language=e.language),e._exporting.get()){var i=e._exporting.get();i.numberFormatter.language=e.language,i.dateFormatter.language=e.language,i.durationFormatter.language=e.language,i.language=e.language}e instanceof Sn&&e.deepInvalidate()})))},enumerable:!0,configurable:!0}),e.prototype.populateString=function(t,e){if(S(t)){t=b(t);var i=(t=nn().escape(t)).match(/\{([^}]+)\}/g),r=void 0;if(i)for(r=0;r<i.length;r++){var n=i[r].replace(/\{([^}]+)\}/,"$1"),a=this.getTagValue(n,"",e);S(a)||(a=""),t=t.split(i[r]).join(a)}t=nn().unescape(t)}else t="";return this._adapterO?this._adapterO.apply("populateString",t):t},e.prototype.getTagValue=function(t,e,i){var r;S(i)||(i=this.dataItem);for(var n,a=[],o=/([^.]+)\(([^)]*)\)|([^.]+)/g;null!==(n=o.exec(t));)if(n[3])a.push({prop:n[3]});else{var s=[];if(""!=ri(n[2]))for(var l=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,u=void 0;null!==(u=l.exec(n[2]));)s.push(u[1]||u[2]||u[3]);a.push({method:n[1],params:s})}if(i){S(r=this.getTagValueFromObject(a,i.values))&&!I(r)||(r=this.getTagValueFromObject(a,i));var c=i.dataContext;!S(r)&&c&&!S(r=this.getTagValueFromObject(a,i.dataContext))&&c.dataContext&&(r=this.getTagValueFromObject(a,c.dataContext)),!S(r)&&i.component&&i.component.dataItem!==i&&(r=i.component.getTagValue(t,e))}return S(r)||(r=this.getTagValueFromObject(a,this.populateStringFrom||this)),!S(r)&&this._parent&&(r=this._parent.getTagValue(t,e)),r},e.prototype.getTagValueFromObject=function(t,e,i){for(var r=e,n=!1,a=0,o=t.length;a<o;a++){var s=t[a];if(s.prop){if(!S(r=r[s.prop]))return}else switch(s.method){case"formatNumber":var l=hi(r);S(l)&&(r=this.numberFormatter.format(l,i||s.params[0]||void 0),n=!0);break;case"formatDate":var u=void 0;if(!P(u=C(r)?this.dateFormatter.parse(r):ci(r))||y(u.getTime()))return;S(u)&&(r=this.dateFormatter.format(u,i||s.params[0]||void 0),n=!0);break;case"formatDuration":var c=hi(r);S(c)&&(r=this.durationFormatter.format(c,i||s.params[0]||void 0,s.params[1]||void 0),n=!0);break;case"urlEncode":case"encodeURIComponent":r=encodeURIComponent(r);break;default:r[s.method]&&r[s.method].apply(this,s.params)}}if(!n){var h=[{method:"",params:i}];if(S(i)){var p=function(t){if(void 0===t)return"string";var e=(t=(t=(t=t.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return e?e[1]:"number"===t?"number":"date"===t?"date":"duration"===t?"duration":t.match(/[#0]/)?"number":t.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"}(i);"number"===p?h[0].method="formatNumber":"date"===p?h[0].method="formatDate":"duration"===p&&(h[0].method="formatDuration")}else k(r)?(h[0].method="formatNumber",h[0].params=""):P(r)&&(h[0].method="formatDate",h[0].params="");h[0].method&&(r=this.getTagValueFromObject(h,r))}return r},Object.defineProperty(e.prototype,"dataItem",{get:function(){if(!this._dataItem){if(this.virtualParent)return this.virtualParent.dataItem;if(this._parent)return this._parent.dataItem}return this._dataItem},set:function(t){this.setDataItem(t)},enumerable:!0,configurable:!0}),e.prototype.setDataItem=function(t){var e=this;if(this._dataItem!=t){if(this._dataItem=t,t){if(this.configField){var i=t.dataContext;i&&(this.config=i[this.configField],!this.config&&i.dataContext&&(this.config=i.dataContext[this.configField]))}var r=t.dataContext;if(r){var n=r.dataContext;Qt(this.propertyFields,(function(t,i){if(S(r[i]))e[t]=r[i];else if(n){var a=n[i];S(a)&&(e[t]=a)}}))}}this.invalidate()}},e.prototype.getPropertyValue=function(t){var e=this.properties[t];return this._isTemplate||this._adapterO&&(e=this._adapterO.apply(t,e)),e},e.prototype.setColorProperty=function(t,e,i){var r=this.properties[t];return!(e instanceof Ne&&r instanceof Ne&&e.toString()==r.toString())&&this.setPropertyValue(t,e,i)},e.prototype.setPercentProperty=function(t,e,i,r,n,a){if(k(e=function(t){return!S(t)||k(t)||function(t){return t instanceof f}(t)?t:C(t)&&-1!=t.indexOf("%")?m(_(t)):_(t)}(e)))return e=L(e,n,a),this.setPropertyValue(t,e,i,r);var o=this.properties[t];return!(e instanceof f&&o instanceof f&&e.value==o.value)&&this.setPropertyValue(t,e,i,r)},e.prototype.setPropertyValue=function(t,e,i,r){if(this.properties[t]!==e&&!this.isDisposed()){if(this.properties[t]=e,this.events.isEnabled("propertychanged")&&this.events.dispatchImmediately("propertychanged",{type:"propertychanged",target:this,property:t}),i&&this.invalidate(),r&&this.invalidatePosition(),this.applyOnClones)for(var n=this.clones.values,a=n.length,o=0;o<a;++o){var s=n[o];s.isDisposed()||(s[t]=e)}return!0}return!1},e.prototype.bind=function(t,e,i,r){var n=this;void 0===i&&(i=t),S(this._bindings[t])&&this._bindings[t].dispose(),this[t]=e[i],this._bindings[t]=e.events.on("propertychanged",(function(a){if(a.property===i){var o=e[i];r&&(o=r(o)),n[t]=o}}))},e.prototype.observe=function(t,e,i,r){var n=this;return new Rt(ct(Tt(t),(function(t){return n.events.on("propertychanged",(function(r){r.property===t&&e.call(i,r)}),i,r)})))},e.prototype.applyAccessibility=function(){var t=this.readerTitle,e=this.readerDescription,i=this.role,r=this.readerHidden,n=this.readerChecked,a=this.readerControls,o=this.readerLive,s=this.readerOrientation,l=this.readerValueNow,u=this.readerValueText,c=[],h=[],p=this.readerLabelledBy;p&&c.push(p);var d=this.readerDescribedBy;if(d&&h.push(d),!this.showSystemTooltip&&t&&(e=e?t+" -- "+e:t,t=void 0),!t||e||this.showSystemTooltip){if(t){var f=this.titleElement,m=this.uid+"-title";f.node.textContent!=t&&(f.node.textContent=t,f.attr({id:m})),c.push(m)}else this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0);var y=this.uid+"-description";if(e){var g=this.descriptionElement;g.node.textContent!=e&&(g.node.textContent=e,g.attr({id:y})),h.push(y)}else this._descriptionElement&&(this.group.removeElement(this._descriptionElement),this._descriptionElement=void 0,_t(h,y))}else this.setSVGAttribute({"aria-label":t}),this.removeSVGAttribute("aria-description"),this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0),this._descriptionElement&&(this.group.removeElement(this._descriptionElement),this._descriptionElement=void 0);c.length?this.setSVGAttribute({"aria-labelledby":c.join(" ")}):this.removeSVGAttribute("aria-labelledby"),h.length?this.setSVGAttribute({"aria-describedby":h.join(" ")}):this.removeSVGAttribute("aria-describedby"),i?this.setSVGAttribute({role:i}):this.removeSVGAttribute("role"),r?this.setSVGAttribute({"aria-hidden":"true"}):this.removeSVGAttribute("aria-hidden"),n?this.setSVGAttribute({"aria-checked":"true"}):!1===n?this.setSVGAttribute({"aria-checked":"false"}):this.removeSVGAttribute("aria-checked"),a?this.setSVGAttribute({"aria-controls":a}):this.removeSVGAttribute("aria-controls"),o?this.setSVGAttribute({"aria-live":o}):this.removeSVGAttribute("aria-live"),s?this.setSVGAttribute({"aria-orientation":s}):this.removeSVGAttribute("aria-orientation"),l?this.setSVGAttribute({"aria-valuenow":l}):this.removeSVGAttribute("aria-valuenow"),u?this.setSVGAttribute({"aria-valuetext":u}):this.removeSVGAttribute("aria-valuetext")},Object.defineProperty(e.prototype,"readerTitle",{get:function(){var t=this.getPropertyValue("readerTitle");return S(t)&&this.dataItem?this.populateString(t):t},set:function(t){t=x(t),this.setPropertyValue("readerTitle",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerDescription",{get:function(){return this.getPropertyValue("readerDescription")},set:function(t){t=x(t),this.setPropertyValue("readerDescription",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"role",{get:function(){return this.getPropertyValue("role")},set:function(t){t=x(t),this.setPropertyValue("role",t)&&(this.applyAccessibility(),"slider"==t&&(this.setSVGAttribute({"aria-valuemin":"0"}),this.setSVGAttribute({"aria-valuemax":"100"})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerHidden",{get:function(){return this.getPropertyValue("readerHidden")},set:function(t){t=v(t),this.setPropertyValue("readerHidden",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerChecked",{get:function(){return this.getPropertyValue("readerChecked")},set:function(t){t=v(t),this.setPropertyValue("readerChecked",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerControls",{get:function(){return this.getPropertyValue("readerControls")},set:function(t){t=x(t),this.setPropertyValue("readerControls",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerLive",{get:function(){return this.getPropertyValue("readerLive")},set:function(t){t=x(t),this.setPropertyValue("readerLive",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerLabelledBy",{get:function(){return this.getPropertyValue("readerLabelledBy")},set:function(t){t=x(t),this.setPropertyValue("readerLabelledBy",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerDescribedBy",{get:function(){return this.getPropertyValue("readerDescribedBy")},set:function(t){t=x(t),this.setPropertyValue("readerDescribedBy",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerOrientation",{get:function(){return this.getPropertyValue("readerOrientation")},set:function(t){t=x(t),this.setPropertyValue("readerOrientation",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerValueNow",{get:function(){return this.getPropertyValue("readerValueNow")},set:function(t){t=x(t),this.setPropertyValue("readerValueNow",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readerValueText",{get:function(){return this.getPropertyValue("readerValueText")},set:function(t){t=x(t),this.setPropertyValue("readerValueText",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyboardOptions",{get:function(){if(!this.interactions.keyboardOptions){if(this.virtualParent)return this.virtualParent.keyboardOptions;if(this._parent)return this._parent.keyboardOptions}return this.interactions.keyboardOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseOptions",{get:function(){if(!this.interactions.mouseOptions){if(this.virtualParent)return this.virtualParent.mouseOptions;if(this._parent)return this._parent.mouseOptions}return this.interactions.mouseOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interactions",{get:function(){if(!this._interaction){var t=Vr().getInteraction(this.dom);this._interaction=t,this._interaction.clickable=this.clickable,this._interaction.hoverable=this.hoverable,this._interaction.trackable=this.trackable,this._interaction.draggable=this.draggable,this._interaction.swipeable=this.swipeable,this._interaction.resizable=this.resizable,this._interaction.wheelable=this.wheelable,this._interaction.contextMenuDisabled=this.contextMenuDisabled,this._interaction.inert=this.inert,this._interaction.sprite=this,this._disposers.push(this._interaction)}return this._interaction},enumerable:!0,configurable:!0}),e.prototype.isInteractive=function(){return!!this._interaction},Object.defineProperty(e.prototype,"focusable",{get:function(){return this.getPropertyValue("focusable")},set:function(t){var e=this;t=v(t),this.setPropertyValue("focusable",t)&&(t||this.isInteractive())&&(this.interactions.focusable=t,t?(this.setSVGAttribute({focusable:t}),this._tabindex||(this.tabindex=0)):(this.removeSVGAttribute("focusable"),this.tabindex=void 0),this.interactions.setEventDisposer("sprite-focusable",t,(function(){return new Rt([e.events.on("blur",e.handleBlur,e,!1),e.events.on("focus",e.handleFocus,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleFocus=function(t){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!0),this.focusFilter&&this.filters.push(this.focusFilter),this.hoverOnFocus&&(this.isHover=!0,this.handleOver()))},e.prototype.handleBlur=function(t){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!1),this.focusFilter&&this.filters.removeValue(this.focusFilter),this.hoverOnFocus&&(this.isHover=!1,this.handleOut()))},Object.defineProperty(e.prototype,"focusFilter",{get:function(){return this._focusFilter||(this.virtualParent?this.virtualParent.focusFilter:this._parent?this._parent.focusFilter:void 0)},set:function(t){this._focusFilter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverOnFocus",{get:function(){return this.getPropertyValue("hoverOnFocus")},set:function(t){t!==this.hoverOnFocus&&this.setPropertyValue("hoverOnFocus",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){var t=this._tabindex;return null!=t?t:this.virtualParent?this.virtualParent.tabindex:this._parent?this._parent.tabindex:void 0},set:function(t){t=_(t),this.setPropertyValue("tabindex",t)&&k(t)&&(this.interactions.tabindex=t,this.setSVGAttribute({tabindex:t}),this._tabindex=t,this.focusable=t>-1||void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inertiaOptions",{get:function(){return!this.interactions.inertiaOptions&&this._parent?this._parent.inertiaOptions:this.interactions.inertiaOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draggable",{get:function(){return this.getPropertyValue("draggable")},set:function(t){var e=this;t=v(t),this.setPropertyValue("draggable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.draggable=t,this.interactions.setEventDisposer("sprite-draggable",t,(function(){return new Rt([e.events.on("down",e.handleDown,e,!1),e.events.on("dragstart",e.handleDragStart,e,!1),e.events.on("drag",e.handleDragMove,e,!1),e.events.on("dragstop",e.handleDragStop,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleDragStart=function(t){this.interactions.isTouchProtected&&t.touch||(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this._isDragged=!0,this.hideTooltip(0))},e.prototype.dragStart=function(t){this._isDragged=!0,Vr().dragStart(this.interactions,t)},e.prototype.handleDragStop=function(t){this.interactions.isTouchProtected&&t.touch||(this._isDragged=!1,this.showTooltip(),this.interactions.originalPosition=void 0)},e.prototype.dragStop=function(t,e){this._isDragged=!1,Vr().dragStop(this.interactions,t,e)},e.prototype.handleDragMove=function(t){if(!this.interactions.isTouchProtected||!t.touch){var e=this.interactions.originalPosition;if(e&&this._isDragged){var i=this._parent.globalScale*this.svgContainer.cssScale;this.moveTo({x:e.x+t.shift.x/i,y:e.y+t.shift.y/i},void 0,void 0,!0)}this.dispatchImmediately("dragged",t)}},Object.defineProperty(e.prototype,"inert",{get:function(){return this.getPropertyValue("inert")},set:function(t){t=v(t),this.setPropertyValue("inert",t)&&(t||this.isInteractive())&&(this.interactions.inert=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverOptions",{get:function(){if(!this.interactions.hoverOptions){if(this.virtualParent)return this.virtualParent.hoverOptions;if(this._parent)return this._parent.hoverOptions}return this.interactions.hoverOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hoverable",{get:function(){return this.getPropertyValue("hoverable")},set:function(t){var e=this;t=v(t),this.setPropertyValue("hoverable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.hoverable=t,this.interactions.setEventDisposer("sprite-hoverable",t,(function(){return new Rt([e.events.on("over",e.handleOver,e,!1),e.events.on("out",e.handleOut,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleOver=function(t){if(this._outTimeout&&this._outTimeout.dispose(),this.isHover){this.states.hasKey("hover")&&(this.isHidden||this.applyCurrentState());var e=void 0;t&&t.pointer&&(e=wi(t.pointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale)),"hover"==this.showTooltipOn&&this.showTooltip(e)}else"hover"==this.showTooltipOn&&this.hideTooltip(),!this.isHidden&&this.states.hasKey("hover")&&this.applyCurrentState()},e.prototype.handleOut=function(t){var e=this;this.tooltip&&this.tooltip.targetSprite==this&&this.tooltip.keepTargetHover?this._outTimeout=this.setTimeout((function(){e.tooltip.isHover||(e.tooltip.targetSprite==e&&e.hideTooltip(),e._outTimeout=e.setTimeout(e.handleOutReal.bind(e),e.rollOutDelay))}),10):("hover"==this.showTooltipOn&&this.hideTooltip(),this._outTimeout=this.setTimeout(this.handleOutReal.bind(this),this.rollOutDelay))},e.prototype.handleOutReal=function(){this.isHidden||this.isHiding||!this.states.hasKey("hover")||this.applyCurrentState()},Object.defineProperty(e.prototype,"hitOptions",{get:function(){if(!this.interactions.hitOptions){if(this.virtualParent)return this.virtualParent.hitOptions;if(this._parent)return this._parent.hitOptions}return this.interactions.hitOptions},enumerable:!0,configurable:!0}),e.prototype.handleDown=function(t){1===this.interactions.downPointers.length&&(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this.interactions.originalAngle=this.rotation,this.interactions.originalScale=this.scale,this.states.hasKey("down")&&this.setState("down"))},e.prototype.handleUp=function(t){var e=this;this._isResized=!1,this.states.hasKey("down")&&this.applyCurrentState(),"hit"==this.showTooltipOn&&(this.updateTooltipPosition(t.pointer.point),this._disposers.push(ve.events.once("exitframe",(function(){e.showTooltip()}))),this._disposers.push(Vr().body.events.once("down",(function(t){e.hideTooltip()}))))},Object.defineProperty(e.prototype,"clickable",{get:function(){return this.getPropertyValue("clickable")},set:function(t){var e=this;t=v(t),this.setPropertyValue("clickable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.clickable=t,this.interactions.setEventDisposer("sprite-clickable",t,(function(){return new Rt([e.events.on("down",e.handleDown,e,!1),e.events.on("up",e.handleUp,e,!1)])})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"togglable",{get:function(){return this.getPropertyValue("togglable")},set:function(t){var e=this;t=v(t),this.setPropertyValue("togglable",t)&&(t||this.isInteractive())&&this.interactions.setEventDisposer("sprite-togglable",t,(function(){return e.events.on("hit",e.handleToggle,e,!1)}))},enumerable:!0,configurable:!0}),e.prototype.handleToggle=function(t){this.isActive=!this.isActive},Object.defineProperty(e.prototype,"contextMenuDisabled",{get:function(){return this.getPropertyValue("contextMenuDisabled")},set:function(t){t=v(t),this.setPropertyValue("contextMenuDisabled",t)&&(this.interactions.contextMenuDisabled=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.getPropertyValue("url")},set:function(t){this.setPropertyValue("url",t)&&(this._urlDisposer&&this._urlDisposer.dispose(),Ke(t)&&(this._urlDisposer=this.events.on("hit",this.urlHandler,this,!1),this.clickable=!0,this.cursorOverStyle=Qr.pointer))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseId",{get:function(){return!this._baseId&&this._parent&&(this.baseId=this._parent.baseId),this._baseId},set:function(t){this.setBaseId(t)},enumerable:!0,configurable:!0}),e.prototype.setBaseId=function(t){t!=this._baseId&&(this.invalid&&(this.invalid=!1,ve.removeFromInvalidSprites(this),this.invalidate()),this._baseId=t)},Object.defineProperty(e.prototype,"baseSprite",{get:function(){return this.isBaseSprite?this:this._parent?this._parent.baseSprite:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlTarget",{get:function(){return this.getPropertyValue("urlTarget")},set:function(t){this.setPropertyValue("urlTarget",t)},enumerable:!0,configurable:!0}),e.prototype.urlHandler=function(t){if(Ke(this.url)){var e=this.populateString(this.url);"_self"===this.urlTarget?window.location.href=e:window.open(e,this.urlTarget)}},Object.defineProperty(e.prototype,"swipeOptions",{get:function(){if(!this.interactions.swipeOptions){if(this.virtualParent)return this.virtualParent.swipeOptions;if(this._parent)return this._parent.swipeOptions}return this.interactions.swipeOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeable",{get:function(){return this.getPropertyValue("swipeable")},set:function(t){t=v(t),this.setPropertyValue("swipeable",t)&&(this.applyCursorStyle(),(t||this.isInteractive())&&(this.interactions.swipeable=t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackable",{get:function(){return this.getPropertyValue("trackable")},set:function(t){t=v(t),this.setPropertyValue("trackable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.trackable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelable",{get:function(){return this.getPropertyValue("wheelable")},set:function(t){this.setPropertyValue("wheelable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.wheelable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this.getPropertyValue("resizable")},set:function(t){var e=this;t=v(t),this.setPropertyValue("resizable",t)&&(t||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.resizable=t,this.interactions.setEventDisposer("sprite-resizable",t,(function(){return new Rt([e.events.on("down",e.handleDown,e,!1),e.events.on("resize",e.handleResize,e,!1)])})))},enumerable:!0,configurable:!0}),e.prototype.handleResize=function(t){if((!this.interactions.isTouchProtected||!t.touch)&&(this._isResized=!0,this.scale=this.interactions.originalScale*t.scale,this.validatePosition(),this.draggable||this.dragWhileResize)){this._isDragged=!1;var e=q(wi(t.point1,this.htmlContainer,this.svgContainer.cssScale),wi(t.point2,this.htmlContainer,this.svgContainer.cssScale)),i=Pi(t.startPoint1,this._parent),r=Pi(t.startPoint2,this._parent),n=this.interactions.originalPosition,a=this.interactions.originalScale;if(n){var o=q({x:(i.x-n.x)/a,y:(i.y-n.y)/a},{x:(r.x-n.x)/a,y:(r.y-n.y)/a}),s=vi(e,this._parent);this.moveTo({x:s.x-o.x*this.scale,y:s.y-o.y*this.scale},void 0,void 0,!0)}}},Object.defineProperty(e.prototype,"cursorOptions",{get:function(){if(!this.interactions.cursorOptions){if(this.virtualParent)return this.virtualParent.cursorOptions;if(this._parent)return this._parent.cursorOptions}return this.interactions.cursorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorOverStyle",{set:function(t){this.cursorOptions.overStyle||(this.interactions.cursorOptions={defaultStyle:this.cursorOptions.defaultStyle}),this.cursorOptions.overStyle=t,Vr().applyCursorOverStyle(this.interactions)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorDownStyle",{set:function(t){this.cursorOptions.downStyle=t},enumerable:!0,configurable:!0}),e.prototype.applyCursorStyle=function(){},Object.defineProperty(e.prototype,"interactionsEnabled",{get:function(){return!1!==this.getPropertyValue("interactionsEnabled")&&(this.virtualParent?this.virtualParent.interactionsEnabled:!this._parent||this._parent.interactionsEnabled)},set:function(t){if(t=v(t),this.setPropertyValue("interactionsEnabled",t)){var e=null;t?this.group.node.style.pointerEvents="":e="none",this.group.node.style.pointerEvents=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exporting",{get:function(){return this.getExporting()},set:function(t){this._exporting.set(t,t)},enumerable:!0,configurable:!0}),e.prototype.getExporting=function(){var t=this._exporting.get();return t||(!this.isStandaloneInstance&&this._parent?this._parent.exporting:((t=new bn(this.svgContainer.SVGContainer)).sprite=this,t.language=this.language,t.numberFormatter=this.numberFormatter,t.dateFormatter=this.dateFormatter,t.durationFormatter=this.durationFormatter,this._exporting.set(t,t),t))},Object.defineProperty(e.prototype,"exportable",{get:function(){return this._exportable},set:function(t){var e=this.svgContainer;this._exportable=t,e&&(t?_t(e.nonExportableSprites,this):-1==lt(e.nonExportableSprites,this)&&e.nonExportableSprites.push(this))},enumerable:!0,configurable:!0}),e.prototype.modalPrefix=function(t){return Gi.classNamePrefix+t},Object.defineProperty(e.prototype,"modal",{get:function(){var t=this.svgContainer;if(t){var e=t.modal;return e.adapter.has("classPrefix",this.modalPrefix)||e.adapter.add("classPrefix",this.modalPrefix),e}},enumerable:!0,configurable:!0}),e.prototype.openModal=function(t,e){var i=this.svgContainer;if(i)return i.openModal(t,e)},e.prototype.closeModal=function(){var t=this.svgContainer;t&&t.closeModal()},Object.defineProperty(e.prototype,"popups",{get:function(){var t=this.svgContainer;if(t){var e=t.popups;return e.template.sprite=this,e.template.adapter.has("classPrefix",this.modalPrefix)||e.template.adapter.add("classPrefix",this.modalPrefix),e}},enumerable:!0,configurable:!0}),e.prototype.openPopup=function(t,e){var i=this.svgContainer;if(i)return i.openPopup(t,e)},e.prototype.closeAllPopups=function(){var t=this.svgContainer;t&&t.closeAllPopups()},Object.defineProperty(e.prototype,"x",{get:function(){return this.getPropertyValue("x")},set:function(t){this.isDragged||this.setPercentProperty("x",t,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelX",{get:function(){var t=V(this.getPixelX(this.x),this.minX,this.maxX);return this._adapterO?this._adapterO.apply("pixelX",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeX",{get:function(){return this._adapterO?this._adapterO.apply("relativeX",this.getRelativeX(this.x)):this.getRelativeX(this.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minX",{get:function(){return this.getPropertyValue("minX")},set:function(t){k(t)&&(t=L(t,this._positionPrecision,!0),this.setPropertyValue("minX",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this.getPropertyValue("maxX")},set:function(t){k(t)&&(t=L(t,this._positionPrecision,!0),this.setPropertyValue("maxX",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.getPropertyValue("y")},set:function(t){this.isDragged||this.setPercentProperty("y",t,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelY",{get:function(){var t=V(this.getPixelY(this.y),this.minY,this.maxY);return this._adapterO?this._adapterO.apply("pixelY",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeY",{get:function(){return this._adapterO?this._adapterO.apply("relativeY",this.getRelativeX(this.y)):this.getRelativeX(this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this.getPropertyValue("minY")},set:function(t){k(t)&&(t=L(t,this._positionPrecision,!0),this.setPropertyValue("minY",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this.getPropertyValue("maxY")},set:function(t){k(t)&&(t=L(t,this._positionPrecision,!0),this.setPropertyValue("maxY",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx",{get:function(){return this.getPropertyValue("dx")},set:function(t){k(t)&&(t=L(t,this._positionPrecision,!0),this.setPropertyValue("dx",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy",{get:function(){return this.getPropertyValue("dy")},set:function(t){k(t)&&(t=L(t,this._positionPrecision,!0),this.setPropertyValue("dy",t,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.getPropertyValue("rotation")},set:function(t){k(t=_(t))||(t=0),this.setPropertyValue("rotation",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this.getPropertyValue("align")},set:function(t){t=x(t),this.setPropertyValue("align",t)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valign",{get:function(){return this.getPropertyValue("valign")},set:function(t){t=x(t),this.setPropertyValue("valign",t)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalCenter",{get:function(){return this.getPropertyValue("horizontalCenter")},set:function(t){t=x(t),this.setPropertyValue("horizontalCenter",t)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalCenter",{get:function(){return this.getPropertyValue("verticalCenter")},set:function(t){t=x(t),this.setPropertyValue("verticalCenter",t)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){var t=this.getPropertyValue("maxWidth");if(!k(t)&&this._parent){var e=this._parent.maxWidth;return"absolute"!=this._parent.layout&&"none"!=this.align&&null!=this.align&&(e=e-this.pixelMarginLeft-this.pixelMarginRight),e}return t},set:function(t){this.setMaxWidth(t)},enumerable:!0,configurable:!0}),e.prototype.setMaxWidth=function(t){var e=this.maxWidth,i=this.maxHeight;this.setPropertyValue("maxWidth",t)&&(k(this.relativeWidth)&&this.invalidate(),this.dispatchImmediately("maxsizechanged",{type:"maxsizechanged",target:this,previousWidth:e,previousHeight:i}))},Object.defineProperty(e.prototype,"maxHeight",{get:function(){var t=this.getPropertyValue("maxHeight");if(!k(t)&&this._parent){var e=this._parent.maxHeight;return"absolute"!=this._parent.layout&&"none"!=this.valign&&null!=this.valign&&(e=e-this.pixelMarginTop-this.pixelMarginBottom),e}return t},set:function(t){this.setMaxHeight(t)},enumerable:!0,configurable:!0}),e.prototype.setMaxHeight=function(t){var e=this.maxWidth,i=this.maxHeight;this.setPropertyValue("maxHeight",t)&&(k(this.relativeHeight)&&this.invalidate(),this.dispatchImmediately("maxsizechanged",{type:"maxsizechanged",target:this,previousWidth:e,previousHeight:i}))},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(t){this.setPropertyValue("minWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(t){this.setPropertyValue("minHeight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(t){this.setPercentProperty("width",t,!0,!1,this._positionPrecision,!0)&&(this.percentWidth=void 0,this.relativeWidth=void 0,t instanceof f?(this.percentWidth=t.percent,k(this._pixelWidth)&&(this.maxWidth=void 0),this._pixelWidth=void 0):(this._pixelWidth=Number(t),this.maxWidth=this._pixelWidth),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(t){this.setPercentProperty("height",t,!0,!1,this._positionPrecision,!0)&&(this.percentHeight=void 0,this._relativeHeight=void 0,t instanceof f?(this.percentHeight=t.percent,k(this._pixelHeight)&&(this.maxHeight=void 0),this._pixelHeight=void 0):(this._pixelHeight=Number(t),this.maxHeight=this._pixelHeight),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelWidth",{get:function(){var t;t=k(this.percentWidth)?this.maxWidth:k(this._pixelWidth)?this._pixelWidth:0;var e=this.minWidth;null!=e&&t<e&&(t=e);var i=L(t,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelWidth",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelHeight",{get:function(){var t;t=k(this.percentHeight)?this.maxHeight:k(this._pixelHeight)?this._pixelHeight:0;var e=this.minHeight;null!=e&&t<e&&(t=e);var i=L(t,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelHeight",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeWidth",{get:function(){var t=this._relativeWidth;if(k(t))return this._adapterO?this._adapterO.apply("relativeWidth",t):t},set:function(t){this._relativeWidth!=t&&(this._relativeWidth=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeHeight",{get:function(){var t=this._relativeHeight;if(k(t))return this._adapterO?this._adapterO.apply("relativeHeight",t):t},set:function(t){this._relativeHeight!=t&&(this._relativeHeight=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measuredWidth",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredWidth",this._measuredWidth):this._measuredWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measuredHeight",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredHeight",this._measuredHeight):this._measuredHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outerWidth",{get:function(){var t=this.pixelWidth+this.pixelMarginRight+this.pixelMarginLeft;return this._adapterO?this._adapterO.apply("outerWidth",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outerHeight",{get:function(){var t=this.pixelHeight+this.pixelMarginTop+this.pixelMarginBottom;return this._adapterO?this._adapterO.apply("outerHeight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerWidth",{get:function(){var t=Math.max(0,this.pixelWidth-this.pixelPaddingRight-this.pixelPaddingLeft);return this._adapterO?this._adapterO.apply("innerWidth",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerHeight",{get:function(){var t=Math.max(0,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom);return this._adapterO?this._adapterO.apply("innerHeight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalScale",{get:function(){var t=this.scale;return this._parent&&(t*=this._parent.globalScale),this._adapterO?this._adapterO.apply("globalScale",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.getPropertyValue("scale")},set:function(t){(t=_(t))<0&&(t=0),t!=this.getPropertyValue("scale")&&(this.setPropertyValue("scale",t,!1,!0),this.handleGlobalScale())},enumerable:!0,configurable:!0}),e.prototype.margin=function(t,e,i,r){return this.marginTop=t,this.marginRight=e,this.marginBottom=i,this.marginLeft=r,this},Object.defineProperty(e.prototype,"marginLeft",{get:function(){return this.getPropertyValue("marginLeft")},set:function(t){this.setPercentProperty("marginLeft",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginRight",{get:function(){return this.getPropertyValue("marginRight")},set:function(t){this.setPercentProperty("marginRight",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginTop",{get:function(){return this.getPropertyValue("marginTop")},set:function(t){this.setPercentProperty("marginTop",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marginBottom",{get:function(){return this.getPropertyValue("marginBottom")},set:function(t){this.setPercentProperty("marginBottom",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginRight",{get:function(){var t=this.getPixelX(this.marginRight);return this._adapterO?this._adapterO.apply("pixelMarginRight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginRight",{get:function(){var t=this.getRelativeX(this.marginRight);return this._adapterO?this._adapterO.apply("relativeMarginRight",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginLeft",{get:function(){var t=this.getPixelX(this.marginLeft);return this._adapterO?this._adapterO.apply("pixelMarginLeft",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginLeft",{get:function(){var t=this.getRelativeX(this.marginLeft);return this._adapterO?this._adapterO.apply("relativeMarginLeft",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginTop",{get:function(){var t=this.getPixelY(this.marginTop);return this._adapterO?this._adapterO.apply("pixelMarginTop",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginTop",{get:function(){var t=this.getRelativeY(this.marginTop);return this._adapterO?this._adapterO.apply("relativeMarginTop",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelMarginBottom",{get:function(){var t=this.getPixelY(this.marginBottom);return this._adapterO?this._adapterO.apply("pixelMarginBottom",t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeMarginBottom",{get:function(){var t=this.getRelativeY(this.marginBottom);return this._adapterO?this._adapterO.apply("relativeMarginBottom",t):t},enumerable:!0,configurable:!0}),e.prototype.padding=function(t,e,i,r){return this.paddingTop=t,this.paddingRight=e,this.paddingBottom=i,this.paddingLeft=r,this},Object.defineProperty(e.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft")},set:function(t){this.setPercentProperty("paddingLeft",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight")},set:function(t){this.setPercentProperty("paddingRight",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingTop",{get:function(){return this.getPropertyValue("paddingTop")},set:function(t){this.setPercentProperty("paddingTop",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddingBottom",{get:function(){return this.getPropertyValue("paddingBottom")},set:function(t){this.setPercentProperty("paddingBottom",t,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingRight",{get:function(){return this.getPixelX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingRight",{get:function(){return this.getRelativeX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingLeft",{get:function(){return this.getPixelX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingLeft",{get:function(){return this.getRelativeX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingTop",{get:function(){return this.getPixelY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingTop",{get:function(){return this.getRelativeY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPaddingBottom",{get:function(){return this.getPixelY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePaddingBottom",{get:function(){return this.getRelativeY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(t){this.setPath(t)},enumerable:!0,configurable:!0}),e.prototype.setPath=function(t){return!!this.setPropertyValue("path",t)&&(this._adapterO&&(t=this._adapterO.apply("path",t)),this._isPath||(this.element&&(!this.element.node||this.element.node instanceof SVGPathElement)||(this.element=this.paper.add("path")),this._isPath=!0),S(t)?this.element.attr({d:t}):this.element.removeAttr("d"),this.invalidatePosition(),this.inited||this.events.once("inited",this.validatePosition,this,!1),!0)},Object.defineProperty(e.prototype,"fillModifier",{get:function(){return this.getPropertyValue("fillModifier")},set:function(t){this.setPropertyValue("fillModifier",t)&&this.setFill(this.fill)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeModifier",{get:function(){return this.getPropertyValue("strokeModifier")},set:function(t){this.setPropertyValue("strokeModifier",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillOpacity",{get:function(){return this.getPropertyValue("fillOpacity")},set:function(t){t=E(t,0,1),this.setPropertyValue("fillOpacity",t)&&this.setSVGAttribute({"fill-opacity":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.getPropertyValue("fill")},set:function(t){this.setFill(t)},enumerable:!0,configurable:!0}),e.prototype.setFill=function(t){if(I(t)||(t=Xe(t)),this.setColorProperty("fill",t)||this.fillModifier)if(t instanceof Ne&&this.fillModifier&&(t=this.fillModifier.modify(t)),this.realFill=t,t instanceof Ne)this.setSVGAttribute({fill:t.toString()});else if(S(t)){if(t instanceof Kr||t instanceof Zr||t instanceof Jr){var e=t;e.paper=this.paper,this.setSVGAttribute({fill:'url("'+qe()+e.id+'")'})}}else this.removeSVGAttribute("fill")},Object.defineProperty(e.prototype,"opacity",{get:function(){return this.getPropertyValue("opacity")},set:function(t){t=E(t,0,1),this.setPropertyValue("opacity",t)&&this.setSVGAttribute({opacity:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.getPropertyValue("stroke")},set:function(t){this.setStroke(t)},enumerable:!0,configurable:!0}),e.prototype.setStroke=function(t){if(I(t)||(t=Xe(t)),this.setColorProperty("stroke",t)||this.strokeModifier)if(t instanceof Ne&&this.strokeModifier&&(t=this.strokeModifier.modify(t)),this.realStroke=t,t instanceof Ne)"none"==t.hex?this.removeSVGAttribute("stroke"):this.setSVGAttribute({stroke:t.toString()});else if(S(t)){if(t instanceof Kr||t instanceof Zr||t instanceof Jr){var e=t;e.paper=this.paper,this.setSVGAttribute({stroke:'url("'+qe()+e.id+'")'})}}else this.removeSVGAttribute("stroke")},Object.defineProperty(e.prototype,"strokeOpacity",{get:function(){return this.getPropertyValue("strokeOpacity")},set:function(t){t=E(t,0,1),this.setPropertyValue("strokeOpacity",t)&&this.setSVGAttribute({"stroke-opacity":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonScalingStroke",{get:function(){return this.getPropertyValue("nonScalingStroke")},set:function(t){t=v(t),this.setPropertyValue("nonScalingStroke",t)&&(this.strokeWidth=this.strokeWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonScaling",{get:function(){return this.getPropertyValue("nonScaling")},set:function(t){t=v(t),this.setPropertyValue("nonScaling",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.getPropertyValue("strokeWidth")},set:function(t){t=_(t),this.setPropertyValue("strokeWidth",t,!0),this.nonScalingStroke&&(k(t)||(t=1),t/=this.globalScale),this.setSVGAttribute({"stroke-width":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeDasharray",{get:function(){return this.getPropertyValue("strokeDasharray")},set:function(t){t=x(t),this.setPropertyValue("strokeDasharray",t)&&this.setSVGAttribute({"stroke-dasharray":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeDashoffset",{get:function(){return this.getPropertyValue("strokeDashoffset")},set:function(t){t=_(t),this.setPropertyValue("strokeDashoffset",t)&&this.setSVGAttribute({"stroke-dashoffset":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeLinecap",{get:function(){return this.getPropertyValue("strokeLinecap")},set:function(t){this.setPropertyValue("strokeLinecap",t)&&this.setSVGAttribute({"stroke-linecap":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeLinejoin",{get:function(){return this.getPropertyValue("strokeLinejoin")},set:function(t){this.setPropertyValue("strokeLinejoin",t)&&this.setSVGAttribute({"stroke-linejoin":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeRendering",{get:function(){return this.getPropertyValue("shapeRendering")},set:function(t){t=x(t),this.setPropertyValue("shapeRendering",t)&&this.setSVGAttribute({"shape-rendering":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelPerfect",{get:function(){return this.getPropertyValue("pixelPerfect")},set:function(t){t=v(t),this._positionPrecision=t?0:3,this.setPropertyValue("pixelPerfect",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rtl",{get:function(){return S(this._rtl)?this._rtl:!!this._topParent&&this._topParent.rtl},set:function(t){t=v(t),this.isBaseSprite&&(this.topParent.rtl=t),this._rtl=t},enumerable:!0,configurable:!0}),e.prototype.show=function(t){return this.showReal(t)},e.prototype.showReal=function(t){var e=this;if(!this.preventShow){var i,r=this.defaultState.properties;if(!this.disabled&&(this.isHidden||!this.visible||this.isHiding||null!=r.opacity&&this.opacity<r.opacity&&!this.isShowing)&&!this.isDisposed()){this.invalid&&this.validate(),this.positionInvalid&&this.validatePosition(),k(t)||(t=this.defaultState.transitionDuration),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this._showHideDisposer&&this.removeDispose(this._showHideDisposer),this._isHidden=!1,this.isHiding=!1,this.isShowing=!0,(i=this.applyCurrentState(t))&&!i.isFinished()?(this._showHideDisposer=i.events.on("animationended",(function(){e.isShowing=!1})),this._disposers.push(this._showHideDisposer)):this.isShowing=!1;var n=this.defaultState.properties.visible;S(n)||(n=!0),this.visible=n,this.readerHidden=!1,this.dispatchImmediately("shown")}return i}},e.prototype.hide=function(t){return this.hideReal(t)},e.prototype.hideReal=function(t){var e,i=this;if(!this.isHiding&&this.visible&&!this.isDisposed()){this.tooltip&&this.tooltip.currentSprite==this&&this.hideTooltip(0),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this.isShowing=!1,this._showHideDisposer&&this.removeDispose(this._showHideDisposer);var r=this.hiddenState;r?(e=this.setState(r,t,void 0))&&!e.isFinished()?(this._hideAnimation=e,this._showHideDisposer=e.events.on("animationended",(function(){i.isHiding=!1,i._isHidden=!0}),this),this._disposers.push(this._showHideDisposer),this._disposers.push(e)):(this.isHiding=!1,this._isHidden=!0):(this.visible=!1,this.isHiding=!1,this._isHidden=!0),this.readerHidden=!0,this.dispatchImmediately("hidden"),this.invalidate()}return k(t)||(t=this.hiddenState.transitionDuration),e},Object.defineProperty(e.prototype,"visible",{get:function(){return this.getVisibility()},set:function(t){t=v(t),this.setVisibility(t)},enumerable:!0,configurable:!0}),e.prototype.getVisibility=function(){var t=this.getPropertyValue("visible");return S(t)||(t=!0),t},e.prototype.setVisibility=function(t){this.setPropertyValue("visible",t)&&(t?this.group.removeAttr("visibility"):this.group.attr({visibility:"hidden"}),this.events.isEnabled("visibilitychanged")&&this.events.dispatchImmediately("visibilitychanged",{type:"visibilitychanged",target:this,visible:t}))},Object.defineProperty(e.prototype,"zIndex",{get:function(){return this.getPropertyValue("zIndex")},set:function(t){t=_(t),this.setPropertyValue("zIndex",t)&&this.dispatch("zIndexChanged")},enumerable:!0,configurable:!0}),e.prototype.toFront=function(){var t=this._parent;t&&t.children.indexOf(this)!=t.children.length-1&&(t.children.moveValue(this,t.children.length-1),this.dispatch("zIndexChanged"))},e.prototype.toBack=function(){var t=this._parent;t&&0!=t.children.indexOf(this)&&(t.children.moveValue(this,0),this.dispatch("zIndexChanged"))},Object.defineProperty(e.prototype,"userClassName",{get:function(){return this.getPropertyValue("userClassName")},set:function(t){this.setPropertyValue("userClassName",t)&&(!t&&this.userClassName&&this.group.removeClass(this.userClassName),this.setClassName())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip?this._tooltip:this.virtualParent?this.virtualParent.tooltip:this._parent?this._parent.tooltip:void 0},set:function(t){this._tooltip&&this.removeDispose(this._tooltip),this._tooltip=t,t&&(t.parent=this.tooltipContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipDataItem",{get:function(){return this._tooltipDataItem||this.dataItem},set:function(t){this._tooltipDataItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipColorSource",{get:function(){return this._tooltipColorSource},set:function(t){this._tooltipColorSource=t},enumerable:!0,configurable:!0}),e.prototype.showTooltip=function(t){"always"==this.showTooltipOn&&!this._tooltip&&this.tooltip&&(this._tooltip=this.tooltip.clone()),!t&&"pointer"==this.tooltipPosition&&this.isHover&&(t=wi(Vr().lastPointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale));for(var e=this;null!=e;){if(!e.visible||e.disabled||e.__disabled)return void(this._tooltip&&this._tooltip.visible&&this._tooltip.hide(0));e=e.parent}if(S(this.tooltipText)||S(this.tooltipHTML)){var i=this.tooltip,r=this.tooltipDataItem;if(i){i.targetSprite=this;var n=this,a=this.tooltipColorSource;if((i.getStrokeFromObject||i.getFillFromObject)&&a&&(a.isTemplate?r&&dt(r.sprites,(function(t){return t.clonedFrom!=a||(n=t,!1)})):n=a),i.getStrokeFromObject){for(var o=this.stroke,s=n;null!=s.parent&&(null==(o=s.stroke)&&(s=s.parent),null==o););o instanceof Ne?i.background.animate({property:"stroke",to:o},i.animationDuration):i.background.stroke=o}if(i.dataItem=r,i.label.populateStringFrom=this,i.getFillFromObject){var l=this.fill;for(s=n;null!=s.parent;)if(null==(l=s.fill)||l instanceof Ne&&null==l.rgb)s=s.parent;else if(null!=l)break;null==l&&(l=Ue("#000000")),l instanceof Ne&&i.visible?i.background.animate({property:"fill",to:l},i.animationDuration):i.background.fill=l,i.autoTextColor&&l instanceof Ne&&(i.label.fill=l.alternative)}var u="";if(this.tooltipHTML&&(i.html=this.tooltipHTML,u=this.tooltipHTML),this.tooltipText&&(i.text=this.tooltipText,u=this.tooltipText),this.updateTooltipPosition(t)){if(i.readerDescribedBy=this.uidAttr(),i.label.invalid&&i.label.validate(),null!=u&&""!=u&&""!=i.label.currentText){i&&!i.parent&&(i.parent=this.tooltipContainer);var c=i.defaultState.transitionDuration;return c<=0&&(c=1),i.show(c),i.currentSprite=this,!0}this.hideTooltip(0)}else this.hideTooltip(0)}}return!1},e.prototype.updateTooltipPosition=function(t){var e=this;if("pointer"!=this.tooltipPosition){var i=_i({x:this.getTooltipX(),y:this.getTooltipY()},this);return this.pointTooltipTo(i)}if(this._interactionDisposer&&this._interactionDisposer.dispose(),this._interactionDisposer=Vr().body.events.on("track",(function(t){return e.pointTooltipTo(wi(t.point,e.svgContainer.SVGContainer,e.svgContainer.cssScale),!0)})),t)return this.pointTooltipTo(t,!0)},e.prototype.pointTooltipTo=function(t,e){var i=this.tooltip;if(i&&this.topParent){if(i.showInViewport)return i.pointTo(t,e),!0;if(st(t,{x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight}))return i.pointTo(t,e),!0}return!1},e.prototype.hideTooltip=function(t){if("always"!=this.showTooltipOn){var e=this.tooltip;e&&(e.targetSprite==this&&(e.targetSprite=void 0),e.hide(t),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0))}},Object.defineProperty(e.prototype,"tooltipHTML",{get:function(){return this.getPropertyValue("tooltipHTML")},set:function(t){t=x(t),this.hoverable=!0,this.setPropertyValue("tooltipHTML",t)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipText",{get:function(){return this.getPropertyValue("tooltipText")},set:function(t){(t=x(t))&&(this.hoverable=!0),this.setPropertyValue("tooltipText",t)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipContainer",{get:function(){return this._tooltipContainer?this._tooltipContainer:this._parent?this._parent.tooltipContainer:void 0},set:function(t){this._tooltipContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipX",{get:function(){return this.getTooltipX()},set:function(t){this.setPercentProperty("tooltipX",t)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alwaysShowTooltip",{get:function(){return"always"==this.getPropertyValue("showTooltipOn")},set:function(t){(t=v(t))&&(this.showTooltipOn="always")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltipOn",{get:function(){return this.getPropertyValue("showTooltipOn")},set:function(t){this.setPropertyValue("showTooltipOn",t)&&("hit"==t&&(this.clickable=!0),this.tooltip&&("always"==t?this.showTooltip():this.handleAlwaysShowTooltip()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipPosition",{get:function(){return this.getPropertyValue("tooltipPosition")},set:function(t){this.setPropertyValue("tooltipPosition",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipY",{get:function(){return this.getTooltipY()},set:function(t){this.setPercentProperty("tooltipY",t)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),e.prototype.getTooltipX=function(){var t,e=this.getPropertyValue("tooltipX");return S(e)||(e=m(50)),k(e)&&(t=e),e instanceof f&&(t=this.maxLeftSelf+this._measuredWidthSelf*e.value-this.pixelPaddingLeft-this.ex),k(t)||(t=0),t},e.prototype.getTooltipY=function(){var t,e=this.getPropertyValue("tooltipY");return S(e)||(e=m(50)),k(e)&&(t=e),e instanceof f&&(t=this.maxTopSelf+this._measuredHeightSelf*e.value-this.pixelPaddingTop-this.ey),k(t)||(t=0),t},e.prototype.raiseCriticalError=function(t,e){this.svgContainer&&(this.modal.content=this._adapterO?this._adapterO.apply("criticalError",t).message:t.message,e?this.modal.closable=!0:this.disabled=!0,Gi.suppressErrors||this.modal.open()),Gi.verbose&&console.log(t)},e.prototype.processConfig=function(e){e&&(S(e.tooltipColorSource)&&C(e.tooltipColorSource)&&this.map.hasKey(e.tooltipColorSource)&&(e.tooltipColorSource=this.map.getKey(e.tooltipColorSource)),S(e.cursorOverStyle)&&C(e.cursorOverStyle)&&(e.cursorOverStyle=this.getCursorStyle(e.cursorOverStyle)),S(e.cursorDowntyle)&&C(e.cursorDowntyle)&&(e.cursorDowntyle=this.getCursorStyle(e.cursorDowntyle)),S(e.cursorOptions)&&(S(e.cursorOptions.overStyle)&&C(e.cursorOptions.overStyle)&&(e.cursorOptions.overStyle=this.getCursorStyle(e.cursorOptions.overStyle)),S(e.cursorOptions.downStyle)&&C(e.cursorOptions.downStyle)&&(e.cursorOptions.downStyle=this.getCursorStyle(e.cursorOptions.downStyle)))),t.prototype.processConfig.call(this,e),this.processDelayedMap()},e.prototype.getCursorStyle=function(t){switch(t){case"grab":return Qr.grab;case"grabbing":return Qr.grabbing;case"pointer":return Qr.pointer;case"horizontalResize":return Qr.horizontalResize;case"verticalResize":return Qr.verticalResize;default:return Qr.default}},e.prototype.configOrder=function(e,i){return e==i?0:"tooltipColorSource"==e?1:"tooltipColorSource"==i?-1:t.prototype.configOrder.call(this,e,i)},Object.defineProperty(e.prototype,"isHidden",{get:function(){return this._isHidden?this._isHidden:!!this._parent&&this._parent.isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOnInit",{get:function(){return this.getPropertyValue("showOnInit")},set:function(t){t=v(t),this.setShowOnInit(t)},enumerable:!0,configurable:!0}),e.prototype.setShowOnInit=function(t){this.setPropertyValue("showOnInit",t)&&(this.isTemplate||(!t||this.inited||this.hidden?this._showOnInitDisposer&&this._showOnInitDisposer.dispose():(this._showOnInitDisposer=new Rt([ve.events.once("enterframe",this.hideInitially,this),this.events.once("beforevalidated",this.hideInitially,this,!1),this.events.on("inited",this.appear,this,!1)]),this._disposers.push(this._showOnInitDisposer))))},e.prototype.hideInitially=function(){this.isDisposed()||(this.appeared=!1,this.inited||this.hide(0))},e.prototype.appear=function(){var t=this;if(this.appeared=!1,this.hidden||this.isHidden||this.hide(0),this.hidden)this.appeared=!0,this.dispatch("appeared");else{var e=this.show();e&&!e.isFinished()?this.addDisposer(e.events.on("animationended",(function(){t.appeared=!0,t.dispatch("appeared")}))):(this.appeared=!0,this.dispatch("appeared"))}},Object.defineProperty(e.prototype,"hidden",{get:function(){return this.getPropertyValue("hidden")},set:function(t){t=v(t),this.setPropertyValue("hidden",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this._bbox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plugins",{get:function(){var t=this;return this._plugins||(this._plugins=new Te,this._disposers.push(this._plugins.events.on("inserted",(function(e){e.newValue.target=t,e.newValue.init()}))),this._disposers.push(new Se(this._plugins))),this._plugins},enumerable:!0,configurable:!0}),e.prototype._systemUpdate=function(t){this.validate()},e.prototype._systemCheckIfValidate=function(){return!0},e.prototype._systemValidatePositions=function(){this.validatePosition()},e.prototype._systemValidateLayouts=function(){},e}(We);ve.registeredClasses.Sprite=_n;var xn=function(t){function e(){var e=t.call(this)||this;return e.className="Rectangle",e.element=e.paper.add("rect"),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this._positionPrecision;this.pixelPerfect&&(e=0);var i=L(this.innerWidth,e),r=L(this.innerHeight,e);this.element.attr({width:i,height:r})},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),e}(_n);ve.registeredClasses.Rectangle=xn;var Sn=function(t){function e(){var e=t.call(this)||this;return e._childrenByLayout=[],e._childrenDisposers=new ye,e.hasFocused=!1,e.setStateOnSprites=[],e.layoutInvalid=!1,e._absoluteWidth=0,e._absoluteHeight=0,e._shouldBeReady=[],e._tapToActivate=!1,e.tapTimeout=3e3,e.className="Container",e._element=e.paper.addGroup("g"),e.group.add(e.element),e.setPropertyValue("pixelPerfect",!1),e.setPropertyValue("layout","absolute"),e.setPropertyValue("fixedWidthGrid",!1),e.setPropertyValue("verticalCenter","none"),e.setPropertyValue("horizontalCenter","none"),e._positionPrecision=4,e._disposers.push(new me(e._childrenDisposers)),e.children.events.on("inserted",e.handleChildAdded,e),e.children.events.on("removed",e.handleChildRemoved,e),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.handleChildAdded=function(t){this.processChild(t.newValue)},e.prototype.processChild=function(t){try{this._childrenDisposers.insertKey(t.uid,new Rt([t.events.on("transformed",this.handleChildTransform,this),t.events.on("zIndexChanged",this.sortAndAdd,this)]))}catch(e){}this.element&&this.element.add(t.group),t.parent=this,t.paper=this.paper,this.dispatchImmediately("childadded",{type:"childadded",newValue:t}),this.invalidate()},e.prototype.sortAndAdd=function(){this.sortChildren(),this.addChildren()},e.prototype.handleChildRemoved=function(t){var e=t.oldValue;this._childrenDisposers.removeKey(e.uid),this.element&&this.element.removeElement(e.group),e.isMeasured&&this.invalidateLayout(),this.dispatchImmediately("childremoved",{type:"childremoved",oldValue:e})},e.prototype.handleChildTransform=function(t){t.target.isMeasured&&this.invalidateLayout()},e.prototype.invalidateLayout=function(){this.layoutInvalid||this.disabled||this.isTemplate||"none"==this.layout||this.__disabled||(this.layoutInvalid=!0,ve.addToInvalidLayouts(this),wn.requestFrame())},e.prototype.invalidate=function(){t.prototype.invalidate.call(this),this.invalidateLayout()},e.prototype.deepInvalidate=function(){t.prototype.invalidate.call(this),ht(this._childrenByLayout,(function(t){t instanceof e?t.deepInvalidate():t.invalidate()})),this.invalidateLayout()},Object.defineProperty(e.prototype,"children",{get:function(){return this._children||(this._children=new Te),this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(t){this.setPropertyValue("minWidth",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(t){this.setPropertyValue("minHeight",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),e.prototype.removeElement=function(){},e.prototype.sortChildren=function(){var t=this;if(this._childrenByLayout=[],"none"!=this.layout&&"absolute"!=this.layout&&this.layout){var e=[],i=[];se(this.children.iterator(),(function(r){"horizontal"==t.layout||"grid"==t.layout?k(r.percentWidth)?i.push(r):e.push(r):"vertical"==t.layout&&k(r.percentHeight)?i.push(r):e.push(r)})),this._childrenByLayout=e.concat(i)}else this._childrenByLayout=this.children.values;this.calculateRelativeSize()},e.prototype.calculateRelativeSize=function(){var t=this,e=0,i=0;ht(this._childrenByLayout,(function(t){t.isMeasured&&(k(t.percentWidth)&&(e+=t.percentWidth),k(t.percentHeight)&&(i+=t.percentHeight))})),ht(this._childrenByLayout,(function(r){r.isMeasured&&("horizontal"==t.layout&&(k(r.percentWidth)&&(r.relativeWidth=r.percentWidth/e),k(r.percentHeight)&&(r.relativeHeight=r.percentHeight/100)),"vertical"==t.layout&&(k(r.percentHeight)&&(r.relativeHeight=r.percentHeight/i),k(r.percentWidth)&&(r.relativeWidth=r.percentWidth/100)),"grid"==t.layout&&(k(r.percentHeight)&&(r.relativeHeight=r.percentHeight/100),k(r.percentWidth)&&(r.relativeWidth=r.percentWidth/100))),"absolute"!=t.layout&&r.isMeasured||(k(r.percentWidth)&&(r.relativeWidth=r.percentWidth/100),k(r.percentHeight)&&(r.relativeHeight=r.percentHeight/100))}))},e.prototype.addChildren=function(){if(this.element){var t=Ct(this.children.values),e=t.map((function(t,e){return{idx:e,data:t}}));e.sort((function(t,e){var i=t.data.zIndex||0,r=e.data.zIndex||0;return i<r?-1:i>r?1:t.idx-e.idx})),t=e.map((function(t){return t.data}));var i=this.element,r=!0;if(i.node&&i.node.childNodes)for(var n=0,a=i.node.childNodes.length;n<a;n++)if(i.node.childNodes[n]!=t[n].group.node){r=!1;break}r||(ht(t,(function(t){t.group&&i.add(t.group)})),this._background&&this.group.addToBack(this._background.group),this.invalidateLayout())}},e.prototype.createChild=function(t){var e=new t;return e.parent=this,e},e.prototype.removeChildren=function(){for(;this.children.length>0;){var t=this.children.getIndex(0);t.parent=void 0,this.children.removeValue(t)}},e.prototype.disposeChildren=function(){for(;this.children.length>0;){var t=this.children.getIndex(0);t.dispose(),this.children.removeValue(t)}},Object.defineProperty(e.prototype,"background",{get:function(){return this._background||(this._background=this.createBackground(),this.processBackground()),this._background},set:function(t){this._background&&this.background!=t&&this.removeDispose(this._background),t&&(this._background=t,this._disposers.push(t),this.processBackground())},enumerable:!0,configurable:!0}),e.prototype.handleGlobalScale=function(){t.prototype.handleGlobalScale.call(this),this.children.each((function(t){t.handleGlobalScale()}))},e.prototype.createBackground=function(){return new xn},e.prototype.processBackground=function(){var t=this._background;t&&(t.isMeasured=!1,this._background.fill=(new _r).getFor("background"),t.parent=this,t.isMeasured=!1,this.children.removeValue(t),this._disposers.push(t),this.group.addToBack(this._background.group))},e.prototype.validateLayout=function(){var t=this;ve.removeFromInvalidLayouts(this),this.layoutInvalid=!1,this._availableWidth=this.innerWidth,this._availableHeight=this.innerHeight;var e=0,i=0,r=!0;this.children&&(this.sortChildren(),ht(this._childrenByLayout,(function(n){var a,o;if(k(n.relativeWidth)?(a=L(t._availableWidth*n.relativeWidth,2),"horizontal"==t.layout&&(a-=n.pixelMarginRight+n.pixelMarginLeft)):"horizontal"==t.layout&&n.invalid&&n.validate(),k(n.relativeHeight)?(o=L(t._availableHeight*n.relativeHeight,2),"vertical"==t.layout&&(o-=n.pixelMarginTop+n.pixelMarginBottom)):"vertical"==t.layout&&n.invalid&&n.validate(),0==n.invalid){if(k(n.relativeWidth)&&(n.maxWidth=a),k(n.relativeHeight)&&(n.maxHeight=o),n.isMeasured){"horizontal"==t.layout&&(k(n.percentWidth)||n.measuredWidth>0&&(t._availableWidth-=n.measuredWidth+n.pixelMarginLeft+n.pixelMarginRight)),"vertical"==t.layout&&(k(n.percentHeight)||n.measuredHeight>0&&(t._availableHeight-=n.measuredHeight+n.pixelMarginTop+n.pixelMarginBottom));var s=n.measuredWidth,l=n.measuredHeight;"none"!=n.align&&(s+=n.pixelMarginLeft+n.pixelMarginRight),"none"!=n.valign&&(l+=n.pixelMarginTop+n.pixelMarginBottom),e=Math.max(e,s),i=Math.max(i,l)}}else n.isMeasured&&(k(n.relativeWidth)&&n.maxWidth!=a&&(n.maxWidth=a,r=!1),k(n.relativeHeight)&&n.maxHeight!=o&&(n.maxHeight=o,r=!1))}))),this._absoluteWidth=e,this._absoluteHeight=i,r&&this.arrange()},e.prototype.arrange=function(){var t,e,i,r,n,a,o,s,l,u,c,h=this,p=this.children,d=0,m=0,y=N(this.innerWidth,this._absoluteWidth),g=N(this.innerHeight,this._absoluteHeight),b=this.pixelPaddingLeft,v=this.pixelPaddingRight,_=this.pixelPaddingTop,x=this.pixelPaddingBottom,S=0,w=0,T=0,P=0,C=[],I=[],A=this.maxWidth,O=this.maxHeight,D=this.minWidth,F=this.minHeight,M=Ct(p.values);if(this.reverseOrder&&M.reverse(),"grid"==this.layout){a=A,n=1;for(var E=0,L=M.length;E<L;E++)if((j=M[E]).isMeasured&&!j.disabled&&!j.__disabled){var R=j.measuredWidth;R<a&&(a=R),R>n&&(n=R)}a=V(a,1,A),n=V(n,1,A),o=this.fixedWidthGrid?A/n:A/a,o=N(1,Math.floor(o)),o=U(this.maxColumns,o),C=this.getColumnWidth(M,o,n)}for(E=0,L=M.length;E<L;E++){var j;if(!(j=M[E]).isMeasured||j.disabled||j.__disabled)j.validatePosition();else{var z=void 0,B=void 0,X=j.pixelMarginLeft,H=j.pixelMarginRight,W=j.pixelMarginTop,Y=j.pixelMarginBottom,G=j.measuredWidth,q=j.measuredHeight,K=void 0,Z=void 0,J=void 0,$=void 0;switch(this.layout){case"none":break;case"absolute":switch(j.align){case"left":z=X-j.maxLeft;break;case"center":z=(y-G)/2-j.maxLeft;break;case"right":z=y-H-j.maxRight;break;default:j.x instanceof f||(z=j.pixelX)}switch(j.valign){case"top":B=W-j.maxTop;break;case"middle":B=(g-q)/2-j.maxTop;break;case"bottom":B=g-Y-j.maxBottom;break;default:j.y instanceof f||(B=j.pixelY)}break;case"vertical":switch(j.align){case"left":z=X-j.maxLeft;break;case"center":z=(y-G)/2-j.maxLeft;break;case"right":z=y-H-j.maxRight;break;default:z=j.pixelX}w=(B=w+W-j.maxTop)+j.maxBottom+Y;break;case"horizontal":switch(j.valign){case"top":B=W-j.maxTop;break;case"middle":B=(g-q)/2-j.maxTop;break;case"bottom":B=g-Y-j.maxBottom;break;default:B=j.pixelY}S=(z=S+X-j.maxLeft)+j.maxRight+H;break;case"grid":switch(z=S+X-j.maxLeft,j.valign){case"top":B=w+W-j.maxTop;break;case"middle":B=w+(g-q)/2-j.maxTop;break;case"bottom":B=w+g-Y-j.maxBottom;break;default:B=w-j.maxTop}S+=C[P],I[T]=N(I[T],q);var Q=C[++P];if(k(Q)||(Q=n),S>U(this.innerWidth,A)-Q+1&&P<o){o=P,S=0,w=0,T=0,P=0,C=this.getColumnWidth(M,o,n),I=[],E=-1;continue}P>=o&&(P=0,w+=I[T],T++,S=0)}"none"!==this.layout&&(j.moveTo({x:z,y:B}),K=z+j.maxLeft-X,J=B+j.maxTop-W,$=B+j.maxBottom+Y,((Z=z+j.maxRight+H)>e||!k(e))&&(e=Z),(K<t||!k(t))&&(t=K),(J<i||!k(i))&&(i=J),($>r||!k(r))&&(r=$),(Z>l||!k(l))&&(l=Z),(K<s||!k(s))&&(s=K),(J<u||!k(u))&&(u=J),($>c||!k(c))&&(c=c))}}if("none"==this.layout){var tt=this.bbox;t=tt.x,e=tt.x+tt.width,i=tt.y,r=tt.y+tt.height}k(t)||(t=0,s=0),k(e)||(l=e=this._availableWidth),k(i)||(i=0,u=0),k(r)||(c=r=this._availableHeight),k(u)||(u=0),k(c)||(c=u),k(s)||(s=0),k(l)||(l=s),d=e-t,m=r-i,k(this.relativeWidth)&&(t=0,e=d=A-b-v),k(this.relativeHeight)&&(i=0,r=m=O-_-x),k(this._pixelWidth)&&(t=0,d=this._pixelWidth-b-v),k(D)&&d<D&&(t=0,d=this.minWidth-b-v),k(this._pixelHeight)&&(i=0,m=this._pixelHeight-_-x),k(F)&&m<F&&(i=0,m=F-_-x);var et=l-s,it=c-u;if("none"!=this.layout&&(this.contentAlign||this.contentValign)&&p.length>0){var rt,nt,at=d,ot=m;at<et&&(at=et),ot<it&&(ot=it),"center"==this.contentAlign&&(rt=(at-et)/2),"right"==this.contentAlign&&(rt=at-et),"middle"==this.contentValign&&(nt=(ot-it)/2),"bottom"==this.contentValign&&(nt=ot-it),k(rt)&&se(p.iterator(),(function(t){var e=t.maxLeft,i=rt;"horizontal"==h.layout&&(t.x=t.pixelX+i),"grid"==h.layout&&(t.x=t.pixelX+i),"vertical"==h.layout&&(i+=t.pixelMarginLeft,"none"==t.align&&(t.x=i-e)),"absolute"==h.layout&&(i+=t.pixelMarginLeft,"none"==t.align&&(t.x=i-e))})),k(nt)&&se(p.iterator(),(function(t){var e=t.maxTop,i=nt;"horizontal"==h.layout&&(i+=t.pixelMarginTop,"none"==t.valign&&(t.y=i-e)),"grid"==h.layout&&(t.y=(i+=t.pixelMarginTop)-e),"vertical"==h.layout&&(t.y=t.pixelY+i),"absolute"==h.layout&&(i+=t.pixelMarginTop,"none"==t.valign&&(t.y=i-e))}))}var st=this.bbox;d=N(d,D),m=N(m,F),this.contentWidth=d,this.contentHeight=m,d=U(d,A),m=U(m,O),this._bbox={x:t,y:i,width:d,height:m};var lt=this.maxLeft,ut=this.maxTop,ct=this.maxBottom,ht=this.maxRight;if(this.measure(),(lt!=this.maxLeft||ht!=this.maxRight||ut!=this.maxTop||ct!=this.maxBottom)&&this.events.isEnabled("transformed")){var pt={type:"transformed",target:this};st&&(pt.dummyData=st.width+" "+d+"  "+st.height+" "+m),this.events.dispatchImmediately("transformed",pt)}this.dispatchImmediately("layoutvalidated")},e.prototype.updateCenter=function(){t.prototype.updateCenter.call(this),this.updateBackground()},e.prototype.updateBackground=function(){var t=this._background;t&&(t.x=this.maxLeft,t.y=this.maxTop,t.width=this.maxRight-this.maxLeft,t.height=this.maxBottom-this.maxTop)},e.prototype.getColumnWidth=function(t,e,i){var r=this,n=[],a=0;return ht(t,(function(t){!t.isMeasured||t.disabled||t.__disabled||(n[a]=r.fixedWidthGrid?i:N(n[a],t.measuredWidth+t.pixelMarginRight+t.pixelMarginLeft),++a==e&&(a=0))})),n},Object.defineProperty(e.prototype,"layout",{get:function(){return this.getPropertyValue("layout")},set:function(t){this.setPropertyValue("layout",t)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentValign",{get:function(){return this.getPropertyValue("contentValign")},set:function(t){this.setPropertyValue("contentValign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentAlign",{get:function(){return this.getPropertyValue("contentAlign")},set:function(t){this.setPropertyValue("contentAlign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedWidthGrid",{get:function(){return this.getPropertyValue("fixedWidthGrid")},set:function(t){this.setPropertyValue("fixedWidthGrid",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxColumns",{get:function(){return this.getPropertyValue("maxColumns")},set:function(t){this.setPropertyValue("maxColumns",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverseOrder",{get:function(){return this.getPropertyValue("reverseOrder")},set:function(t){this.setPropertyValue("reverseOrder",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setStateOnChildren",{get:function(){return this.getPropertyValue("setStateOnChildren")},set:function(t){this.setPropertyValue("setStateOnChildren",t,!0)},enumerable:!0,configurable:!0}),e.prototype.fitsToBounds=function(t){var e=t.x,i=t.y;return e>=-.5&&e<=this.pixelWidth+.5&&i>=-.5&&i<=this.pixelHeight+.5},e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),this.layout=e.layout,this.setStateOnChildren=e.setStateOnChildren,e._background&&(this.background=e._background.clone(),this.background.copyFrom(e._background)),se(e.children.iterator(),(function(t){t.shouldClone&&(t.clone().parent=i)}))},Object.defineProperty(e.prototype,"preloader",{get:function(){return this._preloader||(this.parent?this.parent.preloader:void 0)},set:function(t){this._preloader&&this.removeDispose(this._preloader),this._preloader=t,t&&(t.parent=this.tooltipContainer,this._disposers.push(t))},enumerable:!0,configurable:!0}),e.prototype.setPaper=function(e){var i=this,r=t.prototype.setPaper.call(this,e);return r&&(this._background&&(this._background.paper=e,this._background.topParent=this.topParent),this.children.each((function(t){t.setPaper(e),t.topParent=i.topParent}))),r},e.prototype.removeFromInvalids=function(){t.prototype.removeFromInvalids.call(this),ve.removeFromInvalidLayouts(this)},e.prototype.setDataItem=function(e){this._dataItem!=e&&(se(this.children.iterator(),(function(t){t.dataItem=e})),this._background&&(this._background.dataItem=e)),t.prototype.setDataItem.call(this,e)},e.prototype.measureElement=function(){this.disabled||this.isTemplate||"none"==this.layout||this.__disabled||this.validateLayout()},Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this.getPropertyValue("fontFamily")},set:function(t){this.setPropertyValue("fontFamily",t,!0)&&(this.setSVGAttribute({"font-family":t}),this.invalidateLabels())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this.getPropertyValue("fontSize")},set:function(t){this.setPropertyValue("fontSize",t,!0)&&(this.setSVGAttribute({"font-size":t}),this.invalidateLabels())},enumerable:!0,configurable:!0}),e.prototype.invalidateLabels=function(){this.children.each((function(t){t.hardInvalidate?(t.hardInvalidate(),t.events.once("validated",t.handleValidate,t,!1)):t instanceof e&&t.invalidateLabels()}))},Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this.getPropertyValue("fontWeight")},set:function(t){this.setPropertyValue("fontWeight",t),this.setSVGAttribute({"font-weight":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textDecoration",{get:function(){return this.getPropertyValue("textDecoration")},set:function(t){this.setPropertyValue("textDecoration",t),this.setSVGAttribute({"text-decoration":t})},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._background&&this._background.dispose(),this._shouldBeReady=[],this.disposeChildren(),t.prototype.dispose.call(this)},e.prototype.setState=function(e,i,r){var n=e;return e instanceof Hi&&(n=e.name),this.setStateOnChildren&&se(this.children.iterator(),(function(t){t.setState(n,i,r),"active"!=n&&(t.isActive=!1)})),this._background&&this._background.setState(n),this.setStateOnSprites.length&&ht(this.setStateOnSprites,(function(t){t.setState(n,i,r)})),t.prototype.setState.call(this,e,i,r)},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),this._background&&(this._background.isActive=e)},e.prototype.dispatchReady=function(){var e=this;if(!this.isReady()&&!this.isDisposed()){var i=!0;oe(this.children.iterator(),(function(t){return!!(t.__disabled||t.disabled||t.isReady())||(i=!1,!1)})),dt(this._shouldBeReady,(function(t){return!!(t.__disabled||t.disabled||t.isReady())||(i=!1,!1)})),i?t.prototype.dispatchReady.call(this):ve.events.once("exitframe",(function(){e.dispatchReady(),wn.requestFrame()}),void 0,!1)}},e.prototype._systemUpdate=function(e){this.children.each((function(t){t.invalid&&(t._systemCheckIfValidate()?t.dataItem&&t.dataItem.component&&t.dataItem.component.dataInvalid?e.push(t):t.validate():e.push(t))})),t.prototype._systemUpdate.call(this,e)},e.prototype._systemValidatePositions=function(){this.children.each((function(t){t.positionInvalid&&t.validatePosition()})),t.prototype._systemValidatePositions.call(this)},e.prototype._systemValidateLayouts=function(){this.layoutInvalid&&!this.isDisposed()&&this.validateLayout()},Object.defineProperty(e.prototype,"tapToActivate",{get:function(){return this._tapToActivate},set:function(t){this._tapToActivate!=t&&this.setTapToActivate(t)},enumerable:!0,configurable:!0}),e.prototype.setTapToActivate=function(t){var e=this;this._tapToActivate=t,this.interactions.isTouchProtected=t,t&&this.interactions.setEventDisposer("container-tapToActivate",t,(function(){return new Rt([e.events.on("hit",e.handleTapToActivate,e,!1),e.events.on("down",e.initTapTimeout,e,!1),e.events.on("track",e.initTapTimeout,e,!1),Vr().body.events.on("down",(function(t){Vr().isLocalElement(t.pointer,e.paper.svg,e.uid)||e.handleTapToActivateDeactivation()}),e,!1)])})),Vr()},e.prototype.handleTapToActivate=function(){this.interactions.isTouchProtected=!1,this.initTapTimeout()},e.prototype.handleTapToActivateDeactivation=function(){this.interactions.isTouchProtected=!0},e.prototype.initTapTimeout=function(){var t=this;this._tapToActivateTimeout&&this._tapToActivateTimeout.dispose(),this.tapToActivate&&!this.interactions.isTouchProtected&&this.tapTimeout&&(this._tapToActivateTimeout=this.setTimeout((function(){t.handleTapToActivateDeactivation()}),this.tapTimeout))},e.prototype.hasLicense=function(){if(Gi.commercialLicense)return!0;for(var t=0;t<Gi.licenses.length;t++)if(Gi.licenses[t].match(/^CH.{5,}/i))return!0;return!1},e}(_n);ve.registeredClasses.Container=Sn;var wn=new(function(){function t(){this._isPaused=!1,this.animations=[],this.uid=ve.getUniqueId(),this.dummyCounter=0,this._frameRequested=!1,this.updateStepDuration=45,this.time=Date.now()}return t.prototype.reportTime=function(t,e){e&&(this.time=Date.now())},t.prototype.update=function(){var t=this;if(!this._isPaused){this._frameRequested=!1;var e=Date.now();for(var i in ve.dispatchImmediately("enterframe"),ve.invalidDatas)if(Jt(ve.invalidDatas,i)){for(var r=ve.invalidDatas[i];r.length>0;){var n=(a=r[0]).dataProvider;if(a.isDisposed())_t(r,a);else if(n&&n.dataInvalid)try{if(n.validateData(),n.dataValidationProgress<1)break}catch(u){_t(r,n),n.raiseCriticalError(u)}else try{if(a.validateData(),a.dataValidationProgress<1)break}catch(u){_t(r,a),a.raiseCriticalError(u)}}if(Date.now()-e>this.updateStepDuration)break}for(;ve.invalidRawDatas.length>0;)if((a=ve.invalidRawDatas[0]).isDisposed())_t(ve.invalidRawDatas,a);else try{a.validateRawData()}catch(u){_t(ve.invalidRawDatas,a),a.raiseCriticalError(u)}for(;ve.invalidDataItems.length>0;){if(n=(a=ve.invalidDataItems[0]).dataProvider,a.isDisposed()||a.dataInvalid||n&&n.dataInvalid);else try{a.validateDataItems()}catch(u){_t(ve.invalidDataItems,a),a.raiseCriticalError(u)}_t(ve.invalidDataItems,a)}for(;ve.invalidDataRange.length>0;){var a;if(n=(a=ve.invalidDataRange[0]).dataProvider,a.isDisposed()||a.dataInvalid||n&&n.dataInvalid);else try{a.validateDataRange(),a.skipRangeEvent||a.dispatchImmediately("datarangechanged"),a.skipRangeEvent=!1}catch(u){_t(ve.invalidDataRange,a),a.raiseCriticalError(u)}_t(ve.invalidDataRange,a)}var o=[];Qt(ve.invalidLayouts,(function(e){t.validateLayouts(e)})),Qt(ve.invalidPositions,(function(e){t.validatePositions(e)}));var s=!1;if(e=Date.now(),Qt(ve.invalidSprites,(function(i,r){for(var n=0;r.length>0;){if(t.validateLayouts(i),t.validatePositions(i),5==++n){if(Date.now()-e>t.updateStepDuration)break;n=0}var a=r[r.length-1];if(a&&!a.isDisposed()){if(a._systemCheckIfValidate())if(t.checkIfValidate2(a))try{a._systemUpdate(o)}catch(u){a.invalid=!1,_t(r,a),a.raiseCriticalError(u)}else o.push(a);else o.push(a);a.invalid=!1}_t(r,a)}ve.invalidSprites[i]=ve.invalidSprites[i].concat(o)})),Qt(ve.invalidSprites,(function(t,e){e.length>0&&(s=!0)})),Qt(ve.invalidDatas,(function(t,e){e.length>0&&(s=!0)})),ht(Ct(this.animations),(function(t){t.update()})),Qt(ve.invalidLayouts,(function(e){t.validateLayouts(e)})),Qt(ve.invalidPositions,(function(e){t.validatePositions(e)})),function(){for(var t=Date.now(),e=Xt.length,i=0;i<e;++i)Xt.shift()(t)}(),Qt(ve.invalidLayouts,(function(e){t.validateLayouts(e)})),Qt(ve.invalidPositions,(function(e){t.validatePositions(e)})),ve.dispatchImmediately("exitframe"),(s||this.animations.length>0||[].length>0)&&this.requestFrame(),this.updateStepDuration<200){var l=!0;Qt(ve.invalidDatas,(function(t,e){e.length>0&&(l=!1)})),Qt(ve.invalidSprites,(function(t,e){e.length>0&&(l=!1)})),l&&(this.updateStepDuration=200)}}},t.prototype.checkIfValidate2=function(t){return!(t.dataItem&&t.dataItem.component&&t.dataItem.component.dataInvalid&&!t.dataItem.component.isTemplate)},t.prototype.requestFrame=function(){var t=this;this._frameRequested||(Ht((function(){t.update()})),this._frameRequested=!0)},t.prototype.softInvalidate=function(t){var e=this;t.children.each((function(t){t instanceof Sn&&e.softInvalidate(t),t.measureFailed&&(_e(t,"Label")?t.hardInvalidate():t.invalidate(),t.measureFailed=!1)}))},t.prototype.validatePositions=function(t){for(var e=ve.invalidPositions[t];e.length>0;){var i=e[e.length-1];if(i.isDisposed())_t(e,i);else try{i._systemValidatePositions()}catch(r){i.positionInvalid=!1,_t(e,i),i.raiseCriticalError(r)}}},t.prototype.validateLayouts=function(t){for(var e=ve.invalidLayouts[t];e.length>0;){var i=e[e.length-1];if(i.isDisposed())_t(e,i);else try{i.children.each((function(t){t._systemValidateLayouts()})),i.validateLayout()}catch(r){i.layoutInvalid=!1,_t(e,i),i.raiseCriticalError(r)}}},t.prototype.log=function(t){!function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Gi.verbose&&console&&console.log.apply(console,Object(d.h)(t))}(t)},Object.defineProperty(t.prototype,"isPaused",{get:function(){return this._isPaused},set:function(t){this._isPaused=t,t||(this._frameRequested=!1,this.requestFrame())},enumerable:!0,configurable:!0}),t.VERSION="4.9.22",t}()),Tn=function(){function t(){}return t.prototype.parse=function(t){return[]},Object.defineProperty(t.prototype,"parsableNumbers",{get:function(){return this.options.numberFields&&this.options.numberFields.length>0},enumerable:!0,configurable:!0}),t.prototype.maybeToNumber=function(t,e){return-1!==this.options.numberFields.indexOf(t)?hi(e):e},Object.defineProperty(t.prototype,"parsableDates",{get:function(){return this.options.dateFields&&this.options.dateFields.length>0},enumerable:!0,configurable:!0}),t.prototype.maybeToDate=function(t,e){return-1!==this.options.dateFields.indexOf(t)?this.options.dateFormatter.parse(e,this.dateFormat):e},t.prototype.maybeToEmpty=function(t){return S(t)&&""!=t||!S(this.options.emptyAs)?t:this.options.emptyAs},Object.defineProperty(t.prototype,"dateFormatter",{get:function(){return this.options.dateFormatter||(this.options.dateFormatter=new on,this.options.dateFormat&&(this.options.dateFormat=this.options.dateFormat)),this.options.dateFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFormat",{get:function(){return this.options.dateFormat||this.dateFormatter.inputDateFormat},enumerable:!0,configurable:!0}),t}(),Pn=[",",";","\t"],Cn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentType="text/csv",e.options={delimiter:"",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1},e}return Object(d.d)(e,t),e.isCSV=function(t){return!!e.getDelimiterFromData(t)},e.getDelimiterFromData=function(t){var e,i=t.split("\n"),r=i.length;return ht(Pn,(function(t){for(var n=0,a=0,o=0;o<r;++o){if(!((n=i[o].split(t).length)>1)){a=0;break}if(0===a)a=n;else if(n!=a){a=0;break}}a&&(e=t)})),e},e.prototype.parse=function(t){this.options.delimiter||(this.options.delimiter=e.getDelimiterFromData(t));var i,r,n,a=this.CSVToArray(t,this.options.delimiter),o=S(this.options.emptyAs),s=this.parsableNumbers,l=this.parsableDates,u=[],c=[];for(r=0;r<this.options.skipRows;r++)a.shift();if(this.options.useColumnNames){c=a.shift();for(var h=0;h<c.length;h++)""===(i=S(c[h])?c[h].replace(/^\s+|\s+$/gm,""):"")&&(i="col"+h),c[h]=i}for(;n=this.options.reverse?a.pop():a.shift();)if(!this.options.skipEmpty||1!==n.length||""!==n[0]){var p={};for(r=0;r<n.length;r++)p[i=void 0===c[r]?"col"+r:c[r]]=""===n[r]?this.options.emptyAs:n[r],o&&(p[i]=this.maybeToEmpty(p[i])),s&&(p[i]=this.maybeToNumber(i,p[i])),l&&(p[i]=this.maybeToDate(i,p[i]));u.push(p)}return u},e.prototype.CSVToArray=function(t,e){e=e||",";for(var i=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),r=[[]],n=null;n=i.exec(t);){var a,o=n[1];o.length&&o!==e&&r.push([]),a=n[2]?n[2].replace(new RegExp('""',"g"),'"'):n[3],r[r.length-1].push(a)}return r},e}(Tn),kn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentType="application/json",e.options={},e}return Object(d.d)(e,t),e.isJSON=function(t){try{return JSON.parse(t),!0}catch(e){return!1}},e.prototype.parse=function(t){var e,i=this;try{S(JSON)&&(e=JSON.parse(t))}catch(u){return}var r=S(this.options.emptyAs),n=this.parsableNumbers,a=this.parsableDates;if(Array.isArray(e)&&(n||a||r))for(var o=function(t,o){var s=e[t];Qt(s,(function(t,e){r&&(s[t]=i.maybeToEmpty(s[t])),n&&(s[t]=i.maybeToNumber(t,s[t])),a&&(s[t]=i.maybeToDate(t,s[t]))}))},s=0,l=e.length;s<l;s++)o(s);return e},e}(Tn),In=new(function(){function t(){this.adapter=new Ee(this)}return t.prototype.load=function(t){var e=ct(Array.isArray(t)?t:[t],(function(t){return t.dispatchImmediately("started"),t.dispatchImmediately("loadstarted"),pn(t.url,t,t.requestOptions)}));Promise.all(e).then((function(t){ht(t,(function(t){var e=t.target;e.dispatchImmediately("loadended"),t.error?e.events.isEnabled("error")&&e.events.dispatchImmediately("error",{type:"error",code:t.xhr.status,message:e.language.translate("Unable to load file: %1",null,e.url),target:e}):e.processData(t.response,t.type),e.dispatchImmediately("ended")}))})).catch((function(t){t.target&&(t.target.dispatchImmediately("loadended"),t.target.events.isEnabled("error")&&t.target.events.dispatchImmediately("error",{type:"error",code:t.xhr.status,message:t.target.language.translate("Unable to load file: %1",null,t.target.url),target:t.target}),t.target.dispatchImmediately("ended"))}))},t.prototype.getParserByType=function(t){return this.adapter.apply("getParserByType",{parser:null,type:t}).parser||("csv"==t||"text/csv"==t||"application/vnd.ms-excel"==t?new Cn:"json"==t||"application/json"==t?new kn:void 0)},t.prototype.getParserByData=function(t,e){var i=this.adapter.apply("getParserByData",{parser:null,data:t,type:e}).parser;if(!i){if(i=this.getParserByType(e))return i;if(kn.isJSON(t))return this.getParserByType("json");if(Cn.isCSV(t))return this.getParserByType("csv")}return i},t}()),An=function(t){function e(e,i){var r=t.call(this)||this;return r.adapter=new Ee(r),r._requestOptions={},r._incremental=!1,r._incrementalParams={},r._keepCount=!1,r._updateCurrentData=!1,r.showPreloader=!0,r.className="DataSource",e&&(r.url=e),i&&(r.parser="string"==typeof i?In.getParserByType(i):i),r}return Object(d.d)(e,t),e.prototype.processData=function(t,e){if(this.dispatchImmediately("parsestarted"),this.parser||(this.parser=In.getParserByData(t,e),this.parser)){if(this.parser.options=this.adapter.apply("parserOptions",this.parser.options),this.parser.options.dateFields=this.adapter.apply("dateFields",this.parser.options.dateFields||[]),this.parser.options.numberFields=this.adapter.apply("numberFields",this.parser.options.numberFields||[]),this.parser.options.dateFields&&!this.parser.options.dateFormatter&&(this.parser.options.dateFormatter=this.dateFormatter),this.data=this.adapter.apply("parsedData",this.parser.parse(this.adapter.apply("unparsedData",t))),!S(this.data)&&this.events.isEnabled("parseerror")){var i={type:"parseerror",message:this.language.translate("Error parsing file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",i)}this.dispatchImmediately("parseended"),S(this.data)&&this.dispatchImmediately("done",{data:this.data}),this.lastLoad=new Date}else{if(this.events.isEnabled("parseerror")){var r={type:"parseerror",message:this.language.translate("No parser available for file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",r)}this.dispatchImmediately("parseended")}},Object.defineProperty(e.prototype,"url",{get:function(){var t=this.disableCache?this.timestampUrl(this._url):this._url;return this.incremental&&this.component.data.length&&(t=this.addUrlParams(t,this.incrementalParams)),this.adapter.apply("url",t)},set:function(t){this._url=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestOptions",{get:function(){return this.adapter.apply("requestOptions",this._requestOptions)},set:function(t){this._requestOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._parser||(this._parser=new kn),this.adapter.apply("parser",this._parser)},set:function(t){this._parser=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reloadFrequency",{get:function(){return this.adapter.apply("reloadTimeout",this._reloadFrequency)},set:function(t){var e=this;this._reloadFrequency!=t&&(this._reloadFrequency=t,t?S(this._reloadDisposer)||(this._reloadDisposer=this.events.on("ended",(function(t){e._reloadTimeout=setTimeout((function(){e.load()}),e.reloadFrequency)}))):S(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incremental",{get:function(){return this.adapter.apply("incremental",this._incremental)},set:function(t){this._incremental=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incrementalParams",{get:function(){return this.adapter.apply("incrementalParams",this._incrementalParams)},set:function(t){this._incrementalParams=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepCount",{get:function(){return this.adapter.apply("keepCount",this._keepCount)},set:function(t){this._keepCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateCurrentData",{get:function(){return this.adapter.apply("updateCurrentData",this._updateCurrentData)},set:function(t){this._updateCurrentData=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this._language?this._language:this.component?(this._language=this.component.language,this._language):(this.language=new en,this.language)},set:function(t){this._language=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.component?(this._dateFormatter=this.component.dateFormatter,this._dateFormatter):(this.dateFormatter=new on,this.dateFormatter)},set:function(t){this._dateFormatter=t},enumerable:!0,configurable:!0}),e.prototype.timestampUrl=function(t){var e={};return e[(new Date).getTime().toString()]="",this.addUrlParams(t,e)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._reloadTimeout&&clearTimeout(this._reloadTimeout),S(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0)},e.prototype.load=function(){this.url&&(this._reloadTimeout&&clearTimeout(this._reloadTimeout),In.load(this))},e.prototype.addUrlParams=function(t,e){var i=t.match(/\?/)?"&":"?",r=[];return Qt(e,(function(t,e){r.push(""!=e?t+"="+encodeURIComponent(e):t)})),r.length?t+i+r.join("&"):t},e.prototype.processConfig=function(e){ve.registeredClasses.json=kn,ve.registeredClasses.JSONParser=kn,ve.registeredClasses.csv=Cn,ve.registeredClasses.CSVParser=Cn,t.prototype.processConfig.call(this,e)},e}(We),On=function(t){function e(){var e=t.call(this)||this;return e._rules=new Te,e._appliedRules={},e._appliedTargets=[],e._useDefault=!0,e.adapter=new Ee(e),e._enabled=!1,e._responsiveDisposers=[],e._noStates=[],e.className="Responsive",e.rules.events.on("inserted",(function(){e.checkRules()}),!0),e.rules.events.on("removed",(function(){e.checkRules()}),!0),e._disposers.push(e.rules.events),e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"component",{get:function(){return this._component},set:function(t){var e=this;t!=this._component&&(this.disposeResponsiveHandlers(),this._component=t,this._responsiveDisposers.push(w(this.component).events.on("sizechanged",(function(){e.checkRules()}),this)),this._responsiveDisposers.push(w(this.component).events.on("datavalidated",(function(){e._component.isReady()&&e.checkRules(!0)}),this)),this.enabled=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.adapter.apply("enabled",this._enabled)},set:function(t){this._enabled!=t&&(this._enabled=t,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useDefault",{get:function(){return this.adapter.apply("useDefault",this._useDefault)},set:function(t){this._useDefault!=t&&(this._useDefault=t,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rules",{get:function(){return this.adapter.apply("rules",this._rules)},set:function(t){this._rules=t,this._enabled=!0,this.applyRules()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultRules",{get:function(){return this.adapter.apply("defaultRules",Dn)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allRules",{get:function(){var t=new Te;return this.useDefault&&t.copyFrom(this.defaultRules),t.copyFrom(this.rules),this.adapter.apply("allRules",t)},enumerable:!0,configurable:!0}),e.prototype.isApplied=function(t){var e=this._appliedRules[t];return!!S(e)&&e},e.prototype.checkRules=function(t){var e=this;void 0===t&&(t=!1);var i=this.allRules;if(i&&0!=i.length){var r=!1,n=w(this.component);if(se(i.iterator(),(function(t){t.id||(t.id=ve.getUniqueId());var i=t.relevant(n);(i&&!e.isApplied(t.id)||!i&&e.isApplied(t.id))&&(r=!0),e._appliedRules[t.id]=i})),t&&(r=!0),r){if(!this.component.isReady())return n.hidden=!0,void n.events.once("ready",(function(t){t.target.show(0),e.applyRules()}));this.dispatchImmediately("ruleschanged"),this.applyRules()}}},e.prototype.applyRules=function(t){var e=this,i=S(t)?t:w(this.component),r=!1;if(this.enabled){var n=!1;se(this.allRules.iterator(),(function(t){var a=e.getState(t,i);a&&(r||(-1!==lt(e._appliedTargets,i.uid)&&i.setState(e.getDefaultState(i)),r=!0),e.isApplied(w(t.id))&&(a.transitionDuration=0,e.setTargetState(i,a),e.dispatchImmediately("ruleapplied",{rule:t}),n=!0))})),n?wt(this._appliedTargets,i.uid):_t(this._appliedTargets,i.uid)}i.children&&se(i.children.iterator(),(function(t){e.applyRules(t)}))},e.prototype.getState=function(t,e){var i="responsive-"+t.id,r=e.uid+"_"+i;if(-1===lt(this._noStates,r)){if(e.states.hasKey(i))return e.states.getKey(i);var n=t.state(e,i);return n||this._noStates.push(r),n}},e.prototype.getDefaultState=function(t){return t.states.hasKey("responsive-default")?t.states.getKey("responsive-default"):t.states.create("responsive-default")},e.prototype.setTargetState=function(t,e){var i=this,r=this.getDefaultState(t);Qt(e.properties,(function(e,n){S(r.properties[e])||(r.properties[e]=i.getValue(t,e))})),t.setState(e)},e.prototype.getValue=function(t,e){var i=t.getPropertyValue(e);return!S(i)&&S(t[e])&&(i=t[e]),i},e.prototype.dispose=function(){this.disposeResponsiveHandlers(),t.prototype.dispose.call(this)},e.prototype.disposeResponsiveHandlers=function(){for(var t=this._responsiveDisposers.pop();t;)t.dispose(),t=this._responsiveDisposers.pop()},e}(We),Dn=new Te;Dn.events.on("inserted",(function(t){t.newValue.id=ve.getUniqueId()}));var Fn=function(){function t(){}return t.widthXXS=function(e){return e.pixelWidth<=t.XXS},t.widthXS=function(e){return e.pixelWidth<=t.XS},t.widthS=function(e){return e.pixelWidth<=t.S},t.widthM=function(e){return e.pixelWidth<=t.M},t.widthL=function(e){return e.pixelWidth<=t.L},t.widthXL=function(e){return e.pixelWidth<=t.XL},t.widthXXL=function(e){return e.pixelWidth<=t.XXL},t.heightXXS=function(e){return e.pixelHeight<=t.XXS},t.heightXS=function(e){return e.pixelHeight<=t.XS},t.heightS=function(e){return e.pixelHeight<=t.S},t.heightM=function(e){return e.pixelHeight<=t.M},t.heightL=function(e){return e.pixelHeight<=t.L},t.heightXL=function(e){return e.pixelHeight<=t.XL},t.heightXXL=function(e){return e.pixelHeight<=t.XXL},t.isXXS=function(e){return e.pixelWidth<=t.XXS&&e.pixelHeight<=t.XXS},t.isXS=function(e){return e.pixelWidth<=t.XS&&e.pixelHeight<=t.XS},t.isS=function(e){return e.pixelWidth<=t.S&&e.pixelHeight<=t.S},t.isM=function(e){return e.pixelWidth<=t.M&&e.pixelHeight<=t.M},t.isL=function(e){return e.pixelWidth<=t.L&&e.pixelHeight<=t.L},t.isXL=function(e){return e.pixelWidth<=t.XL&&e.pixelHeight<=t.XL},t.isXXL=function(e){return e.pixelWidth<=t.XXL&&e.pixelHeight<=t.XXL},t.maybeXXS=function(e){return e.pixelWidth<=t.XXS||e.pixelHeight<=t.XXS},t.maybeXS=function(e){return e.pixelWidth<=t.XS||e.pixelHeight<=t.XS},t.maybeS=function(e){return e.pixelWidth<=t.S||e.pixelHeight<=t.S},t.maybeM=function(e){return e.pixelWidth<=t.M||e.pixelHeight<=t.M},t.maybeL=function(e){return e.pixelWidth<=t.L||e.pixelHeight<=t.L},t.maybeXL=function(e){return e.pixelWidth<=t.XL||e.pixelHeight<=t.XL},t.maybeXXL=function(e){return e.pixelWidth<=t.XXL||e.pixelHeight<=t.XXL},t.XXS=100,t.XS=200,t.S=300,t.M=400,t.L=600,t.XL=800,t.XXL=1e3,t}(),Mn=function(t){function e(){var e=t.call(this)||this;return e._disabled=!1,e.hasProperties=!1,e.values={},e.categories={},e.dates={},e.locations={},e.workingLocations={},e.properties={},e.sprites=[],e.isTemplate=!1,e._index=null,e._visible=!0,e._hidden=!1,e._ignoreMinMax=!1,e.hasChildren={},e.isHiding=!1,e._valueAnimations={},e._locationAnimations={},e.className="DataItem",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new Ee(this)),this._adapterO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.component&&null!=this._index?this._index:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new Qi(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return!this._hidden&&this._visible},set:function(t){t&&(this.hidden=!1),this._visible!=t&&this.setVisibility(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return this._hidden},set:function(t){this._hidden!=t&&(this._hidden=t,t?this.setVisibility(!1):this.setVisibility(!0,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,ht(this.sprites,(function(e){e.__disabled=t}))},enumerable:!0,configurable:!0}),e.prototype.setVisibility=function(t,e){ht(this.sprites,(function(e){e.visible=t?e.defaultState.properties.visible:!!e.hiddenState&&e.hiddenState.properties.visible})),this._visible=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("visibilitychanged")&&this.events.dispatchImmediately("visibilitychanged",{type:"visibilitychanged",target:this,visible:t})},e.prototype.show=function(t,e,i){var r,n=this;if(!this.hidden)return this.setVisibility(!0,!0),this.isHiding=!1,this._hideDisposer&&this.removeDispose(this._hideDisposer),i&&ht(i,(function(i){r=n.setWorkingValue(i,n.values[i].value,t,e)})),ht(this.sprites,(function(i){var r=i.show(t);null==r||r.isFinished()||(n._disposers.push(r),null!=e&&e>0&&r.delay(e))})),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),ht(this.sprites,(function(t){t.dispose()})),this.sprites=[]},e.prototype.hide=function(t,e,i,r){var n=this;if(this.isHiding=!0,ht(this.sprites,(function(i){var r=i.hide(t);null==r||r.isFinished()||(n._disposers.push(r),null!=e&&e>0&&r.delay(e))})),k(i)&&r){var a;if(ht(r,(function(r){var o=n.setWorkingValue(r,i,t,e);o&&(a=o)})),a&&!a.isFinished())return this._hideDisposer=a.events.on("animationended",(function(){n.setVisibility(!1,!0),n.isHiding=!1})),this._disposers.push(this._hideDisposer),a;this.isHiding=!1,this.setVisibility(!1,!0)}else this.isHiding=!1,this.setVisibility(!1)},e.prototype.getDuration=function(t){if(!k(t)){var e=this.component;e&&(t=e.interpolationDuration)}if(null!=t)return this._adapterO?this._adapterO.apply("duration",t):t},e.prototype.getValue=function(t,e){if(t&&this.component){e||(e=this.component.dataFields[t+"Show"])||(e="value");var i=this.values[t][e];return this._adapterO&&this._adapterO.isEnabled("value")?this._adapterO.apply("value",{value:i,field:t}).value:i}},e.prototype.getWorkingValue=function(t){if(t&&this.component){var e=this.component.dataFields[t+"Show"];return e||(e="workingValue"),this._adapterO?this._adapterO.apply("workingValue",{workingValue:this.values[t][e],field:t}).workingValue:this.values[t][e]}},e.prototype.getActualWorkingValue=function(t){return this.values[t].workingValue},e.prototype.setValue=function(t,e,i,r){var n=this.values[t].value,a=this.getDuration(i);n!==(e=_(e))&&(this.values[t].value=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("valuechanged")&&this.events.dispatchImmediately("valuechanged",{type:"valuechanged",target:this,property:t}),this.component&&this.component.handleDataItemValueChange(this,t)),this.setWorkingValue(t,e,a,r)},e.prototype.setCalculatedValue=function(t,e,i){this.values[t][i]!==e&&k(e)&&(this.values[t][i]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("calculatedvaluechanged")&&this.events.dispatchImmediately("calculatedvaluechanged",{type:"calculatedvaluechanged",target:this,property:t}),this.component&&this.component.handleDataItemCalculatedValueChange(this,t))},e.prototype.setWorkingValue=function(t,e,i,r){if(k(this.values[t].value)){var n=this.getDuration(i),a=this.values[t].workingValue;if(null!=n&&n>0&&k(a)&&this.component){if(a!=e){var o=this.animate({childObject:this.values[t],property:"workingValue",from:a,to:e,dummyData:t},n,this.component.interpolationEasing);return null!=r&&o.delay(r),o.events.on("animationstarted",this.handleInterpolationProgress,this),o.events.on("animationprogress",this.handleInterpolationProgress,this),o.events.on("animationended",this.handleInterpolationProgress,this),this._valueAnimations[t]=o,o}(s=this._valueAnimations[t])&&s.stop(),this.values[t].workingValue=e}else{var s;(s=this._valueAnimations[t])&&s.stop(),this.values[t].workingValue=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")&&this.events.dispatchImmediately("workingvaluechanged",{type:"workingvaluechanged",target:this,property:t}),this.component&&this.component.handleDataItemWorkingValueChange(this,t)}}},e.prototype.setLocation=function(t,e,i,r){this.locations[t]!==e&&(this.locations[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("locationchanged")&&this.events.dispatchImmediately("locationchanged",{type:"locationchanged",target:this,property:t}),this.component&&this.component.handleDataItemValueChange(this,t),this.setWorkingLocation(t,e,i,r))},e.prototype.setWorkingLocation=function(t,e,i,r){var n=this.getDuration(i),a=this.workingLocations[t];if(null!=n&&n>0&&k(a)&&this.component){if(a!=e){var o=this.animate({childObject:this.workingLocations,property:t,from:a,to:e,dummyData:t},n,this.component.interpolationEasing);return null!=r&&o.delay(r),o.events.on("animationstarted",this.handleInterpolationProgress,this),o.events.on("animationprogress",this.handleInterpolationProgress,this),o.events.on("animationended",this.handleInterpolationProgress,this),this._locationAnimations[t]=o,o}(s=this._locationAnimations[t])&&s.stop(),this.workingLocations[t]=e}else{var s;(s=this._locationAnimations[t])&&s.stop(),this.workingLocations[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workinglocationchanged")&&this.events.dispatchImmediately("workinglocationchanged",{type:"workinglocationchanged",target:this,property:t}),this.component&&this.component.handleDataItemWorkingLocationChange(this,t)}},e.prototype.setDate=function(t,e,i){!P(e)&&this.component&&(e=this.component.dateFormatter.parse(e)),this.dates[t]!==e&&(this.dates[t]=e,this.setValue(t,e.getTime(),i))},e.prototype.getDate=function(t){return this._adapterO?this._adapterO.apply("date",{date:this.dates[t],field:t}).date:this.dates[t]},e.prototype.setProperty=function(t,e){this.properties[t]!==e&&(this.hasProperties=!0,this.properties[t]=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")&&this.events.dispatchImmediately("propertychanged",{type:"propertychanged",target:this,property:t,value:e}),this.component&&this.component.handleDataItemPropertyChange(this,t))},e.prototype.setCategory=function(t,e){C(e)||(e=b(e)),this.categories[t]!==e&&(this.categories[t]=e)},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e.dataContext&&(this.dataContext=function(t,e){return Qt(t,(function(t,i){e[t]=i})),e}(e.dataContext,{})),Ye(e.locations,this.locations),e._adapterO&&this.adapter.copyFrom(e._adapterO),this.component=e.component},Object.defineProperty(e.prototype,"opacity",{set:function(t){ht(this.sprites,(function(e){e.opacity=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(t){this._ignoreMinMax=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")&&this.events.dispatchImmediately("propertychanged",{type:"propertychanged",target:this,property:"ignoreMinMax",value:t}),this.component&&this.component.handleDataItemPropertyChange(this,"ignoreMinMax")},enumerable:!0,configurable:!0}),e.prototype.animate=function(t,e,i){return new tr(this,t,e,i).start()},e.prototype.handleInterpolationProgress=function(t){var e=t.target.animationOptions[0];e&&(this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")&&this.events.dispatchImmediately("workingvaluechanged",{type:"workingvaluechanged",target:this,property:e.dummyData}),this.component&&this.component.handleDataItemWorkingValueChange(this,e.dummyData))},e.prototype.hasValue=function(t){for(var e=0,i=t.length;e<i;e++){var r=this.values[t[e]];if(!r||!S(r.value))return!1}return!0},Object.defineProperty(e.prototype,"depth",{get:function(){return this.parent?this.parent.depth+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataContext",{get:function(){return this._dataContext},set:function(t){this._dataContext=t},enumerable:!0,configurable:!0}),e.prototype.addSprite=function(t){t.dataItem&&t.dataItem!=this&&_t(t.dataItem.sprites,t),this.visible||t.hide(0),this.isHiding&&t.hide(),this.sprites.push(t),t.dataItem=this},e}(We),En=function(t){function e(){var e=t.call(this)||this;return e.dataFields={},e._dataSources={},e._parseDataFrom=0,e._dataDisposers=[],e._currentDataSetId="",e._start=0,e._end=1,e.skipRangeEvent=!1,e.rangeChangeDuration=0,e.rangeChangeEasing=Bi,e.parsingStepDuration=50,e.dataInvalid=!1,e.rawDataInvalid=!1,e.dataRangeInvalid=!1,e.dataItemsInvalid=!1,e.interpolationDuration=0,e.interpolationEasing=Bi,e.sequencedInterpolation=!0,e.sequencedInterpolationDelay=0,e.dataValidationProgress=0,e._addAllDataItems=!0,e._usesData=!0,e.className="Component",e.minZoomCount=1,e.maxZoomCount=0,e._dataItems=new Ie(e.createDataItem()),e._dataItems.events.on("inserted",e.handleDataItemAdded,e,!1),e._dataItems.events.on("removed",e.handleDataItemRemoved,e,!1),e._disposers.push(new Se(e._dataItems)),e._disposers.push(e._dataItems.template),e.invalidateData(),e.dataUsers.events.on("inserted",e.handleDataUserAdded,e,!1),e._disposers.push(new Rt(e._dataDisposers)),e._start=0,e._end=1,e.maxZoomDeclination=1,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createDataItem=function(){return new Mn},e.prototype.handleDataUserAdded=function(t){t.newValue.dataProvider=this},e.prototype.handleDataItemValueChange=function(t,e){this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.handleDataItemWorkingValueChange=function(t,e){},e.prototype.handleDataItemWorkingLocationChange=function(t,e){},e.prototype.handleDataItemCalculatedValueChange=function(t,e){},e.prototype.handleDataItemPropertyChange=function(t,e){},e.prototype.processDataItem=function(t,e){var i=this;if(t){e||(e={}),t.dataContext=e;var r=!1;Qt(this.dataFields,(function(n,a){var o=n,s=e[a];if(i._adapterO&&i._adapterO.isEnabled("dataContextValue")&&(s=i._adapterO.apply("dataContextValue",{field:o,value:s,dataItem:t}).value),S(s))if(r=!0,t.hasChildren[o]){var l=i.createDataItem();l.copyFrom(i.mainDataSet.template);var u=new Ie(l);u.events.on("inserted",i.handleDataItemAdded,i,!1),u.events.on("removed",i.handleDataItemRemoved,i,!1),i._dataDisposers.push(new Se(u));for(var c=s.length,h=0;h<c;h++){var p=s[h],d=u.create();d.parent=t,i.processDataItem(d,p)}t[o]=u}else t[o]=s})),Qt(this.propertyFields,(function(i,n){var a=i,o=e[n];S(o)&&(r=!0,t.setProperty(a,o))})),this._addAllDataItems||r||this.mainDataSet.remove(t)}},e.prototype.updateDataItem=function(t){var e=this;if(t){var i=t.dataContext;Qt(this.dataFields,(function(r,n){var a=r,o=i[n];e._adapterO&&(o=e._adapterO.apply("dataContextValue",{field:a,value:o,dataItem:t}).value),S(o)&&(t.hasChildren[a]?t[a].each((function(t){e.updateDataItem(t)})):t[a]=o)})),Qt(this.propertyFields,(function(e,r){var n=e,a=i[r];S(a)&&t.setProperty(n,a)}))}},e.prototype.validateDataElements=function(){for(var t=this.endIndex,e=this.startIndex;e<t;e++){var i=this.dataItems.getIndex(e);i&&this.validateDataElement(i)}},e.prototype.validate=function(){this.validateDataElements(),t.prototype.validate.call(this)},e.prototype.validateDataElement=function(t){},e.prototype.addData=function(t,e,i){var r=this;if(!this.dataInvalid&&this.inited&&(this._parseDataFrom=this.data.length),i||(t instanceof Array?ht(t,(function(t){r.data.push(t)})):this.data.push(t)),this.inited)this.removeData(e,i);else if(k(e))for(;e>0;)this.data.shift(),e--;this.invalidateData()},e.prototype.removeData=function(t,e){if(k(t)&&t>0){for(;t>0;){var i=this.mainDataSet.getIndex(0);i&&this.mainDataSet.remove(i),this.dataUsers.each((function(t){if(!t.data||0==t.data.length){var e=t.mainDataSet.getIndex(0);e&&t.mainDataSet.remove(e)}})),e||this.data.shift(),this._parseDataFrom>0&&this._parseDataFrom--,t--}this.invalidateDataItems()}},e.prototype.invalidateData=function(){this.disabled||this.isTemplate||(ve.addToInvalidComponents(this),wn.requestFrame(),this.dataInvalid=!0,se(this.dataUsers.iterator(),(function(t){t.invalidateDataItems()})))},e.prototype.invalidateDataUsers=function(){se(this.dataUsers.iterator(),(function(t){t.invalidate()}))},e.prototype.invalidateDataItems=function(){this.disabled||this.isTemplate||(xt(ve.invalidDataItems,this),wn.requestFrame(),this.dataItemsInvalid=!0,se(this.dataUsers.iterator(),(function(t){t.invalidateDataItems()})))},e.prototype.invalidateDataRange=function(){this.disabled||this.isTemplate||(this.dataRangeInvalid=!0,xt(ve.invalidDataRange,this),wn.requestFrame())},e.prototype.validateDataRange=function(){_t(ve.invalidDataRange,this),this.dataRangeInvalid=!1,this.startIndex==this._prevStartIndex&&this.endIndex==this._prevEndIndex||(this.rangeChangeUpdate(),this.appendDataItems(),this.invalidate(),this.dispatchImmediately("datarangechanged"))},e.prototype.sliceData=function(){this._workingStartIndex=this.startIndex,this._workingEndIndex=this.endIndex},e.prototype.rangeChangeUpdate=function(){this.sliceData(),this._prevStartIndex=this.startIndex,this._prevEndIndex=this.endIndex},e.prototype.appendDataItems=function(){for(var t=this.endIndex,e=this.startIndex;e<t;e++)(i=this.dataItems.getIndex(e))&&(i.__disabled=!1);for(e=0;e<this.startIndex;e++)(i=this.dataItems.getIndex(e)).__disabled=!0;for(e=this.endIndex;e<this.dataItems.length;e++){var i;(i=this.dataItems.getIndex(e)).__disabled=!0}},e.prototype.invalidateRawData=function(){this.disabled||this.isTemplate||(xt(ve.invalidRawDatas,this),wn.requestFrame(),this.rawDataInvalid=!0,se(this.dataUsers.iterator(),(function(t){t.invalidateRawData()})))},e.prototype.validateRawData=function(){var t=this;_t(ve.invalidRawDatas,this),se(this.mainDataSet.iterator(),(function(e){e&&t.updateDataItem(e)}))},e.prototype.dispose=function(){var e=this;this.mainDataSet.template.clones.clear(),Qt(this._dataSources,(function(t,i){e.removeDispose(i)})),t.prototype.dispose.call(this)},e.prototype.disposeData=function(){this.mainDataSet.template.clones.clear(),ht(this._dataDisposers,(function(t){t.dispose()})),se(this.dataUsers.iterator(),(function(t){t.disposeData()})),this._dataDisposers.length=0,this._startIndex=void 0,this._endIndex=void 0,this.mainDataSet.clear(),this.mainDataSet.template.clones.clear(),this._dataSets&&this._dataSets.clear()},e.prototype.getDataItem=function(t){return this.mainDataSet.create()},e.prototype.validateData=function(){if(this.dispatchImmediately("beforedatavalidated"),this.dataInvalid=!1,ve.removeFromInvalidComponents(this),!this.__disabled){if(this.dataValidationProgress=0,this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.dataFields.data&&this.dataItem&&(this._data=this.dataItem.dataContext[this.dataFields.data]),0===this._parseDataFrom&&this.data.length>0&&this.disposeData(),this.data.length>0){var t=this.preloader;se(this.dataUsers.iterator(),(function(t){t._startIndex=void 0,t._endIndex=void 0}));for(var e=0,i=Date.now(),r=this._parseDataFrom,n=this.data.length,a=function(){var n=o.data[r];if(o._usesData){var a=o.getDataItem(n);o.processDataItem(a,n)}if(o.dataUsers.each((function(t){if(0==t.data.length){var e=t.getDataItem(n);t.processDataItem(e,n)}})),100==++e&&(e=0,Date.now()-i>o.parsingStepDuration&&r<o.data.length-10))return o._parseDataFrom=r+1,t&&(r/o.data.length>.5&&!t.visible||(t.progress=r/o.data.length)),o.dataValidationProgress=r/o.data.length,r=o.data.length,o.invalidateData(),{value:void 0}},o=this;r<n;r++){var s=a();if("object"==typeof s)return s.value}t&&(t.progress=1),this.dataUsers.each((function(t){t.hidden&&t.hide(0)}))}this.dataValidationProgress=1,this._parseDataFrom=0,this.invalidateDataItems(),this._internalDefaultsApplied||this.applyInternalDefaults(),this.dispatch("datavalidated")}},e.prototype.validateDataItems=function(){_t(ve.invalidDataItems,this),this.dataItemsInvalid=!1,this.invalidateDataRange(),this.invalidate(),this.dispatch("dataitemsvalidated")},Object.defineProperty(e.prototype,"data",{get:function(){return this._data||(this._data=[]),this._adapterO?this._adapterO.apply("data",this._data):this._data},set:function(t){this.setData(t)},enumerable:!0,configurable:!0}),e.prototype.setData=function(t){this._parseDataFrom=0,this.disposeData(),this._data=t,t&&t.length>0?this.invalidateData():(this.dispatchImmediately("beforedatavalidated"),this.dispatch("datavalidated"))},e.prototype.getDataSource=function(t){var e=this;return S(this._dataSources[t])||(this._dataSources[t]=new An,this._dataSources[t].component=this,this.setDataSourceEvents(this._dataSources[t],t),this._dataSources[t].adapter.add("dateFields",(function(t){return e.dataSourceDateFields(t)})),this._dataSources[t].adapter.add("numberFields",(function(t){return e.dataSourceNumberFields(t)})),this.events.on("inited",(function(){e.loadData(t)}),this,!1)),this._dataSources[t]},Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSources.data||this.getDataSource("data"),this._dataSources.data},set:function(t){var e=this;this._dataSources.data&&this.removeDispose(this._dataSources.data),this._dataSources.data=t,this._dataSources.data.component=this,this.events.on("inited",(function(){e.loadData("data")}),this,!1),this.setDataSourceEvents(t,"data")},enumerable:!0,configurable:!0}),e.prototype.loadData=function(t){this._dataSources[t].load()},e.prototype.dataSourceDateFields=function(t){return t},e.prototype.dataSourceNumberFields=function(t){return t},e.prototype.populateDataSourceFields=function(t,e,i){return ht(i,(function(i){e[i]&&-1===lt(t,e[i])&&t.push(e[i])})),t},e.prototype.setDataSourceEvents=function(t,e){var i=this;t.events.on("started",(function(t){var e=i.preloader;e&&(e.progress=0)}),void 0,!1),t.events.on("loadstarted",(function(t){var e=i.preloader;e&&(e.progress=.25)}),void 0,!1),t.events.on("loadended",(function(t){var e=i.preloader;e&&(e.progress=.5)}),void 0,!1),t.events.on("parseended",(function(t){var e=i.preloader;e&&(e.progress=.75)}),void 0,!1),t.events.on("ended",(function(t){var e=i.preloader;e&&(e.progress=1)}),void 0,!1),t.events.on("error",(function(t){var e=i.preloader;e&&(e.progress=1),i.openModal(t.message)}),void 0,!1),e&&t.events.on("done",(function(r){var n=i.preloader;n&&(n.progress=1),"data"!=e||A(r.data)||(r.data=[r.data]),t.incremental&&"data"==e&&i.data.length?i.addData(r.data,t.keepCount?r.data.length:0):t.updateCurrentData&&"data"==e&&i.data.length?(ht(i.data,(function(t,e){S(r.data[e])&&Qt(t,(function(i,n){S(r.data[e][i])&&(t[i]=r.data[e][i])}))})),i.invalidateRawData()):i[e]=r.data}))},Object.defineProperty(e.prototype,"responsive",{get:function(){return this._responsive||(this._responsive=new On,this._responsive.component=this),this._responsive},set:function(t){this._responsive=t,this._responsive.component=this},enumerable:!0,configurable:!0}),e.prototype.zoom=function(t,e,i,r){var n=this;void 0===e&&(e=!1),void 0===i&&(i=!1);var a=t.start,o=t.end,s=t.priority;if(t.start==t.end&&(t.start=t.start-.5/this.maxZoomFactor,t.end=t.end+.5/this.maxZoomFactor),"end"==s&&1==o&&0!=a&&a<this.start&&(s="start"),"start"==s&&0==a&&o>this.end&&(s="end"),k(r)||(r=this.maxZoomDeclination),!k(a)||!k(o))return{start:this.start,end:this.end};if(this._finalStart!=a||this._finalEnd!=o){var l=this.maxZoomFactor/this.minZoomCount,u=this.maxZoomFactor/this.maxZoomCount;if("start"==s?(this.maxZoomCount>0&&1/(o-a)<u&&(o=a+1/u),1/(o-a)>l&&(o=a+1/l),o>1&&o-a<1/l&&(a=o-1/l)):(this.maxZoomCount>0&&1/(o-a)<u&&(a=o-1/u),1/(o-a)>l&&(a=o-1/l),a<0&&o-a<1/l&&(o=a+1/l)),a<-r&&(a=-r),1/(o-a)>l&&(o=a+1/l),o>1+r&&(o=1+r),1/(o-a)>l&&(a=o-1/l),this._finalEnd=o,this._finalStart=a,this.skipRangeEvent=e,this.dispatchImmediately("rangechangestarted"),this.rangeChangeDuration>0&&!i){var c=this.rangeChangeAnimation;if(c&&c.progress<1){var h=c.animationOptions;if(h.length>1){if(h[0].to==a&&h[1].to==o)return{start:a,end:o};c.isDisposed()||c.stop()}}this.rangeChangeAnimation&&this.rangeChangeAnimation.kill(),c=this.animate([{property:"start",to:a},{property:"end",to:o}],this.rangeChangeDuration,this.rangeChangeEasing),this.rangeChangeAnimation=c,c&&!c.isFinished()?c.events.on("animationended",(function(){n.dispatchImmediately("rangechangeended")})):this.dispatchImmediately("rangechangeended")}else this.start=a,this.end=o,this.dispatch("rangechangeended")}return{start:a,end:o}},e.prototype.zoomToIndexes=function(t,e,i,r){k(t)&&k(e)&&this.zoom({start:t/this.dataItems.length,end:e/this.dataItems.length},i,r)},Object.defineProperty(e.prototype,"zoomFactor",{get:function(){return V(1/(this.end-this.start),1,this.maxZoomFactor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomFactor",{get:function(){return this.getPropertyValue("maxZoomFactor")},set:function(t){this.setPropertyValue("maxZoomFactor",t)&&(1==t&&(this.maxZoomDeclination=0),this.invalidateDataRange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomDeclination",{get:function(){return this.getPropertyValue("maxZoomDeclination")},set:function(t){this.setPropertyValue("maxZoomDeclination",t)&&this.invalidateDataRange()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return k(this._startIndex)||(this._startIndex=0),this._startIndex},set:function(t){this._startIndex=V(Math.round(t),0,this.dataItems.length),this.start=this.indexToPosition(this._startIndex)},enumerable:!0,configurable:!0}),e.prototype.indexToPosition=function(t){return t/this.dataItems.length},Object.defineProperty(e.prototype,"endIndex",{get:function(){var t=this.dataItems.length;return(!k(this._endIndex)||this._endIndex>t)&&(this._endIndex=t),this._endIndex},set:function(t){this._endIndex=V(Math.round(t),0,this.dataItems.length),this.end=this.indexToPosition(this._endIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._adapterO?this._adapterO.apply("start",this._start):this._start},set:function(t){if(this._start!=t){this._start=t;var e=Math.max(0,Math.floor(this.dataItems.length*t)||0);this._startIndex=Math.min(e,this.dataItems.length),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("startchanged"),this.dispatch("startendchanged")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._adapterO?this._adapterO.apply("end",this._end):this._end},set:function(t){this._end!=t&&(this._end=t,this._endIndex=Math.min(this.dataItems.length,Math.ceil(this.dataItems.length*t)||0),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("endchanged"),this.dispatch("startendchanged"))},enumerable:!0,configurable:!0}),e.prototype.removeFromInvalids=function(){t.prototype.removeFromInvalids.call(this),ve.removeFromInvalidComponents(this),_t(ve.invalidDataItems,this),_t(ve.invalidDataRange,this),_t(ve.invalidRawDatas,this)},Object.defineProperty(e.prototype,"dataItems",{get:function(){if(""!=this._currentDataSetId){var t=this.dataSets.getKey(this._currentDataSetId);if(t)return t}return this._dataItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSets",{get:function(){return this._dataSets||(this._dataSets=new ye),this._dataSets},enumerable:!0,configurable:!0}),e.prototype.setDataSet=function(t){if(this._currentDataSetId!=t){if(this.dataSets.getKey(t))return this.dataItems.each((function(t){t.__disabled=!0})),this._currentDataSetId=t,this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each((function(t){t.__disabled=!1})),!0;if(""!=this._currentDataSetId)return this.dataItems.each((function(t){t.__disabled=!0})),this._currentDataSetId="",this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each((function(t){t.__disabled=!1})),!0}return!1},Object.defineProperty(e.prototype,"currentDataSetId",{get:function(){return this._currentDataSetId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainDataSet",{get:function(){return this._dataItems},enumerable:!0,configurable:!0}),e.prototype._updateDataItemIndexes=function(t){for(var e=this.mainDataSet.values,i=e.length,r=t;r<i;++r)e[r]._index=r},e.prototype.handleDataItemAdded=function(t){t.newValue.component=this,this._updateDataItemIndexes(t.index),this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.handleDataItemRemoved=function(t){this._updateDataItemIndexes(t.index),this.dataItemsInvalid||this.invalidateDataItems()},e.prototype.bindDataField=function(t,e){this.dataFields[t]=e,this.invalidateDataRange()},e.prototype.invalidateProcessedData=function(){this.resetProcessedRange(),this.invalidateDataRange()},e.prototype.resetProcessedRange=function(){this._prevEndIndex=null,this._prevStartIndex=null},Object.defineProperty(e.prototype,"dataUsers",{get:function(){var t=this;return this._dataUsers||(this._dataUsers=new Te,this._disposers.push(new Lt((function(){se(t._dataUsers.iterator(),(function(t){t.dispose()}))})))),this._dataUsers},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.dataFields=Ye(this.dataFields,{}),e},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.data=e.data,this.sequencedInterpolation=e.sequencedInterpolation,this.sequencedInterpolationDelay=e.sequencedInterpolationDelay,this.interpolationDuration=e.interpolationDuration,this.interpolationEasing=e.interpolationEasing},e.prototype.reinit=function(){this._inited=!1,this.deepInvalidate()},e.prototype.getExporting=function(){var e=t.prototype.getExporting.call(this);return e.adapter.has("data",this._exportData,-1,this)||(e.adapter.add("data",this._exportData,-1,this),this.events.on("datavalidated",(function(t){e.menu&&e.menu.invalidate(),e.handleDataUpdated()}))),e},e.prototype._exportData=function(t){return t.data=this.data,t},e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return i&&this.invalidateData(),i},e.prototype.setShowOnInit=function(e){e!=this.getPropertyValue("showOnInit")&&(!e||this.inited||this.hidden?this._showOnInitDisposer2&&this.removeDispose(this._showOnInitDisposer2):(this._showOnInitDisposer2=this.events.once("dataitemsvalidated",this.hideInitially,this,!1),this._disposers.push(this._showOnInitDisposer2))),t.prototype.setShowOnInit.call(this,e)},e.prototype.setBaseId=function(e){e!=this._baseId&&this.dataInvalid&&(this.dataInvalid=!1,ve.removeFromInvalidComponents(this),this._baseId=e,this.invalidateData()),t.prototype.setBaseId.call(this,e)},Object.defineProperty(e.prototype,"minZoomCount",{get:function(){return this.getPropertyValue("minZoomCount")},set:function(t){this.setPropertyValue("minZoomCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomCount",{get:function(){return this.getPropertyValue("maxZoomCount")},set:function(t){this.setPropertyValue("maxZoomCount",t)},enumerable:!0,configurable:!0}),e.prototype._systemCheckIfValidate=function(){return!(this.dataInvalid||this.dataProvider&&this.dataProvider.dataInvalid)},e.prototype.asFunction=function(e){return"interpolationEasing"==e||"rangeChangeEasing"==e||t.prototype.asIs.call(this,e)},e}(Sn);ve.registeredClasses.Component=En;var Ln=function(t){function e(){var e=t.call(this)||this;return e.isOversized=!1,e.className="Label",e.fill=(new _r).getFor("text"),e.wrap=!1,e.truncate=!1,e.fullWords=!0,e.ellipsis="\u2026",e.textAlign="start",e.textValign="top",e.layout="absolute",e.baseLineRatio=-.27,e._positionPrecision=1,e.events.on("maxsizechanged",(function(){e.inited&&e.handleMaxSize()}),e,!1),e.events.once("validated",e.handleValidate,e,!1),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.afterDraw=function(){t.prototype.afterDraw.call(this),this.validatePosition()},e.prototype.setPaper=function(e){var i=t.prototype.setPaper.call(this,e);return i&&this.hardInvalidate(),i},e.prototype.handleValidate=function(){!this.currentText&&!this.text||0!=this.bbox.width&&0!=this.bbox.height||ve.events.once("exitframe",this.hardInvalidate,this)},e.prototype.handleMaxSize=function(){this.bbox.width>this.availableWidth||this.bbox.width<this.availableWidth&&(this.isOversized||this.truncate)||this.bbox.height>this.availableHeight||this.bbox.height<this.availableHeight&&this.isOversized?this.invalidate():this.alignSVGText()},e.prototype.arrange=function(){},e.prototype.updateCurrentText=function(){var t,e;Ke(this.html)&&this.paper.supportsForeignObject()?(t="html",e=this.html):(t="svg",e=this.text),I(e)&&(e=e.toString()),S(e)&&""!==e&&(e=this.populateString(e,this.dataItem)),"html"==t?this._adapterO&&(e=this._adapterO.apply("htmlOutput",e)):this._adapterO&&(e=this._adapterO.apply("textOutput",e));var i=e!=this.currentText||t!=this._currentFormat;return this.currentText=e,this._currentFormat=t,i},e.prototype.hardInvalidate=function(){this._prevStatus="",this.invalidate()},e.prototype.getLineBBox=function(t){var e=t&&t.element,i=e&&e.node;i&&i.parentNode&&(t.bbox=e.getBBox())},e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.bbox.width,i=this.bbox.height,r=this.topParent;if(!r||r.maxWidth&&r.maxHeight){var n=N(this.availableWidth-this.pixelPaddingLeft-this.pixelPaddingRight,0),a=N(this.availableHeight-this.pixelPaddingTop-this.pixelPaddingBottom,0),o=a+","+n+this.wrap+this.truncate+this.fullWords+this.rtl+this.ellipsis;if(this.updateCurrentText()||!this.inited||this._prevStatus!=o){this._measuredWidth=0,this._measuredHeight=0,this.isOversized=!1;var s=this._currentFormat,l=this.currentText;if(S(l)&&""!=l){var u=l.split("\n");this._prevStatus=o,this.textAlign=this.textAlign;var c=this.group.getAttr("display");if("none"==c&&this.group.removeAttr("display"),this.textPathElement&&this.textPathElement.removeChildren(),"svg"===s){this.element.removeAttr("display");var h=this.element;this.resetBBox();for(var p=0,d="",f=0;f<u.length;f++){var m=u[f];if(""!=m){var y=nn().chunk(m,null,this.ignoreFormatting),g=0,b=!0,v=!1,_=this.getLineInfo(f);_?(_.text="",_.element.textContent=""):(_={text:"",element:this.getSVGLineElement("",0),complex:!1},h.add(_.element)),_.element.removeAttr("display"),_.element.removeChildren(),this.textPathElement&&_.element.add(this.textPathElement);for(var x=0;x<y.length;x++){x&&(_.complex=!0);var w=y[x];if("format"===w.type)d=w.text;else{if(v)continue;_.text=w.text,_.style=nn().translateStyleShortcuts(d);var T=this.getSvgElement(_.text,_.style);if(this.textPathElement?this.textPathElement.add(T):_.element.add(T),this.getLineBBox(_),_.bbox.width=Math.ceil(_.bbox.width),g<_.bbox.height&&(g=_.bbox.height),(this.wrap||this.truncate)&&_.bbox.width>n){this.isOversized=!0;var P=_.element.textContent,C=_.bbox.width/P.length,k=U(Math.ceil((_.bbox.width-n)/C),P.length);if(this.truncate){var I=!1,A=_.element.node;if(A&&A.childNodes)for(var O=_.element.node.childNodes.length-1;O>=0;O--){var D=_.element.node.childNodes[O];if(I&&_.bbox.width<=n&&(D.textContent+=" "+this.ellipsis,_.bbox=_.element.getBBox(),_.bbox.width=Math.floor(_.bbox.width),_.bbox.width<=n))break;I=!1;var F=D.textContent;for(P=_.element.textContent,k=U(Math.ceil((_.bbox.width-n)/C),P.length);_.bbox.width>n&&k<=P.length&&k>0;)(R=N(P.length-k-this.ellipsis.length,1))<=1&&(k=0,O>0&&(I=!0,_.element.node.removeChild(D))),(F=ii(F,R,this.ellipsis,this.fullWords,this.rtl)).length>R&&this.fullWords&&(F=ii(F,R,this.ellipsis,!1,this.rtl)),D.textContent=F,_.bbox=_.element.getBBox(),_.bbox.width=Math.floor(_.bbox.width),k=Math.ceil(1.1*k);v=!0}}else if(_.element.node){for(var M=_.element.node.lastChild,E=void 0;_.bbox.width>n&&k<=P.length&&k>0;){var R=N(w.text.length-k,1);b?E=ei(w.text,R,!0,this.rtl):((E=ei(w.text,R,!0,this.rtl))[0].length>R||1===R)&&(_.element.node.removeChild(M),k=0),k>0&&(M.textContent=nn().cleanUp(ri(E.shift()))),_.bbox=_.element.getBBox(),_.bbox.width=Math.floor(_.bbox.width),k=Math.ceil(1.1*k)}if(E.length>0){var V="";S(E)&&(V+=this.rtl?E.join("")+d:d+E.join("").replace(/([\[\]]{1})/g,"$1$1"));for(var j=x+1;j<y.length;j++)V+="value"==y[j].type?y[j].text.replace(/([\[\]]{1})/g,"$1$1"):y[j].text;u.splice(f+1,0,V)}v=!0}}this.bbox.width<_.bbox.width&&(this.bbox.width=_.bbox.width),this.bbox.height=p+g,_.element.attr(this.textPathElement?{dy:-this.paddingBottom.toString()}:{x:"0",y:p+g,dy:L(this.baseLineRatio*g,3).toString()}),b=!1}}var z=_.element.node;z&&(M=z.lastChild)&&(M.textContent=this.rtl?M.textContent.replace(/^[\s\uFEFF\xA0]+/g,""):ni(M.textContent)),p+=g,this.addLineInfo(_,f)}else{var B=this.getSVGLineElement("",0);B.add(this.getSvgElement(".",nn().translateStyleShortcuts(d))),h.add(B);var X=Math.ceil(B.getBBox().height);X>0&&(p+=X),h.removeElement(B);var H=this.getLineInfo(f);H&&(H.text="",H.element.textContent="")}}this.maybeHideOversized(),this.measureFailed=!1,0!=this.bbox.width&&0!=this.bbox.height||(this.measureFailed=!0),this._measuredWidth=L(N(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight)),this._measuredHeight=L(N(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom)),this.alignSVGText(),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,i==this._measuredHeight&&e==this._measuredWidth||this.dispatch("transformed"),this.hideUnused(u.length)}else{this.element.removeAttr("display"),this.resetBBox(),(h=this.element).removeChildren();var W=this.paper.foreignObject();h.add(W),this.maxWidth&&W.attr({width:this.maxWidth}),this.maxHeight&&W.attr({height:this.maxHeight});var Y=this.getHTMLLineElement(l);W.node.appendChild(Y),Y.style.display="inline-block";var G=Y.clientWidth,q=Y.clientHeight;Y.style.display="block",this._bbox={x:0,y:0,width:G,height:q},W.attr({width:G,height:q}),this.maybeHideOversized(),this._measuredWidth=N(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight),this._measuredHeight=N(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,this.truncate&&(Y.style.overflow="hidden"),(G>n||q>a)&&(this.isOversized=!0)}this.setStyles(),this.updateCenter(),this.updateBackground(),"none"==c&&this.group.attr({display:"none"}),this.pathElement&&this.paper.appendDef(this.pathElement)}else this.element.attr({display:"none"})}}else r.events.once("maxsizechanged",this.hardInvalidate,this,!1)},e.prototype.maybeHideOversized=function(){this.hideOversized&&(this.availableWidth<this.bbox.width||this.availableHeight<this.bbox.height?(this.element.attr({display:"none"}),this.isOversized=!0):(this.element.removeAttr("display"),this.isOversized=!1))},e.prototype.alignSVGText=function(){var t=this.element,e=t.node.children||t.node.childNodes;if(e&&(!e||0!=e.length))for(var i=this._measuredWidth,r=this._measuredHeight,n=e.length-1;n>=0;n--){var a=e[n];if(a.setAttribute("text-anchor",this.textAlign),this.textPathElement)a.removeAttribute("x"),a.removeAttribute("y");else{switch(this.textAlign){case"middle":a.setAttribute("x",(i/2).toString()+"px");break;case"end":this.rtl||a.setAttribute("x",i.toString());break;default:this.rtl?a.setAttribute("x",i.toString()):a.removeAttribute("text-anchor")}var o=_(a.getAttribute("y"));switch(this.textValign){case"middle":a.setAttribute("y",((o||0)+(r-this.bbox.height)/2).toString());break;case"bottom":a.setAttribute("y",((o||0)+r-this.bbox.height).toString());break;default:a.setAttribute("y",(o||0).toString())}}}},e.prototype.getSVGLineElement=function(t,e){var i=this.paper.addGroup("text");return i.textContent=t,i.attr({x:"0"}),S(e)&&i.attr({y:e.toString()}),(this.truncate||this.wrap)&&i.attr({overflow:"hidden"}),this.rtl&&i.attr({direction:"rtl"}),i},e.prototype.resetBBox=function(){this._bbox={x:0,y:0,width:0,height:0}},e.prototype.getHTMLLineElement=function(t){var e=document.createElement("div");switch(e.innerHTML=t,this.textAlign){case"middle":e.style.textAlign="center";break;case"end":e.style.textAlign="right"}return this.wrap?e.style.wordWrap="break-word":e.style.whiteSpace="nowrap",this.rtl&&(e.style.direction="rtl"),S(this.fill)&&(e.style.color=this.fill.toString()),e},e.prototype.setStyles=function(){var t=this.element;!this.selectable||this.draggable||this.resizable||this.swipeable?t.addStyle({webkitUserSelect:"none",msUserSelect:"none"}):this.selectable&&(t.removeStyle("webkitUserSelect"),t.removeStyle("msUserSelect"))},e.prototype.hideUnused=function(t){this.initLineCache();var e=this.getCache("lineInfo");if(e.length>=t)for(var i=t;i<e.length;i++){var r=e[i];r&&r.element&&r.element.attr({display:"none"})}},Object.defineProperty(e.prototype,"text",{get:function(){return this.getPropertyValue("text")},set:function(t){this.setPropertyValue("text",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(t){this.setPropertyValue("path",t,!0)&&(this.pathElement&&this.pathElement.dispose(),this.textPathElement&&this.textPathElement.dispose(),this.pathElement=this.paper.add("path"),this.pathElement.attr({d:t}),this.pathElement.attr({id:"text-path-"+this.uid}),this._disposers.push(this.pathElement),this.textPathElement=this.paper.addGroup("textPath"),this.textPathElement.attrNS(rr,"xlink:href","#text-path-"+this.uid),this.textPathElement.attr({path:t}),this._disposers.push(this.textPathElement),this.hardInvalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationOnPath",{get:function(){return this.getPropertyValue("locationOnPath")},set:function(t){this.setPropertyValue("locationOnPath",t),this.textPathElement&&this.textPathElement.attr({startOffset:100*t+"%"})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseLineRatio",{get:function(){return this.getPropertyValue("baseLineRatio")},set:function(t){this.setPropertyValue("baseLineRatio",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrap",{get:function(){return this.getPropertyValue("wrap")},set:function(t){this.resetBBox(),this.setPropertyValue("wrap",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"truncate",{get:function(){return this.getPropertyValue("truncate")},set:function(t){this.resetBBox(),this.setPropertyValue("truncate",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullWords",{get:function(){return this.getPropertyValue("fullWords")},set:function(t){this.setPropertyValue("fullWords",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ellipsis",{get:function(){return this.getPropertyValue("ellipsis")},set:function(t){this.setPropertyValue("ellipsis",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this.getPropertyValue("selectable")},set:function(t){this.setPropertyValue("selectable",t,!0),this.setStyles()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this.getPropertyValue("textAlign")},set:function(t){this.setPropertyValue("textAlign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textValign",{get:function(){return this.getPropertyValue("textValign")},set:function(t){this.setPropertyValue("textValign",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.getPropertyValue("html")},set:function(t){this.setPropertyValue("html",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideOversized",{get:function(){return this.getPropertyValue("hideOversized")},set:function(t){this.setPropertyValue("hideOversized",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreFormatting",{get:function(){return this.getPropertyValue("ignoreFormatting")},set:function(t){this.setPropertyValue("ignoreFormatting",t,!0)},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){},e.prototype.getLineInfo=function(t){this.initLineCache();var e=this.getCache("lineInfo");return e.length>t?e[t]:void 0},e.prototype.addLineInfo=function(t,e){this.initLineCache(),this.getCache("lineInfo")[e]=t},e.prototype.initLineCache=function(){S(this.getCache("lineInfo"))||this.setCache("lineInfo",[],0)},e.prototype.setDataItem=function(e){this._sourceDataItemEvents&&this._sourceDataItemEvents.dispose(),e&&(this._sourceDataItemEvents=new Rt([e.events.on("valuechanged",this.invalidate,this,!1),e.events.on("workingvaluechanged",this.invalidate,this,!1),e.events.on("calculatedvaluechanged",this.invalidate,this,!1),e.events.on("propertychanged",this.invalidate,this,!1)])),t.prototype.setDataItem.call(this,e)},Object.defineProperty(e.prototype,"availableWidth",{get:function(){return S(this.maxWidth)?this.maxWidth:this.pixelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availableHeight",{get:function(){return S(this.maxHeight)?this.maxHeight:this.pixelHeight},enumerable:!0,configurable:!0}),e.prototype.getSvgElement=function(t,e){var i=this.paper.add("tspan");return i.textContent=t,e&&i.node.setAttribute("style",e),i},e.prototype.deepInvalidate=function(){t.prototype.deepInvalidate.call(this),this.hardInvalidate()},Object.defineProperty(e.prototype,"readerTitle",{get:function(){var t=this.getPropertyValue("readerTitle");return t||(t=this.populateString(ui(Ke(this.html)?this.html:this.text))),t},set:function(t){t=x(t),this.setPropertyValue("readerTitle",t)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),e}(Sn);ve.registeredClasses.Label=Ln,Dn.push({relevant:Fn.heightXS,state:function(t,e){if(t instanceof Ln&&t.parent&&t.parent.isBaseSprite){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var Rn=function(t){function e(){var e=t.call(this)||this;return e.className="RoundedRectangle",e.element=e.paper.add("path"),e.cornerRadius(3,3,3,3),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.innerWidth,i=this.innerHeight;if(k(e)&&k(i)){var r=U(e,i)/2,n=Ze(this.cornerRadiusTopLeft,r),a=Ze(this.cornerRadiusTopRight,r),o=Ze(this.cornerRadiusBottomRight,r),s=Ze(this.cornerRadiusBottomLeft,r),l=U(Math.abs(e/2),Math.abs(i/2)),u=V(n,0,l),c=V(a,0,l),h=V(o,0,l),p=V(s,0,l);this.path="M"+u+",0 L"+(e-c)+",0 a"+c+","+c+" 0 0 1 "+c+","+c+" L"+e+","+(i-h)+" a"+h+","+h+" 0 0 1 -"+h+","+h+" L"+p+","+i+" a"+p+","+p+" 0 0 1 -"+p+",-"+p+" L0,"+u+" a"+u+","+u+" 0 0 1 "+u+",-"+u+" Z"}},e.prototype.cornerRadius=function(t,e,i,r){this.cornerRadiusTopLeft=t,this.cornerRadiusTopRight=e,this.cornerRadiusBottomLeft=i,this.cornerRadiusBottomRight=r},Object.defineProperty(e.prototype,"cornerRadiusTopLeft",{get:function(){return this.getPropertyValue("cornerRadiusTopLeft")},set:function(t){this.setPercentProperty("cornerRadiusTopLeft",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadiusTopRight",{get:function(){return this.getPropertyValue("cornerRadiusTopRight")},set:function(t){this.setPercentProperty("cornerRadiusTopRight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadiusBottomRight",{get:function(){return this.getPropertyValue("cornerRadiusBottomRight")},set:function(t){this.setPercentProperty("cornerRadiusBottomRight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadiusBottomLeft",{get:function(){return this.getPropertyValue("cornerRadiusBottomLeft")},set:function(t){this.setPercentProperty("cornerRadiusBottomLeft",t,!0)},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),e}(_n);ve.registeredClasses.RoundedRectangle=Rn;var Vn=function(t){function e(){var e=t.call(this)||this;e.className="Button",e.tooltipY=0,e.iconPosition="left",e.layout="horizontal",e.contentAlign="center",e.contentValign="middle",e.padding(8,16,8,16),e.setStateOnChildren=!0;var i=new _r,r=e.background;r.fill=i.getFor("secondaryButton"),r.stroke=i.getFor("secondaryButtonStroke"),r.fillOpacity=1,r.strokeOpacity=1,r.cornerRadius(3,3,3,3),e.label=new Ln,e.label.fill=i.getFor("secondaryButtonText"),e.label.shouldClone=!1;var n=r.states.create("hover");n.properties.fillOpacity=1,n.properties.fill=i.getFor("secondaryButtonHover");var a=r.states.create("down");return a.transitionDuration=100,a.properties.fill=i.getFor("secondaryButtonDown"),a.properties.fillOpacity=1,e.role="button",e.focusable=!0,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},set:function(t){var e=this._icon;e&&(e.parent=void 0),t&&(this._icon=t,t.parent=this,t.interactionsEnabled=!1,t.shouldClone=!1,this.iconPosition=this.iconPosition,this._disposers.push(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconPosition",{get:function(){return this.getPropertyValue("iconPosition")},set:function(t){this.setPropertyValue("iconPosition",t),this.icon&&("left"==t?this.icon.toBack():this.icon.toFront())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label&&this.removeDispose(this._label),this._label=t,t&&(t.parent=this,t.interactionsEnabled=!1,this._disposers.push(this._label))},enumerable:!0,configurable:!0}),e.prototype.createBackground=function(){return new Rn},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e.label&&this.label.copyFrom(e.label),e.icon&&(this.icon=e.icon.clone())},e}(Sn);ve.registeredClasses.Button=Vn;var jn=function(t){function e(){var e=t.call(this)||this;return e.className="Circle",e.element=e.paper.add("circle"),e.setPercentProperty("radius",m(100)),e.setPropertyValue("horizontalCenter","middle"),e.setPropertyValue("verticalCenter","middle"),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.element.attr({r:this.pixelRadius})},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return Ze(this.radius,U(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),e.prototype.measureElement=function(){var t=this.pixelRadius;this._bbox={x:-t,y:-t,width:2*t,height:2*t}},e}(_n);ve.registeredClasses.Circle=jn;var zn=function(t){function e(){var e=t.call(this)||this;return e.className="Ellipse",e.element=e.paper.add("ellipse"),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.element.attr({rx:this.radius}),this.element.attr({ry:this.radiusY})},Object.defineProperty(e.prototype,"radiusY",{get:function(){return this.innerHeight/2},set:function(t){this.height=2*t,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.innerWidth/2},set:function(t){this.width=2*t,this.invalidate()},enumerable:!0,configurable:!0}),e}(jn);ve.registeredClasses.Ellipse=zn;var Bn=function(t){function e(){var e=t.call(this)||this;return e.className="Image",e.element=e.paper.add("image"),e.applyTheme(),e.width=50,e.height=50,e}return Object(d.d)(e,t),e.prototype.draw=function(){if(t.prototype.draw.call(this),this.href){var e=this.innerWidth,i=this.innerHeight;k(this.widthRatio)&&(this.width=e=i*this.widthRatio),k(this.heightRatio)&&(this.height=i=e*this.heightRatio),this.element.attr({width:e,height:i}),this.element.attrNS(rr,"xlink:href",this.href)}},Object.defineProperty(e.prototype,"href",{get:function(){return this.getPropertyValue("href")},set:function(t){this.setPropertyValue("href",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"widthRatio",{get:function(){return this.getPropertyValue("widthRatio")},set:function(t){this.setPropertyValue("widthRatio",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heightRatio",{get:function(){return this.getPropertyValue("heightRatio")},set:function(t){this.setPropertyValue("heightRatio",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bbox",{get:function(){return{x:0,y:0,width:this.pixelWidth,height:this.pixelHeight}},enumerable:!0,configurable:!0}),e}(_n);ve.registeredClasses.Image=Bn;var Nn=function(t){function e(){var e=t.call(this)||this;return e.className="Line",e.element=e.paper.add("line"),e.fill=Ue(),e.x1=0,e.y1=0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.pixelPerfect=this.x1==this.x2||this.y1==this.y2,this.x1=this.x1,this.x2=this.x2,this.y1=this.y1,this.y2=this.y2},Object.defineProperty(e.prototype,"x1",{get:function(){return this.getPropertyValue("x1")},set:function(t){k(t)||(t=0);var e=0;this.pixelPerfect&&this.stroke instanceof Zr&&(e=1e-5),this.setPropertyValue("x1",t,!0),this.element.attr({x1:t+e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){var t=this.getPropertyValue("x2");return k(t)||(t=this.pixelWidth),t},set:function(t){k(t)||(t=0),this.setPropertyValue("x2",t,!0),this.element.attr({x2:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.getPropertyValue("y1")},set:function(t){k(t)||(t=0);var e=0;this.pixelPerfect&&this.stroke instanceof Zr&&(e=1e-5),this.setPropertyValue("y1",t,!0),this.element.attr({y1:t+e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){var t=this.getPropertyValue("y2");return k(t)||(t=this.pixelHeight),t},set:function(t){k(t)||(t=0),this.setPropertyValue("y2",t,!0),this.element.attr({y2:t})},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t){var e={x:this.x1,y:this.y1},i={x:this.x2,y:this.y2},r=q(e,i,t),n=K(e,i);return{x:r.x,y:r.y,angle:n}},e}(_n);ve.registeredClasses.Line=Nn;var Un=function(t){function e(){var e=t.call(this)||this;return e.className="PointedRectangle",e.element=e.paper.add("path"),e.cornerRadius=6,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.cornerRadius,i=this.innerWidth,r=this.innerHeight;if(i>0&&r>0){var n,a,o,s,l,u,c=this.pointerX,h=this.pointerY,p=this.pointerBaseWidth/2,d=U(i/2,r/2),f=V(e,0,d),m=V(e,0,d),y=V(e,0,d),g=V(e,0,d),b=(c-0)*(r-0)-(h-0)*(i-0),v=(c-0)*(0-r)-(h-r)*(i-0);o=b>0&&v>0?"M"+f+",0 L"+((n=V(c,f+p,i-p-m))-p)+",0 L"+c+","+(h=V(h,-1/0,0))+" L"+(n+p)+",0 L"+(i-m)+",0":"M"+f+",0 L"+(i-m)+",0",l=b<0&&v<0?" L"+(i-y)+","+r+" L"+((n=V(c,g+p,i-p-y))+p)+","+r+" L"+c+","+(h=V(h,r,1/0))+" L"+(n-p)+","+r+" L"+g+","+r:" L"+g+","+r,u=b<0&&v>0?" L0,"+(r-g)+" L0,"+((a=V(h,f+p,r-g-p))+p)+" L"+(c=V(c,-1/0,0))+","+h+" L0,"+(a-p)+" L0,"+f:" L0,"+f,s=b>0&&v<0?" L"+i+","+m+" L"+i+","+((a=V(h,m+p,r-p-y))-p)+" L"+(c=V(c,i,1/0))+","+h+" L"+i+","+(a+p)+" L"+i+","+(r-y):" L"+i+","+(r-y),this.path=o+" a"+m+","+m+" 0 0 1 "+m+","+m+s+" a"+y+","+y+" 0 0 1 -"+y+","+y+l+" a"+g+","+g+" 0 0 1 -"+g+",-"+g+u+" a"+f+","+f+" 0 0 1 "+f+",-"+f}},Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(t){this.setPropertyValue("cornerRadius",t,!0)},enumerable:!0,configurable:!0}),e}(function(t){function e(){var e=t.call(this)||this;return e.className="PointedShape",e.pointerBaseWidth=15,e.pointerLength=10,e.pointerY=0,e.pointerX=0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),k(this.pointerX)||(this.pointerX=this.pixelWidth/2),k(this.pointerY)||(this.pointerY=this.pixelHeight+10)},Object.defineProperty(e.prototype,"pointerBaseWidth",{get:function(){return this.getPropertyValue("pointerBaseWidth")},set:function(t){this.setPropertyValue("pointerBaseWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerLength",{get:function(){return this.getPropertyValue("pointerLength")},set:function(t){this.setPropertyValue("pointerLength",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerX",{get:function(){return this.getPropertyValue("pointerX")},set:function(t){this.setPropertyValue("pointerX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerY",{get:function(){return this.getPropertyValue("pointerY")},set:function(t){this.setPropertyValue("pointerY",t,!0)},enumerable:!0,configurable:!0}),e}(_n));function Xn(t){var e=Wn(t[0]),i={x:0,y:0},r=Gi.minPolylineStep;k(r)||(r=.5);for(var n=0,a=t.length;n<a;n++){var o=t[n];W(o,i)>r&&(e+=Wn(o),i=o)}return e}function Hn(t){return" M"+L(t.x,4)+","+L(t.y,4)+" "}function Wn(t){return" L"+L(t.x,4)+","+L(t.y,4)+" "}function Yn(t,e){return" Q"+L(e.x,4)+","+L(e.y,4)+" "+L(t.x,4)+","+L(t.y,4)}function Gn(t,e,i){return" C"+L(e.x,4)+","+L(e.y,4)+" "+L(i.x,4)+","+L(i.y,4)+" "+L(t.x,4)+","+L(t.y,4)}function qn(t,e,i,r){if(0==e)return"";k(r)||(r=i);var n="",a=",",o=Math.ceil(Math.abs(e)/180),s=1;e<0&&(s=0);var l=0,u=0,c=-B(t)*i,h=-j(t)*r;if(e<.5&&i>3e3)return Wn({x:f=L(B(d=t+e)*i,4),y:m=L(j(d)*r,4)});for(var p=0;p<o;p++){var d,f,m;n+=" a"+i+a+r+a+0+a+0+a+s+a+(f=L(B(d=t+e/o*(p+1))*i+c-l,4))+a+(m=L(j(d)*r+h-u,4)),l=f,u=m}return n}function Kn(t,e,i,r,n,a,o){if(0==e)return"";if(k(r)||(r=0),0==i&&r<=0)return"";if(i<r){var s=i;i=r,r=s,k(n)&&(n=n/r*i)}360==(e=U(e,360))&&(a=0,o=0);var l=t+e,u=j(U(e,45)/2),c=(n=k(n)?n:i)/i*r,h=n/i*(a=a||0),p=n/i*(o=k(o)?o:a);a=V(a,0,(i-r)/2),h=V(h,0,(n-c)/2),o=V(o,0,(i-r)/2),p=V(p,0,(n-c)/2),a=L(V(a,0,i*u),4),h=L(V(h,0,n*u),4),o=L(V(o,0,r*u),4),p=L(V(p,0,c*u),4);var d=Math.asin(a/i/2)*M*2,f=Math.asin(h/n/2)*M*2;r<o&&(r=o),c<p&&(c=p);var m=Math.asin(o/r/2)*M*2,y=Math.asin(p/c/2)*M*2;k(m)||(m=0),k(y)||(y=0);var g=t+e/2,b={x:L(B(g)*r,4),y:j(g)*c},v={x:B(t)*(r+o),y:j(t)*(c+p)},_={x:B(t)*(i-a),y:j(t)*(n-h)},x={x:B(l)*(i-a),y:j(l)*(n-h)},S={x:B(l)*(r+o),y:j(l)*(c+p)},w={x:B(t+d)*i,y:j(t+f)*n},T={x:B(l-m)*r,y:j(l-y)*c};o+=o*j(m/2),p+=p*j(y/2),m>(l-t)/2&&(T=b);var P="";return 360==e?P=Hn(_):(P=Hn(v),P+=Wn(_),P+=Zn(w,a,h,!0)),P+=qn(t+d,e-2*d,i,n),k(r)&&0!=r?(360==e&&0==a?P+=Hn(S):(P+=Zn(x,a,h,!0),P+=Wn(S),P+=Zn(T,o,p,!0)),P+=qn(l-m,-(e-2*m),r,c),(e<360||a>0)&&(P+=Zn(v,o,p,!0)),P+=Wn(v)):(P+=Zn(x,a,h,!0),e<360&&(P+=Wn(v))),P}function Zn(t,e,i,r,n,a){if(0==e)return"";var o=",";return" A"+e+o+i+o+(a=a||0)+o+ +(n=Boolean(n))+o+ +(r=Boolean(r))+o+L(t.x,4)+o+L(t.y,4)}function Jn(t,e,i,r){return k(i)||(i=0),k(r)||(r=0),Hn({x:i,y:r})+Wn({x:i+t,y:r})+Wn({x:i+t,y:r+e})+Wn({x:i,y:r+e})+" Z"}function $n(t,e){var i=",",r=" L";return e?"M"+t.x+i+t.y+r+t.x+i+(t.y+t.height)+r+(t.x+t.width)+i+(t.y+t.height)+r+(t.x+t.width)+i+t.y+r+t.x+i+t.y:"M"+t.x+i+t.y+r+(t.x+t.width)+i+t.y+r+(t.x+t.width)+i+(t.y+t.height)+r+t.x+i+(t.y+t.height)+r+t.x+i+t.y}var Qn=function(t){function e(){var e=t.call(this)||this;return e._distance=0,e.className="Polyline",e.element=e.paper.add("path"),e.shapeRendering="auto",e.fill=Ue(),e.strokeOpacity=1,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.makePath=function(){this._distance=0;var t=this.segments;if(t&&t.length>0){for(var e="",i=0,r=t.length;i<r;i++){var n=t[i];if(n.length>0){e+=Hn(n[0]);for(var a=1;a<n.length;a++){var o=n[a];e+=Wn(o),this._distance+=W(n[a-1],o)}}}this.path=e}this._realSegments=t},Object.defineProperty(e.prototype,"segments",{get:function(){return this.getPropertyValue("segments")},set:function(t){this.setPropertyValue("segments",t),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t){var e=0;t<0&&(t=Math.abs(t),e=180);var i=this._realSegments;if(i){for(var r=this.distance,n=0,a=0,o=0,s=void 0,l=void 0,u=0;u<i.length;u++){var c=i[u];if(c.length>1){for(var h=1;h<c.length;h++)if(a=n/r,o=(n+=W(s=c[h-1],l=c[h]))/r,a<=t&&o>t){u=i.length;break}}else 1==c.length&&(s=c[0],l=c[0],a=0,o=1)}if(s&&l){var p=q(s,l,(t-a)/(o-a));return{x:p.x,y:p.y,angle:e+K(s,l)}}}return{x:0,y:0,angle:0}},Object.defineProperty(e.prototype,"realSegments",{get:function(){return this._realSegments},enumerable:!0,configurable:!0}),e}(_n);ve.registeredClasses.Polyline=Qn;var ta=function(t){function e(){var e=t.call(this)||this;return e.className="Polyarc",e.controlPointDistance=.5,e.controlPointPosition=.5,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.makePath=function(){this._distance=0;var t=this.segments;if(t&&t.length>0){var e="";this._realSegments=[];for(var i=0,r=t.length;i<r;i++){var n=t[i],a=[];if(this._realSegments.push(a),n.length>0){e+=Hn(n[0]);for(var o=1;o<n.length;o++){var s=n[o-1],l=n[o],u=W(l,s),c=u*this.controlPointDistance,h=this.controlPointPosition,p=-K(s,l),d={x:s.x+(l.x-s.x)*h*.5-c*j(p),y:s.y+(l.y-s.y)*h*.5-c*B(p)},f={x:s.x+(l.x-s.x)*h*1.5-c*j(p),y:s.y+(l.y-s.y)*h*1.5-c*B(p)};e+=Gn(l,d,f);var m=Math.ceil(u),y=s;if(m>0)for(var g=0;g<=m;g++){var b=Q(s,l,d,f,g/m);a.push(b),this._distance+=W(y,b),y=b}else a.push(s)}}}this.path=e}},Object.defineProperty(e.prototype,"controlPointPosition",{get:function(){return this.getPropertyValue("controlPointPosition")},set:function(t){this.setPropertyValue("controlPointPosition",t),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(t){this.setPropertyValue("controlPointDistance",t),this.makePath()},enumerable:!0,configurable:!0}),e}(Qn);ve.registeredClasses.Polyarc=ta;var ea=function(t){function e(e){var i=t.call(this)||this;return i._bboxes=[],i.morphDuration=800,i.morphEasing=Bi,i.morphToSingle=!0,i.scaleRatio=1,i.className="Morpher",i.morphable=e,i.applyTheme(),i}return Object(d.d)(e,t),e.prototype.morphToPolygon=function(t,e,i){var r=this.morphable.currentPoints;if(r&&t){this.sortPoints(r),this.sortPoints(t),this._morphFromPointsReal=[],this._morphToPointsReal=[],S(e)||(e=this.morphDuration),S(i)||(i=this.morphEasing),this._morphFromPointsReal=this.normalizePoints(t,r),this._morphToPointsReal=this.normalizePoints(r,t),this.morphable.currentPoints=this._morphFromPointsReal;var n=new tr(this,{property:"morphProgress",from:0,to:1},e,i);return this._disposers.push(n),n.start(),n}},e.prototype.normalizePoints=function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i][0],a=t[i][1],o=w(Z(n)),s=o.x+o.width,l=o.y+o.height;if(e[i]||(e[i]=[]),n&&!e[i][0]&&(e[i][0]=[{x:s,y:l},{x:s,y:l}]),e[i][0]){e[i][0]=this.addPoints(e[i][0],n.length);for(var u=1/0,c=0,h=0;h<e[i][0].length;h++){var p=W(e[i][0][h],n[0]);p<u&&(c=h,u=p)}var d=e[i][0].slice(0,c),f=e[i][0].slice(c);e[i][0]=f.concat(d)}a&&(e[i][1]||(e[i][1]=[{x:s,y:l},{x:s,y:l}]),e[i][1]=this.addPoints(e[i][1],a.length))}return e},e.prototype.sortPoints=function(t){t.sort((function(t,e){var i=w(Z(t[0])),r=w(Z(e[0]));return i.width*i.height>r.width*r.height?-1:1}));for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i][0];n&&e.push(w(Z(n)))}return J(e)},e.prototype.morphToCircle=function(t,e,i){var r=this.morphable.points,n=this.sortPoints(r);this._morphFromPointsReal=[],this._morphToPointsReal=[],S(e)||(e=this.morphDuration),S(i)||(i=this.morphEasing);for(var a=0,o=r.length;a<o;a++){var s=r[a][0],l=r[a][1];if(this._morphFromPointsReal[a]=[],this._morphToPointsReal[a]=[],s){var u=s,c=s,h=w(Z(c));this.morphToSingle&&(h=w(n));var p=h.x+h.width/2,d=h.y+h.height/2,f=t;k(f)||(f=Math.min(h.width/2,h.height/2)),u=[];var m=K({x:p,y:d},s[0]),y=100;s.length>y&&(y=s.length);for(var g=360/((y=(c=this.addPoints(s,y)).length)-1),b=0;b<y;b++){var v=g*b+m,_={x:p+f*B(v),y:d+f*j(v)};u[b]=_}if(l&&l.length>0)for(var x=0,T=l.length;x<T;x++)u.push({x:p,y:d});this._morphFromPointsReal[a][0]=c,this._morphToPointsReal[a][0]=u}}this.morphable.currentPoints=this._morphFromPointsReal;var P=new tr(this,{property:"morphProgress",from:0,to:1},e,i);return this._disposers.push(P),P.start(),P},e.prototype.addPoints=function(t,e){for(var i=Math.round(e/t.length),r=[],n=0,a=t.length;n<a;n++){var o,s=t[n];o=n==t.length-1?t[0]:t[n+1],r.push(s);for(var l=1;l<i;l++){var u=l/i;r.push({x:s.x+(o.x-s.x)*u,y:s.y+(o.y-s.y)*u})}r.length+t.length-n==e&&(i=0)}if(r.length<e&&t.length>0){var c=t[t.length-1];for(l=r.length;l<e;l++)r.push({x:c.x,y:c.y})}return r},e.prototype.morphToRectangle=function(t,e,i,r){var n=this.morphable.points;this.sortPoints(n),this._morphFromPointsReal=[],this._morphToPointsReal=[],S(i)||(i=this.morphDuration),S(r)||(r=this.morphEasing);for(var a=0,o=n.length;a<o;a++){var s=n[a][0],l=n[a][1];if(this._morphFromPointsReal[a]=[],this._morphToPointsReal[a]=[],s){var u=s,c=s,h=this._bboxes[a],p=h.x,d=h.y,f=t,m=e;if(k(f)||(f=h.width),k(m)||(m=h.height),u=this.addPoints(u=[{x:p,y:d},{x:p+f,y:d},{x:p+f,y:d+m},{x:p,y:d+m}],s.length),s.length<4)for(var y=s.length;y<4;y++)u.push({x:s[y].x,y:s[y].y});if(l&&l.length>0)for(var g=h.x+h.width/2,b=h.y+h.height/2,v=0,_=l.length;v<_;v++)u.push({x:g,y:b});this._morphFromPointsReal[a][0]=c,this._morphToPointsReal[a][0]=u}}this.morphable.currentPoints=this._morphFromPointsReal;var x=new tr(this,{property:"morphProgress",from:0,to:1},i,r);return this._disposers.push(x),x.start(),x},Object.defineProperty(e.prototype,"morphProgress",{get:function(){return this._morphProgress},set:function(t){this._morphProgress=t;var e=[];if(null!=t){var i=this._morphFromPointsReal,r=this._morphToPointsReal;if(null!=i&&null!=r)for(var n=0,a=i.length;n<a;n++){var o=[];e.push(o);var s=i[n][0],l=i[n][1],u=r[n][0],c=r[n][1];if(s&&s.length>0&&u&&u.length>0){for(var h=[],p=0,d=s.length;p<d;p++)h.push({x:(g=s[p]).x+((b=u[p]).x*this.scaleRatio-g.x)*t,y:g.y+(b.y*this.scaleRatio-g.y)*t});o[0]=h}if(l&&l.length>0&&c&&c.length>0){for(var f=[],m=0,y=l.length;m<y;m++){var g,b;f.push({x:(g=l[m]).x+((b=c[m]).x*this.scaleRatio-g.x)*t,y:g.y+(b.y*this.scaleRatio-g.y)*t})}o[1]=f}}}this.morphable.currentPoints=e},enumerable:!0,configurable:!0}),e.prototype.morphBack=function(t,e){this._morphToPointsReal=this._morphFromPointsReal,this._morphFromPointsReal=this.morphable.currentPoints,S(t)||(t=this.morphDuration),S(e)||(e=this.morphEasing);var i=new tr(this,{property:"morphProgress",from:0,to:1},t,e);return this._disposers.push(i),i.start(),i},Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new Qi(this._animations))),this._animations},enumerable:!0,configurable:!0}),e}(He),ia=function(t){function e(){var e=t.call(this)||this;return e.className="Polygon",e.element=e.paper.add("path"),e.shapeRendering="auto",e._currentPoints=[],e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"points",{get:function(){var t=this.getPropertyValue("points"),e=this.path;if(e&&(!t||0==t.length)){for(var i=e.slice(1,e.length-1).split("ZM"),r=0;r<i.length;r++){var n=i[r];if(n.length>0){var a=n.split("M"),o=a[0],s=a[1];if(o&&o.length>0){var l=o.split("L");if(l.length>0){var u=[],c=[u];t.push(c);for(var h=0;h<l.length;h++){var p=l[h].split(",");u.push({x:+p[0],y:+p[1]})}if(s&&s.length>0){var d=s.split("L");if(d.length>0){var f=[];for(c.push(f),h=d.length-1;h>=0;h--)p=d[h].split(","),f.push({x:+p[0],y:+p[1]})}}}}}}this.setPropertyValue("points",t),this._currentPoints=t}return t},set:function(t){this.setPropertyValue("points",t,!0),this._currentPoints=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentPoints",{get:function(){return this._currentPoints&&0!=this._currentPoints.length||!this.path||(this._currentPoints=this.points),this._currentPoints},set:function(t){this._currentPoints!=t&&(this._currentPoints=t,this.draw())},enumerable:!0,configurable:!0}),e.prototype.draw=function(){var e,i,r,n,a="",o=this._currentPoints;if(o.length>0){for(var s=0,l=o.length;s<l;s++){var u=o[s][0],c=o[s][1];if(u&&u.length>0){a+=Hn(p=u[0]);for(var h=0;h<u.length;h++)a+=Wn(p=u[h]),(!k(i)||i<p.x)&&(i=p.x),(!k(e)||e>p.x)&&(e=p.x),(!k(r)||r>p.y)&&(r=p.y),(!k(n)||n<p.y)&&(n=p.y)}if(c&&c.length>0){var p;a+=Hn(p=c[0]);for(var d=0,f=c.length;d<f;d++)a+=Wn(p=c[d])}}a&&(a+=" Z"),this.bbox.x=e,this.bbox.y=r,this.bbox.width=i-e,this.bbox.height=n-r,t.prototype.setPath.call(this,a)}},e.prototype.setPath=function(e){return!!t.prototype.setPath.call(this,e)&&(this.points=[],this._bbox=this.group.getBBox(),!0)},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"centerPoint",{get:function(){return{x:this.bbox.x+this.bbox.width/2,y:this.bbox.y+this.bbox.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"morpher",{get:function(){return this._morpher||(this._morpher=new ea(this),this._disposers.push(this._morpher)),this._morpher},enumerable:!0,configurable:!0}),e}(_n);ve.registeredClasses.Polygon=ia;var ra=function(t){function e(){var e=t.call(this)||this;return e.className="Polyspline",e.tensionX=.5,e.tensionY=.5,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.makePath=function(){this._distance=0;var t=this.segments,e=this.tensionX,i=this.tensionY;if(this.allPoints=[],t&&t.length>0){var r="";this._realSegments=[];for(var n=0,a=t.length;n<a;n++){var o=t[n],s=[];if(this._realSegments.push(s),o.length>0){var l=o[0],u=o[o.length-1],c=!1;L(l.x,3)==L(u.x)&&L(l.y)==L(u.y)&&(c=!0),r+=Hn(o[0]);for(var h=0;h<o.length-1;h++){var p=o[h-1],d=o[h],f=o[h+1],m=o[h+2];0===h?p=o[h]:h==o.length-2&&(m=o[h+1]),m||(m=f),0===h?p=c?o[o.length-2]:o[n]:h==o.length-2&&(m=c?o[1]:o[h+1]);var y=tt(p,d,f,0,e,i),g=et(0,d,f,m,e,i);r+=Gn(f,y,g);var b=1.2*Math.ceil(Y(d,f,y,g,20)),v=d;if(b>0)for(var _=0;_<=b;_++){var x=Q(d,f,y,g,_/b);if(x.x!=v.x||x.y!=v.y){s.push(x);var S=L(K(v,x),5);this._distance+=W(v,x),this.allPoints[Math.floor(this._distance)]={x:x.x,y:x.y,angle:S},v=x}}else s.push(p)}}var w=this.allPoints;if(w.length>1)for(var T=0;T<w.length;T++)if(!w[T])if(T>1)w[T]=w[T-1];else for(var P=1;P<w.length;P++)if(w[P]){w[T]=w[P];break}}this.path=r}},e.prototype.getClosestPointIndex=function(t){var e,i=this.allPoints,r=1/0;if(i.length>1)for(var n=1;n<i.length;n++){var a=W(t,i[n]);a<r&&(e=n,r=a)}return e},Object.defineProperty(e.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(t){this.setPropertyValue("tensionX",t),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(t){this.setPropertyValue("tensionY",t,!0),this.makePath()},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){var i=0,r=this.allPoints,n=r.length;if(k(t)||(t=0),n>1){if(e&&n>3){var a,o,s,l;if(t<0)return t<-.01&&(t=-.01),{x:s=(a=r[0]).x-(a.x-(o=r[1]).x)*n*t,y:l=a.y-(a.y-o.y)*n*t,angle:K(a,o)};if(t>1)return t>1.01&&(t=1.01),{x:s=(a=r[r.length-2]).x+(a.x-(o=r[r.length-3]).x)*n*(t-1),y:l=a.y+(a.y-o.y)*n*(t-1),angle:K(a,{x:s,y:l})};if(1==t){var u=r[r.length-1];return{x:u.x,y:u.y,angle:u.angle}}}else t<0&&(t=Math.abs(t),i=180),t>=1&&(t=.9999999999999);var c;return{x:(c=r[Math.floor(t*n)]).x,y:c.y,angle:c.angle+i}}return 1==n?{x:(c=r[0]).x,y:c.y,angle:c.angle}:{x:0,y:0,angle:0}},e}(Qn);ve.registeredClasses.Polyspline=ra;var na=function(t){function e(){var e=t.call(this)||this;return e.className="Slice",e.setPropertyValue("cornerRadius",0),e.setPropertyValue("startAngle",0),e.setPercentProperty("innerRadius",0),e.setPercentProperty("radius",0),e.setPropertyValue("arc",0),e.setPropertyValue("shiftRadius",0),e.strokeOpacity=1,e.setPropertyValue("layout","none"),e.slice=e.createChild(_n),e.slice.isMeasured=!1,e._disposers.push(e.slice),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.radiusY;this.radius>0&&0==e&&(e=.01),this.slice.path=Kn(this.startAngle,this.arc,this.radius,this.pixelInnerRadius,e,this.cornerRadius,this.innerCornerRadius),this.slice.invalidate(),this.shiftRadius=this.shiftRadius,this.realFill instanceof Jr&&this.updateGradient(this.realFill),this.realStroke instanceof Jr&&this.updateGradient(this.realStroke)},e.prototype.updateGradient=function(t){t.element.attr({gradientUnits:"userSpaceOnUse"}),t.element.attr({r:this.radius}),t.cx=0,t.cy=0,t.element.attr({radius:this.radius})},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?J([at(this.startAngle,this.startAngle+this.arc,this.pixelInnerRadius),at(this.startAngle,this.startAngle+this.arc,this.radius)]):{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",rt(t),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(t){k(t)||(t=0),this.setPropertyValue("arc",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){var t=this.getPropertyValue("radius");return k(t)||(t=0),t},set:function(t){this.setPropertyValue("radius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radiusY",{get:function(){var t=this.getPropertyValue("radiusY");return k(t)||(t=this.radius),t},set:function(t){this.setPropertyValue("radiusY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return Ze(this.innerRadius,this.radius)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(t){this.setPropertyValue("cornerRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerCornerRadius",{get:function(){return this.getPropertyValue("innerCornerRadius")},set:function(t){this.setPropertyValue("innerCornerRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shiftRadius",{get:function(){return this.getPropertyValue("shiftRadius")},set:function(t){this.setPropertyValue("shiftRadius",t),this.dx=t*this.radius*this.ix,this.dy=t*this.radiusY*this.iy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ix",{get:function(){return B(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iy",{get:function(){return j(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleAngle",{get:function(){return this.startAngle+this.arc/2},enumerable:!0,configurable:!0}),e.prototype.getTooltipX=function(){var t=this.getPropertyValue("tooltipX");if(k(t))return t;var e=.5;t instanceof f&&(e=t.value);var i=Ze(this.innerRadius,this.radius);return this.ix*(i+(this.radius-i)*e)},e.prototype.getTooltipY=function(){var t=this.getPropertyValue("tooltipY");if(k(t))return t;var e=.5;t instanceof f&&(e=t.value);var i=Ze(this.innerRadius,this.radius);return this.iy*(i+(this.radius-i)*e)+this.slice.dy},e}(Sn);ve.registeredClasses.Slice=na;var aa=function(t){function e(){var e=t.call(this)||this;e.className="Preloader",e.width=m(100),e.height=m(100);var i=new _r,r=e.createChild(Sn);r.shouldClone=!1;var n=r.createChild(na);n.shouldClone=!1,n.radius=53,n.arc=360,n.fill=i.getFor("fill"),n.fillOpacity=.8,n.innerRadius=42,n.isMeasured=!1,e.backgroundSlice=n;var a=r.createChild(na);a.shouldClone=!1,a.radius=50,a.innerRadius=45,a.fill=i.getFor("alternativeBackground"),a.fillOpacity=.2,a.isMeasured=!1,e.progressSlice=a;var o=r.createChild(Ln);return o.shouldClone=!1,o.horizontalCenter="middle",o.verticalCenter="middle",o.isMeasured=!1,o.fill=i.getFor("text"),o.align="center",o.valign="middle",o.textAlign="middle",o.fillOpacity=.4,e.label=o,e.background.opacity=1,e.background.fill=i.getFor("background"),e.contentAlign="center",e.contentValign="middle",e.delay=300,e.states.create("hidden").properties.opacity=0,e.visible=!1,e.hide(0),e.__disabled=!0,e._disposers.push(e.backgroundSlice),e._disposers.push(e.progressSlice),e._disposers.push(e.label),e._disposers.push(r),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"progress",{get:function(){return this.getPropertyValue("progress")},set:function(t){var e=this;this.__disabled=!1,this.validateLayout(),this.setPropertyValue("progress",t),this.progressSlice.arc=360*t,this.label&&(this.label.text=Math.round(100*t)+"%"),t>=1?(this._started&&(this._started=void 0),ve.events.once("enterframe",(function(){var t=e.hide();t&&!t.isFinished()?t.events.once("animationended",(function(){e.__disabled=!0})):e.__disabled=!0})),this.interactionsEnabled=!1,this.setPropertyValue("progress",0)):t>0&&(this.delay?this._started?this._started+this.delay<=(new Date).getTime()&&(this.__disabled=!1,this.show(),this.interactionsEnabled=!0):this._started=(new Date).getTime():(this.__disabled=!1,this.show(),this.interactionsEnabled=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this.getPropertyValue("delay")},set:function(t){this.setPropertyValue("delay",t)},enumerable:!0,configurable:!0}),e}(Sn);ve.registeredClasses.Preloader=aa;var oa=function(t){function e(){var e=t.call(this)||this;e.className="ResizeButton",e.orientation="horizontal",e.layout="absolute",e.horizontalCenter="middle",e.verticalCenter="middle",e.draggable=!0,e.padding(8,8,8,8),e.background.cornerRadius(20,20,20,20);var i=new _n;i.element=e.paper.add("path");var r=Hn({x:-2,y:-6});return r+=Wn({x:-2,y:6}),r+=Hn({x:2,y:-6}),r+=Wn({x:2,y:6}),i.path=r,i.pixelPerfect=!0,i.padding(0,4,0,4),i.stroke=(new _r).getFor("alternativeText"),i.strokeOpacity=.7,e.icon=i,e.label.dispose(),e.label=void 0,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"orientation",{set:function(t){var e=this.icon;e&&(e.rotation="horizontal"==t?0:-90)},enumerable:!0,configurable:!0}),e}(Vn);ve.registeredClasses.ResizeButton=oa;var sa=function(t){function e(){var e=t.call(this)||this;e.className="CloseButton",e.padding(8,8,8,8),e.showSystemTooltip=!0,e.width=30,e.height=30;var i=new _r;e.cursorOverStyle=Qr.pointer;var r=e.background;r.cornerRadius(20,20,20,20);var n=i.getFor("background");r.fill=n,r.stroke=i.getFor("primaryButton"),r.strokeOpacity=1,r.strokeWidth=1;var a=i.getFor("primaryButtonActive"),o=r.states.getKey("hover");o.properties.strokeWidth=3,o.properties.fill=n;var s=r.states.getKey("down");s.properties.stroke=a,s.properties.fill=n;var l=new _n;return l.element=e.paper.add("path"),l.stroke=r.stroke,e.icon=l,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validate=function(){t.prototype.validate.call(this);var e=this.pixelWidth/3,i=this.pixelHeight/3,r=Hn({x:-e/2,y:-i/2});r+=Wn({x:e/2,y:i/2}),r+=Hn({x:e/2,y:-i/2}),r+=Wn({x:-e/2,y:i/2}),this.icon.path=r,this.invalidateLayout()},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Close"))},e}(Vn);ve.registeredClasses.CloseButton=sa;var la=function(t){function e(){var e=t.call(this)||this;e.className="SwitchButton",e.tooltipY=0,e.layout="horizontal",e.contentAlign="center",e.contentValign="middle",e.padding(8,16,8,16),e.setStateOnChildren=!0,e.states.create("active");var i=new _r,r=new Ln;r.fillOpacity=.3,r.states.create("active").properties.fillOpacity=1,r.isActive=!0,e.leftLabel=r;var n=new Vn,a=new jn;n.contentValign="none",n.padding(0,0,0,0),a.radius=10,n.icon=a,n.icon.valign="middle",n.label=void 0;var o=m(100);n.background.cornerRadius(o,o,o,o),n.width=3.5*a.radius,n.height=2.1*a.radius,n.marginLeft=8,n.marginRight=8,n.togglable=!0,a.dx=.7*-a.radius,a.fill=i.getFor("primaryButton"),a.states.create("hover").properties.fill=i.getFor("primaryButtonHover");var s=a.states.create("active");s.properties.fill=i.getFor("primaryButtonActive"),s.properties.dx=.7*a.radius,e.switchButton=n,e.events.on("toggled",(function(){e.leftLabel.isActive=!e.isActive,e.rightLabel.isActive=e.isActive}));var l=new Ln;return l.fillOpacity=.3,l.states.create("active").properties.fillOpacity=1,e.rightLabel=l,e.role="button",e.focusable=!0,l.valign="middle",r.valign="middle",n.valign="middle",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"leftLabel",{get:function(){return this._leftLabel},set:function(t){this._leftLabel&&this.removeDispose(this._leftLabel),this._leftLabel=t,t&&(t.parent=this,t.interactionsEnabled=!1,t.shouldClone=!1,this._disposers.push(this._leftLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightLabel",{get:function(){return this._rightLabel},set:function(t){this._rightLabel&&this.removeDispose(this._rightLabel),this._rightLabel=t,t&&(t.parent=this,t.interactionsEnabled=!1,t.shouldClone=!1,this._disposers.push(this._rightLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"switch",{get:function(){return this._switchButton},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"switchButton",{set:function(t){this._switchButton&&this.removeDispose(this._switchButton),this._switchButton=t,t&&(t.parent=this,t.shouldClone=!1,this._disposers.push(this._switchButton))},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),e.leftLabel&&this.leftLabel.copyFrom(e.leftLabel),e.rightLabel&&this.rightLabel.copyFrom(e.rightLabel),e.switchButton&&this.switchButton.copyFrom(e.switchButton)},e}(Sn);ve.registeredClasses.SwitchButton=la;var ua=function(t){function e(){var e=t.call(this)||this;e._previousStart=0,e._previousEnd=1,e._prevStart=0,e._prevEnd=1,e._isBusy=!1,e._skipRangeEvents=!1,e.updateWhileMoving=!0,e.className="Scrollbar",e.minHeight=12,e.minWidth=12,e.animationDuration=0,e.animationEasing=Bi,e.margin(10,10,10,10);var i=new _r,r=e.background;return r.cornerRadius(10,10,10,10),r.fill=i.getFor("fill"),r.fillOpacity=.5,e.showSystemTooltip=!0,e.startGrip=new oa,e.endGrip=new oa,e.events.on("transformed",e.updateThumb,e,!1),e.start=0,e.end=1,e.role="scrollbar",e.thumb.role="slider",e.thumb.readerLive="polite",e.startGrip.role="slider",e.endGrip.role="slider",e.events.once("inited",(function(){e._previousStart=void 0,e.dispatchRangeChange()}),void 0,!1),e.hideGrips=!1,e.orientation="horizontal",e.setSVGAttribute({"aria-valuemin":"0"}),e.setSVGAttribute({"aria-valuemax":"100"}),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),"horizontal"===this.orientation?(S(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB to select grip buttons or left and right arrows to change selection")),S(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use left and right arrows to move selection")),S(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use left and right arrows to move left selection")),S(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use left and right arrows to move right selection")),this.readerOrientation="horizontal"):(S(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB select grip buttons or up and down arrows to change selection")),S(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use up and down arrows to move selection")),S(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use up and down arrows to move upper selection")),S(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use up and down arrows to move lower selection")),this.readerOrientation="vertical"),this.readerControls=this.baseSprite.uidAttr()},e.prototype.validateLayout=function(){this.updateSize(),t.prototype.validateLayout.call(this),this.updateExtremes()},e.prototype.processBackground=function(){t.prototype.processBackground.call(this);var e=this.background;e.clickable=!0,e.events.on("hit",this.handleBgHit,this,void 0)},e.prototype.handleBgHit=function(t){this.makeBusy();var e=t.spritePoint;e=xi(e,this.background,this);var i=this.thumb;if("horizontal"==this.orientation){var r=e.x-i.pixelWidth/2;r=V(r,0,this.innerWidth-i.pixelWidth),this._thumbAnimation=i.animate({property:"x",to:r},this.animationDuration,this.animationEasing)}else{var n=e.y-i.pixelHeight/2;n=V(n,0,this.innerHeight-i.pixelHeight),this._thumbAnimation=i.animate({property:"y",to:n},this.animationDuration,this.animationEasing)}this.animationDuration>0?this._thumbAnimation.events.on("animationended",this.makeUnbusy,this,!1):(this._thumb.validate(),this.makeUnbusy())},e.prototype.makeBusy=function(){this._isBusy=!0,this._skipRangeEvents=!1,this._unbusyTimeout&&this.removeDispose(this._unbusyTimeout),this._unbusyTimeout=void 0,this.stopAnimations()},e.prototype.stopAnimations=function(){this._thumbAnimation&&this._thumbAnimation.stop(!0),this._zoomAnimation&&this._zoomAnimation.stop(!0)},e.prototype.makeUnbusy=function(){this._unbusyTimeout=this.setTimeout(this.makeUnbusyReal.bind(this),1.1*this.animationDuration)},e.prototype.makeUnbusyReal=function(){this._usingGrip=void 0,this._isBusy=!1,this.updateWhileMoving||this.dispatchRangeChange()},e.prototype.dispatchRangeChange=function(){this._previousEnd==this.end&&this._previousStart==this.start||(this._previousStart=this.start,this._previousEnd=this.end,this.dispatch("rangechanged"))},e.prototype.updateThumb=function(){if(this.parent){var t=this.thumb,e=this.start,i=this.end,r=this.startGrip,n=this.endGrip;if("horizontal"==this.orientation){var a=this.innerWidth;t.width=a*(i-e),t.maxX=a-t.pixelWidth,t.x=e*a,r.moveTo({x:t.pixelX,y:0},void 0,void 0,!0),n.moveTo({x:t.pixelX+t.pixelWidth,y:0},void 0,void 0,!0),r.readerTitle=this.language.translate("From %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*e)+"%",position:e}).value),r.readerValueNow=""+Math.round(100*e),r.readerValueText=r.readerTitle,n.readerTitle=this.language.translate("To %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*i)+"%",position:i}).value),n.readerValueNow=""+Math.round(100*i),n.readerValueText=n.readerTitle}else{var o=this.innerHeight;t.height=o*(i-e),t.maxY=o-t.pixelHeight,t.y=(1-i)*o,r.moveTo({x:0,y:t.pixelY+t.pixelHeight},void 0,void 0,!0),n.moveTo({x:0,y:t.pixelY},void 0,void 0,!0),r.readerTitle=this.language.translate("To %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*(1-e))+"%",position:1-e}).value),r.readerValueNow=""+Math.round(100*e),r.readerValueText=r.readerTitle,n.readerTitle=this.language.translate("From %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*(1-i))+"%",position:1-i}).value),n.readerValueNow=""+Math.round(100*i),n.readerValueText=n.readerTitle}t.readerTitle=this.language.translate("From %1 to %2",void 0,this.adapter.apply("positionValue",{value:Math.round(100*e)+"%",position:e}).value,this.adapter.apply("positionValue",{value:Math.round(100*i)+"%",position:i}).value),t.readerValueNow=""+Math.round(100*e),t.readerValueText=t.readerTitle,this.readerValueNow=""+Math.round(100*e),this.readerValueText=t.readerTitle,!this._skipRangeEvents&&this.updateWhileMoving&&this.dispatchRangeChange()}},e.prototype.updateExtremes=function(){var t=0,e=0,i=0,r=0;"horizontal"==this.orientation?(i=this.innerWidth,e=r=this.innerHeight/2):(r=this.innerHeight,t=i=this.innerWidth/2);var n=this.startGrip;n.minX=t,n.maxX=i,n.minY=e,n.maxY=r;var a=this.endGrip;a.minX=t,a.maxX=i,a.minY=e,a.maxY=r;var o=this.thumb;o.minX=t,o.maxX=i,o.minY=e,o.maxY=r},e.prototype.updateSize=function(){var t=this.orientation,e=this.startGrip;e&&(e.orientation=t),this.endGrip&&(this.endGrip.orientation=t);var i=this.thumb;i&&("horizontal"==t?(k(this._pixelWidth)||this.width instanceof f||(this.width=m(100)),S(this.percentHeight)&&(this.height=this.minHeight),i.height=this.innerHeight,i.verticalCenter="middle",i.horizontalCenter="left"):(k(this._pixelHeight)||this.height instanceof f||(this.height=m(100)),S(this.percentWidth)&&(this.width=this.minWidth),i.width=this.innerWidth,i.verticalCenter="top",i.horizontalCenter="middle"))},Object.defineProperty(e.prototype,"isBusy",{get:function(){return this._isBusy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return Math.min(this.getPosition(this._start),this.getPosition(this._end))},set:function(t){this._isBusy||(this.__start=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__start",{get:function(){return this._start},set:function(t){this._start=this.getPosition(t),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return Math.max(this.getPosition(this._start),this.getPosition(this._end))},set:function(t){this._isBusy||(this.__end=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"__end",{get:function(){return this._end},set:function(t){this._end=this.getPosition(t),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return{start:this.start,end:this.end,priority:this._usingGrip}},enumerable:!0,configurable:!0}),e.prototype.skipRangeEvents=function(){this._isBusy||(this._skipRangeEvents=!0)},e.prototype.fixRange=function(t){t.start==L(this._start,2)&&t.end==L(this._end,2)||(this._start=t.start,this._end=t.end,this._skipRangeEvents=!0,this.updateThumb(),this._skipRangeEvents=!1,this.thumb.validate(),this.thumb.background.validate())},e.prototype.getPosition=function(t){return V(L(t,4),0,1)},Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t)&&("horizontal"===t?(this.startGrip.cursorOverStyle=Qr.horizontalResize,this.endGrip.cursorOverStyle=Qr.horizontalResize):(this.startGrip.cursorOverStyle=Qr.verticalResize,this.endGrip.cursorOverStyle=Qr.verticalResize),this.updateByOrientation(),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.updateByOrientation=function(){},Object.defineProperty(e.prototype,"startGrip",{get:function(){return this._startGrip},set:function(t){this._startGrip&&this.removeDispose(this._startGrip),this._startGrip=t,this.processGrip(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endGrip",{get:function(){return this._endGrip},set:function(t){this._endGrip&&this.removeDispose(this._endGrip),this._endGrip=t,this.processGrip(t)},enumerable:!0,configurable:!0}),e.prototype.processGrip=function(t){t.parent=this,t.isMeasured=!1,t.focusable=!0,t.shouldClone=!1,t.zIndex=100,t.events.on("drag",this.handleGripDrag,this,!1),t.events.on("dragstop",this.makeUnbusy,this,!1),t.events.on("down",this.makeBusy,this,!1),this._disposers.push(t)},e.prototype.handleGripDrag=function(t){this.makeBusy(),this._usingGrip=t.target===this._startGrip?"start":"end","horizontal"==this.orientation?(this._start=this.startGrip.pixelX/this.innerWidth,this._end=this.endGrip.pixelX/this.innerWidth):(this._start=1-this.startGrip.pixelY/this.innerHeight,this._end=1-this.endGrip.pixelY/this.innerHeight),this.updateThumb()},Object.defineProperty(e.prototype,"thumb",{get:function(){if(!this._thumb){var t=new Vn;t.background.cornerRadius(10,10,10,10),t.padding(0,0,0,0),this.thumb=t}return this._thumb},set:function(t){var e=this;t&&(this._thumb&&this.removeDispose(this._thumb),this._thumb=t,t.parent=this,t.isMeasured=!1,t.inert=!0,t.draggable=!0,t.clickable=!0,t.hoverable=!0,t.focusable=!0,t.shouldClone=!1,t.zIndex=0,t.cursorOverStyle=Qr.grab,t.cursorDownStyle=Qr.grabbing,t.events.on("dragstart",this.makeBusy,this,!1),t.events.on("dragstop",this.makeUnbusy,this,!1),t.events.on("positionchanged",this.handleThumbPosition,this,!1),t.events.on("sizechanged",this.handleThumbPosition,this,!1),t.events.on("doublehit",this.handleDoubleClick,this,!1),this._disposers.push(Vr().body.events.on("keyup",(function(t){Cr.isKey(t.event,["space","enter"])&&e.thumb.isFocused&&(t.event.preventDefault(),e.handleDoubleClick())}))),this._disposers.push(this._thumb))},enumerable:!0,configurable:!0}),e.prototype.handleDoubleClick=function(){this.makeBusy();var t=0,e=1;0!=this.start||1!=this.end?(this._prevStart=this.start,this._prevEnd=this.end):(t=this._prevStart,e=this._prevEnd);var i=this.animate([{property:"__start",to:t},{property:"__end",to:e}],this.animationDuration,this.animationEasing);i&&!i.isFinished()?(i.events.on("animationended",this.makeUnbusy,this,!1),this._zoomAnimation=i):this.makeUnbusy()},e.prototype.handleThumbPosition=function(){var t=this.thumb;if("horizontal"==this.orientation){var e=this.innerWidth,i=t.innerWidth,r=t.pixelX;this._start=r/e,this._end=(r+i)/e,this.updateThumb()}else{var n=this.innerHeight,a=t.pixelY;this._start=1-(a+t.innerHeight)/n,this._end=1-a/n,this.updateThumb()}},e.prototype.createBackground=function(){return new Rn},Object.defineProperty(e.prototype,"hideGrips",{get:function(){return this._hideGrips},set:function(t){var e=this;this._hideGrips=t,this._overDisposer&&this.removeDispose(this._overDisposer),this._outDisposer&&this.removeDispose(this._outDisposer),t?(this._overDisposer=this.events.on("over",(function(){e.startGrip.show(),e.endGrip.show()}),void 0,!1),this._outDisposer=this.events.on("out",(function(){e.startGrip.hide(),e.endGrip.hide()}),void 0,!1),this.startGrip.hide(),this.endGrip.hide()):(this.startGrip.show(),this.endGrip.show())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(t){this.setPropertyValue("animationDuration",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(t){this.setPropertyValue("animationEasing",t)},enumerable:!0,configurable:!0}),e.prototype.asFunction=function(e){return"animationEasing"==e||t.prototype.asIs.call(this,e)},e}(Sn);ve.registeredClasses.Scrollbar=ua;var ca=function(t){function e(){var e=t.call(this)||this;return e.className="Slider",e.thumb.opacity=0,e.thumb.interactionsEnabled=!1,e.endGrip.opacity=0,e.endGrip.interactionsEnabled=!1,e.startGrip.events.on("drag",(function(){e.endGrip.x=e.startGrip.x,e.endGrip.y=e.startGrip.y})),e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"__end",{get:function(){return this._start},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._start},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._start},set:function(t){this._isBusy||(this.__start=t)},enumerable:!0,configurable:!0}),e}(ua);ve.registeredClasses.Slider=ca;var ha=function(t){function e(){var e=t.call(this)||this;e.className="TextLink",e.selectable=!0;var i=new _r;return e.fill=i.getFor("primaryButton").brighten(.3),e.states.create("hover").properties.fill=i.getFor("primaryButtonHover").brighten(.3),e.states.create("down").properties.fill=i.getFor("primaryButtonDown").brighten(.3),e.cursorOverStyle=Qr.pointer,e.applyTheme(),e}return Object(d.d)(e,t),e}(Ln);ve.registeredClasses.TextLink=ha;var pa=function(t){function e(){var e=t.call(this)||this;return e.properties={},e.isTemplate=!1,e._scale=1,e._nonScaling=!0,e.className="Filter",e.filterPrimitives=new Te,e.properties.filterUnits="objectBoundingBox",e.filterPrimitives.events.on("inserted",(function(t){e._disposers.push(t.newValue)})),e.width=120,e.height=120,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.appendPrimitives=function(t){se(this.filterPrimitives.iterator(),(function(e){t.add(e)}))},e.prototype.animate=function(t,e,i){return new tr(this,t,e,i).start()},Object.defineProperty(e.prototype,"width",{get:function(){return this.properties.width},set:function(t){this.properties.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.properties.height},set:function(t){this.properties.height=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),Qt(e.properties,(function(t,e){i[t]=e}))},Object.defineProperty(e.prototype,"paper",{get:function(){return this._paper?this._paper:qr()},set:function(t){this._paper!=t&&(this._paper=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new Qi(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this.updateScale()},enumerable:!0,configurable:!0}),e.prototype.updateScale=function(){},Object.defineProperty(e.prototype,"filterUnits",{get:function(){return this.properties.filterUnits},set:function(t){this.properties.filterUnits=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonScaling",{get:function(){return this._nonScaling},set:function(t){this._nonScaling=t,t||(this._scale=1),this.updateScale()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sprite",{set:function(t){this.setSprite(t)},enumerable:!0,configurable:!0}),e.prototype.setSprite=function(t){this._sprite&&this._sprite!=t&&this._sprite.filters.removeValue(this),this._sprite=t},e}(He),da=function(t){function e(){var e=t.call(this)||this;return e.className="DropShadowFilter",e.color=Ue("#000"),e.feGaussianBlur=e.paper.add("feGaussianBlur"),e.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),e.filterPrimitives.push(e.feGaussianBlur),e.feOffset=e.paper.add("feOffset"),e.feOffset.attr({result:"offsetBlur"}),e.filterPrimitives.push(e.feOffset),e.feFlood=e.paper.add("feFlood"),e.feFlood.attr({"flood-color":e.color}),e.filterPrimitives.push(e.feFlood),e.feComposite=e.paper.add("feComposite"),e.feComposite.attr({in2:"offsetBlur",operator:"in"}),e.filterPrimitives.push(e.feComposite),e.feMerge=e.paper.addGroup("feMerge"),e.feMerge.add(e.paper.add("feMergeNode")),e.feMerge.add(e.paper.add("feMergeNode").attr({in:"SourceGraphic"})),e.filterPrimitives.push(e.feMerge),e.width=200,e.height=200,e.blur=1.5,e.dx=3,e.dy=3,e.opacity=.5,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.properties.color=t,this.feFlood&&this.feFlood.attr({"flood-color":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(t){this.properties.opacity=t,this.feFlood.attr({"flood-opacity":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx",{get:function(){return this.properties.dx},set:function(t){this.properties.dx=t,this.feOffset.attr({dx:t/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy",{get:function(){return this.properties.dy},set:function(t){this.properties.dy=t,this.feOffset.attr({dy:t/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this.properties.blur},set:function(t){this.properties.blur=t,this.feGaussianBlur.attr({stdDeviation:t/this.scale})},enumerable:!0,configurable:!0}),e.prototype.updateScale=function(){this.dx=this.dx,this.dy=this.dy,this.blur=this.blur},e}(pa);ve.registeredClasses.DropShadowFilter=da;var fa=function(t){function e(){var e=t.call(this)||this;e._boundingRect={x:-4e4,y:-4e4,width:8e4,height:8e4},e._pointTo={x:0,y:0},e.fitPointerToBounds=!1,e._verticalOrientation="up",e.className="Tooltip",e.isMeasured=!1,e.getFillFromObject=!0,e.margin(5,5,5,5),e.defaultState.transitionDuration=1,e.hiddenState.transitionDuration=1;var i=e.background;i.interactionsEnabled=!1,i.fillOpacity=.9,i.strokeWidth=1,i.strokeOpacity=1,i.stroke=Ue("#ffffff"),i.cornerRadius=3,i.pointerLength=6,i.pointerBaseWidth=10;var r=new da;r.dy=1,r.dx=1,r.opacity=.5,i.filters.push(r),e.autoTextColor=!0;var n=e.createChild(Ln);return n.shouldClone=!1,e.label=n,n.padding(7,12,4,12),n.interactionsEnabled=!1,n.horizontalCenter="middle",n.fill=Ue("#ffffff"),e._disposers.push(n),e.label.events.on("sizechanged",e.drawBackground,e),e.label.zIndex=1,e.pointerOrientation="vertical",e.animationDuration=0,e.animationEasing=Bi,e.setPropertyValue("showInViewport",!1),e.role="tooltip",e.visible=!1,e.opacity=0,e.x=0,e.y=0,e.events.on("visibilitychanged",e.handleVisibility,e),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.handleVisibility=function(){this.visible&&this.label.invalidate()},Object.defineProperty(e.prototype,"getStrokeFromObject",{get:function(){return this.getPropertyValue("getStrokeFromObject")},set:function(t){this.setPropertyValue("getStrokeFromObject",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoTextColor",{get:function(){return this.getPropertyValue("autoTextColor")},set:function(t){this.setPropertyValue("autoTextColor",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepTargetHover",{get:function(){return this.getPropertyValue("keepTargetHover")},set:function(t){var e=this;this.setPropertyValue("keepTargetHover",t,!0)&&t&&(this.hoverable=!0,this.background.interactionsEnabled=!0,this._disposers.push(this.events.on("over",(function(t){e.targetSprite&&e.targetSprite.hoverable&&(e.targetSprite.isHover=!0)}))),this._disposers.push(this.events.on("out",(function(t){e.targetSprite&&e.targetSprite.hoverable&&(e.targetSprite.isHover=!1)}))))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showInViewport",{get:function(){return this.getPropertyValue("showInViewport")},set:function(t){this.setPropertyValue("showInViewport",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getFillFromObject",{get:function(){return this.getPropertyValue("getFillFromObject")},set:function(t){this.setPropertyValue("getFillFromObject",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createBackground=function(){return new Un},Object.defineProperty(e.prototype,"pointerOrientation",{get:function(){return this.getPropertyValue("pointerOrientation")},set:function(t){this.setPropertyValue("pointerOrientation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(t){this.setPropertyValue("animationDuration",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(t){this.setPropertyValue("animationEasing",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.label.html},set:function(t){this.label.html!=t&&(this.label.html=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.label.text},set:function(t){this.label.text!=t&&(this.label.text=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.label;e.invalid&&e.validate();var i,r,n=this._pointTo.x,a=this._pointTo.y,o=this._boundingRect,s=e.measuredWidth,l=e.measuredHeight,u=this.background.pointerLength;if(s>o.width){Ci({x:o.x,y:o.y},this.parent);var c=Ci({x:o.x+o.width,y:o.y+o.height},this.parent),h=document.body.offsetWidth;document,c.x>h/2?o.x=o.width-s:o.width=o.x+s}var p=this.pointerOrientation;"horizontal"==p||"left"==p||"right"==p?(r=-l/2,i="horizontal"==p?n>o.x+o.width/2?-s/2-u:s/2+u:"left"==p?s/2+u:-s/2-u):(i=V(0,o.x-n+s/2,o.x-n+o.width-s/2),"vertical"==p?a>o.y+l+u?(r=-l-u,this._verticalOrientation="up"):(r=u,this._verticalOrientation="down"):"down"==p?(r=-l-u,this._verticalOrientation="up"):(r=u,this._verticalOrientation="down")),r=V(r,o.y-a,o.y+o.height-l-a),e.x=i,e.y=r,this.drawBackground()},e.prototype.updateBackground=function(){this.group.addToBack(this.background.group)},e.prototype.drawBackground=function(){var t=this.label,e=this.background,i=t.measuredWidth,r=this._boundingRect,n=i,a=t.measuredHeight,o=t.pixelY,s=r.x-this._pointTo.x,l=s+r.width,u=r.y-this._pointTo.y,c=u+r.height;e.x=t.pixelX-i/2,e.y=o,e.width=n,e.height=a,this.fitPointerToBounds?(e.pointerX=V(-e.x,s-e.x,l-e.x),e.pointerY=V(-e.y,u-e.y,c-e.y)):(e.pointerX=-e.x,e.pointerY=-e.y),e.validate()},e.prototype.delayedPointTo=function(t,e){var i=this;this._pointToDisposer&&this._pointToDisposer.dispose(),this._pointToDisposer=ve.events.once("exitframe",(function(){i.pointTo(t,e)})),this.addDisposer(this._pointToDisposer)},e.prototype.pointTo=function(t,e){this._pointTo.x==t.x&&this._pointTo.y==t.y||(this._pointTo=t,this.invalidate(),!this.visible||e?(this.moveTo(this._pointTo),this._animation&&this._animation.kill()):0==this.pixelX&&0==this.pixelY?this.moveTo(this._pointTo):(this._animation&&this._animation.kill(),this._animation=new tr(this,[{property:"x",to:t.x,from:this.pixelX},{property:"y",to:t.y,from:this.pixelY}],this.animationDuration,this.animationEasing).start()))},e.prototype.setBounds=function(t){var e=this._boundingRect;e.x==t.x&&e.y==t.y&&e.width==t.width&&e.height==t.height||(this._boundingRect=t,this.invalidate())},Object.defineProperty(e.prototype,"boundingContainer",{set:function(t){this._boundingContainer=t,t.events.on("sizechanged",this.updateBounds,this),t.events.on("positionchanged",this.updateBounds,this)},enumerable:!0,configurable:!0}),e.prototype.updateBounds=function(){var t=this._boundingContainer,e=Si({x:t.pixelX,y:t.pixelY,width:t.maxWidth,height:t.maxHeight},t);this.setBounds(e)},Object.defineProperty(e.prototype,"verticalOrientation",{get:function(){return this._verticalOrientation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.label.copyFrom(e.label),e._boundingRect&&(this._boundingRect=e._boundingRect)},e.prototype.asFunction=function(e){return"animationEasing"==e||t.prototype.asIs.call(this,e)},e}(Sn);ve.registeredClasses.Tooltip=fa;var ma=function(t){function e(){var e=t.call(this)||this;return e.className="Trapezoid",e.element=e.paper.add("path"),e.topSide=m(100),e.bottomSide=m(100),e.leftSide=m(100),e.rightSide=m(100),e.isMeasured=!1,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.pixelWidth,i=this.pixelHeight,r=Ze(this.topSide,e),n=Ze(this.bottomSide,e),a=Ze(this.leftSide,i),o=Ze(this.rightSide,i),s=(e-r)/2,l=(i-a)/2,u=e-(e-r)/2,c=(i-o)/2,h=e-(e-n)/2,p=i-(i-o)/2,d=(e-n)/2,f=i-(i-a)/2,m="",y="",g="",b="";if(S(this.horizontalNeck)){var v=this.horizontalNeck.value;m=Wn({x:e*v,y:Math.max(l,c)}),g=Wn({x:e*v,y:Math.min(p,f)})}if(S(this.verticalNeck)){var _=this.verticalNeck.value;y=Wn({x:Math.min(u,h),y:i*_}),b=Wn({x:Math.max(s,d),y:i*_})}var x=Hn({x:s,y:l})+m+Wn({x:u,y:c})+y+Wn({x:h,y:p})+g+Wn({x:d,y:f})+b;this.path=x},Object.defineProperty(e.prototype,"topSide",{get:function(){return this.getPropertyValue("topSide")},set:function(t){this.setPercentProperty("topSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomSide",{get:function(){return this.getPropertyValue("bottomSide")},set:function(t){this.setPercentProperty("bottomSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftSide",{get:function(){return this.getPropertyValue("leftSide")},set:function(t){this.setPercentProperty("leftSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightSide",{get:function(){return this.getPropertyValue("rightSide")},set:function(t){this.setPercentProperty("rightSide",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalNeck",{get:function(){return this.getPropertyValue("horizontalNeck")},set:function(t){this.setPropertyValue("horizontalNeck",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalNeck",{get:function(){return this.getPropertyValue("verticalNeck")},set:function(t){this.setPropertyValue("verticalNeck",t,!0)},enumerable:!0,configurable:!0}),e}(_n);ve.registeredClasses.Trapezoid=ma;var ya=function(t){function e(){var e=t.call(this)||this;return e.className="Triangle",e.element=e.paper.add("path"),e.direction="top",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e,i=this.pixelWidth,r=this.pixelHeight;switch(this.direction){case"right":e=Hn({x:0,y:0})+Wn({x:i,y:r/2})+Wn({x:0,y:r})+" Z";break;case"left":e=Hn({x:i,y:0})+Wn({x:0,y:r/2})+Wn({x:i,y:r})+" Z";break;case"bottom":e=Hn({x:0,y:0})+Wn({x:i,y:0})+Wn({x:i/2,y:r})+" Z";break;case"top":e=Hn({x:i/2,y:0})+Wn({x:i,y:r})+Wn({x:0,y:r})+" Z"}this.path=e},Object.defineProperty(e.prototype,"direction",{get:function(){return this.getPropertyValue("direction")},set:function(t){this.setPropertyValue("direction",t,!0)},enumerable:!0,configurable:!0}),e}(_n);ve.registeredClasses.Triangle=ya;var ga=function(){function t(t,e){this._tensionX=t,this._tensionY=e}return t.prototype.smooth=function(t){for(var e=t.length-1;e>0;e--){var i=t[e],r=t[e-1];Math.abs(i.x-r.x)<.1&&Math.abs(i.y-r.y)<.1&&t.splice(e,1)}var n=this._tensionX,a=this._tensionY;if(t.length<3||n>=1&&a>=1)return Xn(t);var o=t[0],s=t[t.length-1],l=!1;L(o.x,3)==L(s.x)&&L(o.y)==L(s.y)&&(l=!0);for(var u="",c=(e=0,t.length-1);e<c;e++){i=t[e-1];var h=t[e+1],p=t[e+2];0===e?i=l?t[t.length-2]:t[e]:e==t.length-2&&(p=l?t[1]:t[e+1]),u+=Gn(h,tt(i,r=t[e],h,0,n,a),et(0,r,h,p,n,a))}return u},t}();function ba(t,e,i,r,n,a){var o=t.x,s=t.y,l=e.x,u=e.y,c=W(t,e);a&&(i=c/Math.round(c/i));var h=ve.getCache(Qe(["wavedLine",t.x,e.x,t.y,e.y,i,r]));if(!h){if(c>0){var p=Math.atan2(u-s,l-o),d=Math.cos(p),f=Math.sin(p),m=i*d,y=i*f;if(i<=1||r<=1)h=Wn(e);else{var g=Math.round(2*c/i),b=[],v=1;l<o&&(v*=-1),u<s&&(v*=-1);for(var _=0;_<=g;_++)b.push({x:o+_*m/2+(v*=-1)*r/2*f,y:s+_*y/2-v*r/2*d});h=new ga(n,n).smooth(b)}}else h="";ve.setCache(Qe(["wavedLine",t.x,e.x,t.y,e.y,i,r]),h)}return h}var va=function(t){function e(){var e=t.call(this)||this;return e.className="WavedCircle",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.fill=void 0,e.fillOpacity=0,e.tension=.8,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){var t="",e=this.pixelRadius;e>0&&(t=Hn((i=this.getPoints(e))[0])+new ga(this.tension,this.tension).smooth(i));var i,r=this.pixelInnerRadius;r>0&&((i=this.getPoints(r)).reverse(),t+=Hn(i[0])+new ga(this.tension,this.tension).smooth(i)),this.path=t},e.prototype.getPoints=function(t){for(var e=t*Math.PI*2,i=this.waveHeight/2,r=e/Math.round(e/this.waveLength),n=r/2,a=[],o=e/r,s=0;s<=o;s++){var l=s*r/e*360,u=(s*r+n)/e*360;a.push({x:(t-i)*B(l),y:(t-i)*j(l)}),a.push({x:(t+i)*B(u),y:(t+i)*j(u)})}return a.pop(),a},Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return Ze(this.innerRadius,U(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(t){this.setPropertyValue("waveLength",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(t){this.setPropertyValue("waveHeight",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t),this.invalidate()},enumerable:!0,configurable:!0}),e}(jn);ve.registeredClasses.WavedCircle=va;var _a=function(t){function e(){var e=t.call(this)||this;return e.className="WavedLine",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.tension=.8,e.pixelPerfect=!1,e.fill=Ue(),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){var t={x:this.x1,y:this.y1},e={x:this.x2,y:this.y2};this.path=Hn(t)+ba(t,e,this.waveLength,this.waveHeight,this.tension,!0)},Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(t){this.setPropertyValue("waveLength",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(t){this.setPropertyValue("waveHeight",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t),this.invalidate()},enumerable:!0,configurable:!0}),e}(Nn),xa=function(t){function e(){var e=t.call(this)||this;return e.className="WavedRectangle",e.element=e.paper.add("path"),e.waveLength=16,e.waveHeight=4,e.tension=.8,e.setPropertyValue("wavedLeft",!0),e.setPropertyValue("wavedRight",!0),e.setPropertyValue("wavedTop",!0),e.setPropertyValue("wavedBottom",!0),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.pixelWidth,i=this.pixelHeight;if(e>0&&i>0){var r={x:0,y:0},n={x:e,y:0},a={x:e,y:i},o={x:0,y:i},s=Math.min(e,this.waveLength),l=Math.min(i,this.waveHeight),u=Math.min(i,this.waveLength),c=Math.min(e,this.waveHeight),h="",p="",d="",f="";this.wavedTop&&(h=ba(r,n,s,l,this.tension,!0)),this.wavedRight&&(p=ba(n,a,u,c,this.tension,!0)),this.wavedBottom&&(d=ba(a,o,s,l,this.tension,!0)),this.wavedLeft&&(f=ba(o,r,u,c,this.tension,!0)),this.path=Hn(r)+h+Wn(n)+p+Wn(a)+d+Wn(o)+f+"z"}},Object.defineProperty(e.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(t){this.setPropertyValue("waveLength",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(t){this.setPropertyValue("waveHeight",t),this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.setWavedSides=function(t,e,i,r){this.wavedTop=t,this.wavedRight=e,this.wavedBottom=i,this.wavedLeft=r},Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedRight",{get:function(){return this.getPropertyValue("wavedRight")},set:function(t){this.setPropertyValue("wavedRight",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedLeft",{get:function(){return this.getPropertyValue("wavedLeft")},set:function(t){this.setPropertyValue("wavedLeft",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedTop",{get:function(){return this.getPropertyValue("wavedTop")},set:function(t){this.setPropertyValue("wavedTop",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wavedBottom",{get:function(){return this.getPropertyValue("wavedBottom")},set:function(t){this.setPropertyValue("wavedBottom",t,!0)},enumerable:!0,configurable:!0}),e}(xn),Sa=function(t){function e(){var e=t.call(this)||this;e.className="ZoomOutButton",e.padding(9,9,9,9),e.showSystemTooltip=!0;var i=new _r,r=e.background;r.cornerRadius(20,20,20,20),r.fill=i.getFor("primaryButton"),r.stroke=i.getFor("primaryButtonStroke"),r.strokeOpacity=0,r.states.getKey("hover").properties.fill=i.getFor("primaryButtonHover"),r.states.getKey("down").properties.fill=i.getFor("primaryButtonActive");var n=new _n;n.element=e.paper.add("path");var a=Hn({x:0,y:0});return a+=Wn({x:11,y:0}),n.path=a,n.pixelPerfect=!0,n.padding(8,3,8,3),n.stroke=i.getFor("primaryButtonText"),e.icon=n,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Zoom Out"))},e}(Vn);ve.registeredClasses.ZoomOutButton=Sa;var wa=function(t){function e(){var e=t.call(this)||this;e.className="PlayButton",e.padding(12,12,12,12),e.showSystemTooltip=!0;var i=new _r,r=e.background;r.cornerRadius(25,25,25,25),r.fill=i.getFor("primaryButton"),r.stroke=i.getFor("primaryButtonStroke"),r.strokeOpacity=0,r.states.getKey("hover").properties.fill=i.getFor("primaryButtonHover"),r.states.getKey("down").properties.fill=i.getFor("primaryButtonActive");var n=new ya;n.direction="right",n.width=9,n.height=11,n.marginLeft=1,n.marginRight=1,n.horizontalCenter="middle",n.verticalCenter="middle",n.stroke=i.getFor("primaryButtonText"),n.fill=n.stroke,e.icon=n;var a=new Rn;a.width=11,a.height=11,a.horizontalCenter="middle",a.verticalCenter="middle",a.cornerRadius(0,0,0,0),a.stroke=i.getFor("primaryButtonText"),a.fill=n.stroke,e.togglable=!0;var o=e.states.create("active");return o.transitionDuration=0,o.properties.icon=a,e.defaultState.transitionDuration=0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Play"))},e}(Vn);ve.registeredClasses.PlayButton=wa;var Ta=function(t){function e(){var e=t.call(this)||this;return e.className="ColorModifier",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.modify=function(t){return t},e}(He);ve.registeredClasses.ColorModifier=Ta;var Pa=function(t){function e(){var e=t.call(this)||this;return e.lightnesses=[],e.brightnesses=[],e.opacities=[],e.offsets=[],e.className="GradientModifier",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"lightnesses",{get:function(){return this._lightnesses},set:function(t){this._lightnesses=t,this._brightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"brightnesses",{get:function(){return this._brightnesses},set:function(t){this._brightnesses=t,this._lightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacities",{get:function(){return this._opacities},set:function(t){this._opacities=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return this._offsets},set:function(t){this._offsets=t},enumerable:!0,configurable:!0}),e.prototype.modify=function(t){this.gradient.clear();var e=0;this.opacities&&(e=N(e,this.opacities.length)),this.lightnesses&&(e=N(e,this.lightnesses.length)),this.brightnesses&&(e=N(e,this.brightnesses.length));for(var i,r,n=1,a=0;a<e;a++){var o=t;this.opacities&&k(this.opacities[a])&&(n=this.opacities[a]),this.lightnesses&&k(this.lightnesses[a])&&(i=this.lightnesses[a],r=void 0),this.brightnesses&&k(this.brightnesses[a])&&(r=this.brightnesses[a],i=void 0),k(r)?o=t.brighten(this.brightnesses[a]):k(i)&&(o=t.lighten(this.lightnesses[a])),this.gradient.addColor(o,n,this.offsets[a])}return this.gradient},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this._offsets=e.offsets,this._brightnesses=e.brightnesses,this._lightnesses=e.lightnesses,this._opacities=e.opacities},e}(Ta);ve.registeredClasses.GradientModifier=Pa;var Ca=function(t){function e(){var e=t.call(this)||this;return e.className="LinearGradientModifier",e.gradient=new Zr,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.gradient=e.gradient.clone()},e}(Pa);ve.registeredClasses.LinearGradientModifier=Ca;var ka=function(t){function e(){var e=t.call(this)||this;return e.className="Cone",e.angle=30,e.radius=m(100),e.topRadius=m(100),e.top=e.createChild(zn),e.top.shouldClone=!1,e.bottom=e.createChild(zn),e.bottom.shouldClone=!1,e.body=e.createChild(_n),e.body.shouldClone=!1,e.body.setElement(e.paper.add("path")),e.layout="none",e.bodyFillModifier=new Ca,e.bodyFillModifier.lightnesses=[0,-.25,0],e.body.fillModifier=e.bodyFillModifier,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),ie(this,this.top,vn),ie(this,this.bottom,vn),ie(this,this.body,vn);var e,i,r,n=this.innerWidth,a=this.innerHeight,o=this.bottom,s=this.top,l=this.angle;"horizontal"==this.orientation?(e=a/2,o.y=a/2,s.y=a/2,s.x=n,i=(90-l)/90,r=0,this.bodyFillModifier.gradient.rotation=90):(i=0,r=(90-l)/90,e=n/2,o.y=a,o.x=n/2,s.x=n/2,this.bodyFillModifier.gradient.rotation=0);var u,c=this.radius.value*e,h=this.topRadius.value*e;o.radius=c-c*i,o.radiusY=c-c*r,s.radius=h-h*i,s.radiusY=h-h*r,u="horizontal"==this.orientation?Hn({x:0,y:a/2-o.radiusY})+qn(-90,-180,o.radius,o.radiusY)+Wn({x:n,y:a/2+s.radiusY})+qn(90,180,s.radius,s.radiusY)+" Z":Hn({x:n/2-s.radius,y:0})+qn(180,-180,s.radius,s.radiusY)+Wn({x:n/2+o.radius,y:a})+qn(0,180,o.radius,o.radiusY)+" Z",this.body.path=u},Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPropertyValue("radius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRadius",{get:function(){return this.getPropertyValue("topRadius")},set:function(t){this.setPropertyValue("topRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),e}(Sn),Ia=function(t){function e(){var e=t.call(this)||this;return e.className="LightenFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"matrix"}),e.filterPrimitives.push(e.feColorMatrix),e.lightness=0,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"lightness",{get:function(){return this.properties.lightness},set:function(t){this.properties.lightness=t;var e=t+1;this.feColorMatrix.attr({values:e+" 0 0 0 0 0 "+e+" 0 0 0 0 0 "+e+" 0 0 0 0 0 1 0"})},enumerable:!0,configurable:!0}),e}(pa);ve.registeredClasses.LightenFilter=Ia;var Aa=function(t){function e(){var e=t.call(this)||this;e.angle=30,e.depth=30,e.className="Rectangle3D",e.layout="none";var i=e.createChild(_n);i.shouldClone=!1,i.setElement(e.paper.add("path")),i.isMeasured=!1,e.sideBack=i,e._disposers.push(e.sideBack);var r=e.createChild(_n);r.shouldClone=!1,r.setElement(e.paper.add("path")),r.isMeasured=!1,e.sideBottom=r,e._disposers.push(e.sideBottom);var n=e.createChild(_n);n.shouldClone=!1,n.setElement(e.paper.add("path")),n.isMeasured=!1,e.sideLeft=n,e._disposers.push(e.sideLeft);var a=e.createChild(_n);a.shouldClone=!1,a.setElement(e.paper.add("path")),a.isMeasured=!1,e.sideRight=a,e._disposers.push(e.sideRight);var o=e.createChild(_n);o.shouldClone=!1,o.setElement(e.paper.add("path")),o.isMeasured=!1,e.sideTop=o,e._disposers.push(e.sideTop);var s=e.createChild(_n);return s.shouldClone=!1,s.setElement(e.paper.add("path")),s.isMeasured=!1,e.sideFront=s,e._disposers.push(e.sideFront),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.innerWidth,i=this.innerHeight,r=this.depth,n=this.angle,a=j(n),o=B(n),s={x:0,y:0},l={x:e,y:0},u={x:e,y:i},c={x:0,y:i},h={x:r*o,y:-r*a},p={x:r*o+e,y:-r*a},d={x:r*o+e,y:-r*a+i},f={x:r*o,y:-r*a+i};this.sideFront.path=Hn(s)+Wn(l)+Wn(u)+Wn(c)+" Z",this.sideBack.path=Hn(h)+Wn(p)+Wn(d)+Wn(f)+" Z",this.sideLeft.path=Hn(s)+Wn(h)+Wn(f)+Wn(c)+" Z",this.sideRight.path=Hn(l)+Wn(p)+Wn(d)+Wn(u)+" Z",this.sideBottom.path=Hn(c)+Wn(f)+Wn(d)+Wn(u)+" Z",this.sideTop.path=Hn(s)+Wn(h)+Wn(p)+Wn(l)+" Z"},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setFill=function(e){var i;if(t.prototype.setFill.call(this,e),C(e)&&(e=Xe(e)),e instanceof Ne)i=e.hex;else if(e instanceof Zr||e instanceof Jr)i=e.stops.getIndex(0).color.hex;else{var r=new Ia;r.lightness=-.2,this.sideBack.filters.push(r);var n=r.clone();n.lightness=-.4,this.sideLeft.filters.push(n);var a=r.clone();a.lightness=-.2,this.sideRight.filters.push(a);var o=r.clone();o.lightness=-.1,this.sideTop.filters.push(o);var s=r.clone();s.lightness=-.5,this.sideBottom.filters.push(s)}i&&(this.sideBack.fill=Ue(i).lighten(-.2),this.sideLeft.fill=Ue(i).lighten(-.4),this.sideRight.fill=Ue(i).lighten(-.2),this.sideTop.fill=Ue(i).lighten(-.1),this.sideBottom.fill=Ue(i).lighten(-.5))},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.sideBack.copyFrom(e.sideBack),this.sideLeft.copyFrom(e.sideLeft),this.sideRight.copyFrom(e.sideRight),this.sideTop.copyFrom(e.sideTop),this.sideBottom.copyFrom(e.sideBottom)},e}(Sn),Oa=function(t){function e(){var e=t.call(this)||this;e.className="Slice3D",e.layout="none";var i=e.createChild(_n);e.edge=i,i.shouldClone=!1,i.isMeasured=!1,i.toBack(),e.angle=30,e.depth=20;var r=e.createChild(_n);e.sideA=r,r.shouldClone=!1,r.isMeasured=!1;var n=e.createChild(_n);return e.sideB=n,n.shouldClone=!1,n.isMeasured=!1,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.setFill=function(e){var i;if(t.prototype.setFill.call(this,e),e instanceof Ne)i=e.hex;else if(e instanceof Zr||e instanceof Jr)i=e.stops.getIndex(0).color.hex;else{var r=new Ia;r.lightness=-.25,this.edge.filters.push(r),this.sideA.filters.push(r.clone()),this.sideB.filters.push(r.clone())}if(i){var n=Ue(i).lighten(-.25);this.edge.fill=n,this.sideA.fill=n,this.sideB.fill=n,this.edge.stroke=n,this.sideA.stroke=n,this.sideB.stroke=n}},e.prototype.draw=function(){if(this.cornerRadius=0,this.innerCornerRadius=0,t.prototype.draw.call(this),0!==this.arc&&this.radius>0&&this.depth>0){this.sideB.show(0),this.sideA.show(0),this.edge.show(0);for(var e=this.startAngle,i=this.arc,r=this.pixelInnerRadius||0,n=this.radiusY||0,a=this.radius,o=e+i,s=n/a*r,l={x:B(e)*r,y:j(e)*s},u={x:B(e)*a,y:j(e)*n},c={x:B(o)*a,y:j(o)*n},h={x:B(o)*r,y:j(o)*s},p=this.depth,d={x:l.x,y:l.y-p},f={x:u.x,y:u.y-p},m={x:c.x,y:c.y-p},y={x:h.x,y:h.y-p},g="",b=Math.ceil(i/5),v=i/b,_=e,x=f,S=0;S<b;S++)if((_+=v)>0&&_<180){g+=Hn(x);var w={x:B(_)*a,y:j(_)*n-p};g+=Wn({x:x.x,y:x.y+p}),g+=Zn({x:w.x,y:w.y+p},a,n,!0),g+=Wn(w),g+=Zn(x,a,n),g+="z",x=w}else g+=Hn(x),g+=Zn(w={x:B(_)*a,y:j(_)*n-p},a,n,!0),g+=Wn({x:w.x,y:w.y+p}),g+=Zn({x:x.x,y:x.y+p},a,n),g+=Wn(x),g+="z",x=w;for(x=d,_=e,S=0;S<b;S++)(_+=v)>0&&_<180?(g+=Hn(x),w={x:B(_)*r,y:j(_)*s-p},g+=Wn({x:x.x,y:x.y+p}),g+=Zn({x:w.x,y:w.y+p},r,s,!0),g+=Wn(w),g+=Zn(x,r,s),g+="z",x=w):(g+=Hn(x),g+=Zn(w={x:B(_)*r,y:j(_)*s-p},r,s,!0),g+=Wn({x:w.x,y:w.y+p}),g+=Zn({x:x.x,y:x.y+p},r,s),g+=Wn(x),g+="z",x=w);this.edge.path=g,this.sideA.path=Hn(l)+Wn(u)+Wn(f)+Wn(d)+" Z",this.sideB.path=Hn(c)+Wn(h)+Wn(y)+Wn(m)+" Z",this.startAngle<90?this.sideA.toBack():this.sideA.toFront(),this.startAngle+this.arc>90?this.sideB.toBack():this.sideB.toFront(),this.slice.dy=-p}else this.sideA.hide(0),this.sideB.hide(0),this.edge.hide(0)},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){var t=this.getPropertyValue("angle");return k(t)||(t=0),t},set:function(t){this.setPropertyValue("angle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radiusY",{get:function(){var t=this.getPropertyValue("radiusY");return k(t)||(t=this.radius-this.radius*this.angle/90),t},set:function(t){this.setPropertyValue("radiusY",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.edge.copyFrom(e.edge),this.sideA.copyFrom(e.sideA),this.sideB.copyFrom(e.sideB)},e}(na),Da=function(t){function e(){var e=t.call(this)||this;return e.className="RadialGradientModifier",e.gradient=new Jr,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.gradient=e.gradient.clone()},e}(Pa);ve.registeredClasses.RadialGradientModifier=Da;var Fa=function(t){function e(){var e=t.call(this)||this;return e.properties.gap=0,e._line=e.paper.add("path"),e.addElement(e._line),e}return Object(d.d)(e,t),e.prototype.draw=function(){if(t.prototype.draw.call(this),Math.round(this.rotation/90)!=this.rotation/90&&(this.properties.shapeRendering="auto"),this._line){var e=this.width,i=this.height,r="";if(this.gap)for(var n=this.gap+this.strokeWidth,a=this.height/n,o=-a/2;o<1.5*a;o++)Math.round(this.rotation/90)!=this.rotation/90?(r+=Hn({x:-e,y:(o+.5)*n})+Wn({x:2*e,y:(o+.5)*n}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):r+=Hn({x:-e,y:o*n})+Wn({x:2*e,y:o*n});else Math.round(this.rotation/90)!=this.rotation/90?(r=Hn({x:-e,y:i/2})+Wn({x:2*e,y:i/2}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):r=Hn({x:0,y:0})+Wn({x:e,y:0});this._line.attr({d:r})}},Object.defineProperty(e.prototype,"gap",{get:function(){return this.properties.gap},set:function(t){this.properties.gap=t,this.draw()},enumerable:!0,configurable:!0}),e}(Kr);ve.registeredClasses.LinePattern=Fa;var Ma=function(t){function e(){var e=t.call(this)||this;return e.properties.radius=2,e._circle=e.paper.add("circle"),e.addElement(e._circle),e.shapeRendering="auto",e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this._circle&&this._circle.attr({r:this.radius,cx:this.width/2,cy:this.height/2})},Object.defineProperty(e.prototype,"radius",{get:function(){return this.properties.radius},set:function(t){this.properties.radius=t,this.draw()},enumerable:!0,configurable:!0}),e}(Kr);ve.registeredClasses.CirclePattern=Ma;var Ea=function(t){function e(){var e=t.call(this)||this;return e.rectHeight=1,e.rectWidth=1,e._rect=e.paper.add("rect"),e.addElement(e._rect),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2,this._rect&&this._rect.attr({width:this.rectWidth,height:this.rectHeight,x:(this.width-this.rectWidth)/2,y:(this.height-this.rectHeight)/2})},Object.defineProperty(e.prototype,"rectWidth",{get:function(){return this.properties.rectWidth},set:function(t){this.properties.rectWidth=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rectHeight",{get:function(){return this.properties.rectHeight},set:function(t){this.properties.rectHeight=t,this.draw()},enumerable:!0,configurable:!0}),e}(Kr);ve.registeredClasses.RectPattern=Ea;var La=function(t){function e(){var e=t.call(this)||this;return e.className="ColorizeFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"matrix"}),e.filterPrimitives.push(e.feColorMatrix),e.intensity=1,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyFilter=function(){var t,e,i,r=this.intensity,n=1-r,a=this.color;a&&a.rgb?(t=a.rgb.r/255*r,e=a.rgb.g/255*r,i=a.rgb.b/255*r):(t=0,e=0,i=0),this.feColorMatrix.attr({values:n+" 0 0 0 "+t+" 0 "+n+" 0 0 "+e+" 0 0 "+n+" 0 "+i+" 0 0 0 1 0"})},Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.properties.color=t,this.applyFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intensity",{get:function(){return this.properties.intensity},set:function(t){this.properties.intensity=t,this.applyFilter()},enumerable:!0,configurable:!0}),e}(pa);ve.registeredClasses.ColorizeFilter=La;var Ra=function(t){function e(){var e=t.call(this)||this;return e.className="DesaturateFilter",e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({type:"saturate"}),e.filterPrimitives.push(e.feColorMatrix),e.width=120,e.height=120,e.saturation=0,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"saturation",{get:function(){return this.properties.saturation},set:function(t){this.properties.saturation=t,this.feColorMatrix.attr({values:t.toString()})},enumerable:!0,configurable:!0}),e}(pa);ve.registeredClasses.DesaturateFilter=Ra;var Va=function(t){function e(){var e=t.call(this)||this;return e.className="BlurFilter",e.feGaussianBlur=e.paper.add("feGaussianBlur"),e.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),e.filterPrimitives.push(e.feGaussianBlur),e.width=200,e.height=200,e.blur=1.5,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"blur",{get:function(){return this.properties.blur},set:function(t){this.properties.blur=t,this.feGaussianBlur.attr({stdDeviation:t/this.scale})},enumerable:!0,configurable:!0}),e}(pa);ve.registeredClasses.BlurFilter=Va;var ja=function(t){function e(){var e=t.call(this)||this;return e.className="FocusFilter",e.feFlood=e.paper.add("feFlood"),e.feFlood.attr({"flood-color":(new _r).getFor("primaryButtonHover"),result:"base"}),e.filterPrimitives.push(e.feFlood),e.feMorphology=e.paper.add("feMorphology"),e.feMorphology.attr({result:"bigger",in:"SourceGraphic",operator:"dilate",radius:"2"}),e.filterPrimitives.push(e.feMorphology),e.feColorMatrix=e.paper.add("feColorMatrix"),e.feColorMatrix.attr({result:"mask",in:"bigger",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}),e.filterPrimitives.push(e.feColorMatrix),e.feComposite=e.paper.add("feComposite"),e.feComposite.attr({result:"drop",in:"base",in2:"mask",operator:"in"}),e.filterPrimitives.push(e.feComposite),e.feBlend=e.paper.add("feBlend"),e.feBlend.attr({in:"SourceGraphic",in2:"drop",mode:"normal"}),e.filterPrimitives.push(e.feBlend),e.width=130,e.height=130,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(t){this.properties.stroke=t,this.feFlood.attr({"flood-color":t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(t){this.properties.strokeWidth=t,this.feMorphology.attr({radius:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(t){this.properties.opacity=t,this.feColorMatrix.attr({values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+t+" 0"})},enumerable:!0,configurable:!0}),e.prototype.setSprite=function(e){this._sprite&&this._sprite!=e&&this._sprite.group.removeStyle("outline"),e.group.addStyle({outline:"none"}),t.prototype.setSprite.call(this,e)},e}(pa),za=function(t){function e(){var e=t.call(this)||this;return e._list=[],e._currentStep=0,e._startIndex=0,e._currentPass=0,e.baseColor=new Ne({r:103,g:183,b:220}),e.stepOptions={},e.passOptions={brighten:-.2},e.step=1,e.minColors=20,e.minLightness=.2,e.maxLightness=.9,e.shuffle=!1,e.wrap=!0,e.reuse=!1,e.saturation=1,e.className="ColorSet",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"list",{get:function(){return this._list||this.generate(this.minColors),this._list},set:function(t){this._list=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.getReusableColor=function(t){if(0==this._list.length)return this.generate(1),this.list[0];var e=t-Math.floor(t/this._list.length)*this.list.length;return this.list[e]},e.prototype.next=function(){var t;return this.list.length<=this._currentStep?this.reuse?t=this.getReusableColor(this._currentStep):(this.generate(this.minColors),t=this.list[this._currentStep]):t=this.list[this._currentStep],this._currentStep+=this.step,t.saturate(this.saturation)},e.prototype.getIndex=function(t){var e;return this.list.length<=t?this.reuse?e=this.getReusableColor(t):(this.generate(this.minColors),e=this.getIndex(t)):e=this.list[t],e.saturate(this.saturation)},e.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(e.prototype,"currentStep",{get:function(){return this._currentStep},set:function(t){this._currentStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},set:function(t){this._startIndex=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.generate=function(t){var e=Be(w(this.currentColor.rgb)),i=S(this.stepOptions.hue)?this.stepOptions.hue:1/t,r={brighten:0,lighten:0,hue:e.h,lightness:e.l,saturation:e.s},n=[],a=0==this.list.length?0:1;if(this.reuse)for(var o=a;o<=t;o++)n.push(Be(w(this._list[o].rgb)).h);else for(o=a;o<=t;o++){var s=e.h+i*o;this.wrap&&s>1&&(s-=1),n.push(s)}for(this.shuffle&&n.sort((function(t,e){return Math.random()-.5})),o=0;o<t;o++){this.reuse?e=Be(w(this._list[o].rgb)):e.h=n.shift(),this.applyStepOptions(e,r,o,this._currentPass);var l=Ue(ze(e)),u=(this.stepOptions.brighten||0)*o+(this.passOptions.brighten||0)*this._currentPass;0!=u&&(u=this.wrap?bi(u,this.minLightness,this.maxLightness):gi(u,this.minLightness,this.maxLightness),l=l.brighten(u));var c=(this.stepOptions.lighten||0)*o+(this.passOptions.lighten||0)*this._currentPass;0!=c&&(c=this.wrap?bi(c,this.minLightness,this.maxLightness):gi(c,this.minLightness,this.maxLightness),l=l.lighten(c)),this._list.push(l)}this._currentPass++},Object.defineProperty(e.prototype,"currentColor",{get:function(){return 0==this._list.length?this.baseColor.saturate(this.saturation):this._list[this._list.length-1].saturate(this.saturation)},enumerable:!0,configurable:!0}),e.prototype.applyStepOptions=function(t,e,i,r){t.l=e.lightness+(this.stepOptions.lightness||0)*i+(this.passOptions.lightness||0)*r,this.wrap?(t.l>1?t.l=t.l-Math.floor(t.l):t.l<0&&(t.l=-(t.l-Math.floor(t.l))),t.l=bi(t.l,this.minLightness,this.maxLightness)):(t.l>1?t.l=1:t.l<0&&(t.l=0),t.l=gi(t.l,this.minLightness,this.maxLightness))},e.prototype.processConfig=function(e){if(e&&S(e.list)&&A(e.list))for(var i=0,r=e.list.length;i<r;i++)e.list[i]instanceof Ne||(e.list[i]=Ue(e.list[i]));t.prototype.processConfig.call(this,e)},e}(He);ve.registeredClasses.ColorSet=za;var Ba=function(t){function e(){var e=t.call(this)||this;e._list=[],e._currentStep=0,e._startIndex=0,e._currentPass=0,e.baseColor=new Ne({r:103,g:183,b:220}),e.className="PatternSet";var i=new _r;return e.list=[e.getLinePattern(1e3,45,1,6),e.getRectPattern(10,0,4),e.getLinePattern(1e3,-45,1,6),e.getCirclePattern(11,2,!0),e.getLinePattern(6,90,1),e.getRectPattern(12,45,6,!0),e.getLinePattern(6,0,1),e.getRectPattern(7,0,4),e.getLinePattern(1e3,45,2,3,"4,2"),e.getCirclePattern(9,3,!1),e.getLinePattern(1e3,-45,2,3,"4,2"),e.getRectPattern(10,45,Math.sqrt(50)),e.getLinePattern(1e3,-45,2,1),e.getRectPattern(10,0,9),e.getLinePattern(1e3,45,2,1),e.getLinePattern(1e3,0,3,1),e.getRectPattern(10,45,10),e.getLinePattern(1e3,90,3,1)],e.baseColor=i.getFor("stroke"),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.getLinePattern=function(t,e,i,r,n){var a=new Fa;return a.width=t,a.height=t,a.stroke=this.baseColor,a.gap=r,a.strokeDasharray=n,a.strokeWidth=i,a.rotation=e,a},e.prototype.getRectPattern=function(t,e,i,r){var n=new Ea;return n.width=t,n.height=t,n.rectWidth=i,n.rectHeight=i,r?(n.stroke=this.baseColor,n.strokeWidth=1,n.fillOpacity=0):(n.fill=this.baseColor,n.strokeWidth=0),0!=e&&(n.shapeRendering="auto"),n.rotation=e,n},e.prototype.getCirclePattern=function(t,e,i){var r=new Ma;return r.width=t,r.height=t,r.shapeRendering="auto",r.radius=e,i?(r.stroke=this.baseColor,r.strokeWidth=1,r.fillOpacity=0):(r.fill=this.baseColor,r.strokeWidth=0),r},Object.defineProperty(e.prototype,"list",{get:function(){return this._list},set:function(t){this._list=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.next=function(){var t=this.getIndex(this.currentStep);return this._currentStep++,t},e.prototype.getIndex=function(t){for(;this.list.length<=t;)this.generatePatterns();return this.list[t].clone()},e.prototype.generatePatterns=function(){var t=this.list.length/(this._currentPass+1);this._currentPass++;for(var e=0;e<t;e++)this.list.push(this.list[e].clone())},e.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(e.prototype,"currentStep",{get:function(){return this._currentStep},set:function(t){this._currentStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},set:function(t){this._startIndex=t,this.reset()},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){t.prototype.processConfig.call(this,e)},e}(He);ve.registeredClasses.PatternSet=Ba,function(){function t(){this._disposed=!1,this._disposers=[]}t.prototype.init=function(){},t.prototype.isDisposed=function(){return this._disposed},t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this._disposers;for(this._disposers=null;0!==t.length;)t.shift().dispose()}}}();var Na=function(t){function e(){var e=t.call(this)||this;e.className="AmChartsLogo",e.valign="bottom",e.opacity=.3,e.defaultState.properties.opacity=.4,e.url="https://www.amcharts.com/",e.urlTarget="_blank",e.showSystemTooltip=!0,e.readerTitle="Chart created using amCharts library",e.width=66,e.height=21,e.background.opacity=0;var i=Ue("#474758");"#ffffff"==(new _r).getFor("background").alternative.hex&&(i=Ue("#ffffff"));var r=new Zr;r.addColor(i),r.addColor(i,1,.75),r.addColor(Ue("#3cabff"),1,.755),r.rotation=-10;var n=r,a=e.createChild(ra);a.shouldClone=!1,a.isMeasured=!1,a.segments=[[{x:15,y:15},{x:27,y:15},{x:36,y:6},{x:40.5,y:10.5},{x:45,y:6},{x:54,y:15},{x:60,y:15}]],a.strokeWidth=6*.3,a.tensionX=.8,a.tensionY=1,a.stroke=Ue("#3cabff");var o=e.createChild(ra);o.shouldClone=!1,o.isMeasured=!1,o.segments=[[{x:6,y:15},{x:15,y:15},{x:27,y:12*.3},{x:39.9,y:15},{x:51,y:15},{x:60,y:15}]],o.strokeWidth=6*.3,o.tensionX=.75,o.tensionY=1,o.stroke=n,e._disposers.push(o);var s=new Ra;e.filters.push(s);var l=new Ra;l.saturation=1;var u=e.states.create("hover");return u.properties.opacity=1,u.filters.push(l),e.applyTheme(),e}return Object(d.d)(e,t),e}(Sn);function Ua(t){-1==ve.queue.indexOf(t)&&(t.__disabled=!0,t.tooltipContainer.__disabled=!0,t.events.disableType("appeared"),0==ve.queue.length&&Wa(t),t.addDisposer(new Lt((function(){Xa(t)}))),ve.queue.push(t))}function Xa(t){var e=ve.queue.indexOf(t);if(e>=0){ve.queue.splice(ve.queue.indexOf(t),1);var i=ve.queue[e];i&&Wa(i)}}function Ha(t){t.__disabled&&gr(t.htmlContainer,Gi.viewportTarget)&&(t.vpDisposer&&t.vpDisposer.dispose(),Ua(t))}function Wa(t){t.__disabled=!1,t.tooltipContainer.__disabled=!1,t.events.enableType("appeared"),t.showOnInit&&t.events.on("appeared",(function(){Xa(t)})),t.vpDisposer&&t.vpDisposer.dispose(),t instanceof Sn&&t.invalidateLabels(),t.tooltipContainer&&t.tooltipContainer.invalidateLayout(),t instanceof En?(t.invalidateData(),t.reinit(),t.events.once("datavalidated",(function(){t.showOnInit?t.appear():Xa(t)}))):(t.reinit(),t.events.once("inited",(function(){Xa(t)})),t.showOnInit&&t.appear())}function Ya(t,e){var i;C(e)&&(S(ve.registeredClasses[e])?e=ve.registeredClasses[e]:(e=ve.registeredClasses.Container,i=new Error("Class ["+e+"] is not loaded.")));var r=function(t,e){var i=function(t){if(C(t)){var e=document.getElementById(t);if(null==e&&(e=document.getElementsByClassName(t)[0]),e instanceof HTMLElement)return e}else if(t instanceof HTMLElement)return t}(t);if(i){i.innerHTML="";var r=new Wr(i),n=new Yr(r.SVGContainer,"svg-"+(Hr.length-1)),a=new Sn;a.htmlContainer=i,a.svgContainer=r,a.width=m(100),a.height=m(100),a.background.fillOpacity=0,a.paper=n,n.append(a.group),a.relativeWidth=1,a.relativeHeight=1,r.container=a;var o=a.createChild(e);o.topParent=a;var s=o.uid;ve.invalidSprites[s]=[],ve.invalidDatas[s]=[],ve.invalidPositions[s]=[],ve.invalidLayouts[s]=[],a.baseId=s,o.isBaseSprite=!0,o.focusFilter=new ja,ve.baseSprites.push(o),ve.baseSpritesByUid[s]=o,o.maskRectangle={x:0,y:0,width:Math.max(r.width,0),height:Math.max(r.height,0)},a.events.on("maxsizechanged",(function(t){0!=t.previousWidth&&0!=t.previousHeight||a.deepInvalidate(),o.maskRectangle&&(o.maskRectangle={x:0,y:0,width:Math.max(r.width,0),height:Math.max(r.height,0)})}));var l=null,u=function(){o.isDisposed()?l=null:null==pr(o.dom)?(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console&&console.warn.apply(console,Object(d.h)(t))}("Chart was not disposed",o.uid),l=null):l=window.setTimeout(u,1e3)};u(),o.addDisposer(new Lt((function(){null!==l&&clearTimeout(l),_t(ve.baseSprites,o),ve.baseSpritesByUid[o.uid]=void 0}))),o.addDisposer(a);var c=a.createChild(Sn);c.topParent=a,c.width=m(100),c.height=m(100),c.isMeasured=!1,a.tooltipContainer=c,o.tooltip=new fa,o.tooltip.hide(0),o.tooltip.setBounds({x:0,y:0,width:c.maxWidth,height:c.maxHeight}),c.events.on("maxsizechanged",(function(){w(o.tooltip).setBounds({x:0,y:0,width:c.maxWidth,height:c.maxHeight})}),void 0,!1);var h=new aa;if(h.events.on("inited",(function(){h.__disabled=!0}),void 0,!1),a.preloader=h,o instanceof Sn&&!o.hasLicense()){var p=c.createChild(Na);c.events.on("maxsizechanged",(function(t){c.maxWidth<=100||c.maxHeight<=50?p.hide():(p.isHidden||p.isHiding)&&p.show()}),void 0,!1),o.logo=p,p.align="left",p.valign="bottom"}if(a.isStandaloneInstance=!0,Gi.onlyShowOnViewport)if(gr(i,Gi.viewportTarget))Gi.queue&&Ua(o);else{o.__disabled=!0,o.tooltipContainer.__disabled=!0;var f=[nr(window,"DOMContentLoaded",(function(){Ha(o)})),nr(window,"load",(function(){Ha(o)})),nr(window,"resize",(function(){Ha(o)})),nr(window,"scroll",(function(){Ha(o)}))];if(Gi.viewportTarget)for(var y=A(Gi.viewportTarget)?Gi.viewportTarget:Gi.viewportTarget?[Gi.viewportTarget]:[],g=0;g<y.length;g++){var b=y[g];f.push(nr(b,"resize",(function(){Ha(o)}))),f.push(nr(b,"scroll",(function(){Ha(o)})))}var v=new Rt(f);o.addDisposer(v),o.vpDisposer=v}else Gi.queue&&Ua(o);return o}throw wn.log("html container not found"),new Error("html container not found")}(t,e);return i&&r.raiseCriticalError(i),r}function Ga(t){-1===ve.themes.indexOf(t)&&ve.themes.push(t)}var qa=function(t){function e(){var e=t.call(this)||this;e.className="Grip";var i=new _r;e.layout="absolute",e.padding(10,10,10,10),e.margin(3,3,3,3),e.background.fillOpacity=.3,e.background.cornerRadius(10,10,10,10);var r=new _n;r.element=e.paper.add("path");var n=Hn({x:-6,y:0});return n+=Wn({x:6,y:0}),n+=Hn({x:-8,y:-6}),n+=Wn({x:0,y:-12}),n+=Wn({x:8,y:-6}),n+=Hn({x:-8,y:6}),n+=Wn({x:0,y:12}),n+=Wn({x:8,y:6}),r.path=n,r.strokeWidth=2,r.fillOpacity=0,r.pixelPerfect=!0,r.padding(0,4,0,4),r.stroke=i.getFor("text"),r.strokeOpacity=.7,r.align="center",r.valign="middle",e.icon=r,e.label.dispose(),e.label=void 0,e.position="right",e.autoHideDelay=3e3,e.events.on("shown",(function(t){e._autoHideTimeout&&e._autoHideTimeout.dispose(),e.autoHideDelay&&(e._autoHideTimeout=e.setTimeout((function(){e.hide()}),e.autoHideDelay))})),e.events.on("down",(function(t){e._autoHideTimeout&&e._autoHideTimeout.dispose()})),e.events.on("out",(function(t){e.autoHideDelay&&(e._autoHideTimeout=e.setTimeout((function(){e.hide()}),e.autoHideDelay))})),e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(t){if(this.setPropertyValue("position",t))switch(t){case"left":this.align="left",this.valign="middle",this.horizontalCenter="left",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=m(30);break;case"right":this.align="right",this.valign="middle",this.horizontalCenter="right",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=m(30);break;case"top":this.align="center",this.valign="top",this.horizontalCenter="middle",this.verticalCenter="top",this.icon.rotation=90,this.width=m(30),this.height=void 0;break;case"bottom":this.align="center",this.valign="bottom",this.horizontalCenter="middle",this.verticalCenter="bottom",this.icon.rotation=90,this.width=m(30),this.height=void 0;break;default:this.align="center",this.valign="middle",this.horizontalCenter="middle",this.verticalCenter="middle",this.icon.rotation=90,this.width=m(30),this.height=void 0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoHideDelay",{get:function(){return this.getPropertyValue("autoHideDelay")},set:function(t){this.setPropertyValue("autoHideDelay",t)},enumerable:!0,configurable:!0}),e}(Vn);ve.registeredClasses.Grip=qa;var Ka=function(t){function e(){var e=t.call(this)||this;return e.className="ChartDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Mn),Za=function(t){function e(){var i=t.call(this)||this;if(i._legend=new Vt,i.constructor===e)throw new Error("'Chart' cannot be instantiated directly. Please use a specific chart type.");i.className="Chart";var r=new Ln;i.titles=new Pe(r),i._disposers.push(new Se(i.titles)),i._disposers.push(r),i.width=m(100),i.height=m(100),i.layout="vertical";var n=i.createChild(Sn);n.shouldClone=!1,n.layout="vertical",n.width=m(100),n.height=m(100),i.chartAndLegendContainer=n;var a=n.createChild(Sn);return a.shouldClone=!1,a.width=m(100),a.height=m(100),i.chartContainer=a,i.showOnInit=!0,i._disposers.push(i._legend),i.titles.events.on("inserted",(function(t){i.processTitle(t),i.updateReaderTitleReferences()}),i,!1),i.titles.events.on("removed",(function(t){i.updateReaderTitleReferences()}),i,!1),i.role="region",i.defaultState.transitionDuration=1,i.applyTheme(),i}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Chart"))},e.prototype.draw=function(){this.fixLayout(),t.prototype.draw.call(this)},e.prototype.fixLayout=function(){var t=this.legend;if(t){var e=this.chartAndLegendContainer,i=this.chartContainer;switch(i.x=void 0,i.y=void 0,t.x=void 0,t.y=void 0,t.position){case"left":e.layout="horizontal",t.toBack();break;case"right":e.layout="horizontal",t.toFront();break;case"top":e.layout="vertical",t.toBack();break;case"bottom":e.layout="vertical",t.toFront()}}},e.prototype.feedLegend=function(){},e.prototype.processTitle=function(t){var e=t.newValue;return e.parent=this,e.toBack(),e.shouldClone=!1,e.align="center",e.uidAttr(),e},e.prototype.updateReaderTitleReferences=function(){if(this.titles.length){var t=[];se(this.titles.iterator(),(function(e){t.push(e.uid)})),this.setSVGAttribute({"aria-labelledby":t.join(" ")})}else this.removeSVGAttribute("aria-labelledby")},Object.defineProperty(e.prototype,"legend",{get:function(){return this._legend.get()},set:function(t){this.setLegend(t)},enumerable:!0,configurable:!0}),e.prototype.setLegend=function(t){var e=this;this._legend.get()!==t&&(t?(t.maxWidth=200,t.parent=this.chartAndLegendContainer,this._legend.set(t,t.events.on("propertychanged",(function(t){"position"==t.property&&e.fixLayout()}),void 0,!1))):this._legend.reset(),this.feedLegend())},e.prototype.dispose=function(){this.legend&&this.legend.dispose(),t.prototype.dispose.call(this)},e.prototype.processConfig=function(e){e&&S(e.legend)&&!S(e.legend.type)&&(e.legend.type="Legend"),t.prototype.processConfig.call(this,e)},e.prototype.copyFrom=function(e){this.titles.copyFrom(e.titles),this.chartContainer.copyFrom(e.chartContainer),e.legend&&(this.legend=e.legend.clone(),this.legend.removeChildren()),t.prototype.copyFrom.call(this,e)},Object.defineProperty(e.prototype,"dragGrip",{get:function(){var t=this;if(!this._dragGrip){var e=this.tooltipContainer.createChild(qa);e.align="right",e.valign="middle",e.hide(0),e.events.on("down",(function(e){e.touch&&(t.interactionsEnabled=!1)})),e.events.on("up",(function(e){t.interactionsEnabled=!0})),this.events.on("down",(function(t){t.touch&&e.show()})),this._dragGrip=e}return this._dragGrip},set:function(t){this._dragGrip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusable",{get:function(){return this.parent.focusable},set:function(t){this.parent.focusable=!0},enumerable:!0,configurable:!0}),e}(En);ve.registeredClasses.Chart=Za,Dn.push({relevant:Fn.widthXS,state:function(t,e){if(t instanceof Za){var i=t.states.create(e);return t.pixelPaddingLeft>10&&(i.properties.paddingLeft=10),t.pixelPaddingRight>10&&(i.properties.paddingRight=10),i}return null}}),Dn.push({relevant:Fn.heightXS,state:function(t,e){if(t instanceof Za){var i=t.states.create(e);return t.pixelPaddingTop>10&&(i.properties.paddingTop=10),t.pixelPaddingBottom>10&&(i.properties.paddingBottom=10),i}return null}}),Dn.push({relevant:Fn.widthXXS,state:function(t,e){if(t instanceof Za){var i=t.states.create(e);return i.properties.paddingLeft=0,i.properties.paddingRight=0,i}return null}}),Dn.push({relevant:Fn.heightXXS,state:function(t,e){if(t instanceof Za){var i=t.states.create(e);return i.properties.paddingTop=0,i.properties.paddingBottom=0,i}return null}});var Ja=function(t){function e(){var e=t.call(this)||this;return e.className="Bullet",e.isMeasured=!1,e.tooltipX=0,e.tooltipY=0,e.layout="none",e.applyOnClones=!0,e.copyToLegendMarker=!0,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(t){if(this.setPropertyValue("locationX",t)){var e=this.dataItem;e&&e.component&&e.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(t){if(this.setPropertyValue("locationY",t)){var e=this.dataItem;e&&e.component&&e.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xField",{get:function(){return this.getPropertyValue("xField")},set:function(t){this.setPropertyValue("xField",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yField",{get:function(){return this.getPropertyValue("yField")},set:function(t){this.setPropertyValue("yField",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDynamic",{get:function(){return this.getPropertyValue("isDynamic")},set:function(t){this.setPropertyValue("isDynamic",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyToLegendMarker",{get:function(){return this.getPropertyValue("copyToLegendMarker")},set:function(t){this.setPropertyValue("copyToLegendMarker",t)},enumerable:!0,configurable:!0}),e}(Sn);ve.registeredClasses.Bullet=Ja,Dn.push({relevant:Fn.isXS,state:function(t,e){if(t instanceof Ja){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var $a=function(t){function e(){var e=t.call(this)||this;return e.childrenCreated=!1,e.className="LegendDataItem",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"label",{get:function(){var t=this;if(!this._label){var e=this.component.labels.create();this._label=e,this.addSprite(e),this._disposers.push(e),e.parent=this.itemContainer,this._disposers.push(new Lt((function(){S(t.component)&&t.component.labels.removeValue(e)})))}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.setProperty("color",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueLabel",{get:function(){var t=this;if(!this._valueLabel){var e=this.component.valueLabels.create();this._valueLabel=e,this.addSprite(e),this._disposers.push(e),e.parent=this.itemContainer,this._disposers.push(new Lt((function(){S(t.component)&&t.component.valueLabels.removeValue(e)})))}return this._valueLabel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemContainer",{get:function(){var t=this;if(!this._itemContainer){var e=this.component,i=e.itemContainers.create();i.parent=e,this._itemContainer=i,this.addSprite(i),this._disposers.push(i),i.togglable&&i.events.on("toggled",(function(t){e.toggleDataItem(t.target.dataItem)}),void 0,!1),i.focusable&&(i.events.on("hit",(function(t){e.focusedItem=void 0}),void 0,!1),i.events.on("focus",(function(t){e.focusedItem=t.target.dataItem}),void 0,!1),i.events.on("blur",(function(t){e.focusedItem=void 0}),void 0,!1)),this._disposers.push(new Lt((function(){S(t.component)&&t.component.itemContainers.removeValue(i)}))),this.dataContext.uidAttr&&(i.readerControls=this.dataContext.uidAttr(),i.readerLabelledBy=this.dataContext.uidAttr());var r=this.dataContext;if((r instanceof Mn||r instanceof _n)&&!r.isDisposed()){var n=function(t){i.readerChecked=t.visible,i.events.disableType("toggled"),i.isActive=!t.visible,i.events.enableType("toggled")};r.addDisposer(new Lt((function(){t.component&&t.component.dataItems.remove(t)}))),r instanceof _n?(i.addDisposer(r.events.on("visibilitychanged",n,void 0,!1)),i.addDisposer(r.events.on("hidden",(function(t){i.readerChecked=!1,i.events.disableType("toggled"),i.isActive=!0,i.events.enableType("toggled")}),void 0,!1)),i.addDisposer(r.events.on("shown",(function(t){i.readerChecked=!0,i.events.disableType("toggled"),i.isActive=!1,i.events.enableType("toggled")}),void 0,!1))):i.addDisposer(r.events.on("visibilitychanged",n,void 0,!1))}}return this._itemContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"marker",{get:function(){var t=this;if(!this._marker){var e=this.component.markers.create();this._marker=e,e.parent=this.itemContainer,this.addSprite(e),this._disposers.push(e),this._disposers.push(new Lt((function(){S(t.component)&&t.component.markers.removeValue(e)})))}return this._marker},enumerable:!0,configurable:!0}),e}(Mn),Qa=function(){this.createMarker=!0},to=function(t){function e(){var e=t.call(this)||this;e.className="Legend",e.layout="grid",e.setPropertyValue("useDefaultMarker",!1),e.setPropertyValue("scrollable",!1),e.setPropertyValue("contentAlign","center");var i=new Sn;i.applyOnClones=!0,i.padding(8,0,8,0),i.margin(0,10,0,10),i.layout="horizontal",i.clickable=!0,i.focusable=!0,i.role="switch",i.togglable=!0,i.cursorOverStyle=Qr.pointer,i.background.fillOpacity=0,e.itemContainers=new Pe(i),e._disposers.push(new Se(e.itemContainers)),e._disposers.push(e.itemContainers.template),e._disposers.push(Vr().body.events.on("keyup",(function(t){if(Cr.isKey(t.event,"enter")&&e.focusedItem){var i=e.focusedItem,r=i.itemContainer;r.togglable?e.toggleDataItem(i):r.clickable&&r.events.isEnabled("hit")&&(r.dispatchImmediately("hit",{event:t}),e.focusedItem=i)}}),e));var r=new _r,n=new Sn;n.width=23,n.height=23,n.interactionsEnabled=!1,n.applyOnClones=!0,n.setStateOnChildren=!0,n.background.fillOpacity=0,n.background.strokeOpacity=0,n.propertyFields.fill="fill",n.valign="middle";var a=r.getFor("disabledBackground");n.events.on("childadded",(function(t){var e=t.newValue.states.create("active");e.properties.stroke=a,e.properties.fill=a})),e.markers=new Pe(n),e._disposers.push(new Se(e.markers)),e._disposers.push(e.markers.template);var o=n.createChild(Rn);o.width=m(100),o.height=m(100),o.applyOnClones=!0,o.propertyFields.fill="fill",o.strokeOpacity=0;var s=new Ln;s.text="{name}",s.margin(0,5,0,5),s.valign="middle",s.applyOnClones=!0,s.states.create("active").properties.fill=r.getFor("disabledBackground"),e.labels=new Pe(s),e._disposers.push(new Se(e.labels)),e._disposers.push(e.labels.template),s.interactionsEnabled=!1,s.truncate=!0,s.fullWords=!1;var l=new Ln;return l.margin(0,5,0,0),l.valign="middle",l.width=50,l.align="right",l.textAlign="end",l.applyOnClones=!0,l.states.create("active").properties.fill=r.getFor("disabledBackground"),l.interactionsEnabled=!1,e.valueLabels=new Pe(l),e._disposers.push(new Se(e.valueLabels)),e._disposers.push(e.valueLabels.template),e.position="bottom",i.states.create("active"),i.setStateOnChildren=!0,e.role="group",e.events.on("layoutvalidated",e.handleScrollbar,e,!1),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Legend"))},e.prototype.createDataItem=function(){return new $a},e.prototype.validateDataElement=function(e){t.prototype.validateDataElement.call(this,e);var i=e.itemContainer,r=e.marker,n=e.valueLabel;i.readerChecked=e.dataContext.visible,e.dataContext.legendDataItem=e;var a=e.label.maxWidth;e.label.width=void 0,a>0&&(e.label.maxWidth=a),"right"==n.align&&(n.width=void 0);var o=e.dataContext.legendSettings,s=e.dataContext;!s.createLegendMarker||this.useDefaultMarker&&s instanceof _n||e.childrenCreated||(s.createLegendMarker(r),e.childrenCreated=!0),s.updateLegendValue&&s.updateLegendValue(),s.component&&s.component.updateLegendValue&&s.component.updateLegendValue(s),n.invalid&&n.validate(),n.__disabled=""==n.text||null==n.text,!o||null==o.itemValueText&&null==o.valueText||(n.__disabled=!1);var l=e.dataContext.visible;void 0===l&&(l=!0),l=v(l),e.dataContext.visible=l,i.events.disableType("toggled"),i.isActive=!l,i.setState(i.isActive?"active":"default",0),i.events.enableType("toggled")},e.prototype.afterDraw=function(){var e=this,i=this.getPropertyValue("maxWidth"),r=0;this.labels.each((function(t){t.invalid&&t.validate(),t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight>r&&(r=t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight)}));var n=0;this.valueLabels.each((function(t){t.invalid&&t.validate(),t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight>n&&(n=t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight)}));var a=0;this.markers.each((function(t){t.invalid&&t.validate(),t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight>a&&(a=t.measuredWidth+t.pixelMarginLeft+t.pixelMarginRight)}));var o,s=this.itemContainers.template,l=s.pixelMarginRight+s.pixelMarginLeft,u=r+n+a;k(i)?((i-=l)>u&&(i=u),o=i-a-n):o=r,this.labels.each((function(t){("right"==e.valueLabels.template.align||t.measuredWidth>o)&&(t.width=Math.min(t.maxWidth,o-t.pixelMarginLeft-t.pixelMarginRight))})),"right"==this.valueLabels.template.align&&this.valueLabels.each((function(t){t.width=n-t.pixelMarginRight-t.pixelMarginLeft})),t.prototype.afterDraw.call(this)},e.prototype.handleScrollbar=function(){var t=this.scrollbar;this.scrollable&&t&&(t.height=this.measuredHeight,t.x=this.measuredWidth-t.pixelWidth-t.pixelMarginLeft,this.contentHeight>this.measuredHeight?(t.visible=!0,t.thumb.height=t.height*this.measuredHeight/this.contentHeight,this.paddingRight=t.pixelWidth+t.pixelMarginLeft+ +t.pixelMarginRight):t.visible=!1,this.updateMasks())},Object.defineProperty(e.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(t){this.setPropertyValue("position",t)&&("left"==t||"right"==t?(this.margin(10,5,10,10),this.valign="middle",this.contentAlign="none",this.valueLabels.template.align="right",k(this.maxColumns)||(this.maxColumns=1),this.width=void 0,this.maxWidth=220):(this.maxColumns=void 0,this.width=m(100),this.valueLabels.template.align="left"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useDefaultMarker",{get:function(){return this.getPropertyValue("useDefaultMarker")},set:function(t){this.setPropertyValue("useDefaultMarker",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollable",{get:function(){return this.getPropertyValue("scrollable")},set:function(t){if(this.setPropertyValue("scrollable",t,!0))if(t){var e=this.createChild(ua);this.scrollbar=e,e.isMeasured=!1,e.orientation="vertical",e.endGrip.__disabled=!0,e.startGrip.__disabled=!0,e.visible=!1,e.marginLeft=5,this._mouseWheelDisposer=this.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer),this._disposers.push(e.events.on("rangechanged",this.updateMasks,this,!1))}else this._mouseWheelDisposer&&(this._mouseWheelDisposer.dispose(),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=void 0))},enumerable:!0,configurable:!0}),e.prototype.handleWheel=function(t){var e=t.shift.y,i=this.scrollbar;if(i){var r=e/1e3*this.measuredHeight/this.contentHeight,n=i.end-i.start;e>0?(i.start=N(0,i.start-r),i.end=i.start+n):(i.end=U(1,i.end-r),i.start=i.end-n)}},e.prototype.updateMasks=function(){var t=this;this.scrollbar&&this.itemContainers.each((function(e){e.dy=-t.scrollbar.thumb.pixelY*t.contentHeight/t.measuredHeight,e.maskRectangle={x:0,y:-e.dy,width:t.measuredWidth,height:t.measuredHeight}}))},e.prototype.toggleDataItem=function(t){var e=t.dataContext;!e.visible||e.isHiding||e instanceof _n&&e.isHidden?(t.color=t.colorOrig,t.itemContainer.isActive=!1,!0===e.hidden&&(e.hidden=!1),e.show?e.show():e.visible=!0,this.svgContainer.readerAlert(this.language.translate("%1 shown",this.language.locale,t.label.readerTitle))):(t.itemContainer.isActive=!0,e.hide?e.hide():e.visible=!1,this.svgContainer.readerAlert(this.language.translate("%1 hidden",this.language.locale,t.label.readerTitle)),t.color=(new _r).getFor("disabledBackground"))},Object.defineProperty(e.prototype,"preloader",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.handleDataItemPropertyChange=function(t,e){t.valueLabel.invalidate(),t.label.invalidate()},e}(En);ve.registeredClasses.Legend=to,Dn.push({relevant:Fn.widthXS,state:function(t,e){if(t instanceof to&&("left"==t.position||"right"==t.position)){var i=t.states.create(e);return i.properties.position="bottom",i}return null}}),Dn.push({relevant:Fn.heightXS,state:function(t,e){if(t instanceof to&&("top"==t.position||"bottom"==t.position)){var i=t.states.create(e);return i.properties.position="right",i}return null}}),Dn.push({relevant:Fn.isXS,state:function(t,e){if(t instanceof to){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var eo=function(t){function e(){var e=t.call(this)||this;return e.className="SeriesDataItem",e.values.value={},e.values.value={},e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new ye,this._disposers.push(new me(this._bullets))),this._bullets},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.bullets.clear(),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),e}(Mn),io=function(t){function e(){var i=t.call(this)||this;if(i._ignoreMinMax=!1,i._showBullets=!0,i.legendSettings=new Qa,i._tmin=new ye,i._tmax=new ye,i._smin=new ye,i._smax=new ye,i.dataItemsByAxis=new ye,i.skipFocusThreshold=20,i._itemReaderTextChanged=!1,i.calculatePercent=!1,i.usePercentHack=!0,i.autoDispose=!0,i.simplifiedProcessing=!1,i.constructor===e)throw new Error("'Series' cannot be instantiated directly. Please use a specific series type.");i.className="Series",i.isMeasured=!1,i.layout="none",i.shouldClone=!1,i.setPropertyValue("hidden",!1),i.axisRanges=new Te,i.axisRanges.events.on("inserted",i.processAxisRange,i,!1),i.minBulletDistance=0,i.mainContainer=i.createChild(Sn),i.mainContainer.shouldClone=!1,i.mainContainer.mask=i.createChild(_n),i._disposers.push(i.mainContainer);var r=i.mainContainer.createChild(Sn);return i._shouldBeReady.push(r),r.shouldClone=!1,r.layout="none",r.virtualParent=i,i._disposers.push(r),i.bulletsContainer=r,i.tooltip=new fa,i.tooltip.virtualParent=i,i._disposers.push(i.tooltip),i.hiddenState.transitionEasing=zi,i.dataItem=i.createDataItem(),i._disposers.push(i.dataItem),i.dataItem.component=i,i.role="group",i.applyTheme(),i}return Object(d.d)(e,t),e.prototype.applyTheme=function(){t.prototype.applyTheme.call(this),Gi.autoSetClassName&&this.bulletsContainer&&(this.bulletsContainer.className=this.className+"-bullets",this.bulletsContainer.setClassName())},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Series"))},e.prototype.createDataItem=function(){return new eo},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(t){},e.prototype.processBullet=function(t){var e=this,i=t.newValue;i.isTemplate=!0,this.events.once("datavalidated",(function(t){e.itemsFocusable()&&(i.focusable=!0)}))},e.prototype.removeBullet=function(t){var e=t.oldValue;this.dataItems.each((function(t){var i=t.bullets.getKey(e.uid);i&&i.dispose()})),this.invalidate()},e.prototype.validateDataItems=function(){t.prototype.validateDataItems.call(this),this.processValues(!1)},e.prototype.getFirstValue=function(t,e){e>0&&e<this.dataItems.length-1&&e++;for(var i=e;i>=0;i--){var r=this.dataItems.getIndex(i).getActualWorkingValue(t);if(k(r))return r}return null},e.prototype.getAbsoluteFirstValue=function(t){for(var e=0;e<this.dataItems.length;e++){var i=this.dataItems.getIndex(e).values[t].value;if(k(i))return i}return null},e.prototype.rangeChangeUpdate=function(){t.prototype.rangeChangeUpdate.call(this),this.processValues(!0)},e.prototype.processValues=function(t){var e=this;if(!this.simplifiedProcessing){var i=this.dataItems,r={},n={},a={},o={},s={},l={},u={},c={},h={},p={},d=N(0,this._workingStartIndex);d=U(d,this.dataItems.length);var f=U(this._workingEndIndex,this.dataItems.length);if(k(d)||(d=0),k(f)||(f=this.dataItems.length),d>0){var m=i.getIndex(d-1);Qt(m.values,(function(t,e){var i=m.getActualWorkingValue(t);k(i)&&(c[t]=i)}))}for(var y=function(t){var f=i.getIndex(t);Qt(f.values,(function(t,i){var m=f.getActualWorkingValue(t);if(k(m)){k(r[t])||(r[t]=0),r[t]++,k(n[t])||(n[t]=0),n[t]+=m,k(a[t])||(a[t]=0),a[t]+=Math.abs(m),k(l[t])||(l[t]=m),u[t]=m,k(o[t])?o[t]>m&&(o[t]=m):o[t]=m,k(s[t])?s[t]<m&&(s[t]=m):s[t]=m,k(h[t])||(h[t]=e.getFirstValue(t,d)),k(p[t])||(p[t]=e.getAbsoluteFirstValue(t)),f.setCalculatedValue(t,m-h[t],"change"),f.setCalculatedValue(t,(m-h[t])/h[t]*100,"changePercent"),f.setCalculatedValue(t,m-p[t],"startChange"),f.setCalculatedValue(t,(m-p[t])/p[t]*100,"startChangePercent");var y=c[t];k(y)||(y=m),f.setCalculatedValue(t,m-y,"previousChange"),f.setCalculatedValue(t,(m-y)/y*100,"previousChangePercent"),c[t]=m}}))},g=d;g<f;g++)y(g);if(this.calculatePercent){var b=function(t){var r=i.getIndex(t);Qt(r.values,(function(t){var i=a[t],n=r.getActualWorkingValue(t);k(n)&&(i>0?(e.usePercentHack&&n==i&&(i=r.values[t].value),r.setCalculatedValue(t,n/i*100,"percent")):r.setCalculatedValue(t,0,"percent"))}))};for(g=d;g<f;g++)b(g)}if(d>0){var v=i.getIndex(d-1);Qt(v.values,(function(t){var e=v.values[t].value;v.setCalculatedValue(t,e-l[t],"change"),v.setCalculatedValue(t,(e-l[t])/l[t]*100,"changePercent")}))}var _=this.dataItem;Qt(_.values,(function(t){_.setCalculatedValue(t,n[t],"sum"),_.setCalculatedValue(t,a[t],"absoluteSum"),_.setCalculatedValue(t,n[t]/r[t],"average"),_.setCalculatedValue(t,l[t],"open"),_.setCalculatedValue(t,u[t],"close"),_.setCalculatedValue(t,o[t],"low"),_.setCalculatedValue(t,s[t],"high"),_.setCalculatedValue(t,r[t],"count")}))}},e.prototype.validate=function(){Fi()&&this.filters.clear(),se(this.axisRanges.iterator(),(function(t){t.validate()})),t.prototype.validate.call(this);var e=this.bulletsContainer;if(e.fill=this.fill,e.stroke=this.stroke,e.x=this.pixelX,e.y=this.pixelY,this.bulletsContainer.children.length>0)if(this._showBullets){for(var i=0;i<this.startIndex;i++)(r=this.dataItems.getIndex(i))&&r.bullets.each((function(t,e){e.__disabled=!0}));for(i=this.dataItems.length-1;i>this.endIndex;i--){var r;(r=this.dataItems.getIndex(i))&&r.bullets.each((function(t,e){e.__disabled=!0}))}}else this.bulletsContainer.children.each((function(t){t.__disabled=!0}));this.updateTooltipBounds()},e.prototype.updateTooltipBounds=function(){this.topParent&&this.tooltip.setBounds({x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight})},e.prototype.shouldCreateBullet=function(t,e){return!0},e.prototype.validateDataElement=function(e){var i=this;t.prototype.validateDataElement.call(this,e),this._showBullets?(this.isHidden||(this.bulletsContainer.visible=!0),this.bullets.each((function(t){var r=e.bullets.getKey(t.uid);if(i.shouldCreateBullet(e,t)){if(!r){var n=t.propertyFields.disabled,a=e.dataContext;n&&a&&!1===a[n]?(t.applyOnClones=!1,t.disabled=!1,r=t.clone(),t.disabled=!0,t.applyOnClones=!0):r=t.clone(),r.shouldClone=!1,e.addSprite(r),i.visible&&!i.isHiding||r.hide(0)}var o=r.dataItem;if(o!=e){o&&o.bullets.setKey(t.uid,void 0);var s=i.itemReaderText;r instanceof Ja&&(s||(s="{"+r.xField+"}: {"+r.yField+"}"),r.isDynamic&&(e.events.on("workingvaluechanged",r.deepInvalidate,r,!1),i.dataItem.events.on("workingvaluechanged",r.deepInvalidate,r,!1)),r.deepInvalidate()),r.focusable&&(r.events.on("focus",(function(t){r.readerTitle=i.populateString(s,r.dataItem)}),void 0,!1),r.events.on("blur",(function(t){r.readerTitle=""}),void 0,!1)),r.hoverable&&(r.events.on("over",(function(t){r.readerTitle=i.populateString(s,r.dataItem)}),void 0,!1),r.events.on("out",(function(t){r.readerTitle=""}),void 0,!1))}r.parent=i.bulletsContainer,e.bullets.setKey(t.uid,r),r.maxWidth=e.itemWidth,r.maxHeight=e.itemHeight,r.__disabled=!1,i.positionBullet(r)}else r&&(r.__disabled=!0)}))):this.bulletsContainer.visible=!1},e.prototype.handleDataItemWorkingValueChange=function(t,e){this.dataRangeInvalid||this.invalidateProcessedData()},Object.defineProperty(e.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(t){this._ignoreMinMax=t,this.invalidateDataItems()},enumerable:!0,configurable:!0}),e.prototype.createMask=function(){},e.prototype.processAxisRange=function(t){this.rangesContainer||(this.rangesContainer=this.createChild(Sn),this.rangesContainer.shouldClone=!1,this.rangesContainer.isMeasured=!1);var e=t.newValue;e&&(e.contents.parent=this.rangesContainer,e.isRange=!0,e.events.on("valuechanged",this.invalidateDataItems,this,!1))},e.prototype.getAxisField=function(t){},e.prototype.showTooltipAtPosition=function(t,e){},Object.defineProperty(e.prototype,"minBulletDistance",{get:function(){return this.getPropertyValue("minBulletDistance")},set:function(t){this.setPropertyValue("minBulletDistance",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new Pe(new Ja),this._bullets.template.virtualParent=this,this._bullets.events.on("inserted",this.processBullet,this,!1),this._bullets.events.on("removed",this.removeBullet,this,!1),this._disposers.push(new Se(this._bullets)),this._disposers.push(this._bullets.template)),this._bullets},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){},Object.defineProperty(e.prototype,"hiddenInLegend",{get:function(){return this.getPropertyValue("hiddenInLegend")},set:function(t){this.setPropertyValue("hiddenInLegend",t)&&this.chart&&this.chart.feedLegend()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(t){this.setPropertyValue("name",t);var e=this.legendDataItem;e&&(e.component.invalidate(),e.component.invalidateRawData()),this.readerTitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemReaderText",{get:function(){var t=this._itemReaderText;return t||(this.tooltipText?t=ui(this.tooltipText):this.tooltipHTML&&(t=ui(this.tooltipHTML))),this._adapterO?this._adapterO.apply("itemReaderText",t):t},set:function(t){this._itemReaderText=t,this._itemReaderTextChanged=!0},enumerable:!0,configurable:!0}),e.prototype.itemsFocusable=function(){return!(this.dataItems.length>=this.skipFocusThreshold)},Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),e.prototype.updateLegendValue=function(t,e){if(this.legendDataItem){var i=this.legendSettings,r=this.legendDataItem,n=r.label,a=r.valueLabel;t||e?(a&&(i.itemValueText&&(a.text=i.itemValueText),a.dataItem=t),n&&(i.itemLabelText&&(n.text=i.itemLabelText),n.dataItem=t)):(n&&((i.labelText||null!=i.itemLabelText)&&(n.text=i.labelText),n.dataItem=this.dataItem),a&&((i.valueText||null!=i.itemValueText)&&(a.text=i.valueText),a.dataItem=this.dataItem))}},e.prototype.copyFrom=function(e){this.bullets.copyFrom(e.bullets),this.bulletsContainer.copyFrom(e.bulletsContainer),this.calculatePercent=e.calculatePercent,this.usePercentHack=e.usePercentHack,this.simplifiedProcessing=e.simplifiedProcessing,t.prototype.copyFrom.call(this,e)},e.prototype.raiseCriticalError=function(t){this._chart&&this._chart.modal&&(this._chart.modal.content=this._chart.adapter.apply("criticalError",t).message,this._chart.modal.closable=!1,Gi.suppressErrors||this._chart.modal.open(),this._chart.disabled=!0),Gi.verbose&&console.log(t)},e.prototype.applyFilters=function(){var e=this;t.prototype.applyFilters.call(this),this.bulletsContainer.filters.clear(),se(this.filters.iterator(),(function(t){e.bulletsContainer.filters.push(t.clone())}))},Object.defineProperty(e.prototype,"heatRules",{get:function(){var t=this;return this._heatRules||(this._heatRules=new Te,this._heatRules.events.on("inserted",(function(e){var i=e.newValue,r=i.target;if(r){var n=i.dataField;S(n)||(n="value");var a=t.dataItem,o=i.property,s=_(i.minValue),l=_(i.maxValue);k(s)||k(l)||t.dataItem.events.on("calculatedvaluechanged",(function(e){e.property==n&&se(t.dataItems.iterator(),(function(t){var e=!1;ht(t.sprites,(function(t){t.clonedFrom==r&&(t[o]=t[o],e=!0)})),e||ht(t.sprites,(function(t){t instanceof Sn&&se(t.children.iterator(),(function(t){t.className==r.className?t[o]=t[o]:t instanceof Sn&&t.deepInvalidate()}))}))}))})),t.dataItems.template.events.on("workingvaluechanged",(function(t){if(t.property==n){var e=t.target,i=!1;ht(e.sprites,(function(t){t.clonedFrom==r&&(t[o]=t[o],i=!0)})),i||ht(e.sprites,(function(t){t instanceof Sn&&se(t.children.iterator(),(function(t){t.className==r.className?t[o]=t[o]:t instanceof Sn&&t.deepInvalidate()}))}))}})),r.adapter.add(o,(function(t,e,r){var o=_(i.minValue),s=_(i.maxValue),l=i.min,u=i.max;if(e instanceof _n){var c=e.propertyFields[r];if(c&&e.dataItem){var h=e.dataItem.dataContext;if(h&&S(h[c]))return t}}var p=e.dataItem;if(k(o)||(o=a.values[n].low),k(s)||(s=a.values[n].high),p&&p.values[n]){var d=p.getActualWorkingValue(n);if(S(l)&&S(u)&&k(o)&&k(s)&&k(d)){var f=void 0;if(f=i.logarithmic?(Math.log(d)*Math.LOG10E-Math.log(o)*Math.LOG10E)/(Math.log(s)*Math.LOG10E-Math.log(o)*Math.LOG10E):(d-o)/(s-o),k(d)&&!k(f)&&(f=.5),k(l))return l+(u-l)*f;if(l instanceof Ne)return new Ne(Ve(l.rgb,u.rgb,f))}}return t}))}}))),this._heatRules},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){var i;if(e){if(S(e.bullets)&&A(e.bullets))for(var r=0,n=e.bullets.length;r<n;r++){var a=e.bullets[r];S(a.type)||(a.type="Bullet")}S(e.heatRules)&&A(e.heatRules)&&(i=e.heatRules,delete e.heatRules)}if(t.prototype.processConfig.call(this,e),i){for(r=0,n=i.length;r<n;r++){var o=i[r],s=this;if(S(o.target)&&C(o.target))if(this.map.hasKey(o.target))s=this.map.getKey(o.target);else for(var l=o.target.split("."),u=0;u<l.length;u++)if(s instanceof Te){var c=s.getIndex(_(l[u]));s=c||s[l[u]]}else s=s[l[u]];o.target=s,S(o.min)&&(o.min=this.maybeColorOrPercent(o.min)),S(o.max)&&(o.max=this.maybeColorOrPercent(o.max))}t.prototype.processConfig.call(this,{heatRules:i})}},e.prototype.configOrder=function(e,i){return e==i?0:"heatRules"==e?1:"heatRules"==i?-1:t.prototype.configOrder.call(this,e,i)},e.prototype.setVisibility=function(e){t.prototype.setVisibility.call(this,e),this.bulletsContainer.visible=e},e}(En);ve.registeredClasses.Series=io,ve.registeredClasses.SeriesDataItem=eo;var ro=function(t){function e(){var e=t.call(this)||this;return e.className="SerialChartDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Ka),no=function(t){function e(){var e=t.call(this)||this;e.className="SerialChart",e.colors=new za,e._usesData=!1;var i=e.chartContainer.createChild(Sn);i.shouldClone=!1,i.width=m(100),i.height=m(100),i.isMeasured=!1,i.layout="none",i.zIndex=2,e.seriesContainer=i;var r=e.chartContainer.createChild(Sn);return r.shouldClone=!1,r.width=m(100),r.height=m(100),r.isMeasured=!1,r.zIndex=3,r.layout="none",e.bulletsContainer=r,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.colors&&this.colors.dispose(),this.patterns&&this.patterns.dispose()},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Serial chart"))},Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new Pe(this.createSeries()),this._series.events.on("inserted",this.handleSeriesAdded,this,!1),this._series.events.on("removed",this.handleSeriesRemoved,this,!1),this._disposers.push(new Se(this._series,!1)),this._disposers.push(this._series.template)),this._series},enumerable:!0,configurable:!0}),e.prototype.handleSeriesRemoved=function(t){var e=t.oldValue;this.dataUsers.removeValue(e),this.dataUsers.each((function(t){t.invalidateDataItems()})),e.autoDispose?e.dispose():(e.parent=void 0,e.bulletsContainer.parent=void 0);var i=this.legend;if(i){for(var r=this.legend.dataItems,n=r.length-1;n>=0;n--){var a=r.getIndex(n);a&&a.dataContext==e&&i.dataItems.remove(a)}for(n=i.data.length-1;n>=0;n--){var o=i.data[n];o&&o==e&&_t(i.data,o)}}},e.prototype.handleSeriesAdded=function(t){var e=this,i=t.newValue;i.isDisposed()||(i.chart=this,i.parent=this.seriesContainer,i.bulletsContainer.parent=this.bulletsContainer,this._dataUsers.moveValue(i),i.addDisposer(new Lt((function(){e.dataUsers.removeValue(i)}))),this.handleSeriesAdded2(i),i.hiddenInLegend||this.legend&&this.legend.addData(i))},e.prototype.handleSeriesAdded2=function(t){var e=this;this.dataInvalid||this._disposers.push(ve.events.once("exitframe",(function(){t.data&&0!=t.data.length||(t.data=e.data,t.showOnInit&&(t.reinit(),t.setPropertyValue("showOnInit",!1),t.showOnInit=!0),t.events.once("datavalidated",(function(){t.data==e.data&&(t._data=[])})))})))},e.prototype.feedLegend=function(){var t=this.legend;if(t){var e=[];se(this.series.iterator(),(function(t){t.hiddenInLegend||e.push(t)})),t.dataFields.name="name",t.data=e}},e.prototype.createSeries=function(){return new io},Object.defineProperty(e.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(t){this.setPropertyValue("colors",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(t){this.setPropertyValue("patterns",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.series.copyFrom(e.series)},e.prototype.appear=function(){t.prototype.appear.call(this),this.series.each((function(t){t.showOnInit&&t.inited&&t.appear()}))},e}(Za);ve.registeredClasses.SerialChart=no;var ao=function(t){function e(){var e=t.call(this)||this;e._axis=new Vt,e.dataItems=new Te,e.className="AxisBreak",e.breakSize=.01,e.marginLeft=-5,e.marginRight=-5,e.marginTop=-5,e.marginBottom=-5;var i=new _r,r=new _a;r.fill=i.getFor("background"),r.stroke=Ue(),r.fillOpacity=.9,r.zIndex=0,e._fillShape=r;var n=new _a;n.fill=Ue(),n.stroke=i.getFor("grid"),n.strokeOpacity=.3,n.zIndex=1,e._startLine=n;var a=new _a;return a.fill=Ue(),a.stroke=Ue("#000000"),a.strokeOpacity=.3,a.zIndex=2,e._endLine=a,e._disposers.push(e._axis),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._fillShape&&this._fillShape.dispose(),this._startLine&&this._startLine.dispose(),this._endLine&&this._endLine.dispose()},Object.defineProperty(e.prototype,"startLine",{get:function(){return this._startLine},set:function(t){this._startLine&&this._startLine.dispose(),this._startLine=t,this.addBreakSprite(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLine",{get:function(){return this._endLine},set:function(t){this._endLine&&this._endLine.dispose(),this._endLine=t,this.addBreakSprite(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillShape",{get:function(){return this._fillShape},set:function(t){this._fillShape&&this._fillShape.dispose(),this._fillShape=t,this.addBreakSprite(t)},enumerable:!0,configurable:!0}),e.prototype.addBreakSprite=function(t){t.parent=this,t.isMeasured=!1,this._disposers.push(t)},Object.defineProperty(e.prototype,"axis",{get:function(){return this._axis.get()},set:function(t){if(this._axis.get()!==t){this._axis.set(t,t.renderer.gridContainer.events.on("transformed",this.invalidate,this,!1)),t.renderer.createBreakSprites(this);var e=t.axisBreaks.template;this.startLine.copyFrom(e.startLine),this.endLine.copyFrom(e.endLine),this.fillShape.copyFrom(e.fillShape)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"breakSize",{get:function(){return this.getPropertyValue("breakSize")},set:function(t){this.setPropertyValue("breakSize",t)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPoint",{get:function(){var t=this.axis.renderer;if(t)return t.positionToPoint(this.startPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPoint",{get:function(){var t=this.axis.renderer;if(t)return t.positionToPoint(this.endPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPosition",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.draw=function(){t.prototype.draw.call(this),this.axis&&this.axis.renderer.updateBreakElement(this)},Object.defineProperty(e.prototype,"startValue",{get:function(){return this.getPropertyValue("startValue")},set:function(t){this.setPropertyValue("startValue",t)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){return this.getPropertyValue("endValue")},set:function(t){this.setPropertyValue("endValue",t)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),e}(Sn);ve.registeredClasses.AxisBreak=ao;var oo,so=function(t){function e(){var e=t.call(this)||this;return e.className="AxisDataItem",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"grid",{get:function(){if(!this._grid){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if((i=t.axisRanges.template.grid).disabled)return;e=i.clone()}else{if((i=t.renderer.grid.template).disabled)return;e=t.renderer.grid.create(),this._disposers.push(new Lt((function(){t.renderer.grid.removeValue(e)})))}this.grid=e,e.shouldClone=!1,this._disposers.push(e),e.axis=this.component}}return this._grid},set:function(t){this._grid&&this._grid!=t&&(_t(this.sprites,this._grid),this._grid.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(_t(t.dataItem.sprites,t),t.dataItem.grid=void 0),this.addSprite(t)),this._grid=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tick",{get:function(){if(!this._tick){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if((i=t.axisRanges.template.tick).disabled)return;e=i.clone()}else{if((i=t.renderer.ticks.template).disabled)return;e=t.renderer.ticks.create(),this._disposers.push(new Lt((function(){t.renderer.ticks.removeValue(e)})))}this.tick=e,e.axis=this.component,e.shouldClone=!1,this._disposers.push(e)}}return this._tick},set:function(t){this._tick&&this._tick!=t&&(_t(this.sprites,this._tick),this._tick.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(_t(t.dataItem.sprites,t),t.dataItem.tick=void 0),this.addSprite(t)),this._tick=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){if(!this._label){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if((i=t.axisRanges.template.label).disabled)return;e=i.clone()}else{if((i=t.renderer.labels.template).disabled)return;e=t.renderer.labels.create(),this._disposers.push(new Lt((function(){t.renderer.labels.removeValue(e)})))}this._disposers.push(e),this.label=e,e.shouldClone=!1,e.axis=this.component,e.virtualParent=t}}return this._label},set:function(t){this._label&&this._label!=t&&(_t(this.sprites,this._label),this._label.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(_t(t.dataItem.sprites,t),t.dataItem.label=void 0),this.addSprite(t)),this._label=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisFill",{get:function(){if(!this._axisFill){var t=this.component;if(t){var e,i=void 0;if(this.isRange){if(i=t.axisRanges.template.axisFill,!this.isTemplate&&i.disabled)return;e=i.clone()}else{if((i=t.renderer.axisFills.template).disabled)return;e=t.renderer.axisFills.create(),this._disposers.push(new Lt((function(){t.renderer.axisFills.removeValue(e)})))}this.axisFill=e,e.shouldClone=!1,this._disposers.push(e)}}return this._axisFill},set:function(t){this._axisFill&&this._axisFill!=t&&(_t(this.sprites,this._axisFill),this._axisFill.dataItem=void 0),t&&(t.dataItem&&t.dataItem!=this&&(_t(t.dataItem.sprites,t),t.dataItem.axisFill=void 0),t.axis=this.component,this.addSprite(t)),this._axisFill=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this._label&&(this._label.text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contents",{get:function(){if(!this._contents){var t=new Sn;this.addSprite(t),t.isMeasured=!1,this._contents=t;var e=this.component;if(e){var i=e.renderer.createFill(this.component);i.disabled=!1,i.axis=e,this.addSprite(i),this._mask=i,t.mask=i}}return this._contents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisBreak",{get:function(){return this._axisBreak},set:function(t){this._axisBreak&&this._axisBreak.dataItems.removeValue(this),t&&t.dataItems.push(this),this._axisBreak=t},enumerable:!0,configurable:!0}),e.prototype.validate=function(){this.component&&this.component.validateDataElement(this)},e.prototype.appendChildren=function(){this.component&&this.component.appendDataItem(this)},e.prototype.configOrder=function(t,e){return t==e?0:"language"==t?-1:"language"==e?1:"component"==t?-1:"component"==e?1:0},e.prototype.hasProperty=function(e){return"component"==e||t.prototype.hasProperty.call(this,e)},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.text=e.text,e.bullet&&(this.bullet=e.bullet.clone()),this.minPosition=e.minPosition,this.maxPosition=e.maxPosition},e.prototype.setVisibility=function(e,i){t.prototype.setVisibility.call(this,e,i),this._contents&&(this._contents.visible=e)},Object.defineProperty(e.prototype,"bullet",{get:function(){return this._bullet},set:function(t){this._bullet&&this._bullet!=t&&(_t(this.sprites,this._bullet),this._bullet.dataItem=void 0),this._bullet=t,t&&this.addSprite(t)},enumerable:!0,configurable:!0}),e}(Mn);!function(t){t[t.Start=0]="Start",t[t.Middle=.5]="Middle",t[t.End=1]="End"}(oo||(oo={}));var lo=function(t){function e(){var i=t.call(this)||this;if(i._gridCount=10,i._series=new Te,i.autoDispose=!0,i._axisItemCount=0,i.constructor===e)throw new Error("'Axis' cannot be instantiated directly. Please use a specific axis type.");i.hideTooltipWhileZooming=!0,i.minWidth=1e-4,i.minHeight=1e-4,i.className="Axis",i.shouldClone=!1,i.setPropertyValue("cursorTooltipEnabled",!0),i.toggleZoomOutButton=!0;var r=new _r;i.title=new Ln,i.title.shouldClone=!1,i._disposers.push(i.title),i.setPropertyValue("startLocation",0),i.setPropertyValue("endLocation",1),i._dataItemsIterator=new pe(i.dataItems,(function(){return i.dataItems.create()})),i._dataItemsIterator.createNewItems=!0;var n=new fa;i._disposers.push(n),n.label.padding(5,10,5,10),n.background.pointerLength=5,n.fitPointerToBounds=!0,n.background.filters.clear(),n.virtualParent=i;var a=n.background;return a.cornerRadius=0,a.fill=r.getFor("alternativeBackground"),a.stroke=a.fill,a.strokeWidth=1,a.fillOpacity=1,n.label.fill=r.getFor("alternativeText"),i.tooltip=n,i.readerHidden=!0,i.events.on("rangechangestarted",(function(){i.series.each((function(t){t.hideTooltipWhileZooming&&(t.tooltip.hide(),t.tooltip.preventShow=!0)})),i.hideTooltipWhileZooming&&(i.tooltip.hide(),i.tooltip.preventShow=!0)}),void 0,!1),i.events.on("rangechangeended",(function(){i.series.each((function(t){t.hideTooltipWhileZooming&&(t.tooltip.hide(),t.tooltip.preventShow=!1)})),i.hideTooltipWhileZooming&&(i.tooltip.hide(),i.tooltip.preventShow=!1)}),void 0,!1),i.applyTheme(),i}return Object(d.d)(e,t),e.prototype.fillRule=function(t,e){k(e)||(e=t.index),e/2==Math.round(e/2)?(t.axisFill.__disabled=!0,t.axisFill.opacity=0):(t.axisFill.opacity=1,t.axisFill.__disabled=!1)},e.prototype.createDataItem=function(){return new so},e.prototype.invalidateLayout=function(){t.prototype.invalidateLayout.call(this),se(this.series.iterator(),(function(t){t.invalidateLayout()}))},e.prototype.invalidateSeries=function(){se(this.series.iterator(),(function(t){t.invalidate()}))},e.prototype.validateDataElements=function(){this._axisItemCount=0,this.ghostLabel&&(this.renderer.updateLabelElement(this.ghostLabel,this.start,this.end),this.ghostLabel.validate())},e.prototype.updateGridCount=function(){if(this.renderer){var t=this.axisLength/this.renderer.minGridDistance;t!=this._gridCount&&(this._gridCount=t,this.clearCache())}},e.prototype.validateLayout=function(){this.axisFullLength=this.axisLength/(this.end-this.start),t.prototype.validateLayout.call(this),this.updateGridCount();var e=this.renderer;e&&(e.updateAxisLine(),e.updateTooltip(),e.updateBaseGridElement()),this._prevLength!=this.axisLength&&(this.dispatchImmediately("lengthchanged"),this._prevLength=this.axisLength)},e.prototype.initRenderer=function(){},e.prototype.appendDataItem=function(t){var e=this.renderer,i=t.tick;i&&(i.parent=i.above?e.bulletsContainer:e.gridContainer),t.label&&(t.label.parent=e);var r=t.axisFill;r&&(r.parent=r.above?e.bulletsContainer:e.gridContainer);var n=t.grid;n&&(n.parent=n.above?e.bulletsContainer:e.gridContainer),t.bullet&&(t.bullet.parent=e.bulletsContainer)},e.prototype.validate=function(){t.prototype.validate.call(this),this.validateLayout(),this.renderer.updateGridContainer()},e.prototype.validateAxisRanges=function(){var t=this;se(this.axisRanges.iterator(),(function(e){t.appendDataItem(e),t.validateDataElement(e),e.grid&&e.grid.validate(),e.tick&&e.tick.validate(),e.axisFill&&e.axisFill.validate(),e.label&&e.label.validate()}))},e.prototype.validateBreaks=function(){this._axisBreaks&&se(this._axisBreaks.iterator(),(function(t){t.invalidate()}))},e.prototype.processBreak=function(t){var e=t.newValue;e.parent=this.renderer.breakContainer,e.axis=this},e.prototype.registerSeries=function(t){var e=this;return this.series.moveValue(t),new Rt([new Lt((function(){e.series.removeValue(t)})),this.events.on("lengthchanged",t.invalidate,t,!1),this.events.on("lengthchanged",t.createMask,t,!1),this.events.on("startchanged",t.invalidate,t,!1),this.events.on("endchanged",t.invalidate,t,!1)])},Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},set:function(t){if(t!=this._renderer){this._renderer=t,t.chart=this.chart,t.axis=this,t.parent=this,this.title.parent=this,this.initRenderer(),this._disposers.push(t.gridContainer.events.on("maxsizechanged",this.invalidate,this,!1));var e=this.renderer.labels.create();this._disposers.push(e),e.dataItem=this.dataItems.template.clone(),e.text="L",e.parent=this.renderer,e.shouldClone=!1,e.fillOpacity=0,e.opacity=0,e.strokeOpacity=0,e.interactionsEnabled=!1,e.validate(),this.ghostLabel=e,this.events.on("beforedatavalidated",(function(){e.text="L"}),void 0,!1)}},enumerable:!0,configurable:!0}),e.prototype.positionToAngle=function(t){return this.renderer.positionToAngle(t)},e.prototype.pointToPosition=function(t){return this.renderer.pointToPosition(t)},e.prototype.positionToCoordinate=function(t){return this.renderer.positionToCoordinate(t)},e.prototype.getAnyRangePath=function(t,e){return this.renderer.getPositionRangePath(t,e)},e.prototype.anyToPosition=function(t){return 0},e.prototype.anyToPoint=function(t){return{x:0,y:0,angle:0}},e.prototype.getPositionRangePath=function(t,e){return this.renderer?this.renderer.getPositionRangePath(t,e):""},Object.defineProperty(e.prototype,"axisLength",{get:function(){return this.renderer?this.renderer.axisLength:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(t){this.setPropertyValue("cursorTooltipEnabled",t)&&(t&&this.renderer?this.renderer.updateTooltip():this.tooltip&&this.tooltip.hide(0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggleZoomOutButton",{get:function(){return this.getPropertyValue("toggleZoomOutButton")},set:function(t){this.setPropertyValue("toggleZoomOutButton",t)},enumerable:!0,configurable:!0}),e.prototype.hideTooltip=function(e){t.prototype.hideTooltip.call(this,e),this._tooltipPosition=void 0},e.prototype.showTooltipAtPosition=function(t,e){var i=this._tooltip;if(!i||this.dataItems.length<=0)this._tooltipPosition=void 0;else{if(e||(t=this.toAxisPosition(t)),!k(t)||t<this.start||t>this.end)return i.hide(0),void(this._tooltipPosition=void 0);var r=this.renderer;i.parent||(i.parent=this.tooltipContainer);var n=r.tooltipLocation,a=this.getCellStartPosition(t),o=this.getCellEndPosition(t);if("fixed"==this.tooltipPosition&&(t=R(a+(o-a)*n,4)),t=V(t,this.start,this.end),this._tooltipPosition!=t){this._tooltipPosition=t;var s=r.tooltipLocation2,l=r.positionToPoint(a,s),u=r.positionToPoint(o,s);this.currentItemStartPoint=l,this.currentItemEndPoint=u,r.fullWidthTooltip&&(i.width=u.x-l.x,i.height=u.y-l.y);var c=_i(r.positionToPoint(t,s),this.renderer.line);i.text=this.getTooltipText(t),i.text&&(i.delayedPointTo(c),i.show())}this.cursorTooltipEnabled&&!this.tooltip.disabled||i.hide(0)}},e.prototype.toAxisPosition=function(t){if(null!=(t=this.renderer.toAxisPosition(t)))return t*=this.end-this.start,this.renderer.inversed?this.end-t:this.start+t},e.prototype.toGlobalPosition=function(t){return this.renderer.inversed?t=this.end-t:t-=this.start,t/(this.end-this.start)},e.prototype.getTooltipText=function(t){},e.prototype.updateTooltip=function(t,e){var i=this._tooltip;i&&(i.pointerOrientation=t,i.setBounds(Si(e,this.renderer.line)))},e.prototype.roundPosition=function(t,e,i){return t},e.prototype.getCellStartPosition=function(t){return t},e.prototype.getCellEndPosition=function(t){return t},Object.defineProperty(e.prototype,"axisRanges",{get:function(){if(!this._axisRanges){var t=this.createDataItem();t.isRange=!0,t.axisFill=this.renderer.axisFills.template.clone(),t.grid=this.renderer.grid.template.clone(),t.tick=this.renderer.ticks.template.clone(),t.label=this.renderer.labels.template.clone(),t.isTemplate=!0,t.component=this,t.axisFill.disabled=!1,t.tick.disabled=!1,t.grid.disabled=!1,t.label.disabled=!1,this._axisRanges=new Pe(t),this._axisRanges.events.on("inserted",this.processAxisRange,this,!1),this._disposers.push(new Se(this._axisRanges)),this._disposers.push(this._axisRanges.template)}return this._axisRanges},enumerable:!0,configurable:!0}),e.prototype.processAxisRange=function(t){var e=t.newValue;e.component=this,e.isRange=!0},Object.defineProperty(e.prototype,"axisBreaks",{get:function(){return this._axisBreaks||(this._axisBreaks=new Ae(this.createAxisBreak(),(function(t,e){return Oe(t.adjustedStartValue,e.adjustedStartValue)})),this._axisBreaks.events.on("inserted",this.processBreak,this,!1),this._disposers.push(new Se(this._axisBreaks)),this._disposers.push(this._axisBreaks.template)),this._axisBreaks},enumerable:!0,configurable:!0}),e.prototype.createAxisBreak=function(){return new ao},Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new Te),this._series},enumerable:!0,configurable:!0}),e.prototype.processSeriesDataItems=function(){},e.prototype.processSeriesDataItem=function(t,e){},e.prototype.postProcessSeriesDataItems=function(t){},e.prototype.postProcessSeriesDataItem=function(t){},e.prototype.updateAxisBySeries=function(){},e.prototype.hideUnusedDataItems=function(){var t=this,e=this._dataItemsIterator;e.createNewItems=!1,se(e.iterator(),(function(e){t.validateDataElement(e),e.__disabled=!0})),e.clear(),e.createNewItems=!0},e.prototype.getSeriesDataItem=function(t,e,i){},e.prototype.getAngle=function(t,e,i,r,n){},e.prototype.getX=function(t,e,i,r,n){},e.prototype.getPositionX=function(t,e,i,r,n){},e.prototype.getY=function(t,e,i,r,n){},e.prototype.getPositionY=function(t,e,i,r,n){},Object.defineProperty(e.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),e.prototype.dataChangeUpdate=function(){},e.prototype.seriesDataChangeUpdate=function(t){},e.prototype.adjustDifference=function(t,e){var i=e-t;if(k(i))return this._axisBreaks&&oe(this._axisBreaks.iterator(),(function(r){var n,a,o,s,l,u,c,h,p=r.adjustedStartValue,d=r.adjustedEndValue;if(k(p)&&k(d)){if(p>e)return!1;if(d>=t&&k(p)&&k(d)){var f=r.breakSize,m=(a={start:t,end:e},o=w((n={start:p,end:d}).start),s=w(a.start),l=w(n.end),u=w(a.end),c=Math.max(o,s),(h=Math.min(l,u))<c?void 0:{start:c,end:h});m&&(i-=(m.end-m.start)*(1-f))}return!0}})),i},e.prototype.isInBreak=function(t){if(this._axisBreaks)return e=this._axisBreaks.iterator(),i=function(e){return t>=e.adjustedStartValue&&t<=e.adjustedEndValue},e((function(t){return!i(t)||(r=t,!1)})),r;var e,i,r},e.prototype.fixAxisBreaks=function(){var t=this;if(this._axisBreaks){var e=this._axisBreaks;if(e.length>0){ht(ae(e.iterator()),(function(e){var i=U(e.startValue,e.endValue),r=N(e.startValue,e.endValue);e.adjustedStartValue=i,e.adjustedEndValue=r,t._axisBreaks.update(e)}));var i=e.first,r=Math.min(i.startValue,i.endValue);se(e.iterator(),(function(t){var e=t.adjustedStartValue,i=t.adjustedEndValue;e<r&&(e=r,i<r&&(i=r)),t.adjustedStartValue=e,t.adjustedEndValue=i}))}}},Object.defineProperty(e.prototype,"startIndex",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endIndex",{get:function(){return this.dataItems.length},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.getPositionLabel=function(t){return Math.round(100*t)+"%x"},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),e.prototype.createSeriesRange=function(t){var e=this.axisRanges.create();return e.component=this,e.axisFill=this.renderer.axisFills.template.clone(),e.axisFill.disabled=!1,e.axisFill.fillOpacity=0,e.grid=this.renderer.grid.template.clone(),e.grid.disabled=!0,e.tick=this.renderer.ticks.template.clone(),e.tick.disabled=!0,e.label=this.renderer.labels.template.clone(),e.label.disabled=!0,e.addDisposer(new Lt((function(){t.axisRanges.removeValue(e)}))),t.axisRanges.push(e),e},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.renderer?this.renderer.copyFrom(e.renderer):e.renderer&&(this.renderer=e.renderer.clone(),this._disposers.push(this.renderer)),e.title&&(this.title?this.title.copyFrom(e.title):(this.title=e.title.clone(),this.title.parent=this),this._disposers.push(this.title))},e.prototype.resetIterators=function(){this._dataItemsIterator.reset()},e.prototype.processConfig=function(e){if(e&&S(e.axisRanges)&&A(e.axisRanges))for(var i=0,r=e.axisRanges.length;i<r;i++){var n=e.axisRanges[i];S(n.series)&&C(n.series)&&this.map.hasKey(n.series)&&(e.axisRanges[i]=this.createSeriesRange(this.map.getKey(n.series)),delete n.series,e.axisRanges[i].config=n)}t.prototype.processConfig.call(this,e)},Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.renderer&&(this.renderer.gridContainer.disabled=e),i},Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this._title!=t&&this._title.dispose(),t&&(this._title=t,t.parent=this,t.shouldClone=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(t){this.setPropertyValue("hideTooltipWhileZooming",t)},enumerable:!0,configurable:!0}),e}(En);ve.registeredClasses.Axis=lo,ve.registeredClasses.AxisDataItem=so,Dn.push({relevant:Fn.maybeXS,state:function(t,e){if(t instanceof lo&&t.tooltip){var i=t.states.create(e);return i.properties.cursorTooltipEnabled=!1,i}return null}});var uo=function(t){function e(){var e=t.call(this)||this;e.className="AxisLine",e.element=e.paper.add("path");var i=new _r;return e.stroke=i.getFor("grid"),e.strokeOpacity=.15,e.pixelPerfect=!0,e.fill=Ue(),e.applyTheme(),e.interactionsEnabled=!1,e}return Object(d.d)(e,t),e}(_n);ve.registeredClasses.AxisLine=uo;var co=function(t){function e(e){var i=t.call(this)||this;i.axis=e,i.element=i.paper.add("path"),i.className="AxisFill",i.isMeasured=!1,i.location=0,i.above=!1;var r=new _r;return i.fill=r.getFor("alternativeBackground"),i.fillOpacity=0,i.applyTheme(),i}return Object(d.d)(e,t),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),i},e.prototype.draw=function(){t.prototype.draw.call(this),this.__disabled||this.disabled||this.axis&&k(this.startPosition)&&k(this.endPosition)&&(this.fillPath=this.axis.getPositionRangePath(this.startPosition,this.endPosition),this.path=this.fillPath,this.isMeasured&&this.measure())},Object.defineProperty(e.prototype,"startPosition",{get:function(){return this.getPropertyValue("startPosition")},set:function(t){this.setPropertyValue("startPosition",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){return this.getPropertyValue("endPosition")},set:function(t){this.setPropertyValue("endPosition",t),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setPath=function(t){return!!this.setPropertyValue("path",t)&&(this.element.attr({d:t}),!0)},Object.defineProperty(e.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(t){this.setPropertyValue("above",t,!0)},enumerable:!0,configurable:!0}),e}(_n);ve.registeredClasses.AxisFill=co;var ho=function(t){function e(){var e=t.call(this)||this;e.className="Grid",e.element=e.paper.add("path"),e.location=.5,e.isMeasured=!1,e.above=!1;var i=new _r;return e.stroke=i.getFor("grid"),e.pixelPerfect=!0,e.strokeOpacity=.15,e.fill=Ue(),e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(t){this.setPropertyValue("above",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),i},e}(_n);ve.registeredClasses.Grid=ho,Dn.push({relevant:Fn.maybeXS,state:function(t,e){if(t instanceof ho){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var po=function(t){function e(){var e=t.call(this)||this;return e.className="AxisLabel",e.isMeasured=!1,e.padding(10,10,10,10),e.location=.5,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(t){this.setPropertyValue("inside",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),i},e}(Ln);ve.registeredClasses.AxisLabel=po;var fo=function(t){function e(){var e=t.call(this)||this;e.className="Tick";var i=new _r;return e.fillOpacity=0,e.length=6,e.strokeOpacity=.2,e.stroke=i.getFor("grid"),e.isMeasured=!1,e.nonScalingStroke=!0,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this.disabled?0:this.getPropertyValue("length")},set:function(t){this.setPropertyValue("length",t,!0)},enumerable:!0,configurable:!0}),e}(_n);ve.registeredClasses.Tick=fo;var mo=function(t){function e(){var e=t.call(this)||this;return e.className="AxisTick",e.element=e.paper.add("path"),e.location=.5,e.above=!1,e.isMeasured=!1,e.pixelPerfect=!0,e.strokeOpacity=0,e.length=5,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(t){this.setPropertyValue("inside",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(t){this.setPropertyValue("above",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),i},e}(fo);ve.registeredClasses.AxisTick=mo;var yo=function(t){function e(){var e=t.call(this)||this;e._chart=new Vt,e.className="AxisRenderer",e.minGridDistance=50,e.inside=!1,e.inversed=!1,e.tooltipLocation=.5,e.fullWidthTooltip=!1,e.cellStartLocation=0,e.cellEndLocation=1,e.minLabelPosition=0,e.maxLabelPosition=1,e.shouldClone=!1;var i=e.createChild(Sn);i.shouldClone=!1,i.layout="none",i.virtualParent=e,i.width=m(100),i.height=m(100),e.gridContainer=i,i.events.on("maxsizechanged",(function(){e.inited&&e.invalidateAxisItems()}),e,!1);var r=e.createChild(Sn);r.shouldClone=!1,r.isMeasured=!1,r.layout="none",r.width=m(100),r.height=m(100),e.breakContainer=r;var n=e.createChild(Sn);n.shouldClone=!1,n.isMeasured=!1,n.layout="none",n.width=m(100),n.height=m(100),e.bulletsContainer=n,e.line=e.createChild(uo),e.line.shouldClone=!1,e.line.strokeOpacity=0;var a=e.createChild(ho);a.shouldClone=!1,e.baseGrid=a;var o=e._disposers;return o.push(a),o.push(e.line),o.push(i),o.push(r),o.push(n),o.push(e._chart),e.ticks.template.disabled=!0,e.axisFills.template.disabled=!0,e.axisFills.template.interactionsEnabled=!1,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"axis",{get:function(){return this._axis},set:function(t){this.setAxis(t)},enumerable:!0,configurable:!0}),e.prototype.setAxis=function(t){this._axis=t,this.baseGrid.parent=t,this.line.parent=t,this.gridContainer.bind("opacity",t)},e.prototype.processRenderer=function(){this.events.on("sizechanged",this.updateTooltip,this,!1),this.events.on("positionchanged",this.updateTooltip,this,!1),this.labels.template.inside=this.inside,this.ticks.template.inside=this.inside},e.prototype.updateTooltip=function(){},Object.defineProperty(e.prototype,"axisLength",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.positionItem=function(t,e){t&&t.moveTo(e)},e.prototype.positionToPoint=function(t,e){return{x:0,y:0}},e.prototype.positionToAngle=function(t){return 0},e.prototype.positionToCoordinate=function(t){var e=this.axis,i=e.axisFullLength;return e.renderer.inversed?(e.end-t)*i:(t-e.start)*i},e.prototype.updateGridContainer=function(){},e.prototype.getHeight=function(){var t=this.gridContainer;return t.parent?t.parent.pixelHeight:this.gridContainer.pixelHeight||0},e.prototype.getWidth=function(){var t=this.gridContainer;return t.parent?t.parent.pixelWidth:this.gridContainer.pixelWidth||0},e.prototype.coordinateToPosition=function(t,e){var i=this.axis,r=i.axisFullLength;return L(i.renderer.inversed?i.end-t/r:t/r+i.start,5)},e.prototype.pointToPosition=function(t){return 0},e.prototype.getPositionRangePath=function(t,e){return""},e.prototype.invalidateAxisItems=function(){var t=this.axis;t&&t.invalidateDataItems()},e.prototype.updateGridElement=function(t,e,i){},e.prototype.updateTickElement=function(t,e,i){},e.prototype.updateBullet=function(t,e,i){},e.prototype.updateLabelElement=function(t,e,i,r){},e.prototype.updateFillElement=function(t,e,i){t.startPosition=e,t.endPosition=i},e.prototype.updateAxisLine=function(){},e.prototype.updateBaseGridElement=function(){},e.prototype.updateBreakElement=function(t){this.positionItem(t.startLine,t.startPoint),this.toggleVisibility(t.startLine,t.startPosition,0,1),this.positionItem(t.endLine,t.endPoint),this.toggleVisibility(t.endLine,t.endPosition,0,1)},Object.defineProperty(e.prototype,"minGridDistance",{get:function(){return this.getPropertyValue("minGridDistance")},set:function(t){this.setPropertyValue("minGridDistance",t)&&this.axis&&this.axis.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.set(t,null)},enumerable:!0,configurable:!0}),e.prototype.toggleVisibility=function(t,e,i,r){var n=this.axis,a=t.dataItem;a&&a instanceof so&&(k(a.minPosition)&&(i=a.minPosition),k(a.maxPosition)&&(r=a.maxPosition)),t.disabled||(t.__disabled=e<n.start+(n.end-n.start)*(i-1e-4)||e>n.start+(n.end-n.start)*(r+1e-4))},e.prototype.createBreakSprites=function(t){},Object.defineProperty(e.prototype,"axisFills",{get:function(){if(!this._axisFills){var t=this.createFill(this.axis);this._axisFills=new Pe(t),t.applyOnClones=!0,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new Se(this._axisFills)),this._disposers.push(this._axisFills.template)}return this._axisFills},enumerable:!0,configurable:!0}),e.prototype.createFill=function(t){return new co(t)},Object.defineProperty(e.prototype,"grid",{get:function(){if(!this._grid){var t=this.createGrid();this._grid=new Pe(t),t.applyOnClones=!0,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new Se(this._grid)),this._disposers.push(this._grid.template)}return this._grid},enumerable:!0,configurable:!0}),e.prototype.createGrid=function(){return new ho},Object.defineProperty(e.prototype,"ticks",{get:function(){if(!this._ticks){var t=this.createTick();t.applyOnClones=!0,t.isMeasured=!1,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._ticks=new Pe(t),this._disposers.push(new Se(this._ticks)),this._disposers.push(this._ticks.template)}return this._ticks},enumerable:!0,configurable:!0}),e.prototype.createTick=function(){return new mo},Object.defineProperty(e.prototype,"labels",{get:function(){if(!this._labels){var t=this.createLabel();this._labels=new Pe(t),t.applyOnClones=!0,t.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new Se(this._labels)),this._disposers.push(this._labels.template)}return this._labels},enumerable:!0,configurable:!0}),e.prototype.createLabel=function(){return new po},Object.defineProperty(e.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(t){this.setPropertyValue("inside",t)&&this.axis&&this.axis.invalidate(),t?(this.width=0,this.height=0):(this.width=void 0,this.height=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opposite",{get:function(){return this.getPropertyValue("opposite")},set:function(t){this.setPropertyValue("opposite",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullWidthTooltip",{get:function(){return this.getPropertyValue("fullWidthTooltip")},set:function(t){this.setPropertyValue("fullWidthTooltip",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(t){this.setPropertyValue("tooltipLocation",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipLocation2",{get:function(){return this.getPropertyValue("tooltipLocation2")},set:function(t){this.setPropertyValue("tooltipLocation2",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellStartLocation",{get:function(){return this.getPropertyValue("cellStartLocation")},set:function(t){this.setPropertyValue("cellStartLocation",t)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellEndLocation",{get:function(){return this.getPropertyValue("cellEndLocation")},set:function(t){this.setPropertyValue("cellEndLocation",t)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inversed",{get:function(){return this.getPropertyValue("inversed")},set:function(t){this.setPropertyValue("inversed",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minLabelPosition",{get:function(){return this.getPropertyValue("minLabelPosition")},set:function(t){this.setPropertyValue("minLabelPosition",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLabelPosition",{get:function(){return this.getPropertyValue("maxLabelPosition")},set:function(t){this.setPropertyValue("maxLabelPosition",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.grid.template.copyFrom(e.grid.template),this.ticks.template.copyFrom(e.ticks.template),this.labels.template.copyFrom(e.labels.template),this.axisFills.template.copyFrom(e.axisFills.template),this.line.copyFrom(e.line),this.baseGrid.copyFrom(e.baseGrid)},e.prototype.toAxisPosition=function(t){return t},e.prototype.setVisibility=function(e){t.prototype.setVisibility.call(this,e),this.bulletsContainer.visible=e},e}(Sn);ve.registeredClasses.AxisRenderer=yo;var go=function(t){function e(){var e=t.call(this)||this;return e.className="AxisBullet",e.location=.5,e.isMeasured=!1,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(t){this.setPropertyValue("location",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setDisabled=function(e){var i=t.prototype.setDisabled.call(this,e);return this.axis&&this.axis.invalidateDataItems(),i},e}(Sn);ve.registeredClasses.AxisBullet=go;var bo=function(t){function e(){var e=t.call(this)||this;return e.className="AxisRendererY",e.minGridDistance=40,e.opposite=!1,e.height=m(100),e.labels.template.verticalCenter="middle",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.setAxis=function(e){t.prototype.setAxis.call(this,e),e.layout="horizontal"},e.prototype.updateGridContainer=function(){var t=this.axis;if(t){var e=this.gridContainer;e.y=t.pixelY,e.height=t.axisLength}},e.prototype.toAxisPosition=function(t){var e=this.axis;if(e){var i=1-t,r=e.relativePositionSprite,n=e.pixelY;if(r?n=xi({x:0,y:this.pixelY},this.parent,r).y:r=e.parent,r)return 1-(i-n/r.innerHeight)/(e.axisLength/r.innerHeight)}return t},e.prototype.processRenderer=function(){t.prototype.processRenderer.call(this);var e=this.axis;if(e){var i=e.title;i.valign="middle",e.height instanceof f||(e.height=m(100)),this.opposite?(i.rotation=90,this.line.toBack(),i.toFront()):(i.rotation=-90,i.toBack(),this.line.toFront())}},e.prototype.updateTooltip=function(){if(this.axis){var t=0,e=2e3;this.opposite?this.inside&&(t=-2e3,e=2e3):this.inside||(t=-2e3,e=2e3),this.axis.updateTooltip("horizontal",{x:t,y:0,width:e,height:this.axisLength})}},Object.defineProperty(e.prototype,"axisLength",{get:function(){var t=this.axis;return t.measuredHeight-t.pixelPaddingTop-t.pixelPaddingBottom||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){return{x:0,y:this.positionToCoordinate(t)}},e.prototype.pointToPosition=function(t){return this.coordinateToPosition(t.y,t.x)},e.prototype.coordinateToPosition=function(t,e){var i=this.axis,r=i.axisFullLength;return L(i.renderer.inversed?1-i.start-t/r:t/r+(1-i.end),5)},e.prototype.getPositionRangePath=function(t,e){var i=V(this.positionToCoordinate(t),0,this.axisLength),r=V(this.positionToCoordinate(e),0,this.axisLength),n=Math.abs(r-i),a=this.getWidth();return $n({x:0,y:Math.min(i,r),width:a,height:n},!0)},e.prototype.updateGridElement=function(t,e,i){var r=this.positionToPoint(e+=(i-e)*t.location);t.path=Hn({x:0,y:0})+Wn({x:this.getWidth(),y:0}),this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.updateTickElement=function(t,e,i){var r=this.positionToPoint(e+=(i-e)*t.location),n=t.length;r.x=xi({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,n*=this.opposite?t.inside?-1:1:t.inside?1:-1,t.path=Hn({x:0,y:0})+Wn({x:n,y:0}),this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.updateAxisLine=function(){this.line.path=Hn({x:0,y:0})+Wn({x:0,y:this.axisLength})},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.axis,i=this.getWidth(),r=e.basePoint.y,n=this.baseGrid;if(r<-.2||r>this.axisLength+.2)n.hide(0);else{var a=xi({x:0,y:0},this.gridContainer,n.parent).x;n.path=Hn({x:0,y:0})+Wn({x:i,y:0}),n.moveTo({x:a,y:r}),n.show(0)}},e.prototype.updateLabelElement=function(t,e,i,r){S(r)||(r=t.location),e+=(i-e)*r,t.isMeasured=!t.inside;var n,a=this.positionToPoint(e),o=0,s=this.gridContainer.maxWidth;this.opposite?(t.inside?(n="right","left"==t.align&&(o=-s,n="left"),"center"==t.align&&(o=-s/2,n="middle")):n="left",a.x=0+o):(t.inside?(n="left","right"==t.align&&(o=s,n="right"),"center"==t.align&&(o=s/2,n="middle")):n="right",a.x=this.measuredWidth+o),0==t.rotation&&(t.horizontalCenter=n),this.positionItem(t,a),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.updateBreakElement=function(e){t.prototype.updateBreakElement.call(this,e);var i=e.startLine,r=e.endLine,n=e.fillShape,a=e.startPoint,o=e.endPoint,s=e.pixelMarginLeft,l=this.getWidth()-e.pixelMarginLeft-e.pixelMarginRight;a.y=V(a.y,-1,this.axisLength+1),o.y=V(o.y,-1,this.axisLength+1),e.fillShape.__disabled=a.y==o.y&&(a.y<0||a.y>this.axisLength);var u=Math.abs(l-s);i.x=s,i.height=0,i.width=u,r.x=s,r.height=0,r.width=u,n.width=u,n.height=Math.abs(o.y-a.y),n.x=s,n.y=o.y},e.prototype.createBreakSprites=function(t){t.startLine=new _a,t.endLine=new _a;var e=new xa;e.setWavedSides(!0,!1,!0,!1),t.fillShape=e},e.prototype.positionToCoordinate=function(t){var e=this.axis,i=e.axisFullLength;return L(e.renderer.inversed?(t-e.start)*i:(e.end-t)*i,1)},e.prototype.updateBullet=function(t,e,i){var r=.5;t instanceof go&&(r=t.location);var n=this.positionToPoint(e+=(i-e)*r);n.x=xi({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},e}(yo);ve.registeredClasses.AxisRendererY=bo,Dn.push({relevant:Fn.widthS,state:function(t,e){if(t instanceof bo){var i=t.states.create(e);return i.properties.inside=!0,i.properties.maxLabelPosition=.9,i.properties.minLabelPosition=.1,i}return null}}),Dn.push({relevant:Fn.widthXS,state:function(t,e){if(t instanceof bo){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var vo=function(t){function e(){var e=t.call(this)||this;return e.className="ValueAxisBreak",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedStartValue)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedEndValue)},enumerable:!0,configurable:!0}),e}(ao);ve.registeredClasses.ValueAxisBreak=vo;var _o=function(t){function e(){var e=t.call(this)||this;return e.className="ValueAxisDataItem",e.values.value={},e.values.endValue={},e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){return this.values.endValue.value},set:function(t){this.setValue("endValue",t)},enumerable:!0,configurable:!0}),e}(so),xo=function(t){function e(){var e=t.call(this)||this;return e._stepDecimalPlaces=0,e._prevStepDecimalPlaces=0,e._adjustLabelPrecision=!0,e._baseValue=0,e._adjustedStart=0,e._adjustedEnd=1,e._extremesChanged=!1,e._deltaMinMax=1,e.calculateTotals=!1,e.className="ValueAxis",e.axisFieldName="value",e.setPropertyValue("maxZoomFactor",1e3),e.setPropertyValue("extraMin",0),e.setPropertyValue("extraMax",0),e.setPropertyValue("strictMinMax",!1),e.setPropertyValue("maxPrecision",Number.MAX_VALUE),e.setPropertyValue("adjustLabelPrecision",!0),e.setPropertyValue("extraTooltipPrecision",0),e.keepSelection=!1,e.includeRangesInMinMax=!1,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.fillRule=function(t){var e=t.value,i=t.component;t.axisFill.disabled||(t.axisFill.__disabled=L(e/i.step/2,5)==Math.round(e/i.step/2))},e.prototype.createDataItem=function(){return new _o},e.prototype.createAxisBreak=function(){return new vo},e.prototype.dataChangeUpdate=function(){this.clearCache(),this.keepSelection?(0!=this._start&&this.dispatchImmediately("startchanged"),1!=this._end&&this.dispatchImmediately("endchanged"),0==this._start&&1==this._end||this.dispatchImmediately("startendchanged")):0==this._start&&1==this._end||(this._start=0,this._end=1,this.dispatchImmediately("startendchanged")),this._maxZoomed=this._maxDefined,this._minZoomed=this._minDefined,this._maxAdjusted=this._maxDefined,this._minAdjusted=this._minDefined},e.prototype.processSeriesDataItems=function(){if(this.calculateTotals){var t=this.series.getIndex(0),e=t.startIndex;if(t.dataItems.length>0){e>0&&e--;var i=t.endIndex;i<t.dataItems.length&&i++;for(var r=function(t){var e={},i={};n.series.each((function(r){if(!r.excludeFromTotal){var n=r.dataItems.getIndex(t);n&&Qt(n.values,(function(t){var r=n.values[t].workingValue;k(r)&&(k(e[t])?e[t]+=Math.abs(r):e[t]=Math.abs(r),k(i[t])?i[t]+=r:i[t]=r)}))}})),n.series.each((function(r){if(!r.excludeFromTotal){var n=r.dataItems.getIndex(t);n&&Qt(n.values,(function(t){var r=n.values[t].workingValue;k(r)&&(n.setCalculatedValue(t,e[t],"total"),n.setCalculatedValue(t,100*r/e[t],"totalPercent"),n.setCalculatedValue(t,i[t],"sum"))}))}}))},n=this,a=e;a<i;++a)r(a)}}},e.prototype.validate=function(){this.axisLength<=0||(t.prototype.validate.call(this),this.getMinMax(),this.fixAxisBreaks(),this.calculateZoom(),this.validateAxisElements(),this.validateAxisRanges(),this.validateBreaks(),this.hideUnusedDataItems(),this.renderer.invalidateLayout())},e.prototype.calculateZoom=function(){if(k(this.min)&&k(this.max)){var t=this.positionToValue(this.start),e=this.positionToValue(this.end),i=this.adjustDifference(t,e),r=this.adjustMinMax(t,e,i,this._gridCount,!0),n=(s=(""+r.step).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(s[1]?s[1].length:0)-(s[2]?+s[2]:0)):0;this._stepDecimalPlaces=n,t=L(t,n),e=L(e,n);var a=(r=this.adjustMinMax(t,e,i,this._gridCount,!0)).step;if(this.syncWithAxis){var o=this.getCache(t+"-"+e);k(o)&&(a=o)}else t=r.min,e=r.max;this._minZoomed==t&&this._maxZoomed==e&&this._step==a||(this._minZoomed=t,this._maxZoomed=e,this._step=a,this.dispatchImmediately("selectionextremeschanged"))}var s},e.prototype.validateAxisElements=function(){var t=this;if(k(this.max)&&k(this.min)){var e=this.minZoomed-2*this._step;this.logarithmic?Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E>1?e=Math.pow(10,Math.log(this.min)*Math.LOG10E):0==(e=Math.floor(this.minZoomed/this._step)*this._step)&&(e=this.minZoomed):e=Math.floor(e/this._step)*this._step;var i=this._maxZoomed+this._step;this.resetIterators();var r=this._dataItemsIterator,n=0,a=this._prevStepDecimalPlaces!=this._stepDecimalPlaces;for(this._prevStepDecimalPlaces=this._stepDecimalPlaces;e<=i;){if(!this.isInBreak(e)){var o=r.find((function(t){return t.value===e}));o.__disabled&&(o.__disabled=!1),this.appendDataItem(o),o.axisBreak=void 0,(o.value!=e||a)&&(o.value=e,o.text=this.formatLabel(e),o.label&&o.label.invalid&&o.label.validate(),o.value>=this.min&&o.value<=this.max&&o.label&&("Y"==this.axisLetter&&o.label.measuredWidth>this.ghostLabel.measuredWidth||"X"==this.axisLetter&&o.label.measuredHeight>this.ghostLabel.measuredHeight)&&(this.ghostLabel.text=o.label.currentText,this.ghostLabel.validate())),this.validateDataElement(o)}n++,this.logarithmic&&Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E>1?e=Math.pow(10,Math.log(this.min)*Math.LOG10E+n):e+=this._step;var s=Math.pow(10,Math.floor(Math.log(Math.abs(this._step))*Math.LOG10E));if(s<1){var l=Math.round(Math.abs(Math.log(Math.abs(s))*Math.LOG10E))+2;e=L(e,l)}}var u=this._axisBreaks;if(u){var c=this.renderer;se(u.iterator(),(function(e){if(e.breakSize>0&&W(e.startPoint,e.endPoint)>c.minGridDistance)for(var i=e.adjustedMin;i<=e.adjustedMax;){if(i>=e.adjustedStartValue&&i<=e.adjustedEndValue){var n=r.find((function(t){return t.value===i}));n.__disabled&&(n.__disabled=!1),t.appendDataItem(n),n.axisBreak=e,n.value!=i&&(n.value=i,n.text=t.formatLabel(i),n.label&&n.label.invalid&&n.label.validate()),t.validateDataElement(n)}i+=e.adjustedStep}}))}}},e.prototype.validateDataElement=function(e){t.prototype.validateDataElement.call(this,e),e.itemIndex=this._axisItemCount,this._axisItemCount++;var i=this.renderer,r=e.value,n=e.endValue,a=this.valueToPosition(r);e.position=a;var o=a,s=this.valueToPosition(r+this._step);k(n)&&(s=o=this.valueToPosition(n)),e.point=i.positionToPoint(a);var l=e.tick;l&&!l.disabled&&i.updateTickElement(l,a,o);var u=e.grid;u&&!u.disabled&&i.updateGridElement(u,a,o);var c=e.label;c&&!c.disabled&&i.updateLabelElement(c,a,o);var h=e.axisFill;h&&!h.disabled&&(i.updateFillElement(h,a,s),e.isRange||this.fillRule(e)),e.bullet&&i.updateBullet(e.bullet,a,o);var p=e.mask;p&&i.updateFillElement(p,a,s)},e.prototype.formatLabel=function(t){return this.adjustLabelPrecision&&0!=t?this.numberFormatter.format(t,void 0,this._stepDecimalPlaces):this.numberFormatter.format(t)},Object.defineProperty(e.prototype,"basePoint",{get:function(){var t=this.valueToPosition(this.baseValue);return this.renderer.positionToPoint(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseValue",{get:function(){var t=this._baseValue;return this.logarithmic&&(t=this.min),this._adapterO?this._adapterO.apply("baseValue",t):t},set:function(t){this._baseValue=t,this.invalidateLayout(),this.invalidateSeries()},enumerable:!0,configurable:!0}),e.prototype.anyToPosition=function(t){return this.valueToPosition(t)},e.prototype.valueToPoint=function(t){var e=this.valueToPosition(t),i=this.renderer.positionToPoint(e),r=this.renderer.positionToAngle(e);return{x:i.x,y:i.y,angle:r}},e.prototype.anyToPoint=function(t){return this.valueToPoint(t)},e.prototype.valueToPosition=function(t){if(k(t)){var e=this.min,i=this.max;if(k(e)&&k(i)){var r=this._difference,n=this._axisBreaks;return n&&n.length>0&&oe(n.iterator(),(function(r){var n=r.adjustedStartValue,a=r.adjustedEndValue;if(k(n)&&k(a)){if(t<n)return!1;if(X({start:n,end:a},{start:e,end:i})){n=Math.max(n,e),a=Math.min(a,i);var o=r.breakSize;t>a?e+=(a-n)*(1-o):t<n||(t=n+(t-n)*o)}}return!0})),this.logarithmic?(Math.log(t)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)/(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E):(t-e)/r}}return 0},e.prototype.invalidateLabels=function(){t.prototype.invalidateLabels.call(this),this.dataItems&&(this.dataItems.each((function(t){t.value=void 0})),this.invalidate())},e.prototype.positionToValue=function(t){t=L(t,10);var e=this.min,i=this.max;if(k(e)&&k(i)){var r=i-e,n=null,a=this._axisBreaks;return a&&a.length>0&&oe(a.iterator(),(function(a){var o=a.startPosition,s=a.endPosition,l=a.adjustedStartValue,u=a.adjustedEndValue;if(k(l)&&k(u)){if(l>i)return!1;if(X({start:l,end:u},{start:e,end:i})){l=N(l,e),u=U(u,i);var c=a.breakSize;if(r-=(u-l)*(1-c),t>s)e+=(u-l)*(1-c);else if(!(t<o))return n=l+(t-o)/(s-o)*(u-l),!1}return!0}})),k(n)||(n=this.logarithmic?Math.pow(Math.E,(t*(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)+Math.log(this.min)*Math.LOG10E)/Math.LOG10E):t*r+e),n}},e.prototype.xToValue=function(t){return this.positionToValue(this.pointToPosition({x:t,y:0}))},e.prototype.yToValue=function(t){return this.positionToValue(this.pointToPosition({x:0,y:t}))},e.prototype.pointToPosition=function(t){return this.renderer instanceof bo?1-this.renderer.pointToPosition(t):this.renderer.pointToPosition(t)},e.prototype.animateMinMax=function(t,e){return this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:t},{property:"_maxAdjusted",from:this._maxAdjusted,to:e}],this.rangeChangeDuration,this.rangeChangeEasing)},e.prototype.getMinMax=function(){var t=this;this.updateGridCount();var e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(k(this._minDefined)&&k(this._maxDefined)||(this.series.each((function(r){if(!r.ignoreMinMax){var n=r.min(t);k(n)&&n<e&&(e=n);var a=r.max(t);k(a)&&a>i&&(i=a)}})),this.includeRangesInMinMax&&this.axisRanges.each((function(t){if(!t.ignoreMinMax){var r=U(t.value,t.endValue),n=N(t.value,t.endValue);(r<e||!k(e))&&(e=r),(n>i||!k(i))&&(i=n)}}))),this.logarithmic&&e<=0&&this.raiseCriticalError(new Error("Logarithmic value axis can not have values <= 0."),!0),0==e&&0==i&&(i=.9,e=-.9),k(this._minDefined)&&(e=this._minDefined),k(this._maxDefined)&&(i=this._maxDefined),this._adapterO&&(e=this._adapterO.apply("min",e)),this._adapterO&&(i=this._adapterO.apply("max",i)),k(e)&&k(i)){this._minReal=e,this._maxReal=i,e==Number.POSITIVE_INFINITY&&(e=void 0),i==Number.NEGATIVE_INFINITY&&(i=void 0);var r=this.adjustDifference(e,i);if(e=this.fixMin(e),(i=this.fixMax(i))-e<=1/Math.pow(10,15)){if(i-e!=0)this._deltaMinMax=(i-e)/2;else{var n=Math.log(Math.abs(i))*Math.LOG10E,a=Math.pow(10,Math.floor(n));this._deltaMinMax=a/=10}e-=this._deltaMinMax,i+=this._deltaMinMax}i+=(i-(e-=(i-e)*this.extraMin))*this.extraMax;var o=this.strictMinMax;k(this._maxDefined)&&(o=!0);var s=this.adjustMinMax(e,i,r,this._gridCount,o);if(r=(i=s.max)-(e=s.min),s=this.adjustMinMax(e,i,i-e,this._gridCount,!0),e=s.min,i=s.max,this.strictMinMax&&(e=k(this._minDefined)?this._minDefined:this._minReal,(i=k(this._maxDefined)?this._maxDefined:this._maxReal)-e<=1e-8&&(e-=this._deltaMinMax,i+=this._deltaMinMax),i+=(i-(e-=(i-e)*this.extraMin))*this.extraMax),this._adapterO&&(e=this._adapterO.apply("min",e)),this._adapterO&&(i=this._adapterO.apply("max",i)),this._step=s.step,(this._minAdjusted!=e||this._maxAdjusted!=i)&&k(e)&&k(i)){var l=this._minMaxAnimation;if(this._extremesChanged&&k(this._minAdjusted)&&k(this._maxAdjusted)&&this.inited){if(l&&!l.isFinished()&&this._finalMax==i&&this._finalMin==e)return;this._finalMin=e,this._finalMax=i,(l=this.animateMinMax(e,i))&&!l.isFinished()?(l.events.on("animationprogress",this.validateDataItems,this),l.events.on("animationended",(function(){t.series.each((function(t){t.validate()})),t.validateDataItems(),t.handleSelectionExtremesChange()})),this._minMaxAnimation=l):this.series.each((function(t){t.validate()})),this.validateDataItems(),this.dispatchImmediately("extremeschanged"),this.handleSelectionExtremesChange()}else{if(l&&!l.isFinished()&&this._finalMax==i&&this._finalMin==e)return;this._minAdjusted=e,this._maxAdjusted=i,this._finalMin=e,this._finalMax=i,this.invalidateDataItems(),this.dispatchImmediately("extremeschanged")}}this._extremesChanged=!1,this._difference=this.adjustDifference(e,i)}},e.prototype.fixMin=function(t){return t},e.prototype.fixMax=function(t){return t},e.prototype.adjustMinMax=function(t,e,i,r,n){r<=1&&(r=1),r=Math.round(r);var a=t,o=e;0===i&&(i=Math.abs(e));var s=Math.log(Math.abs(i))*Math.LOG10E,l=Math.pow(10,Math.floor(s)),u=l/=10;n&&(u=0),this.logarithmic?(t<=0&&(t=this.baseValue),t==1/0&&(t=1),e==-1/0&&(e=10),t=Math.pow(10,Math.floor(Math.log(Math.abs(t))*Math.LOG10E)),e=Math.pow(10,Math.ceil(Math.log(Math.abs(e))*Math.LOG10E))):(n?(t=Math.floor(t/l)*l,e=Math.ceil(e/l)*l):(t=Math.ceil(t/l)*l-u,e=Math.floor(e/l)*l+u),t<0&&a>=0&&(t=0),e>0&&o<=0&&(e=0)),s=Math.log(Math.abs(i))*Math.LOG10E,l=Math.pow(10,Math.floor(s)),l/=10;var c=Math.ceil(i/r/l)*l,h=Math.pow(10,Math.floor(Math.log(Math.abs(c))*Math.LOG10E)),p=Math.ceil(c/h);p>5?p=10:p<=5&&p>2&&(p=5),c=Math.ceil(c/(h*p))*h*p,this.maxPrecision<Number.MAX_VALUE&&c!=R(c,this.maxPrecision)&&(c=R(c,this.maxPrecision));var d=0;if(h<1&&(c=L(c,d=Math.round(Math.abs(Math.log(Math.abs(h))*Math.LOG10E))+1)),!this.logarithmic){var f=Math.floor(t/c);t=L(c*f,d);var m=void 0;(m=n?Math.floor(e/c):Math.ceil(e/c))==f&&m++,(e=L(c*m,d))<o&&(e+=c),t>a&&(t-=c)}return{min:t,max:e,step:c}},Object.defineProperty(e.prototype,"min",{get:function(){var t=this._minAdjusted;return k(t)||(t=this._minDefined),t},set:function(t){this._minDefined!=t&&(this._minDefined=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minDefined",{get:function(){return this._minDefined},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDefined",{get:function(){return this._maxDefined},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraMin",{get:function(){return this.getPropertyValue("extraMin")},set:function(t){this.setPropertyValue("extraMin",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraMax",{get:function(){return this.getPropertyValue("extraMax")},set:function(t){this.setPropertyValue("extraMax",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){var t=this._maxAdjusted;return k(t)||(t=this._maxDefined),t},set:function(t){this._maxDefined!=t&&(this._maxDefined=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustLabelPrecision",{get:function(){return this.getPropertyValue("adjustLabelPrecision")},set:function(t){this.setPropertyValue("adjustLabelPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.registerSeries=function(e){return new Rt([t.prototype.registerSeries.call(this,e),e.events.on("extremeschanged",this.handleExtremesChange,this,!1),e.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1),this.events.on("extremeschanged",e.invalidate,e,!1)])},e.prototype.handleSelectionExtremesChange=function(){var t,e,i=this,r=!0;if(se(this.series.iterator(),(function(n){if(!n.ignoreMinMax&&!n.isHidden){n.visible&&!n.isHiding&&(r=!1);var a=n.selectionMin(i),o=n.selectionMax(i);k(a)&&(!k(t)||a<t)&&(t=a),k(o)&&(!k(e)||o>e)&&(e=o)}})),this.includeRangesInMinMax&&this.axisRanges.each((function(t){if(!t.ignoreMinMax){var i=U(t.value,t.endValue),r=N(t.value,t.endValue);i<e&&(e=i),r>e&&(e=r)}})),k(this._minDefined)?t=this.strictMinMax?this._minDefined:this.min:this.strictMinMax&&(t=this._minReal),k(this._maxDefined)?e=this.strictMinMax?this._maxDefined:this.max:this.strictMinMax&&(e=this._maxReal),t==e){var n=this.adjustMinMax(t-=this._deltaMinMax,e+=this._deltaMinMax,0,this._gridCount,this.strictMinMax);t=n.min,e=n.max}var a=this.adjustDifference(t,e),o=this.adjustMinMax(t,e,a,this._gridCount);t=o.min,e=o.max,e+=(e-(t-=(e-t)*this.extraMin))*this.extraMax,t=V(t,this.min,this.max),e=V(e,this.min,this.max),a=this.adjustDifference(t,e),o=this.adjustMinMax(t,e,a,this._gridCount,!0),t=o.min,e=o.max,this.strictMinMax&&(t=N(t,this._minDefined),e=U(e,this._maxDefined));var s=o.step;this.syncWithAxis&&(o=this.syncAxes(t,e,s),t=o.min,e=o.max,this.invalidate()),s=o.step,this._difference=this.adjustDifference(this.min,this.max);var l=this.valueToPosition(t),u=this.valueToPosition(e);r&&!this.syncWithAxis&&(l=0,u=1);var c=0;this.syncWithAxis?(c=5,this.setCache(t+"-"+e,s)):(this._step=s,this._minZoomed=t,this._maxZoomed=e),this.keepSelection||this.zoom({start:l,end:u},!1,!1,c)},Object.defineProperty(e.prototype,"strictMinMax",{get:function(){return this.getPropertyValue("strictMinMax")},set:function(t){this.setPropertyValue("strictMinMax",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logarithmic",{get:function(){return this.getPropertyValue("logarithmic")},set:function(t){this.setPropertyValue("logarithmic",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepSelection",{get:function(){return this.getPropertyValue("keepSelection")},set:function(t){this.setPropertyValue("keepSelection",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"includeRangesInMinMax",{get:function(){return this.getPropertyValue("includeRangesInMinMax")},set:function(t){this.setPropertyValue("includeRangesInMinMax",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPrecision",{get:function(){return this.getPropertyValue("maxPrecision")},set:function(t){this.setPropertyValue("maxPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraTooltipPrecision",{get:function(){return this.getPropertyValue("extraTooltipPrecision")},set:function(t){this.setPropertyValue("extraTooltipPrecision",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e.prototype.handleExtremesChange=function(){var t=this;this._extremesChanged=!0,this.getMinMax(),this.ghostLabel&&this.dataItems.each((function(e){e.label&&e.label.pixelWidth>0&&(t.ghostLabel.text=e.label.currentText)}))},e.prototype.getX=function(t,e,i,r,n){return this.renderer.positionToPoint(this.getPositionX(t,e,i,r,n)).x},e.prototype.getPositionX=function(t,e,i,r,n){var a=t.getWorkingValue(e);S(r)||(r="valueX");var o=t.getValue(r,"stack");k(a)||(a=this.baseValue,this.logarithmic&&o>0&&(a=0));var s=this.valueToPosition(a+o);return n&&(s=V(s,n.start,n.end)),s},e.prototype.getY=function(t,e,i,r,n){return this.renderer.positionToPoint(this.getPositionY(t,e,i,r,n)).y},e.prototype.getPositionY=function(t,e,i,r,n){var a=t.getWorkingValue(e);S(r)||(r="valueY");var o=t.getValue(r,"stack");k(a)||(a=this.baseValue,this.logarithmic&&o>0&&(a=0));var s=this.valueToPosition(a+o);return n&&(s=V(s,n.start,n.end)),s},e.prototype.getAngle=function(t,e,i,r,n){var a=t.getWorkingValue(e),o=t.getValue(r,"stack");k(a)||(a=this.baseValue);var s=this.valueToPosition(a+o);return n&&(s=V(s,n.start,n.end)),this.positionToAngle(s)},e.prototype.getAnyRangePath=function(t,e,i){var r=this.valueToPosition(t),n=this.valueToPosition(e);return this.getPositionRangePath(r,n)},e.prototype.getTooltipText=function(t){var e=L(this.positionToValue(t),this._stepDecimalPlaces+this.extraTooltipPrecision),i=this.tooltip.numberFormatter.format(e);return this._adapterO?this._adapterO.apply("getTooltipText",i):i},e.prototype.zoomToValues=function(t,e,i,r){this.zoom({start:(t-this.min)/(this.max-this.min),end:(e-this.min)/(this.max-this.min)},i,r)},Object.defineProperty(e.prototype,"minZoomed",{get:function(){return this.syncWithAxis?this._minZoomed:N(this.min,this._minZoomed)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxZoomed",{get:function(){return this.syncWithAxis?this._maxZoomed:U(this.max,this._maxZoomed)},enumerable:!0,configurable:!0}),e.prototype.fixAxisBreaks=function(){var e=this;t.prototype.fixAxisBreaks.call(this);var i=this._axisBreaks;i&&i.length>0&&i.each((function(t){var i=t.adjustedStartValue,r=t.adjustedEndValue,n=r-i,a=Math.ceil(n*t.breakSize)*e._gridCount/(e.max-e.min),o=e.adjustMinMax(i,r,n,a,!0);t.adjustedStep=o.step,t.adjustedMin=o.min,t.adjustedMax=o.max})),this._difference=this.adjustDifference(this.min,this.max)},e.prototype.getPositionLabel=function(t){var e=this.positionToValue(t);return this.numberFormatter.format(e)},e.prototype.showTooltipAt=function(t){this.showTooltipAtPosition(this.valueToPosition(t))},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.min=e.min,this.max=e.max,this.calculateTotals=e.calculateTotals,this._baseValue=e.baseValue},Object.defineProperty(e.prototype,"syncWithAxis",{get:function(){return this.getPropertyValue("syncWithAxis")},set:function(t){var e=this;this.setPropertyValue("syncWithAxis",t,!0)&&t&&(this._disposers.push(t.events.on("extremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(t.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1)),this.events.on("shown",this.handleSelectionExtremesChange,this,!1),this.events.on("maxsizechanged",(function(){e.clearCache(),e._disposers.push(ve.events.once("exitframe",(function(){e.handleSelectionExtremesChange()})))}),this,!1))},enumerable:!0,configurable:!0}),e.prototype.syncAxes=function(t,e,i){var r=this.syncWithAxis;if(r){k(t)||(t=this.min),k(e)||(e=this.max),k(i)||(i=this._step);var n=Math.round((r.maxZoomed-r.minZoomed)/r.step),a=Math.round((e-t)/i);if(k(n)&&k(a))for(var o=!1,s=0,l=.01*(e-t),u=t,c=e,h=i;1!=o;)if(o=this.checkSync(u,c,h,n),++s>1e3&&(o=!0),o)t=u,e=c,i=h;else{s/3==Math.round(s/3)?(u=t-l*s,t>=0&&u<0&&(u=0)):(c=e+l*s)<=0&&c>0&&(c=0);var p=this.adjustMinMax(u,c,c-u,this._gridCount,!0);u=p.min,c=p.max,h=p.step}}return{min:t,max:e,step:i}},e.prototype.checkSync=function(t,e,i,r){for(var n=(e-t)/i,a=1;a<r;a++)if(L(n/a,1)==r||n*a==r)return!0;return!1},e.prototype.processConfig=function(e){e&&S(e.syncWithAxis)&&C(e.syncWithAxis)&&(this.map.hasKey(e.syncWithAxis)?e.syncWithAxis=this.map.getKey(e.syncWithAxis):(this.processingErrors.push('[ValueAxis] No axis with id "'+e.syncWithAxis+'" found for `syncWithAxis`'),delete e.xAxis)),t.prototype.processConfig.call(this,e)},e}(lo);ve.registeredClasses.ValueAxis=xo,ve.registeredClasses.ValueAxisDataItem=_o;var So=function(t){function e(){var e=t.call(this)||this;return e.className="DateAxisBreak",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"startDate",{get:function(){return this.getPropertyValue("startDate")},set:function(t){this.setPropertyValue("startDate",t)&&(this.startValue=t.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return this.getPropertyValue("endDate")},set:function(t){this.setPropertyValue("endDate",t)&&(this.endValue=t.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),e}(vo);ve.registeredClasses.DateAxisBreak=So;var wo=function(t){function e(){var e=t.call(this)||this;return e.className="DateAxisDataItem",e.applyTheme(),e.values.date={},e.values.endDate={},e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"date",{get:function(){return this.dates.date},set:function(t){this.setDate("date",t),this.value=t.getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return this.dates.endDate},set:function(t){this.setDate("endDate",t),this.endValue=t.getTime()},enumerable:!0,configurable:!0}),e}(_o),To=function(t){function e(){var e=t.call(this)||this;return e._gapBreaks=!1,e.gridIntervals=new Te,e.groupIntervals=new Te,e.dateFormats=new ye,e.periodChangeDateFormats=new ye,e._baseIntervalReal={timeUnit:"day",count:1},e._prevSeriesTime={},e._minDifference={},e._firstWeekDay=1,e.groupMin={},e.groupMax={},e.className="DateAxis",e.setPropertyValue("markUnitChange",!0),e.snapTooltip=!0,e.tooltipPosition="pointer",e.setPropertyValue("groupData",!1),e.groupCount=200,e.events.on("parentset",e.getDFFormatter,e,!1),e.gridIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}]),e.groupIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}]),e.axisFieldName="date",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.fillRule=function(t){var e=t.value,i=t.component,r=i._gridInterval,n=Ar(r.timeUnit,r.count);t.axisFill.__disabled=Math.round((e-i.min)/n)/2==Math.round(Math.round((e-i.min)/n)/2)},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),this.dateFormats.hasKey("millisecond")||this.dateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.dateFormats.hasKey("second")||this.dateFormats.setKey("second",this.language.translate("_date_second")),this.dateFormats.hasKey("minute")||this.dateFormats.setKey("minute",this.language.translate("_date_minute")),this.dateFormats.hasKey("hour")||this.dateFormats.setKey("hour",this.language.translate("_date_hour")),this.dateFormats.hasKey("day")||this.dateFormats.setKey("day",this.language.translate("_date_day")),this.dateFormats.hasKey("week")||this.dateFormats.setKey("week",this.language.translate("_date_day")),this.dateFormats.hasKey("month")||this.dateFormats.setKey("month",this.language.translate("_date_month")),this.dateFormats.hasKey("year")||this.dateFormats.setKey("year",this.language.translate("_date_year")),this.periodChangeDateFormats.hasKey("millisecond")||this.periodChangeDateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.periodChangeDateFormats.hasKey("second")||this.periodChangeDateFormats.setKey("second",this.language.translate("_date_second")),this.periodChangeDateFormats.hasKey("minute")||this.periodChangeDateFormats.setKey("minute",this.language.translate("_date_minute")),this.periodChangeDateFormats.hasKey("hour")||this.periodChangeDateFormats.setKey("hour",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("day")||this.periodChangeDateFormats.setKey("day",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("week")||this.periodChangeDateFormats.setKey("week",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("month")||this.periodChangeDateFormats.setKey("month",this.language.translate("_date_month")+" "+this.language.translate("_date_year"))},e.prototype.createDataItem=function(){return new wo},e.prototype.createAxisBreak=function(){return new So},e.prototype.validateDataItems=function(){var e=this.start,i=this.end,r=this.baseDuration,n=(this.max-this.min)/r;this._firstWeekDay=this.getFirstWeekDay(),this.getDFFormatter(),t.prototype.validateDataItems.call(this);var a=Ar(this.mainBaseInterval.timeUnit,this.mainBaseInterval.count);this.maxZoomFactor=(this.max-this.min)/a,this._deltaMinMax=this.baseDuration/2,this.zoom({start:e+=(i-e)*(1-n/((this.max-this.min)/r)),end:i},!1,!0)},e.prototype.handleSelectionExtremesChange=function(){},e.prototype.calculateZoom=function(){var e=this;t.prototype.calculateZoom.call(this);var i=this.adjustDifference(this._minZoomed,this._maxZoomed),r=!1;if(this.groupData&&S(i)){var n=this.mainBaseInterval,a=this.chooseInterval(0,i+this.startLocation+(1-this.endLocation)*this.baseDuration,this.groupCount,this.groupIntervals);Ar(a.timeUnit,a.count)<Ar(n.timeUnit,n.count)&&(a=Object(d.a)({},n)),this._groupInterval=a,this._currentDataSetId=a.timeUnit+a.count,this.series.each((function(t){t.baseAxis==e&&t.setDataSet(e._currentDataSetId)&&(r=!0)}))}var o=this.chooseInterval(0,i,this._gridCount);Ar(o.timeUnit,o.count)<this.baseDuration&&(o=Object(d.a)({},this.baseInterval)),this._gridInterval=o,this._nextGridUnit=Ir(o.timeUnit),this._intervalDuration=Ar(o.timeUnit,o.count),this._gridDate=Er(new Date(this.minZoomed-Ar(o.timeUnit,o.count)),o.timeUnit,o.count,this._firstWeekDay,this._df.utc,new Date(this.min)),se(this.series.iterator(),(function(t){if(t.baseAxis==e){var i=t.getAxisField(e),n=Er(new Date(e._minZoomed),e.baseInterval.timeUnit,e.baseInterval.count,e._firstWeekDay,e._df.utc).getTime(),a=n.toString(),o=t.dataItemsByAxis.getKey(e.uid).getKey(a+t.currentDataSetId),s=0;0!=e.start&&(s=o?(o=e.findFirst(o,n,i)).index:t.dataItems.findClosestIndex(e._minZoomed,(function(t){return t[i]}),"left"));var l=e.baseInterval,u=Mr(Er(new Date(e._maxZoomed),l.timeUnit,l.count,e._firstWeekDay,e._df.utc),l.timeUnit,l.count,e._df.utc).getTime(),c=u.toString(),h=t.dataItemsByAxis.getKey(e.uid).getKey(c+t.currentDataSetId),p=t.dataItems.length;1!=e.end&&(h?p=h.index:(p=t.dataItems.findClosestIndex(u-=1,(function(t){return t[i]}),"right"))<t.dataItems.length&&p++),t.startIndex=s,t.endIndex=p,!r&&t.dataRangeInvalid&&t.validateDataRange()}}))},e.prototype.findFirst=function(t,e,i){var r=t.index;if(r>0){var n=t.component.dataItems.getIndex(r-1),a=n[i];return!a||a.getTime()<e?t:this.findFirst(n,e,i)}return t},e.prototype.validateData=function(){t.prototype.validateData.call(this),k(this.baseInterval.count)||(this.baseInterval.count=1)},Object.defineProperty(e.prototype,"minDifference",{get:function(){var t=this,e=Number.MAX_VALUE;return this.series.each((function(i){e>t._minDifference[i.uid]&&(e=t._minDifference[i.uid])})),e!=Number.MAX_VALUE&&0!=e||(e=Ar("day")),e},enumerable:!0,configurable:!0}),e.prototype.seriesDataChangeUpdate=function(t){this._minDifference[t.uid]=Number.MAX_VALUE},e.prototype.postProcessSeriesDataItems=function(t){var e=this;t?this.seriesGroupUpdate(t):this.series.each((function(t){e.seriesGroupUpdate(t)})),this.addEmptyUnitsBreaks()},e.prototype.seriesGroupUpdate=function(t){var e=this;JSON.stringify(t._baseInterval[this.uid])!=JSON.stringify(this.mainBaseInterval)&&(t._baseInterval[this.uid]=this.mainBaseInterval,t.mainDataSet.each((function(t){e.postProcessSeriesDataItem(t)})),this.groupData&&this.groupSeriesData(t))},e.prototype.groupSeriesData=function(t){var e=this;if(t.baseAxis==this&&t.dataItems.length>0&&!t.dataGrouped){var i=[],r=this.mainBaseInterval,n=Ar(r.timeUnit,r.count);this.groupIntervals.each((function(t){var r=Ar(t.timeUnit,t.count);r>n&&r<e.max-e.min&&i.push(t)})),t._dataSets&&(t._dataSets.each((function(t,e){e.each((function(t){t.dispose()})),e.clear()})),t._dataSets.clear()),ht(i,(function(i){var r="date"+e.axisLetter,n=i.timeUnit+i.count,a=new Ie(t.mainDataSet.template.clone());t.dataSets.setKey(n,a),t.dataGrouped=!0;var o,s=t.mainDataSet,l=Number.NEGATIVE_INFINITY,u=0,c=[];Qt(t.dataFields,(function(t,e){var i=t;i!=r&&-1==i.indexOf("Show")&&c.push(i)})),s.each((function(n){var s=n.getDate(r);if(s){var h=s.getTime(),p=Er(new Date(h),i.timeUnit,i.count,e._df.firstDayOfWeek,e._df.utc),d=p.getTime();l<d?((o=a.create()).dataContext={},o.setWorkingLocation("dateX",t.dataItems.template.locations.dateX,0),o.setWorkingLocation("openDateX",t.dataItems.template.locations.openDateX,0),o.setWorkingLocation("dateY",t.dataItems.template.locations.dateY,0),o.setWorkingLocation("openDateY",t.dataItems.template.locations.openDateY,0),o.component=t,o.setDate(r,p),o._index=u,u++,ht(c,(function(t){var e=n.values[t];if(e){var i=e.value,r=o.values[t];k(i)?(r.value=i,r.workingValue=i,r.open=i,r.close=i,r.low=i,r.high=i,r.sum=i,r.average=i,r.count=1):r.count=0}})),e.postProcessSeriesDataItem(o,i),Qt(t.propertyFields,(function(t,e){var i=t,r=n.properties[t];S(r)&&(o.hasProperties=!0,o.setProperty(i,r))})),o.groupDataItems=[n],l=d):o&&(ht(c,(function(e){var i=t.groupFields[e],r=n.values[e];if(r){var a=r.value;if(k(a)){var s=o.values[e];k(s.open)||(s.open=a),s.close=a,(s.low>a||!k(s.low))&&(s.low=a),(s.high<a||!k(s.high))&&(s.high=a),k(s.sum)?s.sum+=a:s.sum=a,s.count++,s.average=s.sum/s.count,k(s[i])&&(s.value=s[i],s.workingValue=s.value)}}})),Ye(n.properties,o.properties),Qt(t.propertyFields,(function(t,e){var i=t,r=n.properties[t];S(r)&&(o.hasProperties=!0,o.setProperty(i,r))})),o.groupDataItems.push(n))}o&&Ye(n.dataContext,o.dataContext)}))})),this.calculateZoom()}},e.prototype.getDFFormatter=function(){this._df=this.dateFormatter},e.prototype.postProcessSeriesDataItem=function(t,e){var i=this,r="";e?r=e.timeUnit+e.count:e=this.mainBaseInterval;var n=t.component.dataItemsByAxis.getKey(this.uid);Qt(t.dates,(function(a){var o=t.getDate(a).getTime(),s=Er(new Date(o),e.timeUnit,e.count,i._firstWeekDay,i._df.utc).getTime(),l=Mr(new Date(s),e.timeUnit,e.count,i._df.utc);t.setCalculatedValue(a,s,"open"),t.setCalculatedValue(a,l.getTime(),"close"),n.setKey(s+r,t)}))},e.prototype.addEmptyUnitsBreaks=function(){var t=this;if(this.skipEmptyPeriods&&k(this.min)&&k(this.max)){var e=this.baseInterval.timeUnit,i=this.baseInterval.count;this._axisBreaks&&this._axisBreaks.clear();for(var r=Er(new Date(this.min),e,i,this._firstWeekDay,this._df.utc),n=void 0,a=function(){Mr(r,e,i,o._df.utc);var a=r.getTime(),s=a.toString();he(o.series.iterator(),(function(e){return!!e.dataItemsByAxis.getKey(t.uid).getKey(s+e.currentDataSetId)}))?n&&(n.endDate=new Date(a-1),n=void 0):n||((n=o.axisBreaks.create()).startDate=new Date(a),o._gapBreaks=!0)},o=this;r.getTime()<this.max-this.baseDuration;)a()}},e.prototype.fixAxisBreaks=function(){var e=this;t.prototype.fixAxisBreaks.call(this);var i=this._axisBreaks;i&&i.length>0&&i.each((function(t){var i=Math.ceil(e._gridCount*(Math.min(e.end,t.endPosition)-Math.max(e.start,t.startPosition))/(e.end-e.start));t.gridInterval=e.chooseInterval(0,t.adjustedEndValue-t.adjustedStartValue,i);var r=Er(new Date(t.adjustedStartValue),t.gridInterval.timeUnit,t.gridInterval.count,e._firstWeekDay,e._df.utc);r.getTime()>t.startDate.getTime()&&Mr(r,t.gridInterval.timeUnit,t.gridInterval.count,e._df.utc),t.gridDate=r}))},e.prototype.getFirstWeekDay=function(){return this._df?this._df.firstDayOfWeek:1},e.prototype.getGridDate=function(t,e){var i=this._gridInterval.timeUnit,r=this._gridInterval.count;Er(t,i,1,this._firstWeekDay,this._df.utc);var n=t.getTime(),a=Dr(t),o=Mr(a,i,e,this._df.utc).getTime(),s=this.isInBreak(o);s&&s.endDate&&(Er(a=new Date(s.endDate.getTime()),i,r,this._firstWeekDay,this._df.utc),a.getTime()<s.endDate.getTime()&&Mr(a,i,r,this._df.utc),o=a.getTime());var l=this.adjustDifference(n,o);return Math.round(l/Ar(i))<r?this.getGridDate(t,e+r):a},e.prototype.getBreaklessDate=function(t,e,i){var r=new Date(t.endValue);Er(r,e,i,this._firstWeekDay,this._df.utc),Mr(r,e,i,this._df.utc);var n=r.getTime();return(t=this.isInBreak(n))?this.getBreaklessDate(t,e,i):r},e.prototype.validateAxisElements=function(){var t=this;if(k(this.max)&&k(this.min)){this.calculateZoom();var e=this._gridDate.getTime(),i=this._gridInterval.timeUnit,r=this._gridInterval.count,n=Dr(this._gridDate),a=this._dataItemsIterator;this.resetIterators();for(var o=function(){var t=s.getGridDate(Dr(n),r);e=t.getTime();var o=Dr(t);o=Mr(o,i,r,s._df.utc);var l=s.dateFormats.getKey(i);s.markUnitChange&&n&&Fr(t,n,s._nextGridUnit,s._df.utc)&&"year"!==i&&(l=s.periodChangeDateFormats.getKey(i));var u=s._df.format(t,l),c=a.find((function(t){return t.text===u}));c.__disabled&&(c.__disabled=!1),s.appendDataItem(c),c.axisBreak=void 0,c.date=t,c.endDate=o,c.text=u,s.validateDataElement(c),n=t},s=this;e<=this._maxZoomed;)o();var l=this.renderer;this._axisBreaks&&se(this._axisBreaks.iterator(),(function(e){if(e.breakSize>0){var i=e.gridInterval.timeUnit,r=e.gridInterval.count;if(W(e.startPoint,e.endPoint)>4*l.minGridDistance)for(var n,o=e.gridDate.getTime(),s=0,u=function(){var l=Dr(e.gridDate);if(o=Mr(l,i,r*s,t._df.utc).getTime(),s++,o>e.adjustedStartValue&&o<e.adjustedEndValue){var u=Dr(l);u=Mr(u,i,r,t._df.utc);var c=t.dateFormats.getKey(i);t.markUnitChange&&n&&Fr(l,n,t._nextGridUnit,t._df.utc)&&"year"!==i&&(c=t.periodChangeDateFormats.getKey(i));var h=t._df.format(l,c),p=a.find((function(t){return t.text===h}));p.__disabled&&(p.__disabled=!1),t.appendDataItem(p),p.axisBreak=e,e.dataItems.moveValue(p),p.date=l,p.endDate=u,p.text=h,n=l,t.validateDataElement(p)}};o<=e.adjustedMax;)u()}}))}},e.prototype.validateDataElement=function(t){if(t.itemIndex=this._axisItemCount,this._axisItemCount++,k(this.max)&&k(this.min)){var e=this.renderer,i=t.value,r=t.endValue;k(r)||(r=i);var n=this.valueToPosition(i),a=this.valueToPosition(r),o=a;!t.isRange&&this._gridInterval.count>this.baseInterval.count&&(a=n+(a-n)/(this._gridInterval.count/this.baseInterval.count)),t.position=n;var s=t.tick;s&&!s.disabled&&e.updateTickElement(s,n,a);var l=t.grid;l&&!l.disabled&&e.updateGridElement(l,n,a);var u=t.axisFill;u&&!u.disabled&&(e.updateFillElement(u,n,o),t.isRange||this.fillRule(t));var c=t.mask;c&&e.updateFillElement(c,n,a),t.bullet&&e.updateBullet(t.bullet,n,a);var h=t.label;if(h&&!h.disabled){var p=h.location;0==p&&(p=1!=this._gridInterval.count||"week"==this._gridInterval.timeUnit||t.isRange?0:.5),e.updateLabelElement(h,n,a,p)}}},Object.defineProperty(e.prototype,"baseDuration",{get:function(){return Ar(this.baseInterval.timeUnit,this.baseInterval.count)},enumerable:!0,configurable:!0}),e.prototype.adjustMinMax=function(t,e){return{min:t,max:e,step:this.baseDuration}},e.prototype.fixMin=function(t){var e=this.baseInterval,i=Er(new Date(t),e.timeUnit,e.count,this._firstWeekDay,this._df.utc).getTime();return i+(Mr(new Date(i),e.timeUnit,e.count,this._df.utc).getTime()-i)*this.startLocation},e.prototype.fixMax=function(t){var e=this.baseInterval,i=Er(new Date(t),e.timeUnit,e.count,this._firstWeekDay,this._df.utc).getTime();return i+(Mr(new Date(i),e.timeUnit,e.count,this._df.utc).getTime()-i)*this.endLocation},e.prototype.chooseInterval=function(t,e,i,r){r||(r=this.gridIntervals);var n=r.getIndex(t),a=Ar(n.timeUnit,n.count),o=r.length-1;if(t>=o)return Object(d.a)({},r.getIndex(o));var s=Math.ceil(e/a);return e<a&&t>0?Object(d.a)({},r.getIndex(t-1)):s<=i?Object(d.a)({},r.getIndex(t)):t+1<r.length?this.chooseInterval(t+1,e,i,r):Object(d.a)({},r.getIndex(t))},e.prototype.formatLabel=function(t){return this._df.format(t)},e.prototype.dateToPosition=function(t){return this.valueToPosition(t.getTime())},e.prototype.anyToPosition=function(t){return t instanceof Date?this.dateToPosition(t):this.valueToPosition(t)},e.prototype.dateToPoint=function(t){var e=this.dateToPosition(t),i=this.renderer.positionToPoint(e),r=this.renderer.positionToAngle(e);return{x:i.x,y:i.y,angle:r}},e.prototype.anyToPoint=function(t){return t instanceof Date?this.dateToPoint(t):this.valueToPoint(t)},e.prototype.positionToDate=function(t){return new Date(this.positionToValue(t))},e.prototype.getPositionX=function(t,e,i,r,n){var a=this.getTimeByLocation(t,e,i);k(a)||(a=this.baseValue);var o=this.valueToPosition(a);return n&&(o=V(o,n.start,n.end)),o},e.prototype.getPositionY=function(t,e,i,r,n){var a=this.getTimeByLocation(t,e,i),o=t.getValue("valueX","stack");k(a)||(a=this.baseValue);var s=this.valueToPosition(a+o);return n&&(s=V(s,n.start,n.end)),s},e.prototype.getAngle=function(t,e,i,r,n){var a=this.getTimeByLocation(t,e,i),o=t.getValue(r,"stack");k(a)||(a=this.baseValue);var s=this.valueToPosition(a+o);return n&&(s=V(s,n.start,n.end)),this.positionToAngle(s)},e.prototype.getTimeByLocation=function(t,e,i){if(S(e)){k(i)||k(i=t.workingLocations[e])||(i=0);var r=t.values[e].open,n=t.values[e].close,a=t.values[e].value-t.values[e].workingValue;return n-=a,k(r-=a)&&k(n)?r+(n-r)*i:void 0}},e.prototype.processSeriesDataItem=function(t,e){var i,r=t.component,n=t["date"+e];if(k(this.timezoneOffset)&&(n.setTime(n.getTime()+6e4*(n.getTimezoneOffset()-this.timezoneOffset)),t.setValue("date"+e,n.getTime(),0)),n){i=n.getTime();var a,o=t["openDate"+e],s=this._prevSeriesTime[r.uid];if(o&&(a=o.getTime()),k(a)){var l=Math.abs(i-a);this._minDifference[r.uid]>l&&(this._minDifference[r.uid]=l)}var u=i-s;u>0&&this._minDifference[r.uid]>u&&(this._minDifference[r.uid]=u),this._prevSeriesTime[r.uid]=i,r._baseInterval[this.uid]&&this.postProcessSeriesDataItem(t)}},e.prototype.updateAxisBySeries=function(){t.prototype.updateAxisBySeries.call(this);var e=this.chooseInterval(0,this.minDifference,1);this.minDifference>=Ar("day",27)&&"week"==e.timeUnit&&(e.timeUnit="month",e.count=1),"month"==e.timeUnit&&(this.minDifference>=Ar("day",58)&&1==e.count&&(e.count=2),this.minDifference>=Ar("day",87)&&2==e.count&&(e.count=3),this.minDifference>=Ar("day",174)&&5==e.count&&(e.count=6)),this.minDifference>=Ar("hour",23)&&"hour"==e.timeUnit&&(e.timeUnit="day",e.count=1),this.minDifference>=Ar("week",1)-Ar("hour",1)&&"day"==e.timeUnit&&(e.timeUnit="week",e.count=1),this.minDifference>=Ar("year",1)-Ar("day",1.01)&&"month"==e.timeUnit&&(e.timeUnit="year",e.count=1),this._baseIntervalReal=e,this._mainBaseInterval=e},Object.defineProperty(e.prototype,"baseInterval",{get:function(){return this._groupInterval?this._groupInterval:this._baseInterval?this._baseInterval:this._baseIntervalReal},set:function(t){JSON.stringify(this._baseInterval)!=JSON.stringify(t)&&(this._baseInterval=t,this._mainBaseInterval=t,k(t.count)||(t.count=1),this.invalidate(),this.postProcessSeriesDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainBaseInterval",{get:function(){return this._baseInterval?this._baseInterval:this._mainBaseInterval?this._mainBaseInterval:this._baseIntervalReal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipEmptyPeriods",{get:function(){return this.getPropertyValue("skipEmptyPeriods")},set:function(t){if(t){var e=this.axisBreaks.template;e.startLine.disabled=!0,e.endLine.disabled=!0,e.fillShape.disabled=!0,e.breakSize=0}else this._gapBreaks&&(this.axisBreaks.clear(),this._gapBreaks=!1);this.setPropertyValue("skipEmptyPeriods",t)&&(this.invalidate(),this.postProcessSeriesDataItems(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipDateFormat",{get:function(){return this.getPropertyValue("tooltipDateFormat")},set:function(t){this.setPropertyValue("tooltipDateFormat",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markUnitChange",{get:function(){return this.getPropertyValue("markUnitChange")},set:function(t){this.setPropertyValue("markUnitChange",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),e.prototype.getTooltipText=function(t){var e,i=this.positionToDate(t);if(i=Er(i,this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,new Date(this.min)),this.tooltipDate=i,S(this.tooltipDateFormat))e=this._df.format(i,this.tooltipDateFormat);else{var r=this.dateFormats.getKey(this.baseInterval.timeUnit);e=r?this._df.format(i,r):this.getPositionLabel(t)}return this._adapterO?this._adapterO.apply("getTooltipText",e):e},e.prototype.roundPosition=function(t,e,i){var r=this.baseInterval,n=r.timeUnit,a=r.count,o=this.positionToDate(t);if(Er(o,n,a,this._firstWeekDay,this._df.utc),e>0&&Mr(o,n,e*a,this._df.utc),i>0&&i<1&&o.setTime(o.getTime()+this.baseDuration*i),this.isInBreak(o.getTime()))for(;o.getTime()<this.max&&(Mr(o,n,a,this._df.utc),this.isInBreak(o.getTime())););return this.dateToPosition(o)},e.prototype.getCellStartPosition=function(t){return this.roundPosition(t,0)},e.prototype.getCellEndPosition=function(t){return this.roundPosition(t,1)},e.prototype.getSeriesDataItem=function(t,e,i){var r,n=this.positionToValue(e),a=Er(new Date(n),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc),o=t.dataItemsByAxis.getKey(this.uid).getKey(a.getTime().toString());return!o&&i&&(r="Y"==this.axisLetter?"dateY":"dateX",o=t.dataItems.getIndex(t.dataItems.findClosestIndex(a.getTime(),(function(t){return t[r]?t[r].getTime():-1/0}),"any"))),o},e.prototype.getPositionLabel=function(t){var e=this.positionToDate(t);return this._df.format(e,this.getCurrentLabelFormat())},e.prototype.getCurrentLabelFormat=function(){return this.dateFormats.getKey(this._gridInterval?this._gridInterval.timeUnit:"day")},e.prototype.initRenderer=function(){t.prototype.initRenderer.call(this);var e=this.renderer;e&&(e.ticks.template.location=0,e.grid.template.location=0,e.labels.template.location=0,e.baseGrid.disabled=!0)},Object.defineProperty(e.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),e.prototype.animateMinMax=function(t,e){var i=this,r=this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:t},{property:"_maxAdjusted",from:this._maxAdjusted,to:e}],this.rangeChangeDuration,this.rangeChangeEasing);return r.events.on("animationprogress",(function(){i.dispatch("extremeschanged")})),r},e.prototype.handleExtremesChange=function(){if(t.prototype.handleExtremesChange.call(this),this.groupData){var e=this.baseInterval.timeUnit+this.baseInterval.count;this.groupMin[e]=this._finalMin,this.groupMax[e]=this._finalMax}},e.prototype.zoomToDates=function(t,e,i,r,n){t=this._df.parse(t),e=this._df.parse(e),this.zoomToValues(t.getTime(),e.getTime(),i,r,n)},e.prototype.zoomToValues=function(t,e,i,r,n){var a=this;if(this.groupData){var o=this.adjustDifference(t,e),s=!1;e==this.max&&(s=!0);var l=!1;if(t==this.min&&(l=!0),S(o)){var u=this.mainBaseInterval,c=this.chooseInterval(0,o,this.groupCount,this.groupIntervals);(c.timeUnit==u.timeUnit&&c.count<u.count||Ar(c.timeUnit,1)<Ar(u.timeUnit,1))&&(c=Object(d.a)({},u));var h=c.timeUnit+c.count,p=this.groupMin[h],f=this.groupMax[h];k(p)&&k(f)||(p=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,this.series.each((function(t){var e=t.min(a),i=t.max(a);if(t._dataSets){var r=t._dataSets.getKey(c.timeUnit+c.count);if(r){var n=r.getIndex(0),o=r.getIndex(r.length-1);n&&(t.xAxis==a?e=n.dateX.getTime():t.yAxis==a&&(e=n.dateY.getTime())),o&&(t.xAxis==a?i=o.dateX.getTime():t.yAxis==a&&(i=o.dateY.getTime()))}}i=Er(Mr(new Date(i),c.timeUnit,1,a._df.utc),c.timeUnit,1,a._df.firstDayOfWeek,a._df.utc).getTime(),e<p&&(p=e),i>f&&(f=i)})),this.groupMin[h]=p,this.groupMax[h]=f),t=V(t,p,f),e=V(e,p,f),n&&(s&&(t=V(t=e-o,p,f)),l&&(e=V(e=t+o,p,f))),this.zoom({start:(t-p)/(f-p),end:(e-p)/(f-p)},i,r)}}else this.zoom({start:(t-this.min)/(this.max-this.min),end:(e-this.min)/(this.max-this.min)},i,r)},e.prototype.asIs=function(e){return"baseInterval"==e||t.prototype.asIs.call(this,e)},e.prototype.copyFrom=function(e){var i=this;t.prototype.copyFrom.call(this,e),this.dateFormats=e.dateFormats,this.periodChangeDateFormats=e.periodChangeDateFormats,this.groupIntervals.clear(),e.groupIntervals.each((function(t){i.groupIntervals.push(Object(d.a)({},t))})),this.gridIntervals.clear(),e.gridIntervals.each((function(t){i.gridIntervals.push(Object(d.a)({},t))})),e._baseInterval&&(this.baseInterval=e._baseInterval)},e.prototype.showTooltipAtPosition=function(e,i){var r=this;if(i||(e=this.toAxisPosition(e)),this.snapTooltip){var n,a=this.positionToDate(e).getTime();if(this.series.each((function(t){if(t.baseAxis==r){var i=r.getSeriesDataItem(t,e,!0);if(i){var o=void 0;t.xAxis==r&&(o=i.dateX),t.yAxis==r&&(o=i.dateY),n?Math.abs(n.getTime()-a)>Math.abs(o.getTime()-a)&&(n=o):n=o}}})),n){var o=n.getTime();n=Er(new Date(o),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc),o=n.getTime();var s=this.renderer.tooltipLocation;0==s&&(s=1e-4),n=new Date(n.getTime()+this.baseDuration*s),e=this.dateToPosition(n),this.chart.cursor&&this.chart.cursor.snapToSeries||this.series.each((function(t){var e=t.dataItemsByAxis.getKey(r.uid).getKey(o+t.currentDataSetId),i=t.showTooltipAtDataItem(e);i?r.chart._seriesPoints.push({series:t,point:i}):(t.tooltipText||t.tooltipHTML)&&t.hideTooltip()}))}}t.prototype.showTooltipAtPosition.call(this,e,!0)},Object.defineProperty(e.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(t){this.setPropertyValue("snapTooltip",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupData",{get:function(){return this.getPropertyValue("groupData")},set:function(t){var e=this;this.setPropertyValue("groupData",t)&&(this.series.each((function(i){i.setDataSet(""),t&&!i.dataGrouped&&i.inited&&(i._baseInterval[e.uid]=e.mainBaseInterval,e.groupSeriesData(i))})),this._currentDataSetId="",this._groupInterval=void 0,this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupCount",{get:function(){return this.getPropertyValue("groupCount")},set:function(t){this.setPropertyValue("groupCount",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timezoneOffset",{get:function(){return this.getPropertyValue("timezoneOffset")},set:function(t){this.setPropertyValue("timezoneOffset",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridInterval",{get:function(){return this._gridInterval},enumerable:!0,configurable:!0}),e.prototype.makeGap=function(t,e){var i=t.component;if(t&&e&&!i.connect&&k(i.autoGapCount)&&i.baseAxis==this){var r=t.dates["date"+this.axisLetter],n=e.dates["date"+this.axisLetter];if(r&&n&&r.getTime()-n.getTime()>i.autoGapCount*this.baseDuration)return!0}return!1},Object.defineProperty(e.prototype,"baseValue",{get:function(){return this.min},enumerable:!0,configurable:!0}),e}(xo);ve.registeredClasses.DateAxis=To,ve.registeredClasses.DateAxisDataItem=wo;var Po=function(t){function e(){var e=t.call(this)||this;return e.className="AxisRendererX",e.minGridDistance=120,e.opposite=!1,e.rotation=0,e.width=m(100),e.labels.template.horizontalCenter="middle",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.setAxis=function(e){t.prototype.setAxis.call(this,e),e.layout="vertical"},e.prototype.updateGridContainer=function(){var t=this.axis;if(t){var e=this.gridContainer;e.x=t.pixelX,e.width=t.axisLength}},e.prototype.processRenderer=function(){t.prototype.processRenderer.call(this);var e=this.axis;if(e){e.width instanceof f||(e.width=m(100));var i=e.title;i.rotation=0,i.align="center",this.opposite?(this.line.toFront(),i.toBack()):(i.toFront(),this.toBack(),this.line.toBack())}},e.prototype.updateTooltip=function(){if(this.axis){var t=this.line.pixelY,e=1e3;this.opposite?this.inside||(t=-1e3,e=1e3):this.inside&&(t=-1e3,e=1e3),this.axis.updateTooltip("vertical",{x:this.line.pixelX,y:t,width:this.axisLength,height:e})}},e.prototype.updateLabelElement=function(t,e,i,r){S(r)||(r=t.location);var n=this.positionToPoint(e+=(i-e)*r);t.isMeasured=!t.inside;var a,o=0,s=this.gridContainer.maxHeight;this.opposite?(t.inside?(a="top","bottom"==t.valign&&(o=s,a="bottom"),"middle"==t.valign&&(o=s/2,a="middle")):a="bottom",n.y=o):(t.inside?(a="bottom","top"==t.valign&&(o=-s,a="top"),"middle"==t.valign&&(o=-s/2,a="middle")):a="top",n.y+=o),0==t.rotation&&(t.verticalCenter=a),this.positionItem(t,n),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},Object.defineProperty(e.prototype,"axisLength",{get:function(){var t=this.axis;return t.measuredWidth-t.pixelPaddingRight-t.pixelPaddingLeft||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){return{x:this.positionToCoordinate(t),y:0}},e.prototype.pointToPosition=function(t){return this.coordinateToPosition(t.x,t.y)},e.prototype.getPositionRangePath=function(t,e){var i=V(this.positionToCoordinate(t),0,this.axisLength),r=V(this.positionToCoordinate(e),0,this.axisLength),n=Math.abs(r-i),a=this.getHeight();return $n({x:Math.min(i,r),y:0,width:n,height:a},!0)},e.prototype.updateBreakElement=function(e){t.prototype.updateBreakElement.call(this,e);var i=e.startLine,r=e.endLine,n=e.fillShape,a=e.startPoint,o=e.endPoint,s=e.pixelMarginLeft,l=this.getHeight()-e.pixelMarginTop-e.pixelMarginBottom;a.x=V(a.x,-1,this.axisLength+1),o.x=V(o.x,-1,this.axisLength+1),e.fillShape.__disabled=a.x==o.x&&(a.x<0||a.x>this.axisLength),i.y=s,i.width=0,i.height=l,r.y=s,r.width=0,r.height=l,n.height=l,n.width=Math.abs(o.x-a.x),n.y=s,n.x=a.x},e.prototype.updateGridElement=function(t,e,i){var r=this.positionToPoint(e+=(i-e)*t.location);t.path=Hn({x:0,y:0})+Wn({x:0,y:this.getHeight()}),this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.updateTickElement=function(t,e,i){var r=this.positionToPoint(e+=(i-e)*t.location),n=t.length;r.y=xi({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,n*=this.opposite?t.inside?1:-1:t.inside?-1:1,t.path=Hn({x:0,y:0})+Wn({x:0,y:n}),this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.updateAxisLine=function(){this.line.path=Hn({x:0,y:0})+Wn({x:this.axisLength,y:0})},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.axis,i=this.getHeight(),r=this.baseGrid,n=e.basePoint.x;if(n<-.2||n>this.axisLength+.2)r.hide(0);else{var a=xi({x:0,y:0},this.gridContainer,r.parent).y;r.path=Hn({x:0,y:0})+Wn({x:0,y:i}),r.moveTo({x:n,y:a}),r.show(0)}},e.prototype.createBreakSprites=function(t){t.startLine=new _a,t.endLine=new _a;var e=new xa;e.setWavedSides(!1,!0,!1,!0),t.fillShape=e},e.prototype.toAxisPosition=function(t){var e=t,i=this.axis;if(i){var r=i.relativePositionSprite,n=i.pixelX;if(r?n=xi({x:this.pixelX,y:0},this.parent,r).x:r=i.parent,r)return(e-n/r.innerWidth)/(i.axisLength/r.innerWidth)}return t},e.prototype.updateBullet=function(t,e,i){var r=.5;t instanceof go&&(r=t.location);var n=this.positionToPoint(e+=(i-e)*r);n.y=xi({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},e}(yo);ve.registeredClasses.AxisRendererX=Po,Dn.push({relevant:Fn.heightXS,state:function(t,e){if(t instanceof Po){var i=t.states.create(e);return i.properties.inside=!0,i.properties.maxLabelPosition=.9,i.properties.minLabelPosition=.1,i}return null}}),Dn.push({relevant:Fn.heightXXS,state:function(t,e){if(t instanceof Po){var i=t.states.create(e);return i.properties.disabled=!0,i}return null}});var Co=function(t){function e(){var e=t.call(this)||this;return e.className="CategoryAxisBreak",e.properties.startLocation=.5,e.properties.endLocation=.5,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedStartValue,this.startLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedEndValue,this.endLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startCategory",{get:function(){return this.getPropertyValue("startCategory")},set:function(t){this.setPropertyValue("startCategory",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endCategory",{get:function(){return this.getPropertyValue("endCategory")},set:function(t){this.setPropertyValue("endCategory",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startValue",{get:function(){var t=this.getPropertyValue("startCategory");return t?this.axis.categoryToIndex(t):this.getPropertyValue("startValue")},set:function(t){this.setPropertyValue("startValue",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endValue",{get:function(){var t=this.getPropertyValue("endCategory");return t?this.axis.categoryToIndex(t):this.getPropertyValue("endValue")},set:function(t){this.setPropertyValue("endValue",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),e}(ao);ve.registeredClasses.CategoryAxisBreak=Co;var ko=function(t){function e(){var e=t.call(this)||this;return e.seriesDataItems={},e.className="CategoryAxisDataItem",e.text="{category}",e.locations.category=0,e.locations.endCategory=1,e.deltaPosition=0,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"category",{get:function(){return this._adapterO&&this._adapterO.isEnabled("category")?this._adapterO.apply("category",this.properties.category):this.properties.category},set:function(t){var e=this.properties.category;this.setProperty("category",t),S(e)&&e!=t&&this.component&&this.component.validateDataElement(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endCategory",{get:function(){return this.properties.endCategory},set:function(t){this.setProperty("endCategory",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaPosition",{get:function(){return this.properties.deltaCoordinate},set:function(t){t!=this.properties.deltaCoordinate&&(this.setProperty("deltaCoordinate",t),this.component&&(this.component.invalidateDataItems(),this.component.invalidateSeries()))},enumerable:!0,configurable:!0}),e}(so),Io=function(t){function e(){var e=t.call(this)||this;return e.dataItemsByCategory=new ye,e.className="CategoryAxis",e.axisFieldName="category",e._lastDataItem=e.createDataItem(),e._lastDataItem.component=e,e._disposers.push(e._lastDataItem),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createDataItem=function(){return new ko},e.prototype.createAxisBreak=function(){return new Co},e.prototype.processSeriesDataItem=function(e,i){t.prototype.processSeriesDataItem.call(this,e,i);var r=e["category"+this.axisLetter];if(S(r)){var n=this.dataItemsByCategory.getKey(r);if(n){var a=e.component.uid,o=n.seriesDataItems[a];o||(n.seriesDataItems[a]=o=[]),o.push(e)}}else e.component.dataItems.remove(e)},e.prototype.validateDataRange=function(){var i=this;t.prototype.validateDataRange.call(this),se(this._series.iterator(),(function(t){if(t.xAxis instanceof e&&t.yAxis instanceof e)t.invalidateDataRange();else{var r=i.positionToIndex(i.start),n=i.positionToIndex(i.end);n>=i.dataItems.length&&n--;for(var a=t.uid,o=void 0,s=void 0,l=r;l<=n;l++){var u=i.dataItems.getIndex(l);if(u){var c=u.seriesDataItems[a];if(c)for(var h=0;h<c.length;h++){var p=c[h];if(p){var d=p.index;(!k(o)||d<o)&&(o=d),(!k(s)||d>s)&&(s=d)}}}}k(o)?t.startIndex=o:t.start=i.start,k(s)?t.endIndex=s+1:t.end=i.end,i._axisBreaks&&i._axisBreaks.length>0&&t.invalidateDataRange()}}))},e.prototype.validate=function(){var e=this;t.prototype.validate.call(this);var i=this.dataItems.length,r=V(Math.floor(this.start*i-1),0,i),n=V(Math.ceil(this.end*i),0,i);this.renderer.invalid&&this.renderer.validate();var a=Math.min(this.dataItems.length,Math.ceil((n-r)/(this.renderer.axisLength/this.renderer.minGridDistance)));if(this._startIndex=Math.floor(r/a)*a,this._endIndex=Math.ceil(this.end*i),this.fixAxisBreaks(),this._startIndex==this._endIndex&&this._endIndex++,this._frequency=a,!(this.axisLength<=0)){this.maxZoomFactor=this.dataItems.length,this.dataItems.length<=0&&(this.maxZoomFactor=1),this.resetIterators(),r=N(0,this._startIndex-this._frequency),n=U(this.dataItems.length,this._endIndex+this._frequency);for(var o=0,s=0;s<r;s++)(u=this.dataItems.getIndex(s)).__disabled=!0;s=n;for(var l=this.dataItems.length;s<l;s++)(u=this.dataItems.getIndex(s)).__disabled=!0;for(s=r;s<n;s++)if(s<this.dataItems.length){var u=this.dataItems.getIndex(s);s/this._frequency==Math.round(s/this._frequency)?(this.isInBreak(s)||(this.appendDataItem(u),this.validateDataElement(u,o)),o++):u.__disabled=!0}this.appendDataItem(this._lastDataItem),this.validateDataElement(this._lastDataItem,o+1,this.dataItems.length),this._axisBreaks&&this._axisBreaks.each((function(t){var i=t.adjustedStartValue,r=t.adjustedEndValue;if(X({start:i,end:r},{start:e._startIndex,end:e._endIndex})){for(var n=i;n<=r;n++)(s=e.dataItems.getIndex(n)).__disabled=!0;var a=V(Math.ceil(e._frequency/t.breakSize),1,r-i),o=0;if(t.breakSize>0)for(n=i;n<=r;n+=a){var s;(s=e.dataItems.getIndex(n)).__disabled=!1,e.appendDataItem(s),e.validateDataElement(s,o),o++}}})),this.validateBreaks(),this.validateAxisRanges(),this.ghostLabel.invalidate(),this.renderer.invalidateLayout()}},e.prototype.validateDataElement=function(e,i,r){t.prototype.validateDataElement.call(this,e),e.itemIndex=this._axisItemCount,this._axisItemCount++;var n=this.renderer;k(r)||(r=this.categoryToIndex(e.category));var a=this.categoryToIndex(e.endCategory);k(a)||(a=r);var o,s,l,u=this.indexToPosition(r,e.locations.category),c=this.indexToPosition(a,e.locations.endCategory);e.position=u,e.isRange&&(o=a,s=this.indexToPosition(r,e.locations.category),l=this.indexToPosition(o,e.locations.endCategory)),e.point=n.positionToPoint(u);var h=e.tick;h&&!h.disabled&&n.updateTickElement(h,u,c);var p=e.grid;p&&!p.disabled&&n.updateGridElement(p,u,c);var d=e.label;d&&!d.disabled&&(e.isRange&&null!=d.text||(e.text=e.text),n.updateLabelElement(d,u,c),(n instanceof bo&&e.label.measuredWidth>this.ghostLabel.measuredWidth||n instanceof Po&&e.label.measuredHeight>this.ghostLabel.measuredHeight)&&(e.label.html?this.ghostLabel.html=e.label.currentText:this.ghostLabel.text=e.label.currentText));var f=e.axisFill;f&&!f.disabled&&(e.isRange||(o=r+this._frequency,s=this.indexToPosition(r,f.location),l=this.indexToPosition(o,f.location)),n.updateFillElement(f,s,l),e.isRange||this.fillRule(e,i)),e.bullet&&n.updateBullet(e.bullet,u,c);var m=e.mask;m&&n.updateFillElement(m,s,l)},e.prototype.disposeData=function(){this.dataItemsByCategory.clear(),t.prototype.disposeData.call(this)},e.prototype.processDataItem=function(e,i){e&&(t.prototype.processDataItem.call(this,e,i),S(e.category)&&this.dataItemsByCategory.setKey(e.category,e))},e.prototype.getDataItem=function(t){var e=t[this.dataFields.category];if(S(e))return this.dataItemsByCategory.getKey(e)||this.dataItems.create()},e.prototype.indexToPosition=function(t,e){k(e)||(e=.5);var i=this.startIndex,r=this.endIndex,n=this.adjustDifference(i,r),a=this.startLocation;n-=a,n-=1-this.endLocation,this._axisBreaks&&oe(this._axisBreaks.iterator(),(function(e){var n=e.adjustedStartValue,a=e.adjustedEndValue;if(t<i||!k(n)||!k(a))return!1;if(X({start:n,end:a},{start:i,end:r})){n=Math.max(i,n),a=Math.min(r,a);var o=e.breakSize;t>a?i+=(a-n)*(1-o):t<n||(t=n+(t-n)*o)}return!0}));var o=0,s=this.dataItems.getIndex(t);return s&&(o=s.deltaPosition),L(o+(t+e-a-i)/n,5)},e.prototype.categoryToPosition=function(t,e){var i=this.categoryToIndex(t);return this.indexToPosition(i,e)},e.prototype.categoryToPoint=function(t,e){var i=this.categoryToPosition(t,e),r=this.renderer.positionToPoint(i),n=this.renderer.positionToAngle(i);return{x:r.x,y:r.y,angle:n}},e.prototype.anyToPoint=function(t,e){return this.categoryToPoint(t,e)},e.prototype.anyToPosition=function(t,e){return this.categoryToPosition(t,e)},e.prototype.categoryToIndex=function(t){if(S(t)){var e=this.dataItemsByCategory.getKey(t);if(e)return e.index}},e.prototype.zoomToCategories=function(t,e){this.zoomToIndexes(this.categoryToIndex(t),this.categoryToIndex(e)+1)},e.prototype.getAnyRangePath=function(t,e,i,r){var n=this.categoryToPosition(t,i),a=this.categoryToPosition(e,r);return this.getPositionRangePath(n,a)},e.prototype.roundPosition=function(t,e){var i=this.positionToIndex(t);return this.indexToPosition(i,e)},e.prototype.getFirstSeriesDataItem=function(t,e){for(var i=0;i<t.dataItems.length;i++){var r=t.dataItems.getIndex(i);if(t.xAxis==this&&r.categoryX==e)return r;if(t.yAxis==this&&r.categoryY==e)return r}},e.prototype.getLastSeriesDataItem=function(t,e){for(var i=t.dataItems.length-1;i>=0;i--){var r=t.dataItems.getIndex(i);if(t.xAxis==this&&r.categoryX==e)return r;if(t.yAxis==this&&r.categoryY==e)return r}},e.prototype.getSeriesDataItemByCategory=function(t,e){var i,r=this;return e.dataItems.each((function(n){e.xAxis==r?n.categoryX==t&&(i=n):e.yAxis==r&&n.categoryY==t&&(i=n)})),i},e.prototype.getSeriesDataItem=function(t,e,i){var r=this;if(k(e)){var n=this.positionToIndex(e);n>=this.dataItems.length&&n--;var a=this.dataItems.getIndex(n);if(a){var o,s=a.category,l=t.dataItems.getIndex(n);if(l){if(t.xAxis==this&&l.categoryX==s)return l;if(t.yAxis==this&&l.categoryY==s)return l}return t.dataItems.each((function(e){t.xAxis==r&&e.categoryX==s&&(o||(o=e),Math.abs(n-o.index)>Math.abs(n-e.index)&&(o=e)),t.yAxis==r&&e.categoryY==s&&(o||(o=e),Math.abs(n-o.index)>Math.abs(n-e.index)&&(o=e))})),o}}},e.prototype.getX=function(t,e,i,r,n){var a=this.getPositionX(t,e,i,r,n);return y(a)?this.basePoint.x:this.renderer.positionToPoint(a).x},e.prototype.getPositionX=function(t,e,i,r,n){var a;return S(e)&&(a=this.categoryToPosition(t.categories[e],i)),n&&(a=V(a,n.start,n.end)),a},e.prototype.getY=function(t,e,i,r,n){var a=this.getPositionY(t,e,i,r,n);return y(a)?this.basePoint.y:this.renderer.positionToPoint(a).y},e.prototype.getPositionY=function(t,e,i,r,n){var a;return S(e)&&(a=this.categoryToPosition(t.categories[e],i)),n&&(a=V(a,n.start,n.end)),a},e.prototype.getAngle=function(t,e,i,r,n){var a=this.categoryToPosition(t.categories[e],i);return n&&(a=V(a,n.start,n.end)),this.positionToAngle(a)},e.prototype.getCellStartPosition=function(t){return this.roundPosition(t,0)},e.prototype.getCellEndPosition=function(t){return this.roundPosition(t,1)},e.prototype.getTooltipText=function(t){var e=this.dataItems.getIndex(this.positionToIndex(t));if(e)return this.tooltipDataItem=e,this.tooltip.dataItem=e,this.tooltipText?this.tooltipText:this._adapterO?this._adapterO.apply("getTooltipText",e.category):e.category},e.prototype.positionToIndex=function(t){(t=L(t,10))<0&&(t=0),t>1&&(t=1);var e=this.startIndex,i=this.endIndex,r=i-e-this.startLocation-(1-this.endLocation);t+=1/r*this.startLocation;var n=null;return this._axisBreaks&&oe(this._axisBreaks.iterator(),(function(a){var o=a.startPosition,s=a.endPosition,l=a.adjustedStartValue,u=a.adjustedEndValue;l=N(l,e),u=U(u,i);var c=a.breakSize;if(r-=(u-l)*(1-c),t>s)e+=(u-l)*(1-c);else if(!(t<o))return n=l+Math.round((t-o)/(s-o)*(u-l)),!1;return!0})),k(n)||(n=Math.floor(t*r+e)),n>=this.dataItems.length&&(n=this.dataItems.length-1),n},e.prototype.positionToCategory=function(t){return this.getPositionLabel(t)},e.prototype.getPositionLabel=function(t){var e=this.dataItems.getIndex(this.positionToIndex(t));if(e)return e.category},Object.defineProperty(e.prototype,"basePoint",{get:function(){return this.renderer.positionToPoint(1)},enumerable:!0,configurable:!0}),e.prototype.initRenderer=function(){t.prototype.initRenderer.call(this),this.renderer.baseGrid.disabled=!0},Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortBySeries",{get:function(){return this.getPropertyValue("sortBySeries")},set:function(t){this.setPropertyValue("sortBySeries",t,!0)},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){e&&S(e.sortBySeries)&&C(e.sortBySeries)&&(this.map.hasKey(e.sortBySeries)?e.sortBySeries=this.map.getKey(e.sortBySeries):(this.addDelayedMap("sortBySeries",e.sortBySeries),delete e.sortBySeries)),t.prototype.processConfig.call(this,e)},e}(lo);ve.registeredClasses.CategoryAxis=Io,ve.registeredClasses.CategoryAxisDataItem=ko;var Ao=function(t){function e(){var e=t.call(this)||this;return e.className="XYSeriesDataItem",e.values.customValue={},e.values.valueX={stack:0},e.values.valueY={stack:0},e.values.openValueX={},e.values.openValueY={},e.values.dateX={},e.values.dateY={},e.values.openDateX={},e.values.openDateY={},e.setLocation("dateX",.5,0),e.setLocation("dateY",.5,0),e.setLocation("categoryX",.5,0),e.setLocation("categoryY",.5,0),e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"valueX",{get:function(){return this.values.valueX.value},set:function(t){this.setValue("valueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customValue",{get:function(){return this.values.customValue.value},set:function(t){this.setValue("customValue",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueY",{get:function(){return this.values.valueY.value},set:function(t){this.setValue("valueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateX",{get:function(){return this.getDate("dateX")},set:function(t){this.setDate("dateX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateY",{get:function(){return this.getDate("dateY")},set:function(t){this.setDate("dateY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryX",{get:function(){return this.categories.categoryX},set:function(t){this.setCategory("categoryX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryY",{get:function(){return this.categories.categoryY},set:function(t){this.setCategory("categoryY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openValueX",{get:function(){return this.values.openValueX.value},set:function(t){this.setValue("openValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openValueY",{get:function(){return this.values.openValueY.value},set:function(t){this.setValue("openValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openDateX",{get:function(){return this.getDate("openDateX")},set:function(t){this.setDate("openDateX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openDateY",{get:function(){return this.getDate("openDateY")},set:function(t){this.setDate("openDateY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openCategoryX",{get:function(){return this.categories.openCategoryX},set:function(t){this.setCategory("openCategoryX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openCategoryY",{get:function(){return this.categories.openCategoryY},set:function(t){this.setCategory("openCategoryY",t)},enumerable:!0,configurable:!0}),e.prototype.getMin=function(t,e,i){var r,n=this;return k(i)||(i=0),ht(t,(function(t){var a;a=e?n.getWorkingValue(t):n.getValue(t),((a+=i)<r||!k(r))&&(r=a)})),r},e.prototype.getMax=function(t,e,i){var r,n=this;return k(i)||(i=0),ht(t,(function(t){var a;a=e?n.getWorkingValue(t):n.getValue(t),((a+=i)>r||!k(r))&&(r=a)})),r},e}(eo),Oo=function(t){function e(){var e=t.call(this)||this;return e.groupFields={},e._xAxis=new Vt,e._yAxis=new Vt,e._xValueFields=[],e._yValueFields=[],e._baseInterval={},e.dataGrouped=!1,e.usesShowFields=!1,e._dataSetChanged=!1,e._maxxX=1e5,e._maxxY=1e5,e._propertiesChanged=!1,e.className="XYSeries",e.isMeasured=!1,e.groupFields.valueX="close",e.groupFields.valueY="close",e.groupFields.customValue="close",e.groupFields.openValueX="open",e.groupFields.openValueY="open",e.cursorTooltipEnabled=!0,e.cursorHoverEnabled=!0,e.excludeFromTotal=!1,e.mainContainer.mask=new _n,e.mainContainer.mask.setElement(e.paper.add("path")),e.stacked=!1,e.snapTooltip=!1,e._showBullets=!1,e.tooltip.pointerOrientation="horizontal",e.hideTooltipWhileZooming=!0,e.setPropertyValue("maskBullets",!0),e.tooltip.events.on("hidden",(function(){e.returnBulletDefaultState()}),void 0,!1),e._disposers.push(e._xAxis),e._disposers.push(e._yAxis),e.observe(vn,(function(){e.inited&&(e._propertiesChanged=!0,e.legendDataItem&&(e.legendDataItem.childrenCreated=!1),e.chart&&e.chart.legend&&e.chart.legend.invalidateDataItems(),e.invalidate())}),void 0,!1),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y Series"))},e.prototype.createDataItem=function(){return new Ao},e.prototype.resetExtremes=function(){this._tmin.clear(),this._tmax.clear(),this._smin.clear(),this._smax.clear()},e.prototype.dataChangeUpdate=function(){this.dataGrouped=!1,this._baseInterval={},this._currentDataSetId="",this.resetExtremes(),this.xAxis&&this.xAxis.seriesDataChangeUpdate(this),this.yAxis&&this.yAxis.seriesDataChangeUpdate(this)},e.prototype.validateData=function(){this._baseInterval={};var e=this.dataFields;if(this.usesShowFields=!!(e.valueYShow||e.openValueXShow||e.openValueXShow||e.openValueYShow),this.defineFields(),this.data.length>0&&this.dataChangeUpdate(),t.prototype.validateData.call(this),this.updateItemReaderText(),this.chart&&(!S(this.dataFields[this._xField])||!S(this.dataFields[this._yField])))throw Error('Data fields for series "'+(this.name?this.name:this.uid)+'" are not properly defined.');this.inited&&this.isHidden&&this.hide(0),this.dataGrouped=!1},e.prototype.processDataItem=function(e,i){try{t.prototype.processDataItem.call(this,e,i),this.xAxis.processSeriesDataItem(e,"X"),this.yAxis.processSeriesDataItem(e,"Y"),this.setInitialWorkingValues(e)}catch(r){this._chart&&this._chart.raiseCriticalError(r)}},e.prototype.updateDataItem=function(e){t.prototype.updateDataItem.call(this,e),this.xAxis.processSeriesDataItem(e,"X"),this.yAxis.processSeriesDataItem(e,"Y")},e.prototype.setInitialWorkingValues=function(t){},e.prototype.disposeData=function(){t.prototype.disposeData.call(this);var e=this.xAxis,i=this.yAxis;if(e){var r=this.dataItemsByAxis.getKey(e.uid);r&&r.clear(),e instanceof Io&&this.clearCatAxis(e)}if(i){var n=this.dataItemsByAxis.getKey(i.uid);n&&n.clear(),i instanceof Io&&this.clearCatAxis(i)}},e.prototype.clearCatAxis=function(t){var e=this.uid;t.dataItems.each((function(t){t.seriesDataItems[e]&&(t.seriesDataItems[e]=[])}))},e.prototype.defineFields=function(){var t=this.xAxis,e=this.yAxis;if(t&&e){var i=t.axisFieldName,r=i+"X",n="open"+$e(i)+"X",a=e.axisFieldName,o=a+"Y",s="open"+$e(a)+"Y";this._xField=r,this._yField=o,this.dataFields[n]&&(this._xOpenField=n),this.dataFields[s]&&(this._yOpenField=s),this.dataFields[s]||this.baseAxis!=e||(this._yOpenField=o),this.dataFields[n]||this.baseAxis!=t||(this._xOpenField=r),this.stacked&&this.baseAxis==t&&(this._xOpenField=r),this.stacked&&this.baseAxis==e&&(this._yOpenField=o),t instanceof Io&&e instanceof Io&&(this._yOpenField||(this._yOpenField=o)),this._xValueFields=[],this._yValueFields=[],this.addValueField(t,this._xValueFields,this._xField),this.addValueField(t,this._xValueFields,this._xOpenField),this.addValueField(e,this._yValueFields,this._yField),this.addValueField(e,this._yValueFields,this._yOpenField)}},e.prototype.addValueField=function(t,e,i){t instanceof xo&&S(this.dataFields[i])&&-1==e.indexOf(i)&&e.push(i)},e.prototype.setCategoryAxisField=function(t,e){S(this.dataFields[t])||(this.dataFields[t]=e.dataFields.category)},e.prototype.setDateAxisField=function(t,e){S(this.dataFields[t])||(this.dataFields[t]=e.dataFields.date)},e.prototype.afterDraw=function(){t.prototype.afterDraw.call(this),this.createMask()},e.prototype.createMask=function(){if(this.mainContainer.mask){var t=this.getMaskPath();se(this.axisRanges.iterator(),(function(e){e.axisFill.fillPath&&(e.axisFill.validate(),t+=e.axisFill.fillPath)})),this.mainContainer.mask.path=t}},e.prototype.getMaskPath=function(){return this.xAxis&&this.yAxis?$n({x:0,y:0,width:this.xAxis.axisLength,height:this.yAxis.axisLength}):""},e.prototype.getAxisField=function(t){return t==this.xAxis?this.xField:t==this.yAxis?this.yField:void 0},e.prototype.validateDataItems=function(){var e=this.chart;e&&(this._maxxX=N(1e5,2*e.plotContainer.maxWidth),this._maxxY=N(1e5,2*e.plotContainer.maxHeight));var i=this.xAxis,r=this.yAxis;i&&r&&(i.updateAxisBySeries(),r.updateAxisBySeries()),t.prototype.validateDataItems.call(this),i&&r&&(i.postProcessSeriesDataItems(this),r.postProcessSeriesDataItems(this))},e.prototype.validateDataRange=function(){var e=this.xAxis,i=this.yAxis;e&&i&&(e.dataRangeInvalid&&e.validateDataRange(),i.dataRangeInvalid&&i.validateDataRange()),t.prototype.validateDataRange.call(this)},e.prototype.validate=function(){var e=this.xAxis,i=this.yAxis;if(e&&i){e.invalid&&e.validate(),i.invalid&&i.validate(),this.y=i.pixelY,this.x=e.pixelX,this._showBullets=!0;var r=this.minBulletDistance;k(r)&&this.baseAxis.axisLength/(this.endIndex-this.startIndex)<r&&(this._showBullets=!1)}this.updateTooltip(),t.prototype.validate.call(this);var n=this.chart;n&&this.maskBullets&&"XYChart"==n.className&&("vertical"!=n.leftAxesContainer.layout&&"vertical"!=n.rightAxesContainer.layout||(this.bulletsContainer.mask=this.yAxis?this.yAxis.renderer.gridContainer:void 0),"horizontal"!=n.topAxesContainer.layout&&"horizontal"!=n.bottomAxesContainer.layout||(this.bulletsContainer.mask=this.xAxis?this.xAxis.renderer.gridContainer:void 0))},Object.defineProperty(e.prototype,"xAxis",{get:function(){if(this.chart){if(!this._xAxis.get()){var t=this.chart.xAxes.getIndex(0);if(!t)throw Error("There are no X axes on chart.");this.xAxis=t}return this._xAxis.get()}},set:function(t){this.setXAxis(t)},enumerable:!0,configurable:!0}),e.prototype.setXAxis=function(t){var e=this._xAxis.get();e!=t&&(e&&(this.dataItemsByAxis.removeKey(e.uid),this._xAxis.dispose(),e.series.removeValue(this)),this._xAxis.set(t,t.registerSeries(this)),this.dataItemsByAxis.setKey(t.uid,new ye),this.invalidateData())},Object.defineProperty(e.prototype,"yAxis",{get:function(){if(this.chart){if(!this._yAxis.get()){var t=this.chart.yAxes.getIndex(0);if(!t)throw Error("There are no Y axes on chart.");this.yAxis=t}return this._yAxis.get()}},set:function(t){this.setYAxis(t)},enumerable:!0,configurable:!0}),e.prototype.setYAxis=function(t){var e=this._yAxis.get();e!=t&&(e&&(this.dataItemsByAxis.removeKey(e.uid),this._yAxis.dispose(),e.series.removeValue(this)),this._yAxis.set(t,t.registerSeries(this)),t.chart instanceof Mo&&t.chart.handleYAxisSet(this),this.dataItemsByAxis.setKey(t.uid,new ye),this.invalidateData())},Object.defineProperty(e.prototype,"baseAxis",{get:function(){var t=this.xAxis,e=this.yAxis;return!this._baseAxis&&t&&e&&(e instanceof To&&(this._baseAxis=e),t instanceof To&&(this._baseAxis=t),e instanceof Io&&(this._baseAxis=e),t instanceof Io&&(this._baseAxis=t),this._baseAxis||(this._baseAxis=t)),this._baseAxis},set:function(t){this._baseAxis!=t&&(this._baseAxis=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.addData=function(e,i,r){t.prototype.addData.call(this,e,i,r),this.scrollbarSeries&&this.scrollbarSeries.addData(e,i,!0)},e.prototype.setData=function(e){t.prototype.setData.call(this,e),this.scrollbarSeries&&this.scrollbarSeries.setData(e)},e.prototype.setDataSet=function(e){var i=t.prototype.setDataSet.call(this,e);if(i){this._dataSetChanged=!0;var r=this.dataItems;this.resetExtremes();var n=this.xAxis,a=this.yAxis;this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.appeared||this.processValues(!1),n instanceof To&&n==this.baseAxis&&(this._tmin.setKey(n.uid,r.getIndex(0).dateX.getTime()),this._tmax.setKey(n.uid,r.getIndex(r.length-1).dateX.getTime()),this.dispatch("extremeschanged")),a instanceof To&&a==this.baseAxis&&(this._tmin.setKey(a.uid,r.getIndex(0).dateY.getTime()),this._tmax.setKey(a.uid,r.getIndex(r.length-1).dateY.getTime()),this.dispatch("extremeschanged"))}return i},e.prototype.processValues=function(e){t.prototype.processValues.call(this,e);var i=this.xAxis,r=this.yAxis;if(i&&r){var n=this.dataItems,a=1/0,o=-1/0,s=1/0,l=-1/0,u=this.startIndex,c=this.endIndex,h=u,p=c;e||(u=0,c=this.dataItems.length);for(var d=u;d<c;d++){var f=n.getIndex(d);this.getStackValue(f,e);var m=f.getValue("valueX","stack"),y=f.getValue("valueY","stack");a=U(f.getMin(this._xValueFields,e,m),a),s=U(f.getMin(this._yValueFields,e,y),s),o=N(f.getMax(this._xValueFields,e,m),o),l=N(f.getMax(this._yValueFields,e,y),l),this.stacked&&(this.baseAxis==i&&(y<s&&(s=y),y>l&&(l=y)),this.baseAxis==r&&(m<a&&(a=m),m>o&&(o=m)))}i.processSeriesDataItems(),r.processSeriesDataItems();var g=i.uid,b=r.uid;if(!(this.xAxis instanceof xo&&(a==1/0||o==-1/0)||this.yAxis instanceof xo&&(s==1/0||l==-1/0))){if(!e&&(this._tmin.getKey(g)!=a||this._tmax.getKey(g)!=o||this._tmin.getKey(b)!=s||this._tmax.getKey(b)!=l)){this._tmin.setKey(g,a),this._tmax.setKey(g,o),this._tmin.setKey(b,s),this._tmax.setKey(b,l);var v=this.stackedSeries;v&&(v.isDisposed()?this.stackedSeries=void 0:v.processValues(!1)),this.dispatchImmediately("extremeschanged")}if(u!=h||c!=p)for(a=1/0,o=-1/0,s=1/0,l=-1/0,d=h;d<p;d++)f=n.getIndex(d),this.getStackValue(f,e),m=f.getValue("valueX","stack"),y=f.getValue("valueY","stack"),a=U(f.getMin(this._xValueFields,e,m),a),s=U(f.getMin(this._yValueFields,e,y),s),o=N(f.getMax(this._xValueFields,e,m),o),l=N(f.getMax(this._yValueFields,e,y),l),this.stacked&&(this.baseAxis==i&&(y<s&&(s=y),y>l&&(l=y)),this.baseAxis==r&&(m<a&&(a=m),m>o&&(o=m)));if(!(this.xAxis instanceof xo&&(a==1/0||o==-1/0)||this.yAxis instanceof xo&&(s==1/0||l==-1/0))){if((this._smin.getKey(g)!=a||this._smax.getKey(g)!=o||this._smin.getKey(b)!=s||this._smax.getKey(b)!=l)&&(this._smin.setKey(g,a),this._smax.setKey(g,o),this._smin.setKey(b,s),this._smax.setKey(b,l),this.appeared||0!=this.start||1!=this.end||this.dataItems!=this.mainDataSet)){var _,x,S=!1;r instanceof xo&&!(r instanceof To)&&((!k(_=this._tmin.getKey(b))||(this.usesShowFields||this._dataSetChanged)&&s<_||this.stackedSeries&&!this.isHidden)&&(this._tmin.setKey(b,s),S=!0),(!k(x=this._tmax.getKey(b))||(this.usesShowFields||this._dataSetChanged)&&l>x||this.stackedSeries&&!this.isHidden)&&(this._tmax.setKey(b,l),S=!0)),i instanceof xo&&!(i instanceof To)&&((!k(_=this._tmin.getKey(g))||(this.usesShowFields||this._dataSetChanged)&&a<_||this.stackedSeries&&!this.isHidden)&&(this._tmin.setKey(g,a),S=!0),(!k(x=this._tmax.getKey(g))||(this.usesShowFields||this._dataSetChanged)&&o>x||this.stackedSeries&&!this.isHidden)&&(this._tmax.setKey(g,o),S=!0)),S&&this.dispatchImmediately("extremeschanged"),0==this.start&&1==this.end&&(this._dataSetChanged=!1),this.dispatchImmediately("selectionextremeschanged")}!e&&this.stacked&&this.processValues(!0)}}}},e.prototype.hideTooltip=function(){t.prototype.hideTooltip.call(this),this.returnBulletDefaultState(),this._prevTooltipDataItem=void 0},e.prototype.showTooltipAtPosition=function(t,e){var i;if(this.visible&&!this.isHiding&&!this.isShowing){var r=this._xAxis.get(),n=this._yAxis.get();r==this.baseAxis&&(i=r.getSeriesDataItem(this,r.toAxisPosition(t),this.snapTooltip)),n==this.baseAxis&&(i=n.getSeriesDataItem(this,n.toAxisPosition(e),this.snapTooltip));var a=this.showTooltipAtDataItem(i);if(a)return a;if(!this.tooltipText)return}this.hideTooltip()},e.prototype.getAdjustedXLocation=function(t,e){return t.locations[e]},e.prototype.getAdjustedYLocation=function(t,e){return t.locations[e]},e.prototype.showTooltipAtDataItem=function(t){var e,i,r=this.chart.cursor;if(r&&r.hideSeriesTooltipsOnSelection&&r.selection.visible&&r.downPoint)this.hideTooltip();else if(this.returnBulletDefaultState(t),t&&t.visible){if(this.updateLegendValue(t),this.cursorTooltipEnabled){this.tooltipDataItem=t;var n=this.tooltipXField,a=this.tooltipYField;if(S(t[n])&&S(t[a])){var o=this.getPoint(t,n,a,this.getAdjustedXLocation(t,n),this.getAdjustedYLocation(t,a));if(o&&("XYChart"!=this.chart.className||!(o.y<-1||o.y>this.yAxis.pixelHeight+1||o.x<-1||o.x>this.xAxis.pixelWidth+1))){if(this.tooltipX=o.x,this.tooltipY=o.y,this._prevTooltipDataItem!=t&&(this.dispatchImmediately("tooltipshownat",{type:"tooltipshownat",target:this,dataItem:t}),this._prevTooltipDataItem=t),this.cursorHoverEnabled)try{for(var s=Object(d.i)(t.sprites),l=s.next();!l.done;l=s.next()){var u=l.value;!u.parent.visible||u.isHidden||u.__disabled||u.disabled||u.isHiding||(u.interactions.isRealHover||(u.dispatchImmediately("over"),u.interactions.isRealHover=!0),u.isHover=!0)}}catch(c){e={error:c}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return this.showTooltip()?_i({x:o.x,y:o.y},this):void 0}}}}else this.updateLegendValue(t,!0)},e.prototype.returnBulletDefaultState=function(t){var e,i;if(this._prevTooltipDataItem&&this._prevTooltipDataItem!=t)try{for(var r=Object(d.i)(this._prevTooltipDataItem.sprites),n=r.next();!n.done;n=r.next()){var a=n.value;if(a.isDisposed())this._prevTooltipDataItem=void 0;else{var o=a.interactions.isRealHover;a.isHover=!1,o&&a.dispatchImmediately("out")}}}catch(s){e={error:s}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}},e.prototype.shouldCreateBullet=function(t,e){var i=e.xField;S(i)||(i=this.xField);var r=e.yField;if(S(r)||(r=this.yField),this.xAxis instanceof xo&&!t.hasValue([i])||this.yAxis instanceof xo&&!t.hasValue([r]))return!1;if(e.disabled){var n=t.dataContext;return!(!n||!1!==n[e.propertyFields.disabled])}return!0},e.prototype.updateTooltip=function(){this.hideTooltipWhileZooming||!this.tooltip||this.tooltip.isHidden||this.isHiding||this.isHidden||!this.tooltipDataItem||this.showTooltipAtDataItem(this.tooltipDataItem)},e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e);var i=e.dataItem,r=e.xField;S(r)||(r=this.xField);var n=e.yField;S(n)||(n=this.yField);var a=this.xAxis,o=this.yAxis;if(a instanceof xo&&!i.hasValue([r])||o instanceof xo&&!i.hasValue([n]))e.visible=!1;else{var s=this.getBulletLocationX(e,r),l=this.getBulletLocationY(e,n);if(this.getPoint(i,r,n,s,l)){var u=this.xOpenField,c=this.yOpenField,h=void 0,p=void 0;if(a instanceof To){k(s)||(s=0);var d=void 0,f=i.getWorkingValue(r);if(u?d=i.getWorkingValue(u):a==this.baseAxis&&(d=a.baseValue),k(d)||(d=f),(d+=_=i.getValue("valueX","stack"))==(f+=_)){var m=a.baseInterval,y=a.dateFormatter;d=Er(new Date(d),m.timeUnit,m.count,y.firstDayOfWeek,y.utc).getTime(),f=Mr(new Date(d),m.timeUnit,m.count,y.utc).getTime()}h=a.valueToPosition(a==this.baseAxis?d+(f-d)*s:d+(f-d)*(1-s))}else if(a instanceof xo)k(s)||(s=0),d=void 0,f=i.getWorkingValue(r),d=u?i.getWorkingValue(u):a.baseValue,d+=_=i.getValue("valueX","stack"),h=a.valueToPosition(d+((f+=_)-d)*(1-s));else if(a instanceof Io){var g=this.getAdjustedXLocation(i,r),b=this.getAdjustedXLocation(i,u);h=a.categoryToPosition(i[r],g);var v=void 0;u&&(v=a.categoryToPosition(i[u],b)),k(v)||(v=1),h=v+(h-v)*s}if(o instanceof To)k(l)||(l=0),d=void 0,f=i.getWorkingValue(n),c?d=i.getWorkingValue(c):o==this.baseAxis&&(d=o.baseValue),k(d)||(d=f),(d+=_=i.getValue("valueY","stack"))==(f+=_)&&(m=o.baseInterval,y=o.dateFormatter,d=Er(new Date(d),m.timeUnit,m.count,y.firstDayOfWeek,y.utc).getTime(),f=Mr(new Date(d),m.timeUnit,m.count,y.utc).getTime()),p=o.valueToPosition(o==this.baseAxis?d+(f-d)*l:d+(f-d)*(1-l));else if(o instanceof xo){var _;k(l)||(l=0),d=void 0,f=i.getWorkingValue(n),d=c?i.getWorkingValue(c):o.baseValue,d+=_=i.getValue("valueY","stack"),p=o.valueToPosition(d+((f+=_)-d)*(1-l))}else if(o instanceof Io){p=o.categoryToPosition(i[n],l);var x=this.getAdjustedYLocation(i,n),w=this.getAdjustedYLocation(i,c);p=o.categoryToPosition(i[n],x);var T=void 0;c&&(T=o.categoryToPosition(i[c],w)),k(T)||(T=1),p=T+(p-T)*l}e.visible=!0,this.positionBulletReal(e,h,p)}else e.visible=!1}},e.prototype.positionBulletReal=function(t,e,i){t.x=this.xAxis.renderer.positionToPoint(e,i).x,t.y=this.yAxis.renderer.positionToPoint(i,e).y},e.prototype.getBulletLocationX=function(t,e){var i=t.locationX,r=t.dataItem;return k(i)||(i=r.workingLocations[e]),i},e.prototype.getBulletLocationY=function(t,e){var i=t.locationY,r=t.dataItem;return k(i)||(i=r.workingLocations[e]),i},e.prototype.updateStacking=function(){var t=this;this.invalidateDataItems(),this.chart&&this.chart.series.each((function(e){e.baseAxis==t.baseAxis&&(e.stackedSeries=void 0,e.invalidateDataItems(),e.invalidateProcessedData())}))},Object.defineProperty(e.prototype,"stacked",{get:function(){return this.getPropertyValue("stacked")},set:function(t){if(this.setPropertyValue("stacked",t,!0)){this.updateStacking();var e,i=this.xAxis,r=this.yAxis;t||(i!=this.baseAxis&&i instanceof xo&&(e=this.xField),r!=this.baseAxis&&r instanceof xo&&(e=this.yField),e&&this.dataItems.each((function(t){t.setCalculatedValue(e,0,"stack")})))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(t){this.setPropertyValue("snapTooltip",t)},enumerable:!0,configurable:!0}),e.prototype.show=function(e){var i,r=this;this.xAxis instanceof xo&&this.xAxis!=this.baseAxis&&(i=this._xValueFields),this.yAxis instanceof xo&&this.yAxis!=this.baseAxis&&(i=this._yValueFields);var n,a=this.startIndex,o=this.endIndex,s=0,l=this.defaultState.transitionDuration;k(e)&&(l=e),Gi.animationsEnabled||(l=0),se(ce(this.dataItems.iterator()),(function(t){var e=t[0],u=l;(e<r.startIndex-10||e>r.endIndex+10)&&(u=0,s=0),r.sequencedInterpolation&&u>0&&(s=r.sequencedInterpolationDelay*e+l*(e-a)/(o-a)),n=t[1].show(u,s,i)})),this.dataSets.each((function(t,e){e!=r.dataItems&&e.each((function(t){t.events.disable(),t.show(0,0,i),t.events.enable()}))})),this.mainDataSet!=this.dataItems&&this.mainDataSet.each((function(t){t.events.disable(),t.show(0,0,i),t.events.enable()}));var u=t.prototype.show.call(this,e);return n&&!n.isFinished()&&(u=n),this.hidden&&(this.dispatchImmediately("selectionextremeschanged"),this.hidden=!1),u},e.prototype.hide=function(e){var i,r,n=this,a=this.xAxis;a instanceof xo&&a!=this.baseAxis&&(i=this._xValueFields,r=this.stacked||a.minZoomed<a.baseValue&&a.maxZoomed>a.baseValue||this.stackedSeries?a.baseValue:a.min);var o=this.yAxis;o instanceof xo&&o!=this.baseAxis&&(i=this._yValueFields,r=this.stacked||o.minZoomed<o.baseValue&&o.maxZoomed>o.baseValue||this.stackedSeries?o.baseValue:o.min);var s=this.startIndex,l=this.endIndex,u=this.hiddenState.transitionDuration;k(e)&&(u=e),Gi.animationsEnabled||(u=0);var c,h=0;se(ce(this.dataItems.iterator()),(function(t){var e=t[0],a=t[1],o=u;(e<n.startIndex-10||e>n.endIndex+10)&&(o=0),0==o?a.hide(0,0,r,i):(n.sequencedInterpolation&&o>0&&(h=n.sequencedInterpolationDelay*e+u*(e-s)/(l-s)),c=a.hide(o,h,r,i))}));var p=t.prototype.hide.call(this,u);return p&&!p.isFinished()&&p.delay(h),c&&!c.isFinished()&&(p=c),this.validateDataElements(),p},e.prototype.handleDataItemWorkingValueChange=function(e,i){t.prototype.handleDataItemWorkingValueChange.call(this,e,i),se(this.baseAxis.series.iterator(),(function(t){(t.stacked||t.stackedSeries)&&t.invalidateProcessedData()}))},e.prototype.getStackValue=function(t,e){var i=this,r=this.xAxis,n=this.yAxis;if(this.stacked&&r&&n){var a,o=this.chart,s=o.series.indexOf(this);r!=this.baseAxis&&r instanceof xo&&(a=this.xField),n!=this.baseAxis&&n instanceof xo&&(a=this.yField),a&&(t.setCalculatedValue(a,0,"stack"),oe(o.series.range(0,s).backwards().iterator(),(function(o){if(o.xAxis==r&&o.yAxis==n){o.stackedSeries=i;var s=o.dataItems.getIndex(t.index);if(s&&s.hasValue(i._xValueFields)&&s.hasValue(i._yValueFields)){var l,u=t.getValue(a),c=s.getValue(a)+s.getValue(a,"stack");if(l=e?s.getWorkingValue(a)+s.getValue(a,"stack"):s.getValue(a)+s.getValue(a,"stack"),u>=0&&c>=0||u<0&&c<0)return t.setCalculatedValue(a,l,"stack"),!1}else if(!o.stacked)return!1}return!0})))}},Object.defineProperty(e.prototype,"xField",{get:function(){return this._xField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yField",{get:function(){return this._yField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xOpenField",{get:function(){return this._xOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yOpenField",{get:function(){return this._yOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipXField",{get:function(){return this._tooltipXField?this._tooltipXField:this._xField},set:function(t){this._tooltipXField=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipYField",{get:function(){return this._tooltipYField?this._tooltipYField:this._yField},set:function(t){this._tooltipYField=t},enumerable:!0,configurable:!0}),e.prototype.min=function(t){return this._tmin.getKey(t.uid)},e.prototype.max=function(t){return this._tmax.getKey(t.uid)},e.prototype.selectionMin=function(t){var e=this._smin.getKey(t.uid);return k(e)||(e=this.min(t)),e},e.prototype.selectionMax=function(t){var e=this._smax.getKey(t.uid);return k(e)||(e=this.max(t)),e},e.prototype.processConfig=function(e){if(e){if(S(e.baseAxis)&&C(e.baseAxis)&&(this.map.hasKey(e.baseAxis)?e.baseAxis=this.map.getKey(e.baseAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+e.baseAxis+'" found for `baseAxis`.'),delete e.baseAxis)),S(e.xAxis)&&C(e.xAxis)&&(this.map.hasKey(e.xAxis)?e.xAxis=this.map.getKey(e.xAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+e.xAxis+'" found for `xAxis`.'),delete e.xAxis)),S(e.yAxis)&&C(e.yAxis)&&(this.map.hasKey(e.yAxis)?e.yAxis=this.map.getKey(e.yAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+e.yAxis+'" found for `yAxis`.'),delete e.yAxis)),S(e.axisRanges)&&A(e.axisRanges))for(var i=0,r=e.axisRanges.length;i<r;i++){var n=e.axisRanges[i];S(n.type)||(n.type="AxisDataItem"),S(n.axis)&&C(n.axis)&&this.map.hasKey(n.axis)?n.component=this.map.getKey(n.axis):S(n.component)&&C(n.component)&&this.map.hasKey(n.component)&&(n.component=this.map.getKey(n.component))}S(e.dataFields)&&I(e.dataFields)||this.processingErrors.push("`dataFields` is not set for series ["+(this.name||"unnamed")+"]")}t.prototype.processConfig.call(this,e)},e.prototype.getPoint=function(t,e,i,r,n,a,o){if(this.xAxis&&this.yAxis){var s=this.xAxis.getX(t,e,r),l=this.yAxis.getY(t,i,n);return{x:s=V(s,-this._maxxX,this._maxxX),y:l=V(l,-this._maxxY,this._maxxY)}}},e.prototype.updateItemReaderText=function(){if(!this._itemReaderTextChanged){var t="";Qt(this.dataFields,(function(e,i){t+="{"+e+"} "})),this.itemReaderText=t,this._itemReaderTextChanged=!1}},Object.defineProperty(e.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(t){this.setPropertyValue("cursorTooltipEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorHoverEnabled",{get:function(){return this.getPropertyValue("cursorHoverEnabled")},set:function(t){this.setPropertyValue("cursorHoverEnabled",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excludeFromTotal",{get:function(){return this.getPropertyValue("excludeFromTotal")},set:function(t){this.setPropertyValue("excludeFromTotal",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(t){this.setPropertyValue("hideTooltipWhileZooming",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t);var e=this.chart;e&&(this.bulletsContainer.parent=t?e.bulletsContainer:e.axisBulletsContainer)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){this.groupFields=Ye(e.groupFields,{}),t.prototype.copyFrom.call(this,e)},e.prototype.dispose=function(){this.scrollbarSeries&&this.scrollbarSeries.dispose(),t.prototype.dispose.call(this)},e}(io);ve.registeredClasses.XYSeries=Oo,ve.registeredClasses.XYSeriesDataItem=Ao;var Do=function(t){function e(){var e=t.call(this)||this;e._chart=new Vt,e.className="XYChartScrollbar";var i=new _r;e.padding(0,0,0,0);var r=e.createChild(Mo);if(r.shouldClone=!1,r.margin(0,0,0,0),r.padding(0,0,0,0),r.interactionsEnabled=!1,e._scrollbarChart=r,!Fi()){var n=new Ra;n.filterUnits="userSpaceOnUse",r.plotContainer.filters.push(n)}e._disposers.push(e._scrollbarChart),e.minHeight=60,e.minWidth=60;var a=e.createChild(_n);a.shouldClone=!1,a.setElement(e.paper.add("path")),a.fill=i.getFor("background"),a.fillOpacity=.8,a.interactionsEnabled=!1,a.isMeasured=!1,a.toBack(),e._unselectedOverlay=a,e._disposers.push(e._unselectedOverlay),r.toBack(),e.background.cornerRadius(0,0,0,0);var o=e.thumb.background;o.cornerRadius(0,0,0,0),o.fillOpacity=0,o.fill=i.getFor("background");var s=o.states.getKey("hover");s&&(s.properties.fillOpacity=.2);var l=o.states.getKey("down");return l&&(l.properties.fillOpacity=.4),e._disposers.push(e._chart),e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new Te,this._disposers.push(this._series.events.on("inserted",this.handleSeriesAdded,this,!1)),this._disposers.push(this._series.events.on("removed",this.handleSeriesRemoved,this,!1))),this._series},enumerable:!0,configurable:!0}),e.prototype.handleSeriesAdded=function(t){var e=this,i=t.newValue;if(i.xAxis&&i.yAxis){var r=this.scrollbarChart;r.zoomOutButton.disabled=!0,this.chart=i.chart,r.language.locale=this.chart.language.locale;var n=!0,a=!0;se(this.series.iterator(),(function(t){t!=i&&(t.xAxis==i.xAxis&&e.scrollbarChart.xAxes.length>0&&(n=!1),t.yAxis==i.yAxis&&e.scrollbarChart.yAxes.length>0&&(a=!1))})),i.events.on("beforedisposed",(function(){e.series.removeValue(i)}));var o=new _r,s=i.clone();if(Fi()&&(s.stroke=Ue("#aaaaaa"),s.fill=s.stroke,s.propertyFields.fill=void 0,s.propertyFields.stroke=void 0),i.scrollbarSeries=s,n){var l=i.xAxis.clone();if(r.xAxes.moveValue(l),l.title.disabled=!0,l.rangeChangeDuration=0,(h=l.renderer).ticks.template.disabled=!0,h.inside=!0,h.labels.template.inside=!0,h.line.strokeOpacity=0,h.minLabelPosition=.02,h.maxLabelPosition=.98,h.line.disabled=!0,h.axisFills.template.disabled=!0,h.baseGrid.disabled=!0,h.grid.template.strokeOpacity=.05,h.minWidth=void 0,h.minHeight=void 0,h.padding(0,0,0,0),h.chart=r,h.margin(0,0,0,0),l.width=m(100),h.labels.template.fillOpacity=.5,l.maxZoomCount=void 0,l.minZoomCount=void 0,l instanceof To){var u=l;u.groupCount=5*i.xAxis.groupCount,u.min=void 0,u.max=void 0,this._disposers.push(u.clonedFrom.events.on("extremeschanged",(function(){k(u.clonedFrom.minDefined)&&(u.min=u.clonedFrom.minDefined),k(u.clonedFrom.maxDefined)&&(u.max=u.clonedFrom.maxDefined)}),void 0,!1))}else if(l instanceof xo){var c=l;c.min=void 0,c.max=void 0,k(c.clonedFrom.minDefined)||(c.min=void 0),k(c.clonedFrom.maxDefined)||(c.max=void 0),this._disposers.push(c.clonedFrom.events.on("extremeschanged",(function(){k(c.clonedFrom.minDefined)&&(c.min=c.clonedFrom.min),k(c.clonedFrom.maxDefined)&&(c.max=c.clonedFrom.max)}),void 0,!1))}s.xAxis=l}else this.scrollbarChart.xAxes.each((function(t){t.clonedFrom==i.xAxis&&(s.xAxis=t)}));if(a){var h,p=i.yAxis.clone();if(r.yAxes.moveValue(p),p.title.disabled=!0,p.rangeChangeDuration=0,(h=p.renderer).ticks.template.disabled=!0,h.inside=!0,h.labels.template.inside=!0,h.line.strokeOpacity=0,h.minLabelPosition=.02,h.maxLabelPosition=.98,h.line.disabled=!0,h.axisFills.template.disabled=!0,h.grid.template.stroke=o.getFor("background"),h.baseGrid.disabled=!0,h.grid.template.strokeOpacity=.05,h.minWidth=void 0,h.minHeight=void 0,h.chart=r,h.padding(0,0,0,0),h.margin(0,0,0,0),p.height=m(100),h.labels.template.fillOpacity=.5,s.yAxis=p,p.maxZoomCount=void 0,p.minZoomCount=void 0,p instanceof To){var d=p;d.min=void 0,d.max=void 0,p.groupCount=5*i.yAxis.groupCount,this._disposers.push(d.clonedFrom.events.on("extremeschanged",(function(){k(d.clonedFrom.minDefined)&&(d.min=d.clonedFrom.minDefined),k(d.clonedFrom.maxDefined)&&(d.max=d.clonedFrom.maxDefined)})))}else if(p instanceof xo){var f=p;f.min=void 0,f.max=void 0,k(f.clonedFrom.minDefined)||(f.min=void 0),k(f.clonedFrom.maxDefined)||(f.max=void 0),this._disposers.push(f.clonedFrom.events.on("extremeschanged",(function(){k(f.clonedFrom.minDefined)&&(f.min=f.clonedFrom.minDefined),k(f.clonedFrom.maxDefined)&&(f.max=f.clonedFrom.maxDefined)})))}}else this.scrollbarChart.yAxes.each((function(t){t.clonedFrom==i.yAxis&&(s.yAxis=t)}));s.rangeChangeDuration=0,s.interpolationDuration=0,s.defaultState.transitionDuration=0,s.showOnInit=!1,this._disposers.push(s.events.on("validated",this.zoomOutAxes,this,!1)),this._disposers.push(i.events.on("datavalidated",(function(){s.data!=i.data&&(s.data=i.data)}),void 0,!1)),s.defaultState.properties.visible=!0,r.series.push(s),this.updateByOrientation()}},e.prototype.updateByOrientation=function(){var t=this;this._scrollbarChart&&(se(this._scrollbarChart.xAxes.iterator(),(function(e){var i=e.renderer;"vertical"==t.orientation?(i.grid.template.disabled=!0,i.labels.template.disabled=!0,i.minGridDistance=10):(i.grid.template.disabled=!1,i.labels.template.disabled=!1,i.minGridDistance=e.clonedFrom.renderer.minGridDistance)})),se(this._scrollbarChart.yAxes.iterator(),(function(e){var i=e.renderer;"horizontal"==t.orientation?(i.grid.template.disabled=!0,i.labels.template.disabled=!0,i.minGridDistance=10):(i.grid.template.disabled=!1,i.labels.template.disabled=!1,i.minGridDistance=e.clonedFrom.renderer.minGridDistance)})))},e.prototype.handleSeriesRemoved=function(t){var e=t.oldValue,i=this.scrollbarChart;i.series.each((function(t){t&&t.clonedFrom==e&&i.series.removeValue(t)})),0==i.series.length&&(i.xAxes.clear(),i.yAxes.clear());try{e.events.off("validated",this.zoomOutAxes,this)}catch(r){}},Object.defineProperty(e.prototype,"scrollbarChart",{get:function(){return this._scrollbarChart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.get()!==t&&(this._chart.set(t,t.events.on("datavalidated",this.handleDataChanged,this,!1)),this.handleDataChanged(),this._scrollbarChart.dataProvider=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unselectedOverlay",{get:function(){return this._unselectedOverlay},enumerable:!0,configurable:!0}),e.prototype.handleDataChanged=function(){this.chart.data!=this.scrollbarChart.data?this.scrollbarChart.data=this.chart.data:this.scrollbarChart.invalidateRawData()},e.prototype.zoomOutAxes=function(){var t=this.scrollbarChart;se(t.xAxes.iterator(),(function(t){t.zoom({start:0,end:1},!0,!0)})),se(t.yAxes.iterator(),(function(t){t.zoom({start:0,end:1},!0,!0)}))},e.prototype.updateThumb=function(){if(t.prototype.updateThumb.call(this),this._unselectedOverlay){var e=this.thumb,i=e.pixelX||0,r=e.pixelY||0,n=e.pixelWidth||0,a=e.pixelHeight||0,o="";"horizontal"==this.orientation?(o=$n({x:-1,y:0,width:i,height:a}),o+=$n({x:i+n,y:0,width:(this.pixelWidth||0)-i-n,height:a})):(o=$n({x:0,y:0,width:n,height:r}),o+=$n({x:0,y:r+a,width:n,height:(this.pixelHeight||0)-r-a})),this._unselectedOverlay.path=o}},e.prototype.processConfig=function(e){if(e&&S(e.series)&&A(e.series))for(var i=0,r=e.series.length;i<r;i++){var n=e.series[i];if(S(n)&&C(n)){if(!this.map.hasKey(n))throw Error("XYChartScrollbar error: Series with id `"+n+"` does not exist.");e.series[i]=this.map.getKey(n)}}t.prototype.processConfig.call(this,e)},e}(ua);ve.registeredClasses.XYChartScrollbar=Do;var Fo=function(t){function e(){var e=t.call(this)||this;return e.className="XYChartDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(ro),Mo=function(t){function e(){var e=t.call(this)||this;e._axisRendererX=Po,e._axisRendererY=bo,e._seriesPoints=[],e.className="XYChart",e.maskBullets=!0,e.arrangeTooltips=!0;var i=e.chartContainer;i.layout="vertical",e.padding(15,15,15,15);var r=i.createChild(Sn);r.shouldClone=!1,r.layout="vertical",r.width=m(100),r.zIndex=1,e.topAxesContainer=r;var n=i.createChild(Sn);n.shouldClone=!1,n.layout="horizontal",n.width=m(100),n.height=m(100),n.zIndex=0,e.yAxesAndPlotContainer=n;var a=i.createChild(Sn);a.shouldClone=!1,a.width=m(100),a.layout="vertical",a.zIndex=1,e.bottomAxesContainer=a;var o=n.createChild(Sn);o.shouldClone=!1,o.layout="horizontal",o.height=m(100),o.contentAlign="right",o.events.on("transformed",e.updateXAxesMargins,e,!1),o.zIndex=1,e.leftAxesContainer=o;var s=n.createChild(Sn);s.shouldClone=!1,s.height=m(100),s.width=m(100),s.background.fillOpacity=0,e.plotContainer=s,e.mouseWheelBehavior="none",e._cursorContainer=s;var l=n.createChild(Sn);l.shouldClone=!1,l.layout="horizontal",l.height=m(100),l.zIndex=1,l.events.on("transformed",e.updateXAxesMargins,e,!1),e.rightAxesContainer=l,e.seriesContainer.parent=s,e.bulletsContainer.parent=s;var u=s.createChild(Sa);u.shouldClone=!1,u.align="right",u.valign="top",u.zIndex=Number.MAX_SAFE_INTEGER,u.marginTop=5,u.marginRight=5,u.hide(0),e.zoomOutButton=u;var c=e.plotContainer.createChild(Sn);return c.shouldClone=!1,c.width=m(100),c.height=m(100),c.isMeasured=!1,c.zIndex=4,c.layout="none",e.axisBulletsContainer=c,e._bulletMask=e.plotContainer,e.events.on("beforedatavalidated",(function(){e.series.each((function(t){t.dataGrouped=!1,t._baseInterval={}}))}),e,!1),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),this.zoomOutButton.exportable=!1,S(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y chart"))},e.prototype.draw=function(){t.prototype.draw.call(this),this.seriesContainer.toFront(),this.bulletsContainer.toFront(),this.maskBullets&&(this.bulletsContainer.mask=this._bulletMask),this.updateSeriesLegend()},e.prototype.updatePlotElements=function(){se(this.series.iterator(),(function(t){t.invalidate()}))},e.prototype.validateData=function(){0==this._parseDataFrom&&(se(this.xAxes.iterator(),(function(t){t.dataChangeUpdate()})),se(this.yAxes.iterator(),(function(t){t.dataChangeUpdate()})),se(this.series.iterator(),(function(t){t.dataChangeUpdate()}))),t.prototype.validateData.call(this)},e.prototype.updateXAxesMargins=function(){var t=this.leftAxesContainer.measuredWidth,e=this.rightAxesContainer.measuredWidth,i=this.bottomAxesContainer;i.paddingLeft==t&&i.paddingRight==e||(i.paddingLeft=t,i.paddingRight=e);var r=this.topAxesContainer;r.paddingLeft==t&&r.paddingRight==e||(r.paddingLeft=t,r.paddingRight=e)},e.prototype.reinit=function(){t.prototype.reinit.call(this),this.series.each((function(t){t.appeared=!1}))},e.prototype.handleXAxisChange=function(t){this.updateXAxis(t.target)},e.prototype.handleYAxisChange=function(t){this.updateYAxis(t.target)},e.prototype.processXAxis=function(t){var e=t.newValue;e.chart=this,e.renderer||(e.renderer=new this._axisRendererX,e.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleXAxisChange,this,!1)),e.axisLetter="X",e.events.on("startendchanged",this.handleXAxisRangeChange,this,!1),e.dataProvider=this,this.updateXAxis(e.renderer),this.processAxis(e)},e.prototype.processYAxis=function(t){var e=t.newValue;e.chart=this,e.renderer||(e.renderer=new this._axisRendererY,e.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleYAxisChange,this,!1)),e.axisLetter="Y",e.events.on("startendchanged",this.handleYAxisRangeChange,this,!1),e.dataProvider=this,this.updateYAxis(e.renderer),this.processAxis(e)},e.prototype.handleXAxisRangeChange=function(){var t=this.getCommonAxisRange(this.xAxes);this.scrollbarX&&this.zoomAxes(this.xAxes,t,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarX,t)},e.prototype.toggleZoomOutButton=function(){if(this.zoomOutButton){var t=!1;oe(this.xAxes.iterator(),(function(e){if(e.toggleZoomOutButton)if(e.maxZoomCount>0){var i=e.maxZoomFactor/e.maxZoomCount;if(L(e.end-e.start,3)<1/i)return t=!0,!1}else if(L(e.start,3)>0||L(e.end,3)<1)return t=!0,!1;return!0})),oe(this.yAxes.iterator(),(function(e){if(e.toggleZoomOutButton){if(e.maxZoomCount>0){var i=e.maxZoomFactor/e.maxZoomCount;if(L(e.end-e.start,3)<1/i)return t=!0,!1}else if(L(e.start,3)>0||L(e.end,3)<1)return t=!0,!1;return!0}})),this.seriesAppeared||(t=!1),t?this.zoomOutButton.show():this.zoomOutButton.hide()}},e.prototype.seriesAppeared=function(){var t=!1;return se(this.series.iterator(),(function(e){if(!e.appeared)return t=!1,!1})),t},e.prototype.handleYAxisRangeChange=function(){var t=this.getCommonAxisRange(this.yAxes);this.scrollbarY&&this.zoomAxes(this.yAxes,t,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarY,t)},e.prototype.updateScrollbar=function(t,e){t&&(t.skipRangeEvents(),t.start=e.start,t.end=e.end)},e.prototype.getCommonAxisRange=function(t){var e,i;return se(t.iterator(),(function(t){var r=t.start,n=t.end;t.renderer.inversed&&(r=1-t.end,n=1-t.start),(!k(e)||r<e)&&(e=r),(!k(i)||n>i)&&(i=n)})),{start:e,end:i}},e.prototype.updateXAxis=function(t){var e=t.axis;t.opposite?(e.parent=this.topAxesContainer,e.toFront()):(e.parent=this.bottomAxesContainer,e.toBack()),e.renderer&&e.renderer.processRenderer()},e.prototype.updateYAxis=function(t){var e=t.axis;t.opposite?(e.parent=this.rightAxesContainer,e.toBack()):(e.parent=this.leftAxesContainer,e.toFront()),e.renderer&&e.renderer.processRenderer()},e.prototype.processAxis=function(t){var e=this;t instanceof Io&&this._dataUsers.moveValue(t);var i=t.renderer;i.gridContainer.parent=this.plotContainer,i.gridContainer.toBack(),i.breakContainer.parent=this.plotContainer,i.breakContainer.toFront(),i.breakContainer.zIndex=10,t.addDisposer(new Lt((function(){e.dataUsers.removeValue(t)}))),i.bulletsContainer.parent=this.axisBulletsContainer,this._disposers.push(t.events.on("positionchanged",(function(){var r=xi({x:0,y:0},t,e.axisBulletsContainer);t.renderer instanceof bo&&(i.bulletsContainer.y=r.y),t.renderer instanceof Po&&(i.bulletsContainer.x=r.x)}),void 0,!1)),this.plotContainer.events.on("maxsizechanged",(function(){e.inited&&(t.invalidateDataItems(),e.updateSeriesMasks())}),t,!1)},e.prototype.updateSeriesMasks=function(){Fi()&&this.series.each((function(t){var e=t.mainContainer.mask;t.mainContainer.mask=void 0,t.mainContainer.mask=e}))},e.prototype.handleSeriesRemoved=function(e){var i=e.oldValue;i&&(i.xAxis&&(i.xAxis.series.removeValue(i),i.xAxis.invalidateProcessedData()),i.yAxis&&(i.yAxis.series.removeValue(i),i.yAxis.invalidateProcessedData()),this.series.each((function(t){t.resetExtremes()}))),t.prototype.handleSeriesRemoved.call(this,e)},Object.defineProperty(e.prototype,"xAxes",{get:function(){return this._xAxes||(this._xAxes=new Te,this._xAxes.events.on("inserted",this.processXAxis,this,!1),this._xAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new Se(this._xAxes,!1))),this._xAxes},enumerable:!0,configurable:!0}),e.prototype.handleAxisRemoval=function(t){var e=t.oldValue;this.dataUsers.removeValue(e),e.autoDispose&&e.dispose()},Object.defineProperty(e.prototype,"yAxes",{get:function(){return this._yAxes||(this._yAxes=new Te,this._yAxes.events.on("inserted",this.processYAxis,this,!1),this._yAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new Se(this._yAxes,!1))),this._yAxes},enumerable:!0,configurable:!0}),e.prototype.handleSeriesAdded=function(e){try{t.prototype.handleSeriesAdded.call(this,e);var i=e.newValue;0!=this.xAxes.length&&0!=this.yAxes.length||(ve.removeFromInvalidComponents(i),i.dataInvalid=!1),i.maskBullets=i.maskBullets,null==i.fill&&(this.patterns?(S(i.stroke)||(i.stroke=this.colors.next()),i.fill=this.patterns.next(),S(i.fillOpacity)&&(i.fill.backgroundOpacity=i.fillOpacity),i.stroke instanceof Ne&&(i.fill.stroke=i.stroke,i.fill.fill=i.stroke)):i.fill=this.colors.next()),S(i.stroke)||(i.stroke=i.fill)}catch(r){this.raiseCriticalError(r)}},Object.defineProperty(e.prototype,"cursor",{get:function(){return this._cursor},set:function(t){this._cursor!=t&&(this._cursor&&this.removeDispose(this._cursor),this._cursor=t,t&&(this._disposers.push(t),t.chart=this,t.shouldClone=!1,t.parent=this._cursorContainer,t.events.on("cursorpositionchanged",this.handleCursorPositionChange,this,!1),t.events.on("zoomstarted",this.handleCursorZoomStart,this,!1),t.events.on("zoomended",this.handleCursorZoomEnd,this,!1),t.events.on("panstarted",this.handleCursorPanStart,this,!1),t.events.on("panning",this.handleCursorPanning,this,!1),t.events.on("panended",this.handleCursorPanEnd,this,!1),t.events.on("behaviorcanceled",this.handleCursorCanceled,this,!1),t.events.on("hidden",this.handleHideCursor,this,!1),t.zIndex=Number.MAX_SAFE_INTEGER-1,this.tapToActivate&&this.setTapToActivate(this.tapToActivate)))},enumerable:!0,configurable:!0}),e.prototype.handleCursorPositionChange=function(){var t=this.cursor;if(t.visible&&!t.isHiding){var e=this.cursor.xPosition,i=this.cursor.yPosition;this.showSeriesTooltip({x:e,y:i});var r=[],n=t.snapToSeries;if(n&&!t.downPoint){n instanceof Oo&&(n=[n]);var a=[];ht(n,(function(t){var n=t.xAxis,o=t.yAxis;n instanceof xo&&!(n instanceof To)&&o instanceof xo&&!(o instanceof To)?(t.dataItems.each((function(t){a.push(t)})),xt(r,t.yAxis),xt(r,t.xAxis)):(t.baseAxis==t.xAxis&&(xt(r,t.yAxis),a.push(n.getSeriesDataItem(t,n.toAxisPosition(e),!0))),t.baseAxis==t.yAxis&&(xt(r,t.xAxis),a.push(o.getSeriesDataItem(t,o.toAxisPosition(i),!0))))}));var o=this.getClosest(a,e,i);o&&(this.series.each((function(t){var e=o.component;t!=e&&(t.hideTooltip(),t.xAxis!=e.xAxis&&t.xAxis.hideTooltip(),t.yAxis!=e.yAxis&&t.yAxis.hideTooltip())})),o.component.showTooltipAtDataItem(o),t.handleSnap(o.component))}this._seriesPoints=[],this._cursorXPosition!=e&&this.showAxisTooltip(this.xAxes,e,r),this._cursorYPosition!=i&&this.showAxisTooltip(this.yAxes,i,r),this.arrangeTooltips&&this.sortSeriesTooltips(this._seriesPoints),this.legend&&this.legend.afterDraw()}},e.prototype.getClosest=function(t,e,i){var r,n=1/0;return dt(t,(function(t){if(t){var a=t.component.xAxis,o=t.component.yAxis,s=a.positionToCoordinate(a.toGlobalPosition(a.toAxisPosition(e))),l=o.positionToCoordinate(o.toGlobalPosition(o.toAxisPosition(i))),u=t.component.xField,c=t.component.yField;if(a instanceof xo&&!k(t.getValue(u)))return!0;if(o instanceof xo&&!k(t.getValue(c)))return!0;var h=a.positionToCoordinate(a.toGlobalPosition(a.getPositionX(t,u,t.locations[u],"valueX"))),p=o.positionToCoordinate(o.toGlobalPosition(o.getPositionY(t,c,t.locations[c],"valueY"))),d=Math.sqrt(Math.pow(s-h,2)+Math.pow(l-p,2));return d<n&&(n=d,r=t),!0}})),r},e.prototype.handleHideCursor=function(){this.hideObjectTooltip(this.xAxes),this.hideObjectTooltip(this.yAxes),this.hideObjectTooltip(this.series),this._cursorXPosition=void 0,this._cursorYPosition=void 0,this.updateSeriesLegend()},e.prototype.updateSeriesLegend=function(){se(this.series.iterator(),(function(t){t.updateLegendValue()}))},e.prototype.hideObjectTooltip=function(t){se(t.iterator(),(function(t){t.hideTooltip(0)}))},e.prototype.showSeriesTooltip=function(t){var e=this;if(t){var i=[];this.series.each((function(r){if(r.xAxis instanceof To&&r.xAxis.snapTooltip||r.yAxis instanceof To&&r.yAxis.snapTooltip);else{var n=r.showTooltipAtPosition(t.x,t.y);n&&(r.tooltip.setBounds(Si({x:0,y:0,width:e.pixelWidth,height:e.pixelHeight},e)),i.push({series:r,point:n}))}})),this.arrangeTooltips&&this.sortSeriesTooltips(i)}else this.series.each((function(t){t.hideTooltip()}))},e.prototype.sortSeriesTooltips=function(t){if(t.length>0){var e=this.cursor;if(e&&k(e.maxTooltipDistance)){var i,r,n=_i({x:e.point.x,y:e.point.y},e),a=1/0;ht(t,(function(t){var e=t.series,o=t.point;if(o){var s={x:o.x,y:o.y},l=Math.abs(W(s,n));l<a&&(r=s,a=l,i=e)}}));var o=[];i&&(ht(t,(function(t){if(Math.abs(W(t.point,r))<=Math.abs(e.maxTooltipDistance))o.push({series:t.series,point:t.point});else{var i=t.series.tooltipDataItem;i&&ht(i.sprites,(function(t){t.isHover=!1,t.handleOutReal()})),t.series.tooltip.hide(0)}})),e.maxTooltipDistance<0&&(o.length>0&&ht(o,(function(t){i!=t.series&&t.series.tooltip.hide(0)})),o=[{series:i,point:r}])),t=o}var s=_i({x:-.5,y:-.5},this.plotContainer),l=_i({x:this.plotContainer.pixelWidth+.5,y:this.plotContainer.pixelHeight+.5},this.plotContainer),u=0,c=[];ht(t,(function(t){var e=t.point;e&&st(e,{x:s.x,y:s.y,width:l.x-s.x,height:l.y-s.y})&&(c.push({point:e,series:t.series}),u+=e.y)})),t=c;var h=this.series.getIndex(0),p=!1;h&&h.yAxis&&h.yAxis.renderer.inversed&&(p=!0),p?t.sort((function(t,e){return Oe(t.point.y,e.point.y)})):(t.sort((function(t,e){return Oe(e.point.y,t.point.y)})),t.reverse());var d=u/t.length,f=Ti({x:0,y:0},this.svgContainer.SVGContainer).y;if(t.length>0){var m=s.y,y=l.y;Ci({x:0,y:m},this);var g=!1;if(d>m+(y-m)/2)for(var b=y,v=t.length-1;v>=0;v--){var _=t[v].point.y;if((w=t[v].series.tooltip).setBounds({x:0,y:-f,width:this.pixelWidth,height:b+f}),w.invalid&&w.validate(),w.toBack(),(b=_i({x:0,y:w.label.pixelY-w.pixelY+_-w.pixelMarginTop},w).y)<-f){g=!0;break}}if(d<=m+(y-m)/2||g)for(var x=m,S=(v=0,t.length);v<S;v++){var w;_=t[v].point.y,(w=t[v].series.tooltip).setBounds({x:0,y:x,width:this.pixelWidth,height:y}),w.invalid&&w.validate(),w.toBack(),x=_i({x:0,y:w.label.pixelY+w.label.measuredHeight-w.pixelY+_+w.pixelMarginBottom},w).y}}}},e.prototype.showAxisTooltip=function(t,e,i){var r=this;se(t.iterator(),(function(t){i&&-1!=i.indexOf(t)||(r.dataItems.length>0||t.dataItems.length>0)&&t.showTooltipAtPosition(e)}))},e.prototype.getUpdatedRange=function(t,e){if(t){var i,r;t.renderer.inversed?(H(e),i=1-t.end,r=1-t.start):(i=t.start,r=t.end);var n=r-i;return{start:i+e.start*n,end:i+e.end*n}}},e.prototype.handleCursorZoomEnd=function(t){var e=this.cursor,i=e.behavior;if("zoomX"==i||"zoomXY"==i){var r=e.xRange;r&&this.xAxes.length>0&&((r=this.getUpdatedRange(this.xAxes.getIndex(0),r)).priority="start",this.zoomAxes(this.xAxes,r))}if("zoomY"==i||"zoomXY"==i){var n=e.yRange;n&&this.yAxes.length>0&&((n=this.getUpdatedRange(this.yAxes.getIndex(0),n)).priority="start",this.zoomAxes(this.yAxes,n))}this.handleHideCursor()},e.prototype.handleCursorPanStart=function(t){var e=this.xAxes.getIndex(0);e&&(this._panStartXRange={start:e.start,end:e.end});var i=this.yAxes.getIndex(0);i&&(this._panStartYRange={start:i.start,end:i.end})},e.prototype.handleCursorPanEnd=function(t){var e,i=this.cursor.behavior;if(this._panEndXRange&&("panX"==i||"panXY"==i)){var r=0;(e=this._panEndXRange).start<0&&(r=e.start),e.end>1&&(r=e.end-1),this.zoomAxes(this.xAxes,{start:e.start-r,end:e.end-r},!1,!0),this._panEndXRange=void 0,this._panStartXRange=void 0}!this._panEndYRange||"panY"!=i&&"panXY"!=i||(r=0,(e=this._panEndYRange).start<0&&(r=e.start),e.end>1&&(r=e.end-1),this.zoomAxes(this.yAxes,{start:e.start-r,end:e.end-r},!1,!0),this._panEndYRange=void 0,this._panStartYRange=void 0)},e.prototype.handleCursorCanceled=function(){this._panEndXRange=void 0,this._panStartXRange=void 0},e.prototype.handleCursorPanning=function(t){var e,i=this.cursor,r=i.behavior,n=i.maxPanOut;if(this._panStartXRange&&("panX"==r||"panXY"==r)){var a=this._panStartXRange,o=i.xRange,s=this.getCommonAxisRange(this.xAxes),l=a.end-a.start,u=o.start*(s.end-s.start),c=Math.max(-n,u+a.start),h=Math.min(u+a.end,1+n);c<=0&&(h=c+l),h>=1&&(c=h-l),this._panEndXRange=e={start:c,end:h},this.zoomAxes(this.xAxes,e,!1,!1,i.maxPanOut)}!this._panStartYRange||"panY"!=r&&"panXY"!=r||(a=this._panStartYRange,o=i.yRange,s=this.getCommonAxisRange(this.yAxes),l=a.end-a.start,u=o.start*(s.end-s.start),c=Math.max(-n,u+a.start),h=Math.min(u+a.end,1+n),c<=0&&(h=c+l),h>=1&&(c=h-l),this._panEndYRange=e={start:c,end:h},this.zoomAxes(this.yAxes,e,!1,!1,i.maxPanOut)),this.handleHideCursor()},e.prototype.handleYAxisSet=function(t){},e.prototype.handleCursorZoomStart=function(t){},Object.defineProperty(e.prototype,"scrollbarX",{get:function(){return this._scrollbarX},set:function(t){var e=this;this._scrollbarX&&this.removeDispose(this._scrollbarX),this._scrollbarX=t,t&&(this._disposers.push(t),t.parent=this.topAxesContainer,t.shouldClone=!1,t.startGrip.exportable=!1,t.endGrip.exportable=!1,t.toBack(),t.orientation="horizontal",t.events.on("rangechanged",this.handleXScrollbarChange,this,!1),t.adapter.add("positionValue",(function(t){var i=e.xAxes.getIndex(0);return i&&(t.value=i.getPositionLabel(i.renderer.inversed?1-t.position:t.position)),t})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollbarY",{get:function(){return this._scrollbarY},set:function(t){var e=this;this._scrollbarY&&this.removeDispose(this._scrollbarY),this._scrollbarY=t,t&&(this._disposers.push(t),t.parent=this.rightAxesContainer,t.startGrip.exportable=!1,t.shouldClone=!1,t.endGrip.exportable=!1,t.toFront(),t.orientation="vertical",t.events.on("rangechanged",this.handleYScrollbarChange,this,!1),t.adapter.add("positionValue",(function(t){var i=e.yAxes.getIndex(0);return i&&(t.value=i.getPositionLabel(t.position)),t})))},enumerable:!0,configurable:!0}),e.prototype.handleXScrollbarChange=function(t){if(this.inited){var e=t.target,i=e.range;0==i.start&&(i.priority="start"),1==i.end&&(i.priority="end"),i=this.zoomAxes(this.xAxes,i),e.fixRange(i)}},e.prototype.handleYScrollbarChange=function(t){if(this.inited){var e=t.target,i=e.range;1==i.end&&(i.priority="end"),0==i.start&&(i.priority="start"),i=this.zoomAxes(this.yAxes,i),e.fixRange(i)}},e.prototype.zoomAxes=function(t,e,i,r,n){var a={start:0,end:1};return this.showSeriesTooltip(),this.dataInvalid||se(t.iterator(),(function(t){if(t.renderer.inversed&&(e=H(e)),t.hideTooltip(0),r)if(t instanceof Io){var o=t.getCellEndPosition(0)-t.getCellStartPosition(0);e.start=t.roundPosition(e.start+o/2-t.startLocation*o,t.startLocation),e.end=t.roundPosition(e.end-o/2+(1-t.endLocation)*o,t.endLocation)}else e.start=t.roundPosition(e.start+1e-4,0,t.startLocation),e.end=t.roundPosition(e.end+1e-4,0,t.endLocation);var s=t.zoom(e,i,i,n);t.renderer.inversed&&(s=H(s)),a=s})),a},Object.defineProperty(e.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t,!0)&&this.bulletsContainer&&(this.bulletsContainer.mask=t?this._bulletMask:void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arrangeTooltips",{get:function(){return this.getPropertyValue("arrangeTooltips")},set:function(t){this.setPropertyValue("arrangeTooltips",t,!0)},enumerable:!0,configurable:!0}),e.prototype.handleWheel=function(t){var e=this.plotContainer,i=vi(wi(t.point,this.htmlContainer,this.svgContainer.cssScale),e);this.handleWheelReal(t.shift.y,this.mouseWheelBehavior,i)},e.prototype.handleHorizontalWheel=function(t){var e=this.plotContainer,i=vi(wi(t.point,this.htmlContainer,this.svgContainer.cssScale),e);this.handleWheelReal(t.shift.x,this.horizontalMouseWheelBehavior,i)},e.prototype.handleWheelReal=function(t,e,i){if(0!=t){var r=this.plotContainer,n=this.getCommonAxisRange(this.xAxes),a=this.getCommonAxisRange(this.yAxes);if("panX"==e||"panXY"==e){var o=n.end-n.start,s=Math.max(-0,n.start+.1*t/100*(n.end-n.start)),l=Math.min(n.end+.1*t/100*(n.end-n.start),1);s<=0&&(l=s+o),l>=1&&(s=l-o),this.zoomAxes(this.xAxes,{start:s,end:l})}if("panY"==e||"panXY"==e){t*=-1;var u=a.end-a.start,c=Math.max(-0,a.start+.1*t/100*(a.end-a.start)),h=Math.min(a.end+.1*t/100*(a.end-a.start),1);c<=0&&(h=c+u),h>=1&&(c=h-u),this.zoomAxes(this.yAxes,{start:c,end:h})}if("zoomX"==e||"zoomXY"==e){var p=i.x/r.maxWidth,d=this.xAxes.getIndex(0).toAxisPosition(p);s=Math.max(-0,n.start-.1*(n.end-n.start)*t/100*p),s=Math.min(s,d),l=Math.min(n.end+.1*(n.end-n.start)*t/100*(1-p),1),l=Math.max(l,d),this.zoomAxes(this.xAxes,{start:s,end:l})}if("zoomY"==e||"zoomXY"==e){var f=i.y/r.maxHeight,m=this.yAxes.getIndex(0).toAxisPosition(f);c=Math.max(-0,a.start-.1*(a.end-a.start)*t/100*(1-f)),c=Math.min(c,m),h=Math.min(a.end+.1*t/100*f*(a.end-a.start),1),h=Math.max(h,m),this.zoomAxes(this.yAxes,{start:c,end:h})}}},Object.defineProperty(e.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(t){this.setPropertyValue("mouseWheelBehavior",t)&&("none"!=t?(this._mouseWheelDisposer=this.plotContainer.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer)):this._mouseWheelDisposer&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer.dispose()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalMouseWheelBehavior",{get:function(){return this.getPropertyValue("horizontalMouseWheelBehavior")},set:function(t){this.setPropertyValue("horizontalMouseWheelBehavior",t)&&("none"!=t?(this._mouseWheelDisposer2=this.plotContainer.events.on("wheel",this.handleHorizontalWheel,this,!1),this._disposers.push(this._mouseWheelDisposer2)):this._mouseWheelDisposer2&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer2.dispose()))},enumerable:!0,configurable:!0}),e.prototype.dataSourceDateFields=function(e){var i=this;return e=t.prototype.dataSourceDateFields.call(this,e),se(this.series.iterator(),(function(t){e=i.populateDataSourceFields(e,t.dataFields,["dateX","dateY","openDateX","openDateY"])})),e},e.prototype.dataSourceNumberFields=function(e){var i=this;return e=t.prototype.dataSourceDateFields.call(this,e),se(this.series.iterator(),(function(t){e=i.populateDataSourceFields(e,t.dataFields,["valueX","valueY","openValueX","openValueY"])})),e},e.prototype.processConfig=function(e){if(e){var i=[],r=[];if(S(e.xAxes)&&A(e.xAxes))for(var n=0,a=e.xAxes.length;n<a;n++){if(!e.xAxes[n].type)throw Error("[XYChart error] No type set for xAxes["+n+"].");if(S(e.xAxes[n].axisRanges)){for(var o=0,s=e.xAxes[n].axisRanges.length;o<s;o++)S((u=e.xAxes[n].axisRanges[o]).date)&&C(u.date)&&(u.date=this.dateFormatter.parse(u.date)),S(u.endDate)&&C(u.endDate)&&(u.endDate=this.dateFormatter.parse(u.endDate));i.push({axisRanges:e.xAxes[n].axisRanges,index:n}),delete e.xAxes[n].axisRanges}}if(S(e.yAxes)&&A(e.yAxes))for(n=0,a=e.yAxes.length;n<a;n++){if(!e.yAxes[n].type)throw Error("[XYChart error] No type set for yAxes["+n+"].");if(S(e.yAxes[n].axisRanges)){o=0;for(var l=e.yAxes[n].axisRanges.length;o<l;o++){var u;S((u=e.yAxes[n].axisRanges[o]).date)&&C(u.date)&&(u.date=this.dateFormatter.parse(u.date)),S(u.endDate)&&C(u.endDate)&&(u.endDate=this.dateFormatter.parse(u.endDate))}r.push({axisRanges:e.yAxes[n].axisRanges,index:n}),delete e.yAxes[n].axisRanges}}if(S(e.series)&&A(e.series))for(n=0,a=e.series.length;n<a;n++)e.series[n].type=e.series[n].type||"LineSeries";if(S(e.cursor)&&!S(e.cursor.type)&&(e.cursor.type="XYCursor"),S(e.scrollbarX)&&!S(e.scrollbarX.type)&&(e.scrollbarX.type="Scrollbar"),S(e.scrollbarY)&&!S(e.scrollbarY.type)&&(e.scrollbarY.type="Scrollbar"),t.prototype.processConfig.call(this,e),r.length)for(n=0,a=r.length;n<a;n++)this.yAxes.getIndex(r[n].index).config={axisRanges:r[n].axisRanges};if(i.length)for(n=0,a=i.length;n<a;n++)this.xAxes.getIndex(i[n].index).config={axisRanges:i[n].axisRanges}}},e.prototype.configOrder=function(e,i){return e==i?0:"scrollbarX"==e?1:"scrollbarX"==i?-1:"scrollbarY"==e?1:"scrollbarY"==i?-1:"cursor"==e?1:"cursor"==i?-1:"series"==e?1:"series"==i?-1:t.prototype.configOrder.call(this,e,i)},e.prototype.createSeries=function(){return new Oo},Object.defineProperty(e.prototype,"zoomOutButton",{get:function(){return this._zoomOutButton},set:function(t){var e=this;this._zoomOutButton=t,t&&t.events.on("hit",(function(){e.zoomAxes(e.xAxes,{start:0,end:1}),e.zoomAxes(e.yAxes,{start:0,end:1})}),void 0,!1)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){var i=this;e.xAxes.each((function(t){i.xAxes.push(t.clone())})),e.yAxes.each((function(t){i.yAxes.push(t.clone())})),t.prototype.copyFrom.call(this,e),e.cursor&&(this.cursor=e.cursor.clone()),e.scrollbarX&&(this.scrollbarX=e.scrollbarX.clone()),e.scrollbarY&&(this.scrollbarY=e.scrollbarY.clone())},e.prototype.disposeData=function(){t.prototype.disposeData.call(this);var e=this.scrollbarX;e&&e instanceof Do&&e.scrollbarChart.disposeData();var i=this.scrollbarY;i&&i instanceof Do&&i.scrollbarChart.disposeData(),this.xAxes.each((function(t){t.disposeData()})),this.yAxes.each((function(t){t.disposeData()}))},e.prototype.addData=function(e,i){this.scrollbarX instanceof Do&&this.addScrollbarData(this.scrollbarX,i),this.scrollbarY instanceof Do&&this.addScrollbarData(this.scrollbarY,i),t.prototype.addData.call(this,e,i)},e.prototype.addScrollbarData=function(t,e){var i=t.scrollbarChart;i._parseDataFrom=i.data.length,i.invalidateData()},e.prototype.removeScrollbarData=function(t,e){var i=t.scrollbarChart;if(k(e)){for(;e>0;){var r=this.dataItems.getIndex(0);r&&i.dataItems.remove(r),i.dataUsers.each((function(t){var e=t.dataItems.getIndex(0);e&&t.dataItems.remove(e)})),i._parseDataFrom--,e--}i.invalidateData()}},e.prototype.removeData=function(e){this.scrollbarX instanceof Do&&this.removeScrollbarData(this.scrollbarX,e),this.scrollbarY instanceof Do&&this.removeScrollbarData(this.scrollbarY,e),t.prototype.removeData.call(this,e)},e.prototype.setTapToActivate=function(e){t.prototype.setTapToActivate.call(this,e),this.cursor&&(this.cursor.interactions.isTouchProtected=e,this.plotContainer.interactions.isTouchProtected=e)},e.prototype.handleTapToActivate=function(){t.prototype.handleTapToActivate.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!1,this.plotContainer.interactions.isTouchProtected=!1)},e.prototype.handleTapToActivateDeactivation=function(){t.prototype.handleTapToActivateDeactivation.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!0,this.plotContainer.interactions.isTouchProtected=!0)},e}(no);ve.registeredClasses.XYChart=Mo,Dn.push({relevant:Fn.maybeXS,state:function(t,e){if(t instanceof Mo&&t.scrollbarX){var i=t.states.create(e);return t.scrollbarX.states.create(e).properties.disabled=!0,i}return null}}),Dn.push({relevant:Fn.maybeXS,state:function(t,e){if(t instanceof Mo&&t.scrollbarY){var i=t.states.create(e);return t.scrollbarY.states.create(e).properties.disabled=!0,i}return null}});var Eo=function(t){function e(){var e=t.call(this)||this;e.className="LineSeriesSegment",e.isMeasured=!1,e.interactionsEnabled=!1,e.layout="none";var i=e.createChild(_n);e.fillSprite=i,i.shouldClone=!1,i.setElement(e.paper.add("path")),i.isMeasured=!1,e._disposers.push(i);var r=e.createChild(_n);return e.strokeSprite=r,r.shouldClone=!1,r.fill=Ue(),r.setElement(e.paper.add("path")),r.isMeasured=!1,e._disposers.push(r),e}return Object(d.d)(e,t),e.prototype.drawSegment=function(t,e,i,r){if(!this.disabled)if(t.length>0&&e.length>0){var n=Hn({x:t[0].x-.2,y:t[0].y-.2})+Hn(t[0])+new ga(i,r).smooth(t);0==this.strokeOpacity||0==this.strokeSprite.strokeOpacity||(this.strokeSprite.path=n),(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(n+=Wn(e[0])+new ga(i,r).smooth(e),n+=Wn(t[0]),this.fillSprite.path=n+=" Z")}else this.fillSprite.path="",this.strokeSprite.path=""},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e);var i=this.strokeSprite;ie(e,i.properties,vn),i.events.copyFrom(e.strokeSprite.events),i.fillOpacity=0;var r=this.fillSprite;ie(e,r.properties,vn),r.events.copyFrom(e.fillSprite.events),r.strokeOpacity=0},e}(Sn);ve.registeredClasses.LineSeriesSegment=Eo;var Lo=function(t){function e(){var e=t.call(this)||this;return e.className="DurationAxisDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(_o),Ro=function(t){function e(){var e=t.call(this)||this;return e._baseUnit="second",e.className="DurationAxis",e.setPropertyValue("maxZoomFactor",1e6),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.formatLabel=function(t,e){return this.durationFormatter.format(t,e||this.axisDurationFormat)},e.prototype.adjustMinMax=function(e,i,r,n,a){var o,s,l,u,c=this.baseUnit;if(this.setPropertyValue("maxPrecision",0),"millisecond"==c||"second"==c||"minute"==c||"hour"==c){n<=1&&(n=1),n=Math.round(n);var h=e,p=i;0===r&&(r=Math.abs(i));var f,m=[60,30,20,15,10,2,1],y=1;"hour"==c&&(m=[24,12,6,4,2,1]);try{for(var g=Object(d.i)(m),b=g.next();!b.done;b=g.next()){var v=b.value;if(r/v>n){y=v;break}}}catch(T){o={error:T}}finally{try{b&&!b.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}var _=Math.ceil((i-e)/y/n),x=Math.log(Math.abs(_))*Math.LOG10E,S=Math.pow(10,Math.floor(x))/10,w=(u=_/S,m.reduce((function(t,e){return Math.abs(e-u)<Math.abs(t-u)?e:t})));this.durationFormatter.getValueUnit(f=y*(_=w*S),this.baseUnit),e=Math.floor(e/f)*f,i=Math.ceil(i/f)*f,a&&((e-=f)<0&&h>=0&&(e=0),(i+=f)>0&&p<=0&&(i=0)),l={min:e,max:i,step:f}}else l=t.prototype.adjustMinMax.call(this,e,i,r,n,a);return this.axisDurationFormat=this.durationFormatter.getFormat(l.step,l.max,this.baseUnit),l},Object.defineProperty(e.prototype,"tooltipDurationFormat",{get:function(){return this._tooltipDurationFormat},set:function(t){this._tooltipDurationFormat=t},enumerable:!0,configurable:!0}),e.prototype.getTooltipText=function(t){var e=L(this.positionToValue(t),this._stepDecimalPlaces),i=this.formatLabel(e,this.tooltipDurationFormat);return this._adapterO?this._adapterO.apply("getTooltipText",i):i},Object.defineProperty(e.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(t){this._baseUnit!=t&&(this._baseUnit=t,this.durationFormatter.baseUnit=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.baseUnit=e.baseUnit},e}(xo);ve.registeredClasses.DurationAxis=Ro,ve.registeredClasses.DurationAxisDataItem=Lo;var Vo=function(t){function e(){var e=t.call(this)||this;return e.className="LineSeriesDataItem",e}return Object(d.d)(e,t),e}(Ao),jo=function(t){function e(){var e=t.call(this)||this;return e.minDistance=.5,e.segments=new Pe(e.createSegment()),e.segments.template.applyOnClones=!0,e._disposers.push(new Se(e.segments)),e._disposers.push(e.segments.template),e._segmentsIterator=new pe(e.segments,(function(){return e.segments.create()})),e._segmentsIterator.createNewItems=!0,e.className="LineSeries",e.strokeOpacity=1,e.fillOpacity=0,e.connect=!0,e.tensionX=1,e.tensionY=1,e.autoGapCount=1.1,e.segmentsContainer=e.mainContainer.createChild(Sn),e.segmentsContainer.isMeasured=!1,e.bulletsContainer.toFront(),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Line Series"))},e.prototype.createSegment=function(){return new Eo},e.prototype.createDataItem=function(){return new Vo},e.prototype.setInitialWorkingValues=function(t){var e=this._yAxis.get(),i=this._xAxis.get();if(this.appeared&&this.visible){var r=this.dataItems.getIndex(t.index-1);if(t.component=this,this.baseAxis==i&&e instanceof xo){var n=e.minZoomed;if(r&&(n=r.values.valueY.workingValue),t.setWorkingValue("valueY",n,0),t.setWorkingValue("valueY",t.values.valueY.value),i instanceof To)t.setWorkingLocation("dateX",t.locations.dateX-1,0),t.setWorkingLocation("dateX",t.locations.dateX);else if(i instanceof Ro&&r){var a=t.valueX;t.setWorkingValue("valueX",r.valueX,0),t.setWorkingValue("valueX",a)}}if(this.baseAxis==e&&i instanceof xo){var o=i.minZoomed;r&&(o=r.values.valueX.workingValue),t.setWorkingValue("valueX",o,0),t.setWorkingValue("valueX",t.values.valueX.value),e instanceof To?(t.setWorkingLocation("dateY",t.locations.dateX-1,0),t.setWorkingLocation("dateY",t.locations.dateY)):e instanceof Ro&&r&&(a=t.valueY,t.setWorkingValue("valueY",r.valueY,0),t.setWorkingValue("valueY",a))}}else this.baseAxis==i&&e instanceof xo&&(i instanceof To&&t.setWorkingLocation("dateX",t.locations.dateX),i instanceof Io&&t.setWorkingLocation("categoryX",t.locations.categoryX)),this.baseAxis==e&&i instanceof xo&&(e instanceof To&&t.setWorkingLocation("dateY",t.locations.dateY),e instanceof Io&&t.setWorkingLocation("categoryY",t.locations.categoryY))},e.prototype.updateLegendValue=function(e,i){t.prototype.updateLegendValue.call(this,e,i),e&&e.segment&&(this.tooltipColorSource=e.segment)},e.prototype.validate=function(){var e=this;t.prototype.validate.call(this),this.xAxis&&this.yAxis&&(this._segmentsIterator.reset(),this.openSegmentWrapper(this._adjustedStartIndex),se(this.axisRanges.iterator(),(function(t){e.openSegmentWrapper(e._adjustedStartIndex,t)})),se(this._segmentsIterator.iterator(),(function(t){t.__disabled=!0})))},e.prototype.sliceData=function(){for(var t=this.startIndex,e=this.endIndex,i=this.startIndex-1;i>=0;i--)if((n=this.dataItems.getIndex(i))&&n.hasValue(this._xValueFields)&&n.hasValue(this._yValueFields)){t=i;break}this._adjustedStartIndex=this.findAdjustedIndex(t,["stroke","strokeWidth","strokeDasharray","strokeOpacity","fill","fillOpacity","opacity"]),i=this.endIndex;for(var r=this.dataItems.length;i<r;i++){var n;if((n=this.dataItems.getIndex(i))&&n.hasValue(this._xValueFields)&&n.hasValue(this._yValueFields)){e=i+1;break}}this._workingStartIndex=t,this._workingEndIndex=e},e.prototype.findAdjustedIndex=function(t,e){var i=this,r=this.propertyFields,n=t;return ht(e,(function(e){if(S(r[e]))for(var a=n;a>=0;a--){var o=i.dataItems.getIndex(a);if(o&&S(o.properties[e])){t>a&&(t=a);break}}})),t},e.prototype.openSegmentWrapper=function(t,e){var i={index:t,axisRange:e};do{i=this.openSegment(i.index,i.axisRange)}while(i)},e.prototype.getSegment=function(){var t=this._segmentsIterator.getFirst();return t.isDisposed()?(this.segments.removeValue(t),this.getSegment()):t},e.prototype.openSegment=function(t,e){var i=!1,r=[];t=Math.min(t,this.dataItems.length);var n,a=Math.min(this._workingEndIndex,this.dataItems.length);this._workingEndIndex=Math.min(this._workingEndIndex,this.dataItems.length);var o=!1,s=this.getSegment();s.__disabled=!1,e?(s.parent=e.contents,ie(e.contents,s,vn)):(ie(this,s,vn),s.filters.clear(),s.parent=this.segmentsContainer),this.group.node.removeAttribute("fill");for(var l=this.connect,u=!1,c=t;c<a;c++){var h=this.dataItems.getIndex(c);if(h.segment=s,h.hasProperties&&(c==t?this.updateSegmentProperties(h.properties,s):o=this.updateSegmentProperties(h.properties,s,!0)),h.hasValue(this._xValueFields)&&h.hasValue(this._yValueFields))this.addPoints(r,h,this.xField,this.yField),u=!0;else{if(c==t)continue;if(!l&&u){n=c;break}}if(n=c,this.baseAxis instanceof To){var p=this.dataItems.getIndex(c+1);if(p&&this.baseAxis.makeGap(p,h)){i=!0;break}}if(o)break}return this.closeSegment(s,r,t,n,e,i)},e.prototype.addPoints=function(t,e,i,r,n){var a=this.getPoint(e,i,r,e.workingLocations[i],e.workingLocations[r]);n||(e.point=a),t.push(a)},e.prototype.closeSegment=function(t,e,i,r,n,a){var o=[];if(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)for(var s=r;s>=i;s--){var l=this.dataItems.getIndex(s);l.hasValue(this._xValueFields)&&l.hasValue(this._yValueFields)&&this.addPoints(o,l,this.xOpenField,this.yOpenField,!0)}else{var u=e.length,c=this.xAxis,h=this.yAxis;u>0&&(this.baseAxis==c?(o.push({x:e[u-1].x,y:h.basePoint.y}),o.push({x:e[0].x,y:h.basePoint.y})):(o.push({x:c.basePoint.x,y:e[u-1].y}),o.push({x:c.basePoint.x,y:e[0].y})))}return this.drawSegment(t,e,o),a&&r++,r<this._workingEndIndex-1?{index:r,axisRange:n}:null},e.prototype.drawSegment=function(t,e,i){t.drawSegment(e,i,this.tensionX,this.tensionY)},e.prototype.updateSegmentProperties=function(t,e,i){var r=!1;return Qt(t,(function(t,n){if(S(n)){var a=e[t],o=void 0;a&&(o=a.toString?a.toString():a);var s=void 0;n&&(s=n.toString?n.toString():n),a==n||null!=o&&null!=s&&o==s||(i||(e[t]=n),r=!0)}})),r},Object.defineProperty(e.prototype,"connect",{get:function(){return this.getPropertyValue("connect")},set:function(t){this.setPropertyValue("connect",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(t){this.setPropertyValue("tensionX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(t){this.setPropertyValue("tensionY",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){var e=this,i=t.pixelWidth,r=t.pixelHeight;t.disposeChildren();var n=t.createChild(Nn);if(n.shouldClone=!1,ie(this,n,vn),n.x2=i,n.y=r/2,n.y2=1e-5,n.visible=!0,this.fillOpacity>0){var a=t.createChild(xn);ie(this,a,vn),a.width=i,a.height=r,a.y=0,a.strokeOpacity=0,a.visible=!0,n.y=0}var o=t.dataItem;o.color=this.stroke,o.colorOrig=this.fill,oe(this.bullets.iterator(),(function(n){if(n instanceof Ja&&!n.copyToLegendMarker)return!1;var a=!1;if(n instanceof Sn&&se(n.children.iterator(),(function(t){if(t instanceof Ln)return a=!0,!0})),!a){var o=n.clone();return o.parent=t,o.isMeasured=!0,o.tooltipText=void 0,o.x=i/2,o.y=e.fillOpacity>0?0:r/2,o.visible=!0,S(o.fill)||(o.fill=e.fill),S(o.stroke)||(o.stroke=e.stroke),!1}}))},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this.segments.clear()},Object.defineProperty(e.prototype,"autoGapCount",{get:function(){return this.getPropertyValue("autoGapCount")},set:function(t){this.setPropertyValue("autoGapCount",t,!0)},enumerable:!0,configurable:!0}),e}(Oo);ve.registeredClasses.LineSeries=jo,ve.registeredClasses.LineSeriesDataItem=Vo;var zo=function(t){function e(){var e=t.call(this)||this;return e.className="RadarSeriesDataItem",e.setLocation("dateX",0,0),e.setLocation("dateY",0,0),e.setLocation("categoryX",0,0),e.setLocation("categoryY",0,0),e.applyTheme(),e}return Object(d.d)(e,t),e}(Vo),Bo=function(t){function e(){var e=t.call(this)||this;return e.className="RadarSeries",e.connectEnds=!0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},e.prototype.createDataItem=function(){return new zo},e.prototype.getPoint=function(t,e,i,r,n,a,o){a||(a="valueX"),o||(o="valueY");var s=W({x:this.yAxis.getX(t,i,n,o),y:this.yAxis.getY(t,i,n,o)});0==s&&(s=1e-5);var l=this.xAxis.getAngle(t,e,r,a);return l<this.chart.startAngle||l>this.chart.endAngle?void 0:{x:s*B(l),y:s*j(l)}},e.prototype.addPoints=function(t,e,i,r,n){var a=this.getPoint(e,i,r,e.locations[i],e.locations[r]);a&&t.push(a)},e.prototype.getMaskPath=function(){var t=this.yAxis.renderer;return Kn(t.startAngle,t.endAngle-t.startAngle,t.pixelRadius,t.pixelInnerRadius)},e.prototype.drawSegment=function(e,i,r){var n=this.yAxis.renderer;this.connectEnds&&360==Math.abs(n.endAngle-n.startAngle)&&(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)&&(i.push(i[0]),r.length>0&&r.unshift(r[r.length-1])),t.prototype.drawSegment.call(this,e,i,r)},Object.defineProperty(e.prototype,"connectEnds",{get:function(){return this.getPropertyValue("connectEnds")},set:function(t){this.setPropertyValue("connectEnds",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionBulletReal=function(t,e,i){var r=this.xAxis,n=this.yAxis;(e<r.start||e>r.end||i<n.start||i>n.end)&&(t.visible=!1),t.moveTo(this.xAxis.renderer.positionToPoint(e,i))},e.prototype.setXAxis=function(e){t.prototype.setXAxis.call(this,e),this.updateRendererRefs()},e.prototype.setYAxis=function(e){t.prototype.setYAxis.call(this,e),this.updateRendererRefs()},e.prototype.updateRendererRefs=function(){this.xAxis.renderer.axisRendererY=this.yAxis.renderer},e}(jo);ve.registeredClasses.RadarSeries=Bo,ve.registeredClasses.RadarSeriesDataItem=zo;var No=function(t){function e(e){var i=t.call(this,e)||this;return i.className="AxisFillCircular",i.element=i.paper.add("path"),i.radius=m(100),i.applyTheme(),i}return Object(d.d)(e,t),e.prototype.draw=function(){if(t.prototype.draw.call(this),!this.__disabled&&!this.disabled&&this.axis){var e=this.axis.renderer;this.fillPath=e.getPositionRangePath(this.startPosition,this.endPosition,this.radius,S(this.innerRadius)?this.innerRadius:e.innerRadius,this.cornerRadius),this.path=this.fillPath}},Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(t){this.setPropertyValue("cornerRadius",t,!0)},enumerable:!0,configurable:!0}),e}(co);ve.registeredClasses.AxisFillCircular=No;var Uo=function(t){function e(){var e=t.call(this)||this;return e.className="GridCircular",e.pixelPerfect=!1,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),e}(ho);ve.registeredClasses.GridCircular=Uo;var Xo=function(t){function e(){var e=t.call(this)||this;return e.fdx=0,e.fdy=0,e.className="AxisLabelCircular",e.padding(0,0,0,0),e.location=.5,e.locationOnPath=.5,e.radius=0,e.isMeasured=!1,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"relativeRotation",{get:function(){return this.getPropertyValue("relativeRotation")},set:function(t){if(this.setPropertyValue("relativeRotation",t,!0),!S(t)){this.rotation=void 0;var e=this.dataItem;e&&e.component&&e.component.invalidateDataItems()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bent",{get:function(){return this.getPropertyValue("bent")},set:function(t){this.setPropertyValue("bent",t,!0),this.setPropertyValue("wrap",!1),this.setPropertyValue("horizontalCenter","none"),this.setPropertyValue("verticalCenter","none"),t?(this.setPropertyValue("dx",0),this.setPropertyValue("dy",0),this.setPropertyValue("x",0),this.setPropertyValue("y",0),this.setPropertyValue("rotation",0),this.fdx=0,this.fdy=0,this.textAlign="middle"):this.textPathElement&&(this.textPathElement.dispose(),this.textPathElement=void 0)},enumerable:!0,configurable:!0}),e.prototype.pixelRadius=function(t){var e=1;return this.inside&&(e=-1),Ze(this.radius,t)*e},e.prototype.pixelRadiusY=function(t,e){var i=1;this.inside&&(i=-1);var r=this.radius;return k(r)?Ze(r*=e/t,t)*i:Ze(r,e)*i},e.prototype.fixPosition=function(t,e,i,r,n){k(i)||(i=e),k(r)||(r=0),k(n)||(n=0);var a={x:e*B(t),y:i*j(t)};this.invalid&&this.validate();var o=!1,s=this.radius;s instanceof f&&s.value<0?o=!0:s<0&&(o=!0);var l=this.relativeRotation,u=this.pixelRadius(e);if(this.bent){var c={x:(e+u)*B(t+180),y:(i+u*i/e)*j(t+180)};return this.path=Hn(c)+qn(t+180,360,e+u,i+u*i/e),void(this.textPathElement&&this.textPathElement.attr({startOffset:100*this.locationOnPath+"%"}))}if(k(l)){this.horizontalCenter="none",this.verticalCenter="none",t=nt(t,-180,180);var h=this.bbox.width,p=this.bbox.height,d=this.pixelPaddingBottom,m=this.pixelPaddingTop,y=this.pixelPaddingLeft,g=this.pixelPaddingRight;t>90||t<-90?-90==l&&(l=90,h=0):(-90==l&&(p=-p),90==l&&(l=-90,h=-y-g,p=-p-m-d)),this.rotation=l+t+90;var b=j(l)/2,v=B(l)/2,_=this.rotation;this.dx=p*b*j(_)-h*v*B(_),this.dy=-p*b*B(_)-h*v*j(_),this.inside?t>90||t<-90?u-=(d+m)*B(l)+(y+g)*j(l):u+=(d+this.bbox.height+m)*B(l)+(y+g+this.bbox.width)*j(l):u+=(p+d+m)*B(l)+(h+y+g)*j(l),a.x+=B(t)*u,a.y+=j(t)*u*i/e}else this.horizontalCenter="middle",this.verticalCenter="middle",o?(this.dx=0,this.dy=0,a.x=(e+u)*B(t),a.y=(i+u*i/e)*j(t)):(this.dy=this._measuredHeight/2*j(t),this.dx=this._measuredWidth/2*B(t),a.x+=B(t)*u,a.y+=j(t)*u*i/e);a.x+=r,a.y+=n,this.fdx=this.dx,this.fdy=this.dy,this.moveTo(a)},e}(po);ve.registeredClasses.AxisLabelCircular=Xo;var Ho=function(t){function e(){var e=t.call(this)||this;return e.pixelRadiusReal=0,e.layout="none",e.className="AxisRendererCircular",e.isMeasured=!1,e.startAngle=-90,e.endAngle=270,e.useChartAngles=!0,e.radius=m(100),e.isMeasured=!1,e.grid.template.location=0,e.labels.template.location=0,e.labels.template.radius=15,e.ticks.template.location=0,e.ticks.template.pixelPerfect=!1,e.tooltipLocation=0,e.line.strokeOpacity=0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.setAxis=function(e){var i=this;t.prototype.setAxis.call(this,e),e.isMeasured=!1;var r=e.tooltip;r.adapter.add("dx",(function(t,e){var r=vi({x:e.pixelX,y:e.pixelY},i);return i.pixelRadius*Math.cos(Math.atan2(r.y,r.x))-r.x})),r.adapter.add("dy",(function(t,e){var r=vi({x:e.pixelX,y:e.pixelY},i);return i.pixelRadius*Math.sin(Math.atan2(r.y,r.x))-r.y}))},e.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},Object.defineProperty(e.prototype,"axisLength",{get:function(){return 2*Math.PI*this.pixelRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return Je(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){var t=this.chart,e=this.getPropertyValue("innerRadius");if(S(e)){if(e instanceof f&&t){var i=t.mr,r=e.value;e=m(100*(r=Math.max(i*r,i-Math.min(t.plotContainer.innerHeight,t.plotContainer.innerWidth))/i))}}else(e=t.innerRadius)instanceof f&&t&&(e=m(e.value*t.innerRadiusModifyer*100));return e},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useChartAngles",{get:function(){return this.getPropertyValue("useChartAngles")},set:function(t){this.setPropertyValue("useChartAngles",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return Je(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){k(e)||(e=1);var i=this.positionToCoordinate(t),r=this.startAngle+(this.endAngle-this.startAngle)*i/this.axisLength,n=this.pixelRadius,a=this.pixelInnerRadius;if(this.axisRendererY){var o=V(this.axisRendererY.positionToCoordinate(e),0,1/0);return{x:o*B(r),y:o*j(r)}}return{x:B(r)*a+(n-a)*B(r)*e,y:j(r)*a+(n-a)*j(r)*e}},e.prototype.positionToAngle=function(t){var e=this.axis,i=(this.endAngle-this.startAngle)/(e.end-e.start);return L(e.renderer.inversed?this.startAngle+(e.end-t)*i:this.startAngle+(t-e.start)*i,3)},e.prototype.angleToPosition=function(t){var e=this.axis,i=(this.endAngle-this.startAngle)/(e.end-e.start);return L(e.renderer.inversed?e.end-(t-this.startAngle)/i:(t-this.startAngle)/i+e.start,5)},e.prototype.updateAxisLine=function(){var t=this.pixelRadius,e=this.startAngle,i=this.endAngle-e;this.line.path=Hn({x:t*B(e),y:t*j(e)})+qn(e,i,t,t)},e.prototype.updateGridElement=function(t,e,i){var r=this.positionToPoint(e+=(i-e)*t.location);if(k(r.x)&&k(r.y)&&t.element){var n=M*Math.atan2(r.y,r.x),a=Je(S(t.radius)?t.radius:m(100),this.pixelRadius),o=Je(t.innerRadius,this.pixelRadius);t.zIndex=0;var s=Je(k(o)?o:this.innerRadius,this.pixelRadiusReal,!0);t.path=Hn({x:s*B(n),y:s*j(n)})+Wn({x:a*B(n),y:a*j(n)})}this.toggleVisibility(t,e,0,1)},e.prototype.updateTickElement=function(t,e,i){var r=this.positionToPoint(e+=(i-e)*t.location);if(t.element){var n=this.pixelRadius,a=M*Math.atan2(r.y,r.x),o=t.length;t.inside&&(o=-o),t.zIndex=1,t.path=Hn({x:n*B(a),y:n*j(a)})+Wn({x:(n+o)*B(a),y:(n+o)*j(a)})}this.toggleVisibility(t,e,0,1)},e.prototype.updateBullet=function(t,e,i){var r=.5;t instanceof go&&(r=t.location);var n=this.positionToPoint(e+=(i-e)*r),a=this.pixelRadius,o=M*Math.atan2(n.y,n.x);n={x:a*B(o),y:a*j(o)},this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},e.prototype.updateLabelElement=function(t,e,i,r){S(r)||(r=t.location),t.fixPosition(this.positionToAngle(e+=(i-e)*r),this.pixelRadius),t.zIndex=2,this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.fitsToBounds=function(t){return!0},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),e.prototype.getPositionRangePath=function(t,e,i,r,n){var a="";if(k(t)&&k(e)){S(i)||(i=this.radius),t=N(t,this.axis.start),(e=U(e,this.axis.end))<t&&(e=t);var o=Je(i,this.pixelRadius),s=Je(r,this.pixelRadius,!0),l=this.positionToAngle(t);a=Kn(l,this.positionToAngle(e)-l,o,s,o,n)}return a},e.prototype.createGrid=function(){return new Uo},e.prototype.createFill=function(t){return new No(t)},e.prototype.createLabel=function(){return new Xo},e.prototype.pointToPosition=function(t){var e=nt(K(t),this.startAngle,this.endAngle);return this.coordinateToPosition((e-this.startAngle)/360*this.axisLength)},e}(yo);ve.registeredClasses.AxisRendererCircular=Ho;var Wo=function(t){function e(){var e=t.call(this)||this;return e._chart=new Vt,e.pixelRadiusReal=0,e.className="AxisRendererRadial",e.isMeasured=!1,e.startAngle=-90,e.endAngle=270,e.minGridDistance=30,e.gridType="circles",e.axisAngle=-90,e.isMeasured=!1,e.layout="none",e.radius=m(100),e.line.strokeOpacity=0,e.labels.template.horizontalCenter="middle",e._disposers.push(e._chart),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},Object.defineProperty(e.prototype,"axisLength",{get:function(){return this.pixelRadius-this.pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return Je(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){var t=this.chart,e=this.getPropertyValue("innerRadius");if(S(e)){if(e instanceof f&&t){var i=t.mr,r=e.value;e=m(100*(r=Math.max(i*r,i-Math.min(t.plotContainer.innerHeight,t.plotContainer.innerWidth))/i))}}else(e=t.innerRadius)instanceof f&&t&&(e=m(e.value*t.innerRadiusModifyer*100));return e},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return Je(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t,e){var i=V(this.positionToCoordinate(t),0,1/0);return{x:i*B(this.axisAngle),y:i*j(this.axisAngle)}},e.prototype.updateAxisLine=function(){this.line.path=Hn({x:this.pixelInnerRadius*B(this.axisAngle),y:this.pixelInnerRadius*j(this.axisAngle)})+Wn({x:this.pixelRadius*B(this.axisAngle),y:this.pixelRadius*j(this.axisAngle)});var t=this.axis.title;t.valign="none",t.horizontalCenter="middle",t.verticalCenter="bottom",t.y=-this.axisLength/2;var e=90;this.opposite?this.inside||(e=-90):this.inside&&(e=-90),t.rotation=e},e.prototype.updateGridElement=function(t,e,i){var r,n=W(this.positionToPoint(e+=(i-e)*t.location)),a=this.startAngle,o=this.endAngle;if(k(n)&&t.element){var s=this.chart,l=s.xAxes.getIndex(0),u=0,c=s.series.getIndex(0);if(c&&(u=c.dataItems.length),"polygons"==this.gridType&&u>0&&c&&l&&l instanceof Io){var h=l.renderer.grid.template.location,p=l.getAngle(c.dataItems.getIndex(0),"categoryX",h);r=Hn({x:n*B(p),y:n*j(p)});for(var d=1;d<u;d++)r+=Wn({x:n*B(p=l.getAngle(c.dataItems.getIndex(d),"categoryX",h)),y:n*j(p)});r+=Wn({x:n*B(p=l.getAngle(c.dataItems.getIndex(u-1),"categoryX",l.renderer.cellEndLocation)),y:n*j(p)})}else r=Hn({x:n*B(a),y:n*j(a)})+qn(a,o-a,n,n);t.path=r}this.toggleVisibility(t,e,0,1)},e.prototype.updateLabelElement=function(t,e,i,r){S(r)||(r=t.location);var n=this.positionToPoint(e+=(i-e)*r);this.positionItem(t,n),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.updateBaseGridElement=function(){},e.prototype.fitsToBounds=function(t){return!0},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisAngle",{get:function(){return this.getPropertyValue("axisAngle")},set:function(t){this.setPropertyValue("axisAngle",rt(t)),this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridType",{get:function(){return this.chart.xAxes.getIndex(0)instanceof Io?this.getPropertyValue("gridType"):"circles"},set:function(t){this.setPropertyValue("gridType",t,!0)},enumerable:!0,configurable:!0}),e.prototype.getPositionRangePath=function(t,e){var i,r=this.pixelInnerRadius,n=this.axisLength+r,a=V(this.positionToCoordinate(t),r,n),o=V(this.positionToCoordinate(e),r,n),s=this.startAngle,l=this.endAngle-s,u=this.chart,c=u.xAxes.getIndex(0),h=u.series.getIndex(0),p=0;if(h&&(p=h.dataItems.length),"polygons"==this.gridType&&p>0&&h&&c&&c instanceof Io){var d=c.renderer.grid.template.location,f=c.getAngle(h.dataItems.getIndex(0),"categoryX",d);i=Hn({x:o*B(f),y:o*j(f)});for(var m=1;m<p;m++)i+=Wn({x:o*B(f=c.getAngle(h.dataItems.getIndex(m),"categoryX",d)),y:o*j(f)});for(i+=Wn({x:o*B(f=c.getAngle(h.dataItems.getIndex(p-1),"categoryX",c.renderer.cellEndLocation)),y:o*j(f)}),i+=Hn({x:a*B(f),y:a*j(f)}),m=p-1;m>=0;m--)i+=Wn({x:a*B(f=c.getAngle(h.dataItems.getIndex(m),"categoryX",d)),y:a*j(f)})}else i=Kn(s,l,o,a);return i},e.prototype.updateBreakElement=function(t){var e=t.endLine,i=t.fillShape,r=t.startPoint,n=t.endPoint;t.startLine.radius=Math.abs(r.y),e.radius=Math.abs(n.y),i.radius=Math.abs(n.y),i.innerRadius=Math.abs(r.y)},e.prototype.createBreakSprites=function(t){t.startLine=new va,t.endLine=new va,t.fillShape=new va},e.prototype.updateTooltip=function(){if(this.axis){var t=this.axisAngle;t<0&&(t+=360);var e="vertical";(t>45&&t<135||t>225&&t<315)&&(e="horizontal"),this.axis.updateTooltip(e,{x:-4e3,y:-4e3,width:8e3,height:8e3})}},e.prototype.updateTickElement=function(t,e,i){var r=this.positionToPoint(e+=(i-e)*t.location);if(t.element){var n=rt(this.axisAngle+90);t.pixelPerfect=n/90==Math.round(n/90);var a=-t.length;t.inside&&(a*=-1),t.path=Hn({x:0,y:0})+Wn({x:a*B(n),y:a*j(n)})}this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.updateBullet=function(t,e,i){var r=.5;t instanceof go&&(r=t.location);var n=this.positionToPoint(e+=(i-e)*r);this.positionItem(t,n),this.toggleVisibility(t,e,0,1)},e.prototype.positionToCoordinate=function(t){var e=this.axis,i=e.axisFullLength,r=this.pixelInnerRadius;return L(e.renderer.inversed?(e.end-t)*i+r:(t-e.start)*i+r,1)},e.prototype.pointToPosition=function(t){var e=W(t)-this.pixelInnerRadius;return this.coordinateToPosition(e)},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.set(t,null)},enumerable:!0,configurable:!0}),e}(bo);ve.registeredClasses.AxisRendererRadial=Wo;var Yo=function(t){function e(){var e=t.call(this)||this;return e.className="RadarChartDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Fo),Go=function(t){function e(){var e=t.call(this)||this;e._axisRendererX=Ho,e._axisRendererY=Wo,e.innerRadiusModifyer=1,e.className="RadarChart",e.startAngle=-90,e.endAngle=270,e.radius=m(80),e.innerRadius=0;var i=e.plotContainer.createChild(Sn);return i.shouldClone=!1,i.layout="absolute",i.align="center",i.valign="middle",e.seriesContainer.parent=i,e.radarContainer=i,e.bulletsContainer.parent=i,e.axisBulletsContainer=i,e._cursorContainer=i,e.chartContainer.events.on("maxsizechanged",e.invalidate,e,!1),e._bulletMask=i.createChild(jn),e._bulletMask.shouldClone=!1,e._bulletMask.element=e.paper.add("path"),e._bulletMask.opacity=0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Radar chart"))},e.prototype.processAxis=function(e){t.prototype.processAxis.call(this,e);var i=e.renderer;i.gridContainer.parent=i,i.breakContainer.parent=i,e.parent=this.radarContainer,i.toBack()},e.prototype.handleXAxisRangeChange=function(){t.prototype.handleXAxisRangeChange.call(this),se(this.yAxes.iterator(),(function(t){t.invalidate()}))},e.prototype.handleYAxisRangeChange=function(){t.prototype.handleYAxisRangeChange.call(this),se(this.xAxes.iterator(),(function(t){t.invalidate()}))},e.prototype.processConfig=function(e){if(e&&(S(e.cursor)&&!S(e.cursor.type)&&(e.cursor.type="RadarCursor"),S(e.series)&&A(e.series)))for(var i=0,r=e.series.length;i<r;i++)e.series[i].type=e.series[i].type||"RadarSeries";t.prototype.processConfig.call(this,e)},e.prototype.beforeDraw=function(){t.prototype.beforeDraw.call(this);var e=this.plotContainer,i=at(this.startAngle,this.endAngle,1),r={x:0,y:0,width:0,height:0},n=this.innerRadius;if(n instanceof f){var a=n.value,o=Math.min(e.innerWidth/i.width,e.innerHeight/i.height);this.mr=o,a=Math.max(o*a,o-Math.min(e.innerHeight,e.innerWidth))/o,r=at(this.startAngle,this.endAngle,a),this.innerRadiusModifyer=a/n.value,n=m(100*a)}i=J([i,r]);var s=Math.min(e.innerWidth/i.width,e.innerHeight/i.height),l=2*Je(this.radius,s)||0,u=l/2,c=this.startAngle,h=this.endAngle;this._pixelInnerRadius=Je(n,u),this._bulletMask.path=Kn(c,h-c,u,this._pixelInnerRadius),se(this.xAxes.iterator(),(function(t){t.renderer.useChartAngles&&(t.renderer.startAngle=c,t.renderer.endAngle=h),t.width=l,t.height=l,t.renderer.pixelRadiusReal=u})),se(this.yAxes.iterator(),(function(t){t.renderer.startAngle=c,t.renderer.endAngle=h,t.width=l,t.height=l,t.renderer.pixelRadiusReal=u}));var p=this.cursor;p&&(p.width=l,p.height=l,p.startAngle=c,p.endAngle=h),this.radarContainer.definedBBox={x:u*i.x,y:u*i.y,width:u*i.width,height:u*i.height},this.radarContainer.validatePosition()},e.prototype.createSeries=function(){return new Bo},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),e.prototype.updateXAxis=function(t){t&&t.processRenderer()},e.prototype.updateYAxis=function(t){t&&t.processRenderer()},e}(Mo);ve.registeredClasses.RadarChart=Go;var qo,Ko=function(t){function e(){var e=t.call(this)||this;e._axis=new Vt,e.className="ClockHand";var i=new _r;e.fill=i.getFor("alternativeBackground"),e.stroke=e.fill;var r=new jn;r.radius=5,e.pin=r,e.isMeasured=!1,e.startWidth=5,e.endWidth=1,e.width=m(100),e.height=m(100),e.radius=m(100),e.innerRadius=m(0);var n=new ma;return e.hand=n,e._disposers.push(e._axis),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validate=function(){t.prototype.validate.call(this);var e=this.hand;e.width=this.pixelWidth;var i=Math.max(this.startWidth,this.endWidth);if(e.height=i,e.leftSide=m(this.startWidth/i*100),e.rightSide=m(this.endWidth/i*100),this.axis){var r=this.axis.renderer,n=Je(this.innerRadius,r.pixelRadius),a=Je(this.radius,r.pixelRadius);e.x=n,e.y=-i/2,e.width=a-n}},Object.defineProperty(e.prototype,"pin",{get:function(){return this._pin},set:function(t){this._pin&&this.removeDispose(this._pin),t&&(this._pin=t,t.parent=this,this._disposers.push(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hand",{get:function(){return this._hand},set:function(t){this._hand&&this.removeDispose(this._hand),t&&(this._hand=t,t.parent=this,this._disposers.push(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWidth",{get:function(){return this.getPropertyValue("startWidth")},set:function(t){this.setPropertyValue("startWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endWidth",{get:function(){return this.getPropertyValue("endWidth")},set:function(t){this.setPropertyValue("endWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationDirection",{get:function(){return this.getPropertyValue("rotationDirection")},set:function(t){this.setPropertyValue("rotationDirection",t)},enumerable:!0,configurable:!0}),e.prototype.showValue=function(t,e,i){if(this._value=t,null!=t&&(k(e)||(e=0),this.axis)){var r=this.axis.renderer.positionToAngle(this.axis.anyToPosition(t)),n=this.rotation;"clockWise"==this.rotationDirection&&r<n&&(this.rotation=n-360),"counterClockWise"==this.rotationDirection&&r>n&&(this.rotation=n+360),this.animate({property:"rotation",to:r},e,i)}},Object.defineProperty(e.prototype,"currentPosition",{get:function(){if(this.axis)return this.axis.renderer.angleToPosition(this.rotation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this.showValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axis",{get:function(){return this._axis.get()},set:function(t){if(this.axis!=t&&this._axis.set(t,new Rt([t.events.on("datavalidated",this.updateValue,this,!1),t.events.on("datarangechanged",this.updateValue,this,!1),t.events.on("dataitemsvalidated",this.updateValue,this,!1),t.events.on("propertychanged",this.invalidate,this,!1)])),t){var e=t.chart;e&&(this.rotation=e.startAngle)}this.parent=t.renderer,this.zIndex=5},enumerable:!0,configurable:!0}),e.prototype.updateValue=function(){this.value=this.value},e.prototype.processConfig=function(e){e&&S(e.axis)&&C(e.axis)&&this.map.hasKey(e.axis)&&(e.axis=this.map.getKey(e.axis)),t.prototype.processConfig.call(this,e)},e}(Sn);ve.registeredClasses.ClockHand=Ko,qo=Yo,Object(d.d)((function(){var t=qo.call(this)||this;return t.className="GaugeChartDataItem",t.applyTheme(),t}),qo);var Zo=function(t){function e(){var e=t.call(this)||this;return e.className="GaugeChart",e.startAngle=180,e.endAngle=360,e.hands=new Pe(new Ko),e.hands.events.on("inserted",e.processHand,e,!1),e._disposers.push(new Se(e.hands)),e._disposers.push(e.hands.template),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Gauge chart"))},e.prototype.processHand=function(t){var e=t.newValue;e.axis||(e.axis=this.xAxes.getIndex(0))},e.prototype.configOrder=function(e,i){return e==i?0:"hands"==e?1:"hands"==i?-1:t.prototype.configOrder.call(this,e,i)},e}(Go);ve.registeredClasses.GaugeChart=Zo;var Jo=function(t){function e(){var e=t.call(this)||this;return e.className="PercentSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.uidAttr=function(){return this.slice.uidAttr()},e.prototype.hide=function(e,i,r,n){return n||(n=["value"]),t.prototype.hide.call(this,e,i,0,n)},e.prototype.setVisibility=function(e,i){i||this.setWorkingValue("value",e?this.values.value.value:0,0,0),t.prototype.setVisibility.call(this,e,i)},e.prototype.show=function(e,i,r){return r||(r=["value"]),t.prototype.show.call(this,e,i,r)},Object.defineProperty(e.prototype,"category",{get:function(){return this.properties.category},set:function(t){this.setProperty("category",t)},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){this.component.createLegendMarker(t,this)},Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,t.label&&(t.label.dataItem=this),t.valueLabel&&(t.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tick",{get:function(){var t=this;if(!this._tick){var e=this.component.ticks.create();this._tick=e,this.addSprite(e),this._disposers.push(e),e.parent=this.component.ticksContainer,this._disposers.push(new Lt((function(){t.component&&t.component.ticks.removeValue(e)}))),e.visible=this.visible}return this._tick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){var t=this;if(!this._label){var e=this.component.labels.create();this.addSprite(e),this._label=e,this._disposers.push(e),e.parent=this.component.labelsContainer,this._disposers.push(new Lt((function(){t.component&&t.component.labels.removeValue(e)}))),e.visible=this.visible}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slice",{get:function(){var t=this;if(!this._slice){var e=this.component,i=e.slices.create();this.addSprite(i),this._slice=i,this._disposers.push(i),i.parent=e.slicesContainer,this._disposers.push(new Lt((function(){e.slices.removeValue(i)}))),i.visible=this.visible,e.itemsFocusable()?(this.component.role="menu",i.role="menuitem",i.focusable=!0):(this.component.role="list",i.role="listitem",i.focusable=!1),i.focusable&&(i.events.on("focus",(function(r){i.readerTitle=e.populateString(e.itemReaderText,t)}),void 0,!1),i.events.on("blur",(function(t){i.readerTitle=""}),void 0,!1)),i.hoverable&&(i.events.on("over",(function(r){i.readerTitle=e.populateString(e.itemReaderText,t)}),void 0,!1),i.events.on("out",(function(t){i.readerTitle=""}),void 0,!1))}return this._slice},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenInLegend",{get:function(){return this.properties.hiddenInLegend},set:function(t){this.setProperty("hiddenInLegend",t)},enumerable:!0,configurable:!0}),e}(eo),$o=function(t){function e(){var e=t.call(this)||this;e.className="PercentSeries",e._addAllDataItems=!1,e.colors=new za,e.colors.step=1,e.isMeasured=!0,e.calculatePercent=!0;var i=e.createChild(Sn);i.shouldClone=!1,i.isMeasured=!1,e.slicesContainer=i;var r=e.createChild(Sn);r.shouldClone=!1,r.isMeasured=!1,r.layout="none",e.ticksContainer=r;var n=e.createChild(Sn);return n.shouldClone=!1,n.isMeasured=!1,n.layout="none",e.labelsContainer=n,e.alignLabels=!1,e.bulletsContainer.toFront(),e.skipFocusThreshold=50,e.defaultState.transitionEasing=ji,e.itemReaderText="{category}: {value.percent.formatNumber('#.#')}%",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createSlice=function(){return new _n},e.prototype.createTick=function(){return new fo},e.prototype.createLabel=function(){return new Ln},Object.defineProperty(e.prototype,"slices",{get:function(){if(!this._slices){var t=this.createSlice();t.applyOnClones=!0,this._disposers.push(t),this.initSlice(t),this._slices=new Pe(t),this._disposers.push(new Se(this._slices))}return this._slices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticks",{get:function(){if(!this._ticks){var t=this.createTick();t.applyOnClones=!0,this._disposers.push(t),this.initTick(t),this._ticks=new Pe(t),this._disposers.push(new Se(this._ticks))}return this._ticks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labels",{get:function(){if(!this._labels){var t=this.createLabel();t.applyOnClones=!0,this._disposers.push(t),this.initLabel(t),this._labels=new Pe(t),this._disposers.push(new Se(this._labels))}return this._labels},enumerable:!0,configurable:!0}),e.prototype.createDataItem=function(){return new Jo},e.prototype.initSlice=function(t){},e.prototype.initLabel=function(t){t.text="{category}: {value.percent.formatNumber('#.0')}%",t.isMeasured=!1,t.padding(5,5,5,5)},e.prototype.initTick=function(t){},e.prototype.validateDataItems=function(){this.colors.reset(),this.patterns&&this.patterns.reset(),t.prototype.validateDataItems.call(this)},e.prototype.validateDataElement=function(e){var i=e.slice;i&&(null==i.fill?this.patterns?(S(i.stroke)||(i.stroke=this.colors.next()),i.fill=this.patterns.next(),S(i.fillOpacity)&&(i.fill.backgroundOpacity=i.fillOpacity),i.stroke instanceof Ne&&(i.fill.stroke=i.stroke,i.fill.fill=i.stroke)):i.fill=this.colors.next():this.colors.currentStep+=this.colors.step,null==i.stroke&&(i.stroke=i.fill)),t.prototype.validateDataElement.call(this,e),i&&e.bullets.each((function(t,e){null==e.fill&&(e.fill=i.fill),null==e.stroke&&(e.stroke=i.stroke)})),this.updateLegendValue(e)},e.prototype.validateData=function(){t.prototype.validateData.call(this),this.chart&&this.chart.feedLegend()},e.prototype.arrangeLabels=function(t){for(var e=0,i=t.length;e<i;e++){var r=t[e].label;if(r){r.invalid&&r.validate();var n=r.measuredHeight;r.visible||(n=0),r.pixelY-n/2<-this.maxHeight/2&&(r.y=-this.maxHeight/2+n/2);var a=this.getNextLabel(e+1,t),o=r.pixelY+n;a&&a.y<o&&(a.y=o)}}},e.prototype.arrangeLabels2=function(t){for(var e=this.maxHeight/2,i=t.length-1;i>=0;i--){var r=t[i].label;if(r){r.invalid&&r.validate();var n=r.measuredHeight;r.visible||(n=0),i==t.length-1&&(e+=n/2),r.pixelY+n>e&&(r.y=e-n,e=r.y)}}},e.prototype.getNextLabel=function(t,e){if(e.length>=t){var i=e[t];if(i)return i.label&&i.visible?i.label:this.getNextLabel(t+1,e)}},Object.defineProperty(e.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(t){this.setPropertyValue("colors",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(t){this.setPropertyValue("patterns",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t,e){se(t.children.iterator(),(function(i){var r=e.slice;i.defaultState.properties.fill=r.fill,i.defaultState.properties.stroke=r.stroke,i.defaultState.properties.fillOpacity=r.fillOpacity,i.defaultState.properties.strokeOpacity=r.strokeOpacity,i.fill=r.fill,i.stroke=r.stroke,i.fillOpacity=r.fillOpacity,i.strokeOpacity=r.strokeOpacity,null==i.fill&&(i.__disabled=!0);var n=t.dataItem;n.color=r.fill,n.colorOrig=r.fill,i.addDisposer(r.events.on("propertychanged",(function(t){"fill"==t.property&&(i.__disabled=!1,i.isActive||(i.fill=r.fill),i.defaultState.properties.fill=r.fill,n.color=r.fill,n.colorOrig=r.fill),"stroke"==t.property&&(i.isActive||(i.stroke=r.stroke),i.defaultState.properties.stroke=r.stroke)}),void 0,!1))}))},e.prototype.handleSliceScale=function(t){var e=this;se(t.target.dataItem.bullets.iterator(),(function(t){e.positionBullet(t[1])}))},e.prototype.handleSliceMove=function(t){},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.slices.template.copyFrom(e.slices.template),this.labels.template.copyFrom(e.labels.template),this.ticks.template.copyFrom(e.ticks.template),this.colors=e.colors.clone()},Object.defineProperty(e.prototype,"alignLabels",{get:function(){return this.getPropertyValue("alignLabels")},set:function(t){this.setAlignLabels(t)},enumerable:!0,configurable:!0}),e.prototype.setAlignLabels=function(t){this.setPropertyValue("alignLabels",t,!0)},Object.defineProperty(e.prototype,"ignoreZeroValues",{get:function(){return this.getPropertyValue("ignoreZeroValues")},set:function(t){this.setPropertyValue("ignoreZeroValues",t,!0)},enumerable:!0,configurable:!0}),e.prototype.updateLegendValue=function(t){if(t){var e=t.legendDataItem,i=t.legendSettings;e&&i&&i&&(i.labelText&&(e.label.text=i.labelText),i.itemLabelText&&(e.label.text=i.itemLabelText),i.valueText&&(e.valueLabel.text=i.valueText),i.itemValueText&&(e.valueLabel.text=i.itemValueText))}},e}(io);ve.registeredClasses.PercentSeries=$o,ve.registeredClasses.PercentSeriesDataItem=Jo,Dn.push({relevant:Fn.maybeXS,state:function(t,e){if(t instanceof $o){var i=t.states.create(e);return t.labels.template.states.create(e).properties.disabled=!0,t.ticks.template.states.create(e).properties.disabled=!0,i}return null}});var Qo=function(t){function e(){var e=t.call(this)||this;return e.className="PercentChartDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(ro),ts=function(t){function e(){var e=t.call(this)||this;return e.className="PercentChart",e.align="none",e.valign="none",e.chartContainer.minHeight=50,e.chartContainer.minWidth=50,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validateData=function(){t.prototype.validateData.call(this),this.feedLegend()},e.prototype.feedLegend=function(){var t=this.legend;if(t){var e=[];se(this.series.iterator(),(function(t){t.hiddenInLegend||se(t.dataItems.iterator(),(function(i){i.hiddenInLegend||(e.push(i),i.legendSettings||(i.legendSettings=t.legendSettings))}))})),t.data=e,t.dataFields.name="category"}},e.prototype.createSeries=function(){return new $o},e.prototype.setLegend=function(e){t.prototype.setLegend.call(this,e),e&&(e.labels.template.text="{category}",e.valueLabels.template.text="{value.percent.formatNumber('#.0')}%",e.itemContainers.template.events.on("over",(function(t){var e=t.target.dataItem.dataContext;if(e.visible&&!e.isHiding){var i=e.slice;i.dispatchImmediately("over"),i.isHover=!0,i.interactions.isRealHover=!0}})),e.itemContainers.template.events.on("out",(function(t){var e=t.target.dataItem.dataContext.slice;e.dispatchImmediately("out"),e.isHover=!1})))},e}(no);ve.registeredClasses.PercentChart=ts,ve.registeredClasses.PercentChartDataItem=Qo;var es=function(t){function e(){var e=t.call(this)||this;return e._label=new Vt,e._slice=new Vt,e.className="PieTick",e.element=e.paper.add("polyline"),e._disposers.push(e._label),e._disposers.push(e._slice),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.slice,i=this.label;if(e&&e.radius>0&&i&&i.text){var r=e.dx+e.slice.dx+e.pixelX+e.ix*e.radius*e.scale,n=e.dy+e.slice.dy+e.pixelY+e.iy*e.radiusY*e.scale,a=void 0,o=void 0,s=void 0,l=void 0;if(e.dataItem.component.alignLabels)a=i.pixelX-this.length,s=i.pixelX,l=o=i.pixelY,"right"==i.horizontalCenter&&(s=(a+=2*this.length)-this.length);else{var u=i.pixelRadius(e.radius);s=a=r+u*e.ix,l=o=n+u*e.iy}this.element.attr({points:[r,n,a,o,s,l]})}},Object.defineProperty(e.prototype,"slice",{get:function(){return this._slice.get()},set:function(t){this._slice.set(t,new Rt([t.events.on("transformed",this.invalidate,this),t.events.on("validated",this.invalidate,this)]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label.get()},set:function(t){this._label.set(t,t.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),e}(fo);ve.registeredClasses.PieTick=es;var is=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeriesDataItem",e.values.radiusValue={},e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"radiusValue",{get:function(){return this.values.radiusValue.value},set:function(t){this.setValue("radiusValue",t)},enumerable:!0,configurable:!0}),e.prototype.hide=function(e,i,r,n){return t.prototype.hide.call(this,e,i,0,["value","radiusValue"])},e.prototype.show=function(e,i,r){return t.prototype.show.call(this,e,i,["value","radiusValue"])},e}(Jo),rs=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeries",e.alignLabels=!0,e.layout="none",e.labels.template.radius=m(5),e.addDisposer(e.labels.template.events.on("enabled",e.invalidate,e,!1)),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createSlice=function(){return new na},e.prototype.createTick=function(){return new es},e.prototype.createLabel=function(){return new Xo},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Pie Slice Series"))},e.prototype.createDataItem=function(){return new is},e.prototype.initSlice=function(t){t.isMeasured=!1,t.defaultState.properties.scale=1,t.observe("scale",this.handleSliceScale,this),t.observe(["dx","dy","x","y","shiftRadius"],this.handleSliceMove,this),t.tooltipText="{category}: {value.percent.formatNumber('#.#')}% ({value.value})",t.states.create("hover").properties.scale=1.05,t.defaultState.properties.shiftRadius=0,t.togglable=!0,t.events.on("toggled",(function(t){t.target.hideTooltip()})),t.states.create("active").properties.shiftRadius=.1},e.prototype.validate=function(){this._leftItems=[],this._rightItems=[],this._currentStartAngle=this.startAngle,this._arcRect=at(this.startAngle,this.endAngle),this._maxRadiusPercent=0;for(var e=this.startIndex;e<this.endIndex;e++){var i=this.dataItems.getIndex(e).values.radiusValue.percent;i>this._maxRadiusPercent&&(this._maxRadiusPercent=i)}t.prototype.validate.call(this),this.alignLabels&&(this.startAngle>this.endAngle?this._rightItems.reverse():this._leftItems.reverse(),this._rightItems.sort((function(t,e){var i=(t.slice.middleAngle+360)%360,r=(e.slice.middleAngle+360)%360;return i>270&&(i-=360),r>270&&(r-=360),i<r?-1:1})),this._leftItems.sort((function(t,e){return(t.slice.middleAngle+360)%360<(e.slice.middleAngle+360)%360?1:-1})),this.arrangeLabels(this._rightItems),this.arrangeLabels2(this._rightItems),this.arrangeLabels(this._leftItems),this.arrangeLabels2(this._leftItems))},e.prototype.validateDataElement=function(e){if(this.pixelRadius>0){e.__disabled=!(!this.ignoreZeroValues||0!=e.value);var i=e.slice;if(i.radius=this.pixelRadius,k(e.radiusValue)&&(i.radius=this.pixelInnerRadius+(this.pixelRadius-this.pixelInnerRadius)*e.values.radiusValue.percent/this._maxRadiusPercent),i.innerRadius instanceof f||(i.innerRadius=this.pixelInnerRadius),i.startAngle=this._currentStartAngle,i.arc=Math.abs(e.values.value.percent)*(this.endAngle-this.startAngle)/100,!this.labels.template.disabled){var r=e.label,n=e.tick;n.slice=i,n.label=r;var a=(i.middleAngle+360)%360;if(this.alignLabels){var o=r.pixelRadius(i.radius),s=n.length+o;r.dx=0,r.dy=0,r.verticalCenter="middle";var l=this._arcRect;a>270||a<=90?(s+=(l.width+l.x)*this.pixelRadius,r.horizontalCenter="left",this._rightItems.push(e)):(s-=l.x*this.pixelRadius,r.horizontalCenter="right",this._leftItems.push(e),s*=-1),r.moveTo({x:s,y:i.iy*(i.radius+n.length+o)})}else{var u=i.depth;k(u)||(u=0),r.fixPosition(i.middleAngle,i.radius,i.radiusY,0,-u)}}this._currentStartAngle+=i.arc,t.prototype.validateDataElement.call(this,e)}},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return this._pixelRadius},set:function(t){this._pixelRadius!=t&&(this._pixelRadius=t,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},set:function(t){this._pixelInnerRadius!=t&&(this._pixelInnerRadius=t,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){var t=this.getPropertyValue("startAngle");return k(t)?t:this._startAngleInternal},set:function(t){this.setPropertyValue("startAngle",rt(t),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){var t=this.getPropertyValue("endAngle");return k(t)?t:this._endAngleInternal},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e);var i=e.dataItem.slice,r=e.locationX;k(r)||(r=.5);var n=e.locationY;k(n)||(n=1);var a=i.startAngle+i.arc*r;e.x=n*i.radius*B(a),e.y=n*i.radiusY*j(a)},e.prototype.handleSliceMove=function(t){if(!this.alignLabels){var e=t.target,i=e.dataItem;if(i){var r=i.label;r&&(r.dx=r.fdx+e.dx+e.pixelX,r.dy=r.fdy+e.dy+e.pixelY)}}},Object.defineProperty(e.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;var t=this.chart;return t?at(t.startAngle,t.endAngle,this.pixelRadius):at(this.startAngle,this.endAngle,this.pixelRadius)},enumerable:!0,configurable:!0}),e}($o);ve.registeredClasses.PieSeries=rs,ve.registeredClasses.PieSeriesDataItem=is;var ns=function(t){function e(){var e=t.call(this)||this;return e.className="PieChartDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Qo),as=function(t){function e(){var e=t.call(this)||this;e.className="PieChart",e.innerRadius=0,e.radius=m(80),e.align="none",e.valign="none",e.startAngle=-90,e.endAngle=270;var i=e.seriesContainer;return i.isMeasured=!0,i.valign="middle",i.align="center",i.layout="absolute",i.width=void 0,i.height=void 0,e.chartContainer.minHeight=50,e.chartContainer.minWidth=50,e.chartContainer.events.on("maxsizechanged",e.updateRadius,e,!1),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Pie chart"))},e.prototype.validateLayout=function(){t.prototype.validateLayout.call(this),this.updateRadius()},e.prototype.handleSeriesAdded=function(e){t.prototype.handleSeriesAdded.call(this,e),this._chartPixelRadius=void 0,this.updateSeriesAngles()},e.prototype.updateSeriesAngles=function(){var t=this;this.series.each((function(e){e._startAngleInternal=t.startAngle,e._endAngleInternal=t.endAngle}))},e.prototype.updateRadius=function(){var t=this.chartContainer,e=at(this.startAngle,this.endAngle,1),i={x:0,y:0,width:0,height:0},r=this.innerRadius;r instanceof f&&(i=at(this.startAngle,this.endAngle,r.value)),e=J([e,i]);var n=Math.min(t.innerWidth/e.width,t.innerHeight/e.height);k(n)||(n=0);var a=Je(this.radius,n),o=Je(this.innerRadius,n),s=(a-o)/this.series.length;a==this._chartPixelRadius&&o==this._chartPixelInnerRadius||(this._chartPixelRadius=a,this._chartPixelInnerRadius=o,se(ce(this.series.iterator()),(function(t){var e=t[0],i=t[1],r=o+Je(i.radius,a-o),n=o+Je(i.innerRadius,a-o);k(r)||(r=o+s*(e+1)),k(n)||(n=o+s*e),i.pixelRadius=r,i.pixelInnerRadius=n})),this.seriesContainer.definedBBox={x:a*e.x,y:a*e.y,width:a*e.width,height:a*e.height},this.seriesContainer.invalidateLayout(),this.bulletsContainer.x=this.seriesContainer.x,this.bulletsContainer.y=this.seriesContainer.y)},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),e.prototype.createSeries=function(){return new rs},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),e}(ts);ve.registeredClasses.PieChart=as,ve.registeredClasses.PieChartDataItem=ns;var os=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeries3DDataItem",e.values.depthValue={},e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"depthValue",{get:function(){return this.values.depthValue.value},set:function(t){this.setValue("depthValue",t)},enumerable:!0,configurable:!0}),e}(is),ss=function(t){function e(){var e=t.call(this)||this;return e.className="PieSeries3D",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createDataItem=function(){return new os},e.prototype.createSlice=function(){return new Oa},e.prototype.validateDataElement=function(e){var i=e.slice,r=this.depth;k(r)||(r=this.chart.depth);var n=e.values.depthValue.percent;k(n)||(n=100),i.depth=n*r/100;var a=this.angle;k(a)||(a=this.chart.angle),i.angle=a,t.prototype.validateDataElement.call(this,e)},e.prototype.validate=function(){t.prototype.validate.call(this);for(var e=this._workingStartIndex;e<this._workingEndIndex;e++){var i=this.dataItems.getIndex(e).slice,r=i.startAngle;r>=-90&&r<90?i.toFront():r>=90&&i.toBack()}},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t)},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e),e.y=e.pixelY-e.dataItem.slice.depth},e}(rs);ve.registeredClasses.PieSeries3D=ss,ve.registeredClasses.PieSeries3DDataItem=os,function(t){Object(d.d)((function(){var e=t.call(this)||this;return e.className="PieChart3DDataItem",e.applyTheme(),e}),t)}(ns);var ls=function(t){function e(){var e=t.call(this)||this;return e.className="PieChart3D",e.depth=20,e.angle=10,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){t=V(t,0,90),this.setPropertyValue("angle",t)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),e.prototype.createSeries=function(){return new ss},e}(as);ve.registeredClasses.PieChart3D=ls;var us=function(t){function e(){var e=t.call(this)||this;return e.className="SlicedChartDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Qo),cs=function(t){function e(){var e=t.call(this)||this;return e.className="SlicedChart",e.seriesContainer.layout="horizontal",e.padding(15,15,15,15),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Sliced chart"))},e.prototype.validate=function(){t.prototype.validate.call(this)},e}(ts);ve.registeredClasses.SlicedChart=cs,ve.registeredClasses.SlicedChartDataItem=us;var hs=function(t){function e(){var e=t.call(this)||this;return e.legendSettings=new Qa,e.className="FlowDiagramNode",e.isMeasured=!1,new _r,e.draggable=!0,e.inert=!0,e.setStateOnChildren=!0,e.events.on("positionchanged",e.invalidateLinks,e,!1),e.events.on("sizechanged",e.invalidateLinks,e,!1),e}return Object(d.d)(e,t),e.prototype.handleHit=function(t){this.isHidden||this.isHiding?this.show():this.hide()},e.prototype.show=function(e){var i=t.prototype.show.call(this,e);return this.outgoingDataItems.each((function(t){(!t.toNode||t.toNode&&!t.toNode.isHidden)&&t.setWorkingValue("value",t.getValue("value"),e)})),this.incomingDataItems.each((function(t){(!t.fromNode||t.fromNode&&!t.fromNode.isHidden)&&t.setWorkingValue("value",t.getValue("value"),e)})),i},e.prototype.hide=function(e){var i=t.prototype.hide.call(this,e);return this.outgoingDataItems.each((function(t){t.setWorkingValue("value",0,e)})),this.incomingDataItems.each((function(t){t.setWorkingValue("value",0,e)})),i},e.prototype.validate=function(){this.isDisposed()||(t.prototype.validate.call(this),this.invalidateLinks())},e.prototype.invalidateLinks=function(){var t=this;this.outgoingDataItems.each((function(e){var i=e.link;if("fromNode"==i.colorMode&&(i.fill=i.dataItem.fromNode.color),"gradient"==i.colorMode){i.fill=i.gradient,i.stroke=i.gradient;var r=i.gradient.stops.getIndex(0);r&&(r.color=t.color,i.gradient.validate())}})),this.incomingDataItems.each((function(e){var i=e.link;if("toNode"==i.colorMode&&(i.fill=i.dataItem.toNode.color),"gradient"==i.colorMode){i.fill=i.gradient,i.stroke=i.gradient;var r=i.gradient.stops.getIndex(1);r&&(r.color=t.color,i.gradient.validate())}}))},Object.defineProperty(e.prototype,"incomingDataItems",{get:function(){var t=this;if(!this._incomingDataItems){var e=new Te;e.events.on("inserted",(function(){t._incomingSorted="name"==t.chart.sortBy?le(t._incomingDataItems.iterator(),(function(t,e){return de(t.fromName,e.fromName)})):"value"==t.chart.sortBy?le(t._incomingDataItems.iterator(),(function(t,e){return De(Oe(t.value,e.value))})):t._incomingDataItems.iterator()}),void 0,!1),this._incomingDataItems=e}return this._incomingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outgoingDataItems",{get:function(){var t=this;if(!this._outgoingDataItems){var e=new Te;e.events.on("inserted",(function(){t._outgoingSorted="name"==t.chart.sortBy?le(t._outgoingDataItems.iterator(),(function(t,e){return de(t.fromName,e.fromName)})):"value"==t.chart.sortBy?le(t._outgoingDataItems.iterator(),(function(t,e){return De(Oe(t.value,e.value))})):t._outgoingDataItems.iterator()}),void 0,!1),this._outgoingDataItems=e}return this._outgoingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(t){this.setPropertyValue("name",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this.getPropertyValue("total")},set:function(t){this.setPropertyValue("total",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalIncoming",{get:function(){return this.getPropertyValue("totalIncoming")},set:function(t){this.setPropertyValue("totalIncoming",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalOutgoing",{get:function(){return this.getPropertyValue("totalOutgoing")},set:function(t){this.setPropertyValue("totalOutgoing",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.getPropertyValue("color")},set:function(t){this.setColorProperty("color",t),this._background&&(this._background.fill=t),this.fill=t},enumerable:!0,configurable:!0}),e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var r=t.createChild(Rn);r.shouldClone=!1,ie(this,r,vn),r.stroke=this.fill,r.copyFrom(this),r.padding(0,0,0,0),r.width=e,r.height=i;var n=t.dataItem;n.color=r.fill,n.colorOrig=r.fill},Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),e}(Sn);ve.registeredClasses.FlowDiagramNode=hs;var ps=function(t){function e(){var e=t.call(this)||this;e.className="FlowDiagramLink";var i=new _r;return e.maskBullets=!1,e.colorMode="fromNode",e.layout="none",e.isMeasured=!1,e.startAngle=0,e.endAngle=0,e.strokeOpacity=0,e.verticalCenter="none",e.horizontalCenter="none",e.tooltipText="{fromName}\u2192{toName}:{value.value}",e.tooltipLocation=.5,e.link=e.createChild(_n),e.link.shouldClone=!1,e.link.setElement(e.paper.add("path")),e.link.isMeasured=!1,e.fillOpacity=.2,e.fill=i.getFor("alternativeBackground"),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.positionBullets=function(){var t=this;se(this.bullets.iterator(),(function(e){e.parent=t.bulletsContainer,e.maxWidth=t.maxWidth,e.maxHeight=t.maxHeight,t.positionBullet(e)}))},Object.defineProperty(e.prototype,"bulletsContainer",{get:function(){if(!this._bulletsContainer){var t=this.createChild(Sn);t.shouldClone=!1,t.layout="none",this._bulletsContainer=t}return this._bulletsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bulletsMask",{get:function(){if(!this._bulletsMask){var t=this.createChild(_n);t.shouldClone=!1,t.setElement(this.paper.add("path")),t.isMeasured=!1,this._bulletsMask=t}return this._bulletsMask},enumerable:!0,configurable:!0}),e.prototype.positionBullet=function(t){var e=t.locationX;k(e)||(e=t.locationY),k(e)||(e=.5);var i,r=this.middleLine.positionToPoint(e);t.moveTo(r),t.dataItem&&(i=t.dataItem.dataContext[t.propertyFields.rotation]),k(i)||(i=r.angle),t.rotation=i},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorMode",{get:function(){return this.getPropertyValue("colorMode")},set:function(t){if("gradient"==t){var e=this.fill;this.gradient.stops.clear(),e instanceof Ne&&(this.gradient.addColor(e),this.gradient.addColor(e)),this.fill=this.gradient,this.stroke=this.gradient}this.setPropertyValue("colorMode",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(t){this.setPropertyValue("maskBullets",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(t){this.setPropertyValue("tooltipLocation",t,!0)},enumerable:!0,configurable:!0}),e.prototype.setFill=function(e){t.prototype.setFill.call(this,e);var i=this._gradient;i&&e instanceof Ne&&(i.stops.clear(),i.addColor(e),i.addColor(e))},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"bullets",{get:function(){var t=this;return this._bullets||(this._bullets=new Pe(new Ja),this._disposers.push(new Se(this._bullets)),this._disposers.push(this._bullets.template),this._bullets.events.on("inserted",(function(e){e.newValue.events.on("propertychanged",(function(e){"locationX"!=e.property&&"locationY"!=e.property||t.positionBullet(e.target)}),void 0,!1)}),void 0,!1)),this._bullets},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.bullets.copyFrom(e.bullets);var i=this.middleLine;i&&(i instanceof Nn&&e.middleLine instanceof Nn&&i.copyFrom(e.middleLine),i instanceof Qn&&e.middleLine instanceof Qn&&i.copyFrom(e.middleLine)),this.link.copyFrom(e.link)},e.prototype.getTooltipX=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).x},e.prototype.getTooltipY=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).y},Object.defineProperty(e.prototype,"gradient",{get:function(){return this._gradient||(this._gradient=new Zr),this._gradient},enumerable:!0,configurable:!0}),e}(Sn);ve.registeredClasses.FlowDiagramLink=ps;var ds=function(t){function e(){var e=t.call(this)||this;return e.className="FlowDiagramDataItem",e.values.value={},e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"fromName",{get:function(){return this.properties.fromName},set:function(t){this.setProperty("fromName",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toName",{get:function(){return this.properties.toName},set:function(t){this.setProperty("toName",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.properties.color},set:function(t){this.setProperty("color",Xe(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"link",{get:function(){var t=this;if(!this._link){var e=this.component.links.create();this._link=e,this.addSprite(e),this._disposers.push(new Lt((function(){t.component&&t.component.links.removeValue(e)})))}return this._link},enumerable:!0,configurable:!0}),e}(Ka),fs=function(t){function e(){var e=t.call(this)||this;e.colors=new za,e.className="FlowDiagram",e.nodePadding=20,e.sortBy="none",e.sequencedInterpolation=!0,e.colors.step=2,e.minNodeSize=.02;var i=e.chartContainer.createChild(Sn);i.shouldClone=!1,i.layout="none",i.isMeasured=!1,e.linksContainer=i;var r=e.chartContainer.createChild(Sn);return r.shouldClone=!1,r.layout="none",r.isMeasured=!1,e.nodesContainer=r,e.dataItem=e.createDataItem(),e.dataItem.component=e,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.dataItem.dispose()},e.prototype.validateData=function(){var e=this;0==this._parseDataFrom&&this.nodes.clear(),this.sortNodes(),this.colors.reset(),t.prototype.validateData.call(this);var i,r,n=0,a=0;se(this.dataItems.iterator(),(function(t){var o=t.fromName;o&&((s=e.nodes.getKey(o))||((s=e.nodes.create(o)).name=o,s.chart=e,s.dataItem=t),t.fromNode=s,t.fromNode.outgoingDataItems.push(t));var s,l=t.toName;if(l&&((s=e.nodes.getKey(l))||((s=e.nodes.create(l)).name=l,s.chart=e,s.dataItem=t),t.toNode=s,t.toNode.incomingDataItems.push(t)),!t.fromNode){var u=new Ca;u.opacities=[0,1],t.link.strokeModifier=u}if(!t.toNode){var c=new Ca;c.opacities=[1,0],t.link.strokeModifier=c}var h=t.value;k(h)&&(n+=h,a++,(i>h||!k(i))&&(i=h),(r<h||!k(r))&&(r=h))}));var o="value";this.dataItem.setCalculatedValue(o,r,"high"),this.dataItem.setCalculatedValue(o,i,"low"),this.dataItem.setCalculatedValue(o,n,"sum"),this.dataItem.setCalculatedValue(o,n/a,"average"),this.dataItem.setCalculatedValue(o,a,"count"),se(this.nodes.iterator(),(function(t){var i=t[1];i.fill instanceof Ne&&(i.color=i.fill),null==i.color&&(i.color=e.colors.next()),null!=i.dataItem.color&&(i.color=i.dataItem.color),i.dataItem.visible||i.hide(0),e.getNodeValue(i)})),this.sortNodes(),this.feedLegend()},e.prototype.handleDataItemWorkingValueChange=function(t,e){this.invalidate()},e.prototype.sortNodes=function(){this._sorted="name"==this.sortBy?this.nodes.sortedIterator():"value"==this.sortBy?le(this.nodes.iterator(),(function(t,e){return De(Oe(t[1].total,e[1].total))})):this.nodes.iterator()},e.prototype.getNodeValue=function(t){var e=0,i=0;se(t.incomingDataItems.iterator(),(function(t){var i=t.getWorkingValue("value");k(i)&&(e+=i)})),se(t.outgoingDataItems.iterator(),(function(t){var e=t.getWorkingValue("value");k(e)&&(i+=e)})),t.total=e+i,t.totalIncoming=e,t.totalOutgoing=i},e.prototype.changeSorting=function(){this.sortNodes()},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Flow diagram"))},e.prototype.createDataItem=function(){return new ds},Object.defineProperty(e.prototype,"nodePadding",{get:function(){return this.getPropertyValue("nodePadding")},set:function(t){this.setPropertyValue("nodePadding",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortBy",{get:function(){return this.getPropertyValue("sortBy")},set:function(t){this.setPropertyValue("sortBy",t),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minNodeSize",{get:function(){return this.getPropertyValue("minNodeSize")},set:function(t){this.setPropertyValue("minNodeSize",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodes",{get:function(){if(!this._nodes){var t=this.createNode();t.events.on("hit",(function(t){t.target.handleHit(t)})),this._nodes=new ge(t),this._disposers.push(new me(this._nodes))}return this._nodes},enumerable:!0,configurable:!0}),e.prototype.createNode=function(){var t=new hs;return this._disposers.push(t),t},Object.defineProperty(e.prototype,"links",{get:function(){return this._links||(this._links=new Pe(this.createLink()),this._disposers.push(new Se(this._links))),this._links},enumerable:!0,configurable:!0}),e.prototype.createLink=function(){var t=new ps;return this._disposers.push(t),t},e.prototype.feedLegend=function(){var t=this.legend;if(t){var e=[];this.nodes.each((function(t,i){e.push(i)})),t.data=e,t.dataFields.name="name"}},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this.nodes.clear()},e}(Za);ve.registeredClasses.FlowDiagram=fs;var ms=function(t){function e(){var e=t.call(this)||this;e.className="LabelBullet";var i=e.createChild(Ln);return i.shouldClone=!1,i.verticalCenter="middle",i.horizontalCenter="middle",i.truncate=!0,i.hideOversized=!1,i.maxWidth=500,i.maxHeight=500,i.stroke=Ue(),i.strokeOpacity=0,i.fill=(new _r).getFor("text"),e.events.on("maxsizechanged",e.handleMaxSize,e,!1),e.label=i,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.handleMaxSize=function(){this.label.maxWidth=this.maxWidth,this.label.maxHeight=this.maxHeight},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.label.copyFrom(e.label)},e}(Ja);ve.registeredClasses.LabelBullet=ms;var ys=function(t){function e(){var e=t.call(this)||this;e.nextInCoord=0,e.nextOutCoord=0,e.className="SankeyNode",e.width=10,e.height=10;var i=e.createChild(ms);i.shouldClone=!1,i.locationX=1,i.locationY=.5,i.label.text="{name}",i.width=150,i.height=150,i.label.horizontalCenter="left",i.label.padding(0,5,0,5),e.nameLabel=i;var r=e.createChild(ms);r.shouldClone=!1,r.label.hideOversized=!1,r.locationX=.5,r.locationY=.5,r.width=150,r.height=150,r.label.horizontalCenter="middle",e.valueLabel=r;var n=e.hiddenState;return n.properties.fill=(new _r).getFor("disabledBackground"),n.properties.opacity=.5,n.properties.visible=!0,e.background.hiddenState.copyFrom(n),e}return Object(d.d)(e,t),e.prototype.invalidateLinks=function(){var e=this;t.prototype.invalidateLinks.call(this),this.nextInCoord=0,this.nextOutCoord=0;var i=this.chart;if(i){var r=i.orientation;this._incomingSorted&&se(this._incomingSorted,(function(t){var n=t.link,a=t.getWorkingValue("value");if(k(a)){n.parent=e.chart.linksContainer;var o=void 0,s=void 0,l=void 0;if("horizontal"==r?(o=e.pixelX+e.dx,s=e.nextInCoord+e.pixelY+e.dy,l=0):(s=e.pixelY+e.dy,o=e.nextInCoord+e.pixelX+e.dx,l=90),n.endX=o,n.endY=s,n.startAngle=l,n.endAngle=l,n.gradient.rotation=l,n.linkWidth=a*i.valueHeight,!t.fromNode){"horizontal"==r?(n.maxWidth=200,n.startX=e.pixelX+e.dx-n.maxWidth,n.startY=n.endY):(n.maxHeight=200,n.startX=n.endX,n.startY=e.pixelY+e.dy-n.maxHeight),n.fill=t.toNode.color;var u=n.gradient.stops.getIndex(0);u&&("gradient"==n.colorMode&&(u.color=e.color),u.opacity=0,n.fill=n.gradient,n.stroke=n.gradient,n.gradient.validate())}e.nextInCoord+=n.linkWidth}})),this._outgoingSorted&&se(this._outgoingSorted,(function(t){var i=t.link;i.parent=e.chart.linksContainer;var n=t.getWorkingValue("value");if(k(n)){var a=void 0,o=void 0,s=void 0;if("horizontal"==r?(s=0,a=e.pixelX+e.pixelWidth+e.dx-1,o=e.nextOutCoord+e.pixelY+e.dy):(s=90,a=e.nextOutCoord+e.pixelX+e.dx,o=e.pixelY+e.pixelHeight+e.dy-1),i.startX=a,i.startY=o,i.startAngle=s,i.endAngle=s,i.gradient.rotation=s,i.linkWidth=n*e.chart.valueHeight,!t.toNode){"horizontal"==r?(i.maxWidth=200,i.endX=e.pixelX+i.maxWidth+e.dx,i.endY=i.startY):(i.maxHeight=200,i.endX=i.startX,i.endY=e.pixelY+i.maxHeight+e.dy),i.opacity=e.opacity;var l=i.gradient.stops.getIndex(1);l&&("gradient"==i.colorMode&&(l.color=e.color),l.opacity=0,i.fill=i.gradient,i.stroke=i.gradient,i.gradient.validate())}e.nextOutCoord+=i.linkWidth}}))}this.positionBullet(this.nameLabel),this.positionBullet(this.valueLabel)},e.prototype.positionBullet=function(t){t&&(t.x=this.measuredWidth*t.locationX,t.y=this.measuredHeight*t.locationY)},Object.defineProperty(e.prototype,"level",{get:function(){return this.getPropertyValue("level")},set:function(t){this.setPropertyValue("level",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.nameLabel.copyFrom(e.nameLabel),this.valueLabel.copyFrom(e.valueLabel)},e}(hs);ve.registeredClasses.SankeyNode=ys;var gs=function(t){function e(){var e=t.call(this)||this;return e.className="SankeyLink",new _r,e.tension=.8,e.controlPointDistance=.2,e.startAngle=0,e.endAngle=0,e.linkWidth=0,e.startX=0,e.endX=0,e.startY=0,e.endY=0,e.middleLine=e.createChild(ra),e.middleLine.shouldClone=!1,e.middleLine.strokeOpacity=0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validate=function(){if(t.prototype.validate.call(this),!this.isTemplate){var e=this.startX,i=this.startY,r=this.endX,n=this.endY;k(r)||(r=e),k(n)||(n=i);var a=this.startAngle,o=this.endAngle,s=this.linkWidth,l="",u=e,c=i,h=r,p=n,d=e+s*j(a),f=r+s*j(o),m=i+s*B(a),y=n+s*B(o),g=e+s/2*j(a),b=r+s/2*j(o),v=i+s/2*B(a),_=n+s/2*B(o);this.zIndex=this.zIndex||this.dataItem.index;var x=this.tension+(1-this.tension)*j(a),S=this.tension+(1-this.tension)*B(a);if(this.middleLine.tensionX=x,this.middleLine.tensionY=S,k(s)&&k(e)&&k(r)&&k(i)&&k(n)){L(u,3)==L(h,3)&&(h+=.01),L(c,3)==L(p,3)&&(p+=.01),L(d,3)==L(f,3)&&(f+=.01),L(m,3)==L(y,3)&&(y+=.01);var w=Math.min(d,f,u,h),T=Math.min(m,y,c,p),P=Math.max(d,f,u,h),C=Math.max(m,y,c,p);this._bbox={x:w,y:T,width:P-w,height:C-T};var I=this.controlPointDistance,A=u+(h-u)*I*B(a),O=c+(p-c)*I*j(a),D=h-(h-u)*I*B(o),F=p-(p-c)*I*j(o),M=g+(b-g)*I*B(a),E=v+(_-v)*I*j(a),R=b-(b-g)*I*B(o),V=_-(_-v)*I*j(o),N=K({x:A,y:O},{x:D,y:F}),U=(s/B(N)-s)/z(N)*B(a),X=(s/j(N)-s)*z(N)*j(a),H=-U/2+d+(f-d)*I*B(a),W=-X/2+m+(y-m)*I*j(a),Y=-U/2+f-(f-d)*I*B(o),G=-X/2+y-(y-m)*I*j(o);this.middleLine.segments=[[{x:g,y:v},{x:M,y:E},{x:R,y:V},{x:b,y:_}]],A+=U/2,O+=X/2,D+=U/2,F+=X/2,l+=Hn({x:u,y:c}),l+=new ga(x,S).smooth([{x:u,y:c},{x:A,y:O},{x:D,y:F},{x:h,y:p}]),l+=Wn({x:f,y:y}),l+=new ga(x,S).smooth([{x:f,y:y},{x:Y,y:G},{x:H,y:W},{x:d,y:m}]),l+=" Z"}this.link.path=l,this.maskBullets&&(this.bulletsMask.path=l,this.bulletsContainer.mask=this.bulletsMask),this.positionBullets()}},Object.defineProperty(e.prototype,"startX",{get:function(){return this.getPropertyValue("startX")},set:function(t){this.setPropertyValue("startX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endX",{get:function(){return this.getPropertyValue("endX")},set:function(t){this.setPropertyValue("endX",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startY",{get:function(){return this.getPropertyValue("startY")},set:function(t){this.setPropertyValue("startY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endY",{get:function(){return this.getPropertyValue("endY")},set:function(t){this.setPropertyValue("endY",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkWidth",{get:function(){return this.getPropertyValue("linkWidth")},set:function(t){this.setPropertyValue("linkWidth",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(t){this.setPropertyValue("controlPointDistance",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t,!0)},enumerable:!0,configurable:!0}),e}(ps);ve.registeredClasses.SankeyLink=gs;var bs=function(t){function e(){var e=t.call(this)||this;return e.className="SankeyDiagramDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(ds),vs=function(t){function e(){var e=t.call(this)||this;return e.className="SankeyDiagram",e.orientation="horizontal",e.nodeAlign="middle",e.nodesContainer.width=m(100),e.nodesContainer.height=m(100),e.linksContainer.width=m(100),e.linksContainer.height=m(100),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validateData=function(){var e=this;t.prototype.validateData.call(this),this._levelCount=0,this.nodes.each((function(t,e){e.level=void 0})),this.nodes.each((function(t,i){i.level=e.getNodeLevel(i,0),e._levelCount=N(e._levelCount,i.level)}))},e.prototype.getNodeLevel=function(t,e){var i=this,r=[e];return se(t.incomingDataItems.iterator(),(function(t){t.fromNode&&(k(t.fromNode.level)?r.push(t.fromNode.level+1):r.push(i.getNodeLevel(t.fromNode,e+1)))})),Math.max.apply(Math,Object(d.h)(r))},e.prototype.calculateValueHeight=function(){var t=this;this._levelSum={},this._levelNodesCount={},this.maxSum=0;var e,i,r,n=this.dataItem.values.value.sum;se(this._sorted,(function(e){t.getNodeValue(e[1])})),this.nodes.each((function(e,i){var r=i.level,a=Math.max(i.totalIncoming,i.totalOutgoing);a/n<t.minNodeSize&&(a=n*t.minNodeSize),k(t._levelSum[r])?t._levelSum[r]+=a:t._levelSum[r]=a,k(t._levelNodesCount[r])?t._levelNodesCount[r]++:t._levelNodesCount[r]=1})),e="horizontal"==this.orientation?this.chartContainer.maxHeight-1:this.chartContainer.maxWidth-1,Qt(this._levelSum,(function(n,a){var o=a,s=(e-(t._levelNodesCount[n]-1)*t.nodePadding)/o;s==1/0&&(s=0),(r>s||!k(r))&&(r=s,t.maxSum=o,i=_(n))})),this._maxSumLevel=i;var a=(e-(this._levelNodesCount[this._maxSumLevel]-1)*this.nodePadding)/this.maxSum;if(a==1/0&&(a=0),k(this.valueHeight)){var o=void 0;try{o=this._heightAnimation.animationOptions[0].to}catch(l){}if(o!=a){var s=this.interpolationDuration;try{s=this.nodes.template.states.getKey("active").transitionDuration}catch(l){}this._heightAnimation=new tr(this,{property:"valueHeight",from:this.valueHeight,to:a},s,this.interpolationEasing).start(),this._disposers.push(this._heightAnimation)}}else this.valueHeight=a},e.prototype.validate=function(){var e=this;t.prototype.validate.call(this),this.calculateValueHeight();var i=this.nodesContainer,r={},n=this._levelNodesCount[this._maxSumLevel],a=this.dataItem.values.value.sum;se(this._sorted,(function(t){var o,s,l=t[1],u=l.level,c=0,h=e._levelNodesCount[u];switch(e.nodeAlign){case"bottom":c=(e.maxSum-e._levelSum[u])*e.valueHeight-(h-n)*e.nodePadding;break;case"middle":c=(e.maxSum-e._levelSum[u])*e.valueHeight/2-(h-n)*e.nodePadding/2}l.parent=i;var p=Math.max(l.totalIncoming,l.totalOutgoing);if(p/a<e.minNodeSize&&(p=a*e.minNodeSize),"horizontal"==e.orientation){o=(e.innerWidth-l.pixelWidth)/e._levelCount*l.level,s=r[u]||c;var d=p*e.valueHeight;l.height=d,l.minX=o,l.maxX=o,r[u]=s+d+e.nodePadding}else{o=r[u]||c,s=(e.innerHeight-l.pixelHeight)/e._levelCount*l.level;var f=p*e.valueHeight;l.width=f,l.minY=s,l.maxY=s,r[u]=o+f+e.nodePadding}l.x=o,l.y=s}))},e.prototype.showReal=function(e){var i=this;if(!this.preventShow){if(this.interpolationDuration>0){var r=this.nodesContainer,n=0;se(this.links.iterator(),(function(t){t.hide(0)})),se(this._sorted,(function(t){var e,a=t[1];"horizontal"==i.orientation?(a.dx=-(r.pixelWidth-a.pixelWidth)/Math.max(i._levelCount,1),e="dx"):(a.dy=-(r.pixelHeight-a.pixelHeight)/Math.max(i._levelCount,1),e="dy");var o,s,l=0;i.sequencedInterpolation&&(l=i.sequencedInterpolationDelay*n+i.interpolationDuration*n/(o=i.nodes.iterator(),s=0,o((function(t){return++s,!0})),s)),a.opacity=0,a.invalidateLinks(),a.animate([{property:"opacity",from:0,to:1},{property:e,to:0}],i.interpolationDuration,i.interpolationEasing).delay(l),se(a.outgoingDataItems.iterator(),(function(t){var e=t.link.show(i.interpolationDuration);e&&!e.isFinished()&&e.delay(l)})),se(a.incomingDataItems.iterator(),(function(t){if(!t.fromNode){var e=t.link.show(i.interpolationDuration);e&&!e.isFinished()&&e.delay(l)}})),n++}))}return t.prototype.showReal.call(this)}},e.prototype.changeSorting=function(){var t=this;this.sortNodes();var e={};se(this._sorted,(function(i){var r,n,a=i[1],o=a.level,s=(t.maxSum-t._levelSum[o])*t.valueHeight/2;"horizontal"==t.orientation?(r="y",n=a.pixelHeight):(r="x",n=a.pixelWidth),a.animate({property:r,to:e[o]||s},t.interpolationDuration,t.interpolationEasing),e[o]=(e[o]||s)+n+t.nodePadding,a.invalidateLinks()}))},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Sankey diagram"))},e.prototype.createDataItem=function(){return new bs},Object.defineProperty(e.prototype,"nodeAlign",{get:function(){return this.getPropertyValue("nodeAlign")},set:function(t){this.setPropertyValue("nodeAlign",t),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0);var e=this.nodes.template.nameLabel;"vertical"==t?(this.nodes.template.width=void 0,e.label.horizontalCenter="middle",e.locationX=.5):(this.nodes.template.height=void 0,e.label.horizontalCenter="left",e.locationX=1)},enumerable:!0,configurable:!0}),e.prototype.createNode=function(){var t=new ys;return this._disposers.push(t),t},e.prototype.createLink=function(){var t=new gs;return this._disposers.push(t),t},Object.defineProperty(e.prototype,"valueHeight",{get:function(){return this._valueHeight},set:function(t){t!=this._valueHeight&&(this._valueHeight=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this._sorted=this.nodes.iterator()},e}(fs);ve.registeredClasses.SankeyDiagram=vs;var _s=function(t){function e(){var e=t.call(this)||this;e.className="ChordNode";var i=e.createChild(Xo);i.location=.5,i.radius=5,i.text="{name}",i.zIndex=1,i.shouldClone=!1,e.label=i,e.layout="none",e.events.on("positionchanged",e.updateRotation,e,!1),e.isMeasured=!1,e.slice=e.createChild(na),e.slice.isMeasured=!1;var r=e.hiddenState;return r.properties.fill=(new _r).getFor("disabledBackground"),r.properties.opacity=.5,r.properties.visible=!0,e.setStateOnChildren=!1,e.slice.hiddenState.properties.visible=!0,e.adapter.add("tooltipX",(function(t,e){return e.slice.ix*(e.slice.radius-(e.slice.radius-e.slice.pixelInnerRadius)/2)})),e.adapter.add("tooltipY",(function(t,e){return e.slice.iy*(e.slice.radius-(e.slice.radius-e.slice.pixelInnerRadius)/2)})),e}return Object(d.d)(e,t),e.prototype.invalidateLinks=function(){var e=this;t.prototype.invalidateLinks.call(this);var i=this.label,r=this.slice,n=this.chart;if(n&&r){var a=this.total,o=r.arc,s=r.startAngle;this.children.each((function(t){if(t instanceof Ja){var e=t.locationX;k(e)||(e=.5);var i=t.locationY;k(i)||(i=1);var n=s+o*e,a=i*r.radius;t.x=a*B(n),t.y=a*j(n)}}));var l=s+o*i.location,u=s+(1-a/this.adjustedTotal)*o*.5;y(u)&&(u=s),i.fixPosition(l,r.radius),this.nextAngle=u,this._outgoingSorted&&se(this._outgoingSorted,(function(t){var i=t.link;i.parent=e.chart.linksContainer;var a=t.getWorkingValue("value");if(k(a)){if(n.nonRibbon){var l=i.percentWidth;k(l)||(l=5),i.startAngle=s+o/2-o/2*(l/=100),i.arc=o*l}else i.arc=a*n.valueAngle,i.startAngle=e.nextAngle,e.nextAngle+=i.arc;t.toNode||(i.endAngle=i.startAngle),i.radius=r.pixelInnerRadius}})),this._incomingSorted&&se(this._incomingSorted,(function(t){var i=t.link;if(i.radius=r.pixelInnerRadius,n.nonRibbon){var a=i.percentWidth;k(a)||(a=5),i.endAngle=s+o/2-o/2*(a/=100),i.arc=o*a}else{i.endAngle=e.nextAngle;var l=t.getWorkingValue("value");k(l)&&(i.arc=l*n.valueAngle,e.nextAngle+=i.arc)}t.fromNode||(i.startAngle=i.endAngle)}))}},e.prototype.updateRotation=function(){var t=this.slice,e=this.trueStartAngle+t.arc/2,i=t.radius,r=i*B(e),n=i*j(e),a=K({x:r+this.pixelX,y:n+this.pixelY});t.startAngle=this.trueStartAngle+(a-e),this.dx=-this.pixelX,this.dy=-this.pixelY},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.label.copyFrom(e.label),this.slice.copyFrom(e.slice)},e}(hs);ve.registeredClasses.ChordNode=_s;var xs=function(t){function e(){var e=t.call(this)||this;return e.className="QuadraticCurve",e.element=e.paper.add("path"),e.pixelPerfect=!1,e.fill=Ue(),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){if(k(this.x1+this.x2+this.y1+this.y2+this.cpx+this.cpy)){var t={x:this.x2,y:this.y2},e={x:this.cpx,y:this.cpy},i=Hn({x:this.x1,y:this.y1})+Yn(t,e);this.path=i}},Object.defineProperty(e.prototype,"cpx",{get:function(){return this.getPropertyValue("cpx")},set:function(t){this.setPropertyValue("cpx",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cpy",{get:function(){return this.getPropertyValue("cpy")},set:function(t){this.setPropertyValue("cpy",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t){var e={x:this.x1,y:this.y1},i={x:this.cpx,y:this.cpy},r={x:this.x2,y:this.y2},n=$(e,r,i,t),a=$(e,r,i,t+.001);return{x:n.x,y:n.y,angle:K(n,a)}},e}(Nn),Ss=function(t){function e(){var e=t.call(this)||this;return e.className="ChordLink",e.middleLine=e.createChild(xs),e.middleLine.shouldClone=!1,e.middleLine.strokeOpacity=0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validate=function(){if(t.prototype.validate.call(this),!this.isTemplate){var e=this.startAngle,i=this.endAngle,r=this.arc,n=this.radius,a=this.dataItem.fromNode,o=this.dataItem.toNode,s=0,l=0;a&&(s=a.pixelX+a.dx,l=a.pixelY+a.dy);var u=0,c=0;if(o&&(u=o.pixelX+o.dx,c=o.pixelY+o.dy),n>0){var h=n*B(e)+s,p=n*j(e)+l,d=n*B(i)+u,f=n*j(i)+c,m={x:0,y:0},y=Hn({x:h,y:p});y+=qn(e,r,n),y+=Yn({x:d,y:f},m),y+=qn(i,r,n),y+=Yn({x:h,y:p},m),this.link.path=r>0?y:"",this.maskBullets&&(this.bulletsMask.path=y,this.bulletsContainer.mask=this.bulletsMask);var g=e+r/2,b=i+r/2,v=this.middleLine;v.x1=n*B(g)+s,v.y1=n*j(g)+l,v.x2=n*B(b)+u,v.y2=n*j(b)+c,v.cpx=0,v.cpy=0,v.stroke=this.fill,this.positionBullets()}}},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPropertyValue("radius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(t){this.setPropertyValue("arc",t,!0)},enumerable:!0,configurable:!0}),e}(ps);ve.registeredClasses.ChordLink=Ss;var ws=function(t){function e(){var e=t.call(this)||this;return e.className="ChordDiagramDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(ds),Ts=function(t){function e(){var e=t.call(this)||this;e.valueAngle=0,e.className="ChordDiagram",e.startAngle=-90,e.endAngle=270,e.radius=m(80),e.innerRadius=-15,e.nodePadding=5;var i=e.chartContainer.createChild(Sn);return i.align="center",i.valign="middle",i.shouldClone=!1,i.layout="absolute",e.chordContainer=i,e.nodesContainer.parent=i,e.linksContainer.parent=i,e.chartContainer.events.on("maxsizechanged",e.invalidate,e,!1),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validate=function(){var e=this,i=this.chartContainer,r=this.endAngle,n=this.startAngle+this.nodePadding/2,a=at(this.startAngle,this.endAngle,1);a=J([a,{x:0,y:0,width:0,height:0}]);var o=Math.min(i.innerWidth/a.width,i.innerHeight/a.height);k(o)||(o=0);var s=Je(this.radius,o),l=Je(this.innerRadius,s,!0),u=this.dataItem.values.value.sum,c=0,h=0;se(this._sorted,(function(t){var i=t[1];e.getNodeValue(i),c++;var r=i.total;i.total/u<e.minNodeSize&&(r=u*e.minNodeSize),h+=r})),this.valueAngle=(r-this.startAngle-this.nodePadding*c)/h,se(this._sorted,(function(t){var i=t[1],a=i.slice;a.radius=s,a.innerRadius=l;var o,h=i.total;i.total/u<e.minNodeSize&&(h=u*e.minNodeSize),i.adjustedTotal=h,a.arc=o=e.nonRibbon?(r-e.startAngle)/c-e.nodePadding:e.valueAngle*h,a.startAngle=n,i.trueStartAngle=n,i.parent=e.nodesContainer,i.validate(),n+=o+e.nodePadding})),this.chordContainer.definedBBox={x:s*a.x,y:s*a.y,width:s*a.width,height:s*a.height},this.chordContainer.invalidateLayout(),t.prototype.validate.call(this)},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Chord diagram"))},e.prototype.createDataItem=function(){return new ws},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonRibbon",{get:function(){return this.getPropertyValue("nonRibbon")},set:function(t){this.setPropertyValue("nonRibbon",t,!0),this.links.template.middleLine.strokeOpacity=1,this.links.template.link.fillOpacity=0},enumerable:!0,configurable:!0}),e.prototype.createNode=function(){var t=new _s;return this._disposers.push(t),t},e.prototype.createLink=function(){var t=new Ss;return this._disposers.push(t),t},e}(fs);ve.registeredClasses.ChordDiagram=Ts;var Ps=function(t){function e(){var e=t.call(this)||this;return e.className="Column",e.width=m(80),e.height=m(80),e.events.disableType("transformed"),e.applyOnClones=!0,e.strokeOpacity=1,e.layout="none",e.createAssets(),e.events.on("childadded",e.handleKidAdded,e,!1),e}return Object(d.d)(e,t),e.prototype.handleKidAdded=function(){"none"==this.layout&&(this.layout="absolute")},e.prototype.createAssets=function(){this.column=this.createChild(Rn),this.column.shouldClone=!1,this.column.isMeasured=!1,this.column.cornerRadius(0,0,0,0),this._disposers.push(this.column)},e.prototype.validate=function(){t.prototype.validate.call(this);var e=this.column;e&&(e.width=U(this.pixelWidth,this.maxWidth),e.height=U(this.pixelHeight,this.maxHeight),e.invalid&&e.validate())},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.column&&this.column.copyFrom(e.column)},Object.defineProperty(e.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.column?{x:0,y:0,width:this.column.measuredWidth,height:this.column.measuredHeight}:{x:0,y:0,width:U(this.pixelWidth,this.maxWidth),height:U(this.pixelHeight,this.maxHeight)}},enumerable:!0,configurable:!0}),e}(Sn);ve.registeredClasses.Column=Ps;var Cs=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeriesDataItem",e.locations.dateX=.5,e.locations.dateY=.5,e.locations.categoryX=.5,e.locations.categoryY=.5,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"column",{get:function(){return this._column},set:function(t){this.setColumn(t)},enumerable:!0,configurable:!0}),e.prototype.setColumn=function(t){var e=this;if(this._column&&t!=this._column&&_t(this.sprites,this._column),this._column=t,t){var i=t.dataItem;i&&i!=this&&(i.column=void 0),this.addSprite(t),this._disposers.push(new Lt((function(){e.component&&e.component.columns.removeValue(t)})))}},Object.defineProperty(e.prototype,"width",{get:function(){var t=this.properties.width;return this._adapterO&&(t=this._adapterO.apply("width",t)),t},set:function(t){this.properties.width!=t&&(this.properties.width=t,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangesColumns",{get:function(){return this._rangesColumns||(this._rangesColumns=new ye),this._rangesColumns},enumerable:!0,configurable:!0}),e}(Ao),ks=function(t){function e(){var e=t.call(this)||this;e._startLocation=0,e._endLocation=1,e.className="ColumnSeries",e.width=m(100),e.height=m(100),e.strokeOpacity=0,e.fillOpacity=1,e.clustered=!0;var i=e.mainContainer.createChild(Sn);return i.shouldClone=!1,i.isMeasured=!1,i.layout="none",e._columnsContainer=i,e.columns.template.pixelPerfect=!1,e.tooltipColorSource=e.columns.template,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"columnsContainer",{get:function(){return this._columnsContainer},enumerable:!0,configurable:!0}),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Column Series"))},e.prototype.createDataItem=function(){return new Cs},e.prototype.validate=function(){var i=this;if(this.group.node.removeAttribute("fill"),this.chart&&this.xAxis&&this.yAxis){var r,n=0,a=0,o=[];se(this.chart.series.iterator(),(function(t){var r;t instanceof e&&i.baseAxis==t.baseAxis&&(r=i.baseAxis==i.xAxis?i.chart.yAxes.indexOf(t.yAxis):i.chart.xAxes.indexOf(t.xAxis),o.push({series:t,axis:r}))})),o.sort((function(t,e){return t.axis-e.axis})),ht(o,(function(t){var o=t.series;o instanceof e&&((!o.stacked&&o.clustered||r!=t.axis&&o.clustered)&&n++,o==i&&(a=n-1)),r=t.axis})),this.clustered||(a=0,n=1);var s=this.baseAxis.renderer,l=s.cellStartLocation,u=s.cellEndLocation;this._startLocation=l+a/n*(u-l),this._endLocation=l+(a+1)/n*(u-l);var c=this.xAxis,h=this.yAxis;c instanceof Io&&h instanceof xo&&c.sortBySeries==this&&this.sortCategoryAxis(c,"valueY"),h instanceof Io&&c instanceof xo&&h.sortBySeries==this&&this.sortCategoryAxis(h,"valueX")}t.prototype.validate.call(this);for(var p=0;p<this.startIndex;p++){var d=this.dataItems.getIndex(p);this.disableUnusedColumns(d)}for(p=this.dataItems.length-1;p>this.endIndex;p--)d=this.dataItems.getIndex(p),this.disableUnusedColumns(d);this._propertiesChanged=!1},e.prototype.sortCategoryAxis=function(t,e){var i=this;this.dataItems.values.sort((function(t,i){return i.values[e].workingValue-t.values[e].workingValue}));var r=0;this.dataItems.each((function(t){t._index=r,r++})),t.dataItems.each((function(t){var e=t.component,r=e.categoryToPosition(t.category)-t.deltaPosition,n=e.getSeriesDataItemByCategory(t.category,i);if(n){var a=i.dataItems.indexOf(n);t._index=a;var o=L((a+.5)/i.dataItems.length-r,3);t.deltaAnimation&&!t.deltaAnimation.isDisposed()&&t.deltaAnimation.animationOptions[0].to==o||o!=L(t.deltaPosition,3)&&(t.deltaAnimation&&t.deltaAnimation.stop(),t.deltaAnimation=t.animate({property:"deltaPosition",from:-o,to:0},e.interpolationDuration,e.interpolationEasing),i._disposers.push(t.deltaAnimation))}})),t.dataItems.values.sort((function(t,e){return t.index-e.index}))},e.prototype.validateDataElement=function(e){this.chart&&this.xAxis&&this.yAxis&&(this.validateDataElementReal(e),t.prototype.validateDataElement.call(this,e))},e.prototype.getStartLocation=function(t){return this._startLocation+(this.baseAxis==this.xAxis?t.locations[this.xOpenField]-.5:t.locations[this.yOpenField]-.5)},e.prototype.getEndLocation=function(t){return this._endLocation+(this.baseAxis==this.xAxis?t.locations[this.xField]-.5:t.locations[this.yField]-.5)},e.prototype.validateDataElementReal=function(t){var e,i,r,n,a=this,o=this.getStartLocation(t),s=this.getEndLocation(t),l=this.xField,u=this.xOpenField,c=this.yField,h=this.yOpenField,p=this.columns.template,d=p.percentWidth,m=p.percentHeight,g=p.pixelWidth,b=p.pixelHeight,v=p.maxWidth,_=p.maxHeight,x=p.pixelPaddingLeft,w=p.pixelPaddingRight,T=p.pixelPaddingTop,P=p.pixelPaddingBottom,C=!1,I=t.width;if(S(I)&&(k(I)&&(g=I),I instanceof f&&(d=100*I.value)),this.xAxis instanceof Io&&this.yAxis instanceof Io){if(!t.hasValue(this._xValueFields)||!t.hasValue(this._yValueFields))return;o=0,s=1,y(d)||(o+=F=L((s-o)*(1-d/100)/2,5),s-=F),e=this.xAxis.getX(t,u,o),i=this.xAxis.getX(t,l,s),y(d)&&(e+=F=(i-e-g)/2,i-=F),!y(v)&&v<Math.abs(i-e)&&(e+=F=(i-e-v)/2,i-=F),o=0,s=1,y(m)||(o+=F=L((1-m/100)/2,5),s-=F),r=this.yAxis.getY(t,h,o),n=this.yAxis.getY(t,c,s),y(m)&&(n+=F=(n-r-b)/2,r-=F),!y(_)&&_<Math.abs(n-r)&&(n+=F=(n-r-_)/2,r-=F),i=this.fixHorizontalCoordinate(i),e=this.fixHorizontalCoordinate(e),r=this.fixVerticalCoordinate(r),n=this.fixVerticalCoordinate(n)}else if(this.baseAxis==this.xAxis){if(!t.hasValue(this._yValueFields))return;y(d)||(o+=F=L((s-o)*(1-d/100)/2,5),s-=F),e=this.xAxis.getX(t,u,o),i=this.xAxis.getX(t,l,s),y(d)&&(e+=F=(i-e-g)/2,i-=F),!y(v)&&v<Math.abs(i-e)&&(e+=F=(i-e-v)/2,i-=F);var A=t.locations[h],O=t.locations[c];this.yAxis instanceof xo&&this.dataFields[this.yField]!=this.dataFields[this.yOpenField]&&(A=0,O=0),n=this.yAxis.getY(t,h,A),r=this.yAxis.getY(t,c,O);var D=Math.ceil(this.yAxis.axisLength);(r<0&&n<0||r>D&&n>D)&&(C=!0),r=this.fixVerticalCoordinate(r),n=this.fixVerticalCoordinate(n),Math.abs(i-e)-x-w==0&&(C=!0)}else{if(!t.hasValue(this._xValueFields))return;var F;y(m)||(o+=F=L((s-o)*(1-m/100)/2,5),s-=F),r=this.yAxis.getY(t,h,o),n=this.yAxis.getY(t,c,s),y(m)&&(n-=F=(n-r-b)/2,r+=F),!y(_)&&_<Math.abs(n-r)&&(n-=F=(n-r-_)/2,r+=F);var M=t.locations[l],E=t.locations[u];this.xAxis instanceof xo&&this.dataFields[this.xField]!=this.dataFields[this.xOpenField]&&(M=0,E=0),i=this.xAxis.getX(t,l,M),e=this.xAxis.getX(t,u,E),D=Math.ceil(this.xAxis.axisLength),(i<0&&e<0||i>D&&e>D)&&(C=!0),i=this.fixHorizontalCoordinate(i),e=this.fixHorizontalCoordinate(e),Math.abs(r-n)-T-P==0&&(C=!0)}var R,V=Math.abs(i-e),j=Math.abs(n-r),z=Math.min(e,i),B=Math.min(r,n);C?this.disableUnusedColumns(t):(t.column?(R=t.column,this._propertiesChanged&&(ie(this,R,vn),ie(this.columns.template,R,vn),ht(vn,(function(t){R[t]=R[t]})))):(ie(this,R=this.columns.create(),vn),ie(this.columns.template,R,vn),t.addSprite(R),t.column=R,R.paper=this.paper,this.itemsFocusable()?(this.role="menu",R.role="menuitem",R.focusable=!0):(this.role="list",R.role="listitem",R.focusable=!1),R.focusable&&(R.events.on("focus",(function(e){R.readerTitle=a.populateString(a.itemReaderText,t)}),void 0,!1),R.events.on("blur",(function(t){R.readerTitle=""}),void 0,!1)),R.hoverable&&(R.events.on("over",(function(e){R.readerTitle=a.populateString(a.itemReaderText,t)}),void 0,!1),R.events.on("out",(function(t){R.readerTitle=""}),void 0,!1)),R.parent=this.columnsContainer,R.virtualParent=this),R.width=V,R.height=j,R.x=z,R.y=B,R.realX=e,R.realY=r,R.realWidth=i-e,R.realHeight=n-r,this.setColumnStates(R),R.invalid&&R.validate(),R.__disabled=!1,se(this.axisRanges.iterator(),(function(e){var i=t.rangesColumns.getKey(e.uid);i||(i=a.columns.create(),ie(e.contents,i,vn),t.addSprite(i),t.rangesColumns.setKey(e.uid,i),i.paper=a.paper),i.parent=e.contents,i.width=V,i.height=j,i.x=z,i.y=B,a.setColumnStates(i),i.invalid&&i.validate(),i.__disabled=!1}))),t.itemWidth=V,t.itemHeight=j},e.prototype.disableUnusedColumns=function(t){t&&(t.column&&(t.column.width=0,t.column.height=0,t.column.__disabled=!0),se(this.axisRanges.iterator(),(function(e){var i=t.rangesColumns.getKey(e.uid);i&&(i.width=0,i.height=0,i.__disabled=!0)})))},e.prototype.setColumnStates=function(t){if(this._dropFromOpenState||this._dropFromPreviousState||this._riseFromOpenState||this._riseFromPreviousState){var e=t.dataItem;if(this.xAxis instanceof xo||this.yAxis instanceof xo){var i,r=void 0,n=void 0;this.baseAxis==this.yAxis?this.xOpenField&&this.xField&&this.xAxis instanceof xo&&(i=e.getValue(this.xOpenField),r=e.getValue(this.xField),n=e.getValue(this.xAxis.axisFieldName+"X","previousChange")):this.yOpenField&&this.yField&&this.yAxis instanceof xo&&(i=e.getValue(this.yOpenField),r=e.getValue(this.yField),n=e.getValue(this.yAxis.axisFieldName+"Y","previousChange")),r<i?(e.droppedFromOpen=!0,t.defaultState.copyFrom(this._dropFromOpenState),t.setState(this._dropFromOpenState,0)):(e.droppedFromOpen=!1,t.defaultState.copyFrom(this._riseFromOpenState),t.setState(this._riseFromOpenState,0)),n<0?(e.droppedFromPrevious=!0,t.defaultState.copyFrom(this._dropFromPreviousState),t.setState(this._dropFromPreviousState,0)):(e.droppedFromPrevious=!1,t.defaultState.copyFrom(this._riseFromPreviousState),t.setState(this._riseFromPreviousState,0))}}},Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns||(this._columns=new Pe(this.createColumnTemplate()),this._disposers.push(new Se(this._columns)),this._disposers.push(this._columns.template)),this._columns},enumerable:!0,configurable:!0}),e.prototype.createColumnTemplate=function(){return new Ps},Object.defineProperty(e.prototype,"clustered",{get:function(){return this.getPropertyValue("clustered")},set:function(t){this.setPropertyValue("clustered",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropFromOpenState",{get:function(){return this._dropFromOpenState||(this._dropFromOpenState=this.states.create("dropFromOpenState")),this._dropFromOpenState},set:function(t){this._dropFromOpenState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropFromPreviousState",{get:function(){return this._dropFromPreviousState||(this._dropFromPreviousState=this.states.create("dropFromPreviousState")),this._dropFromPreviousState},set:function(t){this._dropFromPreviousState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"riseFromOpenState",{get:function(){return this._riseFromOpenState||(this._riseFromOpenState=this.states.create("riseFromOpenState")),this._riseFromOpenState},set:function(t){this._riseFromOpenState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"riseFromPreviousState",{get:function(){return this._riseFromPreviousState||(this._riseFromPreviousState=this.states.create("riseFromPreviousState")),this._riseFromPreviousState},set:function(t){this._riseFromPreviousState=t},enumerable:!0,configurable:!0}),e.prototype.updateLegendValue=function(e,i){var r,n,a=this;t.prototype.updateLegendValue.call(this,e,i),this.legendDataItem&&(e&&(r=e.droppedFromOpen?this._dropFromOpenState:this._riseFromOpenState,n=e.droppedFromPrevious?this._dropFromPreviousState:this._riseFromPreviousState),se(this.legendDataItem.marker.children.iterator(),(function(t){e?(t.setState(n),t.setState(r)):(t.setState(a._riseFromPreviousState),t.setState(a._riseFromOpenState))})))},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var r=t.createChild(Rn);r.shouldClone=!1,ie(this,r,vn),r.copyFrom(this.columns.template),r.padding(0,0,0,0),r.width=e,r.height=i;var n=t.dataItem;n.color=this.fill,n.colorOrig=this.fill},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.columns.template.copyFrom(e.columns.template)},e.prototype.getBulletLocationX=function(e,i){if(this.baseAxis==this.xAxis){var r=e.locationX;k(r)||(r=.5);var n=this.getEndLocation(e.dataItem);return n-(n-this.getStartLocation(e.dataItem))*r}return t.prototype.getBulletLocationX.call(this,e,i)},e.prototype.getBulletLocationY=function(e,i){if(this.baseAxis==this.yAxis){var r=e.locationY;k(r)||(r=.5);var n=this.getEndLocation(e.dataItem);return n-(n-this.getStartLocation(e.dataItem))*r}return t.prototype.getBulletLocationY.call(this,e,i)},e.prototype.getAdjustedXLocation=function(e,i){if(this.baseAxis==this.xAxis){var r=.5;return e&&(r=e.locations[i]),k(r)||(r=.5),this._endLocation-(this._endLocation-this._startLocation)*r}return t.prototype.getAdjustedXLocation.call(this,e,i)},e.prototype.getAdjustedYLocation=function(e,i){if(this.baseAxis==this.yAxis){var r=.5;return e&&(r=e.locations[i]),k(r)||(r=.5),this._endLocation-(this._endLocation-this._startLocation)*r}return t.prototype.getAdjustedXLocation.call(this,e,i)},e.prototype.fixVerticalCoordinate=function(t){return V(t,-this.columns.template.pixelPaddingTop,this.yAxis.axisLength+this.columns.template.pixelPaddingBottom)},e.prototype.fixHorizontalCoordinate=function(t){return V(t,-this.columns.template.pixelPaddingLeft,this.xAxis.axisLength+this.columns.template.pixelPaddingRight)},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this.columns.clear()},e}(Oo);ve.registeredClasses.ColumnSeries=ks,ve.registeredClasses.ColumnSeriesDataItem=Cs;var Is=function(t){function e(){var e=t.call(this)||this;return e.className="TreeMapSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"parentName",{get:function(){var t=this.treeMapDataItem;if(t&&t.parent)return t.parent.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.treeMapDataItem;if(t)return t.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"treeMapDataItem",{get:function(){return this._dataContext},enumerable:!0,configurable:!0}),e.prototype.hide=function(e,i,r,n){var a=this.treeMapDataItem;return a&&a.hide(e),t.prototype.hide.call(this,e,i,r,n)},e.prototype.show=function(e,i,r){var n=this.treeMapDataItem;return n&&n.show(e,i,r),t.prototype.show.call(this,e,i,r)},e}(Cs),As=function(t){function e(){var e=t.call(this)||this;e.className="TreeMapSeries",e.applyTheme(),e.fillOpacity=1,e.strokeOpacity=1,e.minBulletDistance=0,e.columns.template.tooltipText="{parentName} {name}: {value}",e.columns.template.configField="config";var i=new _r;return e.stroke=i.getFor("background"),e.dataFields.openValueX="x0",e.dataFields.valueX="x1",e.dataFields.openValueY="y0",e.dataFields.valueY="y1",e.sequencedInterpolation=!1,e.showOnInit=!1,e.columns.template.pixelPerfect=!1,e}return Object(d.d)(e,t),e.prototype.processDataItem=function(e,i){i.seriesDataItem=e,t.prototype.processDataItem.call(this,e,i)},e.prototype.createDataItem=function(){return new Is},e.prototype.show=function(e){if(!this.preventShow){var i=this.defaultState.transitionDuration;return k(e)&&(i=e),this.dataItems.each((function(t){t.show(e)})),t.prototype.showReal.call(this,i)}},e.prototype.hide=function(e){var i=this.defaultState.transitionDuration;k(e)&&(i=e);var r=t.prototype.hideReal.call(this,i);return this.dataItems.each((function(t){t.hide(e)})),r},e.prototype.processValues=function(){},e.prototype.getStartLocation=function(t){return 0},e.prototype.getEndLocation=function(t){return 1},e.prototype.dataChangeUpdate=function(){},e.prototype.processConfig=function(e){e&&(S(e.dataFields)&&I(e.dataFields)||(e.dataFields={})),t.prototype.processConfig.call(this,e)},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var r=t.createChild(Rn);r.shouldClone=!1,ie(this,r,vn),r.padding(0,0,0,0),r.width=e,r.height=i;var n=t.dataItem;n.color=r.fill,n.colorOrig=r.fill},e.prototype.disableUnusedColumns=function(e){t.prototype.disableUnusedColumns.call(this,e),e.column&&(e.column.__disabled=!1)},e}(ks);ve.registeredClasses.TreeMapSeries=As,ve.registeredClasses.TreeMapSeriesDataItem=Is;var Os=function(t){function e(){var e=t.call(this)||this;return e.rows=[],e.className="TreeMapDataItem",e.values.value={},e.values.x0={},e.values.y0={},e.values.x1={},e.values.y1={},e.hasChildren.children=!0,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(t){this._legendDataItem=t,t.label&&(t.label.dataItem=this),t.valueLabel&&(t.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),e.prototype.getDuration=function(){return 0},Object.defineProperty(e.prototype,"value",{get:function(){var t=0;return this.children&&0!=this.children.length?se(this.children.iterator(),(function(e){var i=e.value;k(i)&&(t+=i)})):t=this.values.value.workingValue,t},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"percent",{get:function(){return this.parent?this.value/this.parent.value*100:100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x0",{get:function(){return this.values.x0.value},set:function(t){this.setValue("x0",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x1",{get:function(){return this.values.x1.value},set:function(t){this.setValue("x1",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y0",{get:function(){return this.values.y0.value},set:function(t){this.setValue("y0",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.values.y1.value},set:function(t){this.setValue("y1",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.properties.name},set:function(t){this.setProperty("name",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.properties.children},set:function(t){this.setProperty("children",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.parent?this.parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){var t=this.properties.color;return null==t&&this.parent&&(t=this.parent.color),null==t&&this.component&&(t=this.component.colors.getIndex(this.component.colors.step*this.index)),t},set:function(t){this.setProperty("color",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},set:function(t){t!=this._series&&(this._series&&(this.component.series.removeValue(this._series),this._series.dispose()),this._series=t,this._disposers.push(t))},enumerable:!0,configurable:!0}),e.prototype.hide=function(e,i,r,n){this.setWorkingValue("value",0),this.children&&this.children.each((function(t){t.hide(e,i,r,n)}));var a=this.seriesDataItem;return a&&a.bullets.each((function(t,e){e.hide(),e.preventShow=!0})),t.prototype.hide.call(this,e,i,r,n)},e.prototype.show=function(e,i,r){this.setWorkingValue("value",this.values.value.value),this.children&&this.children.each((function(t){t.show(e,i,r)}));var n=this.seriesDataItem;return n&&n.bullets.each((function(t,e){e.preventShow=!1})),t.prototype.show.call(this,e,i,r)},e}(Fo),Ds=function(t){function e(){var e=t.call(this)||this;e.layoutAlgorithm=e.squarify,e.zoomable=!0,e.className="TreeMap",e._usesData=!0,e.maxLevels=2,e.currentLevel=0,e.hideParentColumns=!1,e.colors=new za,e.sorting="descending";var i=e.xAxes.push(new xo);i.title.disabled=!0,i.strictMinMax=!0;var r=i.renderer;r.inside=!0,r.labels.template.disabled=!0,r.ticks.template.disabled=!0,r.grid.template.disabled=!0,r.axisFills.template.disabled=!0,r.minGridDistance=100,r.line.disabled=!0,r.baseGrid.disabled=!0;var n=e.yAxes.push(new xo);n.title.disabled=!0,n.strictMinMax=!0;var a=n.renderer;a.inside=!0,a.labels.template.disabled=!0,a.ticks.template.disabled=!0,a.grid.template.disabled=!0,a.axisFills.template.disabled=!0,a.minGridDistance=100,a.line.disabled=!0,a.baseGrid.disabled=!0,a.inversed=!0,e.xAxis=i,e.yAxis=n;var o=new As;return e.seriesTemplates=new ge(o),o.virtualParent=e,e._disposers.push(new me(e.seriesTemplates)),e._disposers.push(o),e.zoomOutButton.events.on("hit",(function(){e.zoomToChartDataItem(e._homeDataItem)}),void 0,!1),e.seriesTemplates.events.on("insertKey",(function(t){t.newValue.isTemplate=!0}),void 0,!1),e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"navigationBar",{get:function(){return this._navigationBar},set:function(t){var e=this;this._navigationBar!=t&&(this._navigationBar=t,t.parent=this,t.toBack(),t.links.template.events.on("hit",(function(t){var i=t.target.dataItem.dataContext;i.isDisposed()||(e.zoomToChartDataItem(i),e.createTreeSeries(i))}),void 0,!0),this._disposers.push(t))},enumerable:!0,configurable:!0}),e.prototype.validateData=function(){this.series.clear(),this._tempSeries=[],t.prototype.validateData.call(this),this._homeDataItem&&this._homeDataItem.dispose();var e=this.dataItems.template.clone();this._homeDataItem=e,se(this.dataItems.iterator(),(function(t){t.parent=e})),e.children=this.dataItems,e.x0=0,e.y0=0,e.name=this._homeText;var i=10*Math.round(1e3*this.pixelHeight/this.pixelWidth/10)||1e3;e.x1=1e3,e.y1=i,this.xAxis.min=0,this.xAxis.max=1e3,this.xAxis.getMinMax(),this.yAxis.min=0,this.yAxis.max=i,this.yAxis.getMinMax(),this.layoutItems(e),this.createTreeSeries(e),this.feedLegend()},e.prototype.layoutItems=function(t,e){if(t){var i=t.children;e||(e=this.sorting),"ascending"==e&&i.values.sort((function(t,e){return t.value-e.value})),"descending"==e&&i.values.sort((function(t,e){return e.value-t.value})),this._updateDataItemIndexes(0),this.layoutAlgorithm(t);for(var r=0,n=i.length;r<n;r++){var a=i.getIndex(r);a.children&&this.layoutItems(a)}}},e.prototype.createTreeSeries=function(t){var e=this;this._tempSeries=[];for(var i=[t],r=t.parent;null!=r;)this.initSeries(r),i.push(r),r=r.parent;i.reverse(),this.navigationBar&&(this.navigationBar.data=i),this.createTreeSeriesReal(t),ht(this._tempSeries,(function(t){-1==e.series.indexOf(t)&&e.series.push(t),t.zIndex=t.level}))},e.prototype.createTreeSeriesReal=function(t){if(t.children&&t.level<this.currentLevel+this.maxLevels){this.initSeries(t);for(var e=0;e<t.children.length;e++){var i=t.children.getIndex(e);i.children&&this.createTreeSeriesReal(i)}}},e.prototype.setData=function(e){this.currentLevel=0,this.currentlyZoomed=void 0,this.xAxis.start=0,this.xAxis.end=1,this.yAxis.start=0,this.yAxis.end=1,t.prototype.setData.call(this,e)},e.prototype.seriesAppeared=function(){return!0},e.prototype.initSeries=function(t){var e=this;if(!t.series){var i=void 0,r=this.seriesTemplates.getKey(t.level.toString());(i=r?r.clone():this.series.create()).dataItem.dataContext=t,i.name=t.name,i.parentDataItem=t,t.series=i,i.level=t.level;var n=t.dataContext;n&&(i.config=n.config),this.dataUsers.removeValue(i),i.data=t.children.values,i.fill=t.color,i.columnsContainer.hide(0),i.bulletsContainer.hide(0),i.columns.template.adapter.add("fill",(function(t,e){var i=e.dataItem;if(i){var r=i.treeMapDataItem;if(r)return e.fill=r.color,e.adapter.remove("fill"),r.color}})),this.zoomable&&(t.level>this.currentLevel||t.children&&t.children.length>0)&&(i.columns.template.cursorOverStyle=Qr.pointer,this.zoomable&&i.columns.template.events.on("hit",(function(i){var r=i.target.dataItem;t.level>e.currentLevel?e.zoomToChartDataItem(r.treeMapDataItem.parent):e.zoomToSeriesDataItem(r)}),this,void 0))}this._tempSeries.push(t.series)},e.prototype.toggleBullets=function(t){var e=this;se(this.series.iterator(),(function(i){-1==e._tempSeries.indexOf(i)?(i.columnsContainer.hide(),i.bulletsContainer.hide(t)):(i.columnsContainer.show(),i.bulletsContainer.show(t),i.dataItems.each((function(t){t.bullets.each((function(t,e){e.show()}))})),i.level<e.currentLevel?(e.hideParentColumns&&i.columnsContainer.hide(),i.bulletsContainer.hide(t)):i.level==e.currentLevel&&e.maxLevels>1&&i.dataItems.each((function(t){t.treeMapDataItem.children&&t.bullets.each((function(t,e){e.hide()}))})))}))},e.prototype.zoomToSeriesDataItem=function(t){this.zoomToChartDataItem(t.treeMapDataItem)},e.prototype.zoomToChartDataItem=function(t){var e=this;t||(t=this._homeDataItem);var i=this.zoomOutButton;if(i&&(t!=this._homeDataItem?i.show():i.hide()),t&&t.children){this.xAxis.zoomToValues(t.x0,t.x1),this.yAxis.zoomToValues(t.y0,t.y1),this.currentLevel=t.level,this.currentlyZoomed=t,this.createTreeSeries(t);var r=this.xAxis.rangeChangeAnimation||this.yAxis.rangeChangeAnimation;!r||r.isDisposed()||r.isFinished()?this.toggleBullets():(this._dataDisposers.push(r),r.events.once("animationended",(function(){e.toggleBullets()})))}},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("TreeMap chart"))},e.prototype.createDataItem=function(){return new Os},Object.defineProperty(e.prototype,"maxLevels",{get:function(){return this.getPropertyValue("maxLevels")},set:function(t){this.setPropertyValue("maxLevels",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLevel",{get:function(){return this.getPropertyValue("currentLevel")},set:function(t){this.setPropertyValue("currentLevel",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideParentColumns",{get:function(){return this.getPropertyValue("hideParentColumns")},set:function(t){this.setPropertyValue("hideParentColumns",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorting",{get:function(){return this.getPropertyValue("sorting")},set:function(t){this.setPropertyValue("sorting",t,!0)},enumerable:!0,configurable:!0}),e.prototype.createSeries=function(){return new As},Object.defineProperty(e.prototype,"homeText",{get:function(){return this._homeText},set:function(t){this._homeText=t,this._homeDataItem&&(this._homeDataItem.name=this._homeText)},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){if(e){if(S(e.layoutAlgorithm)&&C(e.layoutAlgorithm))switch(e.layoutAlgorithm){case"squarify":e.layoutAlgorithm=this.squarify;break;case"binaryTree":e.layoutAlgorithm=this.binaryTree;break;case"slice":e.layoutAlgorithm=this.slice;break;case"dice":e.layoutAlgorithm=this.dice;break;case"sliceDice":e.layoutAlgorithm=this.sliceDice;break;default:delete e.layoutAlgorithm}S(e.navigationBar)&&!S(e.navigationBar.type)&&(e.navigationBar.type="NavigationBar"),t.prototype.processConfig.call(this,e)}},e.prototype.validateLayout=function(){t.prototype.validateLayout.call(this),this.layoutItems(this.currentlyZoomed)},e.prototype.validateDataItems=function(){t.prototype.validateDataItems.call(this),this.layoutItems(this._homeDataItem),se(this.series.iterator(),(function(t){t.validateRawData()})),this.zoomToChartDataItem(this._homeDataItem)},e.prototype.binaryTree=function(t){var e,i,r=t.children,n=r.length,a=new Array(n+1);for(a[0]=i=e=0;e<n;++e)a[e+1]=i+=r.getIndex(e).value;!function t(e,i,n,o,s,l,u){if(e>=i-1){var c=r.getIndex(e);return c.x0=o,c.y0=s,c.x1=l,void(c.y1=u)}for(var h=a[e],p=n/2+h,d=e+1,f=i-1;d<f;){var m=d+f>>>1;a[m]<p?d=m+1:f=m}p-a[d-1]<a[d]-p&&e+1<d&&--d;var y=a[d]-h,g=n-y;if(l-o>u-s){var b=(o*g+l*y)/n;t(e,d,y,o,s,b,u),t(d,i,g,b,s,l,u)}else{var v=(s*g+u*y)/n;t(e,d,y,o,s,l,v),t(d,i,g,o,v,l,u)}}(0,n,t.value,t.x0,t.y0,t.x1,t.y1)},e.prototype.slice=function(t){for(var e,i=t.x0,r=t.x1,n=t.y0,a=t.children,o=-1,s=a.length,l=t.value&&(t.y1-n)/t.value;++o<s;)(e=a.getIndex(o)).x0=i,e.x1=r,e.y0=n,e.y1=n+=e.value*l},e.prototype.dice=function(t){for(var e,i=t.x0,r=t.y0,n=t.y1,a=t.children,o=-1,s=a.length,l=t.value&&(t.x1-i)/t.value;++o<s;)(e=a.getIndex(o)).y0=r,e.y1=n,e.x0=i,e.x1=i+=e.value*l},e.prototype.sliceDice=function(t){1&t.level?this.slice(t):this.dice(t)},e.prototype.squarify=function(t){for(var e,i,r,n,a,o,s,l,u,c,h=(1+Math.sqrt(5))/2,p=t.x0,d=t.x1,f=t.y0,m=t.y1,y=t.children,g=0,b=0,v=y.length,_=t.value;g<v;){i=d-p,r=m-f;do{n=y.getIndex(b++).value}while(!n&&b<v);for(a=o=n,c=n*n*(u=Math.max(r/i,i/r)/(_*h)),l=Math.max(o/c,c/a);b<v;++b){if(n+=e=y.getIndex(b).value,e<a&&(a=e),e>o&&(o=e),c=n*n*u,(s=Math.max(o/c,c/a))>l){n-=e;break}l=s}var x=this.dataItems.template.clone();x.value=n,x.dice=i<r,x.children=y.slice(g,b),x.x0=p,x.y0=f,x.x1=d,x.y1=m,x.dice?(x.y1=_?f+=r*n/_:m,this.dice(x)):(x.x1=_?p+=i*n/_:d,this.slice(x)),_-=n,g=b}},e.prototype.handleSeriesAdded2=function(){},e.prototype.handleDataItemValueChange=function(t,e){"value"==e&&this.invalidateDataItems()},e.prototype.handleDataItemWorkingValueChange=function(t,e){"value"==e&&this.invalidateDataItems()},e.prototype.getLegendLevel=function(t){if(t&&t.children)return t.children.length>1?t:1==t.children.length?this.getLegendLevel(t.children.getIndex(0)):t},Object.defineProperty(e.prototype,"homeDataItem",{get:function(){return this._homeDataItem},enumerable:!0,configurable:!0}),e.prototype.feedLegend=function(){var t=this.legend;if(t){t.dataFields.name="name";var e=this.getLegendLevel(this._homeDataItem);if(e){var i=[];e.children.each((function(t){i.push(t)})),t.data=i}}},e.prototype.disposeData=function(){t.prototype.disposeData.call(this),this._homeDataItem=void 0,this.series.clear(),this.navigationBar&&this.navigationBar.disposeData(),this.xAxis.disposeData(),this.yAxis.disposeData()},e.prototype.getExporting=function(){var e=this,i=t.prototype.getExporting.call(this);return i.adapter.add("formatDataFields",(function(t){return"csv"!=t.format&&"xlsx"!=t.format||S(e.dataFields.children)&&delete t.dataFields[e.dataFields.children],t})),i},e}(Mo);ve.registeredClasses.TreeMap=Ds;var Fs=function(t){function e(){var e=t.call(this)||this;return e._chart=new Vt,e.className="AxisRendererX3D",e._disposers.push(e._chart),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.updateGridElement=function(t,e,i){var r=this.positionToPoint(e+=(i-e)*t.location);if(t.element){var n=this.chart.dx3D||0,a=this.chart.dy3D||0,o=this.getHeight();t.path=Hn({x:n,y:a})+Wn({x:n,y:o+a})+Wn({x:0,y:o})}this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.getHeight();this.baseGrid.path=Hn({x:this.chart.dx3D||0,y:this.chart.dy3D||0})+Wn({x:0,y:0})+Wn({x:0,y:e})},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){t&&this._chart.set(t,t.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),e.prototype.handle3DChanged=function(t){"depth"!=t.property&&"angle"!=t.property||this.invalidate()},e}(Po);ve.registeredClasses.AxisRendererX3D=Fs;var Ms=function(t){function e(){var e=t.call(this)||this;return e._chart=new Vt,e.className="AxisRendererY3D",e._disposers.push(e._chart),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.updateGridElement=function(t,e,i){var r=this.positionToPoint(e+=(i-e)*t.location);if(t.element){var n=this.chart.dx3D||0,a=this.chart.dy3D||0,o=this.getWidth();t.path=Hn({x:0,y:0})+Wn({x:n,y:a})+Wn({x:o+n,y:a})}this.positionItem(t,r),this.toggleVisibility(t,e,0,1)},e.prototype.updateBaseGridElement=function(){t.prototype.updateBaseGridElement.call(this);var e=this.chart.dx3D||0,i=this.chart.dy3D||0,r=this.getWidth();this.baseGrid.path=Hn({x:0,y:0})+Wn({x:r,y:0})+Wn({x:r+e,y:i})},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){t&&this._chart.set(t,t.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),e.prototype.handle3DChanged=function(t){"depth"!=t.property&&"angle"!=t.property||this.invalidate()},e}(bo),Es=function(t){function e(){var e=t.call(this)||this;return e.className="Column3D",e}return Object(d.d)(e,t),e.prototype.createAssets=function(){this.column3D=this.createChild(Aa),this.column3D.shouldClone=!1,this.column3D.strokeOpacity=0,this.column=this.column3D},e.prototype.validate=function(){t.prototype.validate.call(this),this.column3D&&(this.column3D.width=this.pixelWidth,this.column3D.height=this.pixelHeight,this.column3D.invalid&&this.column3D.validate())},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.column3D&&this.column3D.copyFrom(e.column3D)},e.prototype.setFill=function(e){t.prototype.setFill.call(this,e),this.column.fill=e},e}(Ps);ve.registeredClasses.Column3D=Es;var Ls=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeries3DDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Cs),Rs=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeries3D",e.columns.template.column3D.applyOnClones=!0,e.columns.template.hiddenState.properties.visible=!0,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"columnsContainer",{get:function(){var t=this.chart;return t&&t.columnsContainer&&"vertical"!=t.leftAxesContainer.layout&&"vertical"!=t.rightAxesContainer.layout&&"horizontal"!=t.bottomAxesContainer.layout&&"horizontal"!=t.topAxesContainer.layout?t.columnsContainer:this._columnsContainer},enumerable:!0,configurable:!0}),e.prototype.validateDataElementReal=function(e){t.prototype.validateDataElementReal.call(this,e),e.column&&(e.column.dx=this.dx,e.column.dy=this.dy)},e.prototype.validateDataElements=function(){t.prototype.validateDataElements.call(this),this.chart&&this.chart.invalidateLayout()},e.prototype.createColumnTemplate=function(){return new Es},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t,!0),this.columns.template.column3D.depth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t),this.columns.template.column3D.angle=t},enumerable:!0,configurable:!0}),e}(ks);ve.registeredClasses.ColumnSeries3D=Rs,ve.registeredClasses.ColumnSeries3DDataItem=Ls,function(t){Object(d.d)((function(){var e=t.call(this)||this;return e.className="XYChart3DDataItem",e.applyTheme(),e}),t)}(Fo);var Vs=function(t){function e(){var e=t.call(this)||this;e._axisRendererX=Fs,e._axisRendererY=Ms,e.className="XYChart3D",e.depth=30,e.angle=30;var i=e.seriesContainer.createChild(Sn);return i.shouldClone=!1,i.isMeasured=!1,i.layout="none",e.columnsContainer=i,e.columnsContainer.mask=e.createChild(_n),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.updateSeriesMasks=function(){if(t.prototype.updateSeriesMasks.call(this),Fi()){var e=this.columnsContainer,i=e.mask;e.mask=void 0,e.mask=i}},Object.defineProperty(e.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(t){this.setPropertyValue("depth",t),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(t){this.setPropertyValue("angle",t),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx3D",{get:function(){return B(this.angle)*this.depth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy3D",{get:function(){return-j(this.angle)*this.depth},enumerable:!0,configurable:!0}),e.prototype.validateLayout=function(){t.prototype.validateLayout.call(this),this.fixColumns()},e.prototype.fixLayout=function(){this.chartContainer.marginTop=-this.dy3D,this.chartContainer.paddingRight=this.dx3D,this.scrollbarX&&(this.scrollbarX.dy=this.dy3D,this.scrollbarX.dx=this.dx3D),this.scrollbarY&&(this.scrollbarY.dy=this.dy3D,this.scrollbarY.dx=this.dx3D),this.fixColumns(),t.prototype.fixLayout.call(this)},e.prototype.fixColumns=function(){var t=this,e=1,i=0;se(this.series.iterator(),(function(t){t instanceof Rs&&(!t.clustered&&i>0&&e++,t.depthIndex=e-1,i++)}));var r=0;se(this.series.iterator(),(function(i){if(i instanceof Rs){i.depth=t.depth/e,i.angle=t.angle,i.columnsContainer==t.columnsContainer&&(i.dx=t.depth/e*B(t.angle)*i.depthIndex,i.dy=-t.depth/e*j(t.angle)*i.depthIndex);var n=!1;(i.baseAxis==i.xAxis&&i.xAxis.renderer.inversed||i.baseAxis==i.yAxis&&i.yAxis.renderer.inversed)&&(n=!0);var a=1;i.dataItems.each((function(t){var e=t.column;e&&(e.zIndex=n?1e3*(1e3-a)+r-100*i.depthIndex:1e3*a+r-100*i.depthIndex),a++})),n?r--:r++}})),this.maskColumns()},e.prototype.processConfig=function(e){if(e&&S(e.series)&&A(e.series))for(var i=0,r=e.series.length;i<r;i++)e.series[i].type=e.series[i].type||"ColumnSeries3D";t.prototype.processConfig.call(this,e)},e.prototype.maskColumns=function(){var t=this.plotContainer.pixelWidth,e=this.plotContainer.pixelHeight,i=this.dx3D,r=this.dy3D,n=Hn({x:0,y:0})+Wn({x:i,y:r})+Wn({x:t+i,y:r})+Wn({x:t+i,y:e+r})+Wn({x:t,y:e})+Wn({x:t,y:e})+Wn({x:0,y:e})+" Z",a=this.columnsContainer;a&&a.mask&&(a.mask.path=n)},e}(Mo);ve.registeredClasses.XYChart3D=Vs;var js=function(t){function e(){var e=t.call(this)||this;e.className="HeatLegend",e.markerContainer=e.createChild(Sn),e.markerContainer.shouldClone=!1,e.markerCount=1;var i=new Rn;return i.minHeight=20,i.minWidth=20,i.interactionsEnabled=!1,i.fillOpacity=1,i.cornerRadius(0,0,0,0),e.markerContainer.minHeight=20,e.markerContainer.minWidth=20,e.orientation="horizontal",e.markers=new Pe(i),e._disposers.push(new Se(e.markers)),e._disposers.push(e.markers.template),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.getMinFromRules=function(t){var e,i=this.series;if(i)return oe(i.heatRules.iterator(),(function(i){return i.property!=t||(e=i.min,!1)})),e},e.prototype.getMaxFromRules=function(t){var e,i=this.series;if(i)return se(i.heatRules.iterator(),(function(i){return i.property!=t||(e=i.max,!1)})),e},e.prototype.validate=function(){t.prototype.validate.call(this),this.valueAxis.renderer.inversed=this.reverseOrder;var e=this.series,i=this.minColor,r=this.maxColor;if(S(i)||(i=Xe(this.getMinFromRules("fill"))),S(r)||(r=Xe(this.getMaxFromRules("fill"))),e){var n=e.fill;!S(i)&&n instanceof Ne&&(i=n),!S(r)&&n instanceof Ne&&(r=n)}S(r)||(r=Xe(this.getMaxFromRules("fill")));var a=_(this.getMinFromRules("fillOpacity"));k(a)||(a=1);var o=_(this.getMaxFromRules("fillOpacity"));k(o)||(o=1);var s=_(this.getMinFromRules("strokeOpacity"));k(s)||(s=1);var l=_(this.getMaxFromRules("strokeOpacity"));k(l)||(l=1);for(var u=Xe(this.getMinFromRules("stroke")),c=Xe(this.getMaxFromRules("stroke")),h=0;h<this.markerCount;h++){var p=this.markers.getIndex(h);if(p||((p=this.markers.create()).parent=this.markerContainer,p.height=m(100),p.width=m(100)),1==this.markerCount){var d=new Zr;if(this.reverseOrder?(d.addColor(r,o),d.addColor(i,a)):(d.addColor(i,a),d.addColor(r,o)),"vertical"==this.orientation&&(d.rotation=-90),p.fill=d,S(u)&&S(c)){var f=new Zr;this.reverseOrder?(f.addColor(c,l),f.addColor(u,s)):(f.addColor(u,s),f.addColor(c,l)),"vertical"==this.orientation&&(f.rotation=-90),p.stroke=f}}else{var y=h;this.reverseOrder&&(y=this.markerCount-h-1);var g=new Ne(Ve(i.rgb,r.rgb,y/this.markerCount));if(p.fill=g,p.fillOpacity=a+(o-a)*y/this.markerCount,S(u)&&S(c)){var b=new Ne(Ve(u.rgb,c.rgb,y/this.markerCount));p.stroke=b,p.strokeOpacity=s+(l-s)*y/this.markerCount}}}this.markerCount>1&&(this.valueAxis.renderer.minGridDistance="horizontal"==this.orientation?this.measuredWidth/this.markerCount:this.measuredHeight/this.markerCount),this.valueAxis.invalidate(),h=this.markerCount;for(var v=this.markers.length;h<v;h++)this.markers.getIndex(h).parent=void 0},Object.defineProperty(e.prototype,"minColor",{get:function(){return this.getPropertyValue("minColor")},set:function(t){t instanceof Ne||(t=Xe(t)),this.setColorProperty("minColor",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxColor",{get:function(){return this.getPropertyValue("maxColor")},set:function(t){I(t)||(t=Xe(t)),this.setColorProperty("maxColor",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markerCount",{get:function(){return this.getPropertyValue("markerCount")},set:function(t){this.setPropertyValue("markerCount",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(t){this.setPropertyValue("minValue",t),this.valueAxis.min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(t){this.setPropertyValue("maxValue",t),this.valueAxis.max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0);var e=this.markerContainer,i=this.valueAxis;"horizontal"==t?(S(this.width)||(this.width=200),this.height=void 0,i.width=m(100),i.height=void 0,i.tooltip.pointerOrientation="vertical",this.layout="vertical",e.width=m(100),e.height=void 0,i.renderer instanceof Po||(i.renderer=new Po)):(S(this.height)||(this.height=200),this.width=void 0,this.layout="horizontal",e.width=void 0,e.height=m(100),i.height=m(100),i.width=void 0,i.tooltip.pointerOrientation="horizontal",i.renderer instanceof bo||(i.renderer=new bo),i.renderer.inside=!0,i.renderer.labels.template.inside=!0,this.markerContainer.reverseOrder=!0);var r=i.renderer;r.grid.template.disabled=!0,r.axisFills.template.disabled=!0,r.baseGrid.disabled=!0,r.labels.template.padding(2,3,2,3),r.minHeight=void 0,r.minWidth=void 0,this.markerContainer.layout=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueAxis",{get:function(){return this._valueAxis||(this.valueAxis=this.createChild(xo),this.valueAxis.shouldClone=!1),this._valueAxis},set:function(t){this._valueAxis=t,t.parent=this,t.strictMinMax=!0,this.orientation=this.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},set:function(t){var e=this;this._series=t;var i="value";try{var r=t.heatRules.getIndex(0).dataField;r&&(i=r)}catch(n){}this.updateMinMax(t.dataItem.values[i].low,t.dataItem.values[i].high),t.dataItem.events.on("calculatedvaluechanged",(function(r){e.updateMinMax(t.dataItem.values[i].low,t.dataItem.values[i].high)}),void 0,!1),t.heatRules.events.on("inserted",this.invalidate,this,!1),t.heatRules.events.on("removed",this.invalidate,this,!1)},enumerable:!0,configurable:!0}),e.prototype.updateMinMax=function(t,e){var i=this.valueAxis;k(this.minValue)||(i.min=t,i.invalidate()),k(this.maxValue)||(i.max=e,i.invalidate())},e.prototype.processConfig=function(e){if(e&&S(e.series)&&C(e.series)&&C(e.series))if(this.map.hasKey(e.series))e.series=this.map.getKey(e.series);else{var i=e.series,r=this.map.events.on("insertKey",(function(t){t.key==i&&(this.series=t.newValue,r.dispose())}),this);this._disposers.push(r),delete e.series}t.prototype.processConfig.call(this,e)},e}(Sn);ve.registeredClasses.HeatLegend=js;var zs=function(t){function e(){var e=t.call(this)||this;return e.className="Candlestick",e.layout="none",e}return Object(d.d)(e,t),e.prototype.createAssets=function(){t.prototype.createAssets.call(this),this.lowLine=this.createChild(Nn),this.lowLine.shouldClone=!1,this.highLine=this.createChild(Nn),this.highLine.shouldClone=!1},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.lowLine&&this.lowLine.copyFrom(e.lowLine),this.highLine&&this.highLine.copyFrom(e.highLine)},e}(Ps);ve.registeredClasses.Candlestick=zs;var Bs=function(t){function e(){var e=t.call(this)||this;return e.values.lowValueX={},e.values.lowValueY={},e.values.highValueX={},e.values.highValueY={},e.className="CandlestickSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"lowValueX",{get:function(){return this.values.lowValueX.value},set:function(t){this.setValue("lowValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lowValueY",{get:function(){return this.values.lowValueY.value},set:function(t){this.setValue("lowValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highValueX",{get:function(){return this.values.highValueX.value},set:function(t){this.setValue("highValueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highValueY",{get:function(){return this.values.highValueY.value},set:function(t){this.setValue("highValueY",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeValueX",{get:function(){return this.values.valueX.value},set:function(t){this.setValue("valueX",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeValueY",{get:function(){return this.values.valueY.value},set:function(t){this.setValue("valueY",t)},enumerable:!0,configurable:!0}),e}(Cs),Ns=function(t){function e(){var e=t.call(this)||this;e.className="CandlestickSeries",e.groupFields.lowValueX="low",e.groupFields.lowValueY="low",e.groupFields.highValueX="high",e.groupFields.highValueY="high",e.strokeOpacity=1;var i=new _r,r=i.getFor("positive"),n=i.getFor("negative");return e.dropFromOpenState.properties.fill=n,e.dropFromOpenState.properties.stroke=n,e.riseFromOpenState.properties.fill=r,e.riseFromOpenState.properties.stroke=r,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Candlestick Series"))},e.prototype.createDataItem=function(){return new Bs},e.prototype.validateDataElementReal=function(e){t.prototype.validateDataElementReal.call(this,e),this.validateCandlestick(e)},e.prototype.validateCandlestick=function(t){var e=t.column;if(e){var i=e.lowLine,r=e.highLine;if(this.baseAxis==this.xAxis){var n=e.pixelWidth/2;i.x=n,r.x=n;var a=t.getWorkingValue(this.yOpenField),o=t.getWorkingValue(this.yField),s=this.yAxis.getY(t,this.yOpenField),l=this.yAxis.getY(t,this.yField),u=this.yAxis.getY(t,this.yLowField),c=this.yAxis.getY(t,this.yHighField),h=e.pixelY;i.y1=u-h,r.y1=c-h,a<o?(i.y2=s-h,r.y2=l-h):(i.y2=l-h,r.y2=s-h)}if(this.baseAxis==this.yAxis){var p=e.pixelHeight/2;i.y=p,r.y=p;var d=t.getWorkingValue(this.xOpenField),f=t.getWorkingValue(this.xField),m=this.xAxis.getX(t,this.xOpenField),y=this.xAxis.getX(t,this.xField),g=this.xAxis.getX(t,this.xLowField),b=this.xAxis.getX(t,this.xHighField),v=e.pixelX;i.x1=g-v,r.x1=b-v,d<f?(i.x2=m-v,r.x2=y-v):(i.x2=y-v,r.x2=m-v)}se(this.axisRanges.iterator(),(function(e){var n=t.rangesColumns.getKey(e.uid);if(n){var a=n.lowLine;a.x=i.x,a.y=i.y,a.x1=i.x1,a.x2=i.x2,a.y1=i.y1,a.y2=i.y2;var o=n.highLine;o.x=r.x,o.y=r.y,o.x1=r.x1,o.x2=r.x2,o.y1=r.y1,o.y2=r.y2}}))}},Object.defineProperty(e.prototype,"xLowField",{get:function(){return this._xLowField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yLowField",{get:function(){return this._yLowField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xHighField",{get:function(){return this._xHighField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yHighField",{get:function(){return this._yHighField},enumerable:!0,configurable:!0}),e.prototype.defineFields=function(){t.prototype.defineFields.call(this);var e=this.xAxis,i=this.yAxis;if(e&&i){if(this.baseAxis==e){var r=$e(i.axisFieldName);this._yLowField="low"+r+"Y",this._yHighField="high"+r+"Y"}if(this.baseAxis==i){var n=$e(e.axisFieldName);this._xLowField="low"+n+"X",this._xHighField="high"+n+"X"}this.addValueField(e,this._xValueFields,this._xLowField),this.addValueField(e,this._xValueFields,this._xHighField),this.addValueField(i,this._yValueFields,this._yLowField),this.addValueField(i,this._yValueFields,this._yHighField)}},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var r,n,a=t.createChild(zs);a.shouldClone=!1,a.copyFrom(this.columns.template);var o=a.lowLine,s=a.highLine;this.baseAxis==this.yAxis?(r=e/3,n=i,o.y=i/2,s.y=i/2,o.x2=e/3,s.x2=e/3,s.x=e/3*2,a.column.x=e/3):(r=e,n=i/3,o.x=e/2,s.x=e/2,o.y2=i/3,s.y2=i/3,s.y=i/3*2,a.column.y=i/3),a.width=r,a.height=n,ie(this,t,vn),ie(this.columns.template,a,vn),a.stroke=this.riseFromOpenState.properties.stroke,a.fill=a.stroke;var l=t.dataItem;l.color=a.fill,l.colorOrig=a.fill},e.prototype.createColumnTemplate=function(){return new zs},e}(ks);ve.registeredClasses.CandlestickSeries=Ns,ve.registeredClasses.CandlestickSeriesDataItem=Bs;var Us=function(t){function e(){var e=t.call(this)||this;return e.className="OHLC",e.layout="none",e}return Object(d.d)(e,t),e.prototype.createAssets=function(){this.openLine=this.createChild(Nn),this.openLine.shouldClone=!1,this.highLowLine=this.createChild(Nn),this.highLowLine.shouldClone=!1,this.closeLine=this.createChild(Nn),this.closeLine.shouldClone=!1},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.openLine&&this.openLine.copyFrom(e.openLine),this.highLowLine&&this.highLowLine.copyFrom(e.highLowLine),this.closeLine&&this.closeLine.copyFrom(e.closeLine)},e}(zs);ve.registeredClasses.OHLC=Us;var Xs=function(t){function e(){var e=t.call(this)||this;return e.className="OHLCSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Bs),Hs=function(t){function e(){var e=t.call(this)||this;return e.className="OHLCSeries",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("OHLC Series"))},e.prototype.createDataItem=function(){return new Xs},e.prototype.validateCandlestick=function(t){var e=t.column;if(e){var i=e.openLine,r=e.highLowLine,n=e.closeLine;if(this.baseAxis==this.xAxis){var a=e.pixelWidth/2;r.x=a,t.getWorkingValue(this.yOpenField),t.getWorkingValue(this.yField);var o=this.yAxis.getY(t,this.yOpenField),s=this.yAxis.getY(t,this.yField),l=this.yAxis.getY(t,this.yLowField),u=this.yAxis.getY(t,this.yHighField),c=e.pixelY;i.y1=o-c,i.y2=o-c,i.x1=0,i.x2=a,n.y1=s-c,n.y2=s-c,n.x1=a,n.x2=2*a,r.y1=u-c,r.y2=l-c}if(this.baseAxis==this.yAxis){var h=e.pixelHeight/2;r.y=h,t.getWorkingValue(this.xOpenField),t.getWorkingValue(this.xField);var p=this.xAxis.getX(t,this.xOpenField),d=this.xAxis.getX(t,this.xField),f=this.xAxis.getX(t,this.xLowField),m=this.xAxis.getX(t,this.xHighField),y=e.pixelX;i.x1=p-y,i.x2=p-y,i.y1=h,i.y2=2*h,n.x1=d-y,n.x2=d-y,n.y1=0,n.y2=h,r.x1=m-y,r.x2=f-y}se(this.axisRanges.iterator(),(function(e){var a=t.rangesColumns.getKey(e.uid);if(a){var o=a.openLine;o.x=i.x,o.y=i.y,o.x1=i.x1,o.x2=i.x2,o.y1=i.y1,o.y2=i.y2;var s=a.closeLine;s.x=n.x,s.y=n.y,s.x1=n.x1,s.x2=n.x2,s.y1=n.y1,s.y2=n.y2;var l=a.highLowLine;l.x=r.x,l.y=r.y,l.x1=r.x1,l.x2=r.x2,l.y1=r.y1,l.y2=r.y2}}))}},e.prototype.createLegendMarker=function(t){var e=t.pixelWidth,i=t.pixelHeight;t.removeChildren();var r,n,a=t.createChild(Us);a.shouldClone=!1,a.copyFrom(this.columns.template);var o=a.openLine,s=a.closeLine,l=a.highLowLine;this.baseAxis==this.yAxis?(r=e/3,n=i,l.y=i/2,l.x2=e,o.x=e/3*2,o.y2=i/2,s.x=e/3,s.y2=i,s.y1=i/2):(r=e,n=i/3,l.x=e/2,l.y2=i,o.y=i/3*2,o.x2=e/2,s.y=i/3,s.x2=e,s.x1=e/2),a.width=r,a.height=n,ie(this,t,vn),ie(this.columns.template,a,vn),a.stroke=this.riseFromOpenState.properties.stroke;var u=t.dataItem;u.color=a.stroke,u.colorOrig=a.stroke},e.prototype.createColumnTemplate=function(){return new Us},e}(Ns);ve.registeredClasses.OHLCSeries=Hs,ve.registeredClasses.OHLCSeriesDataItem=Xs;var Ws=function(t){function e(){var e=t.call(this)||this;return e.className="StepLineSeriesSegment",e}return Object(d.d)(e,t),e.prototype.drawSegment=function(t,e,i,r,n,a){if(t.length>0&&e.length>0)if(n){var o=Hn(t[0]);if(t.length>0)for(var s=1;s<t.length;s++){var l=t[s];s/2==Math.round(s/2)?o+=Hn(l):o+=Wn(l)}this.strokeSprite.path=o,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(o=Hn(t[0])+Xn(t),o+=Wn(e[0])+Xn(e),o+=Wn(t[0]),this.fillSprite.path=o+=" Z")}else o=Hn(t[0])+Xn(t),this.strokeSprite.path=o,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(o+=Wn(e[0])+Xn(e),o+=Wn(t[0]),this.fillSprite.path=o+=" Z")},e}(Eo);ve.registeredClasses.StepLineSeriesSegment=Ws;var Ys=function(t){function e(){var e=t.call(this)||this;return e.className="StepLineSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Vo),Gs=function(t){function e(){var e=t.call(this)||this;return e.className="StepLineSeries",e.applyTheme(),e.startLocation=0,e.endLocation=1,e}return Object(d.d)(e,t),e.prototype.createDataItem=function(){return new Ys},e.prototype.addPoints=function(t,e,i,r,n){var a,o,s,l;this.baseAxis==this.xAxis&&(a=this.startLocation,o=this.endLocation,s=this.getAdjustedXLocation(e,this.yOpenField),l=this.getAdjustedXLocation(e,this.yField)),this.baseAxis==this.yAxis&&(s=this.startLocation,l=this.endLocation,a=this.getAdjustedXLocation(e,this.xOpenField),o=this.getAdjustedXLocation(e,this.xField));var u=this.xAxis.getX(e,i,a),c=this.yAxis.getY(e,r,s),h=this.xAxis.getX(e,i,o),p=this.yAxis.getY(e,r,l);if(u=V(u,-1e5,1e5),c=V(c,-1e5,1e5),h=V(h,-1e5,1e5),p=V(p,-1e5,1e5),!this.noRisers&&t.length>1){var d=t[t.length-1];this.baseAxis==this.xAxis&&t.push(n?{x:d.x,y:p}:{x:u,y:d.y}),this.baseAxis==this.yAxis&&t.push(n?{x:h,y:d.y}:{x:d.x,y:c})}var f={x:u,y:c},m={x:h,y:p};n?t.push(m,f):t.push(f,m)},e.prototype.drawSegment=function(t,e,i){var r=!1;this.yAxis==this.baseAxis&&(r=!0),t.drawSegment(e,i,this.tensionX,this.tensionY,this.noRisers,r)},e.prototype.createSegment=function(){return new Ws},Object.defineProperty(e.prototype,"noRisers",{get:function(){return this.getPropertyValue("noRisers")},set:function(t){this.setPropertyValue("noRisers",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t,!0)},enumerable:!0,configurable:!0}),e}(jo);ve.registeredClasses.StepLineSeries=Gs,ve.registeredClasses.StepLineSeriesDataItem=Ys;var qs=function(t){function e(){var e=t.call(this)||this;return e.className="RadarColumn",e}return Object(d.d)(e,t),e.prototype.createAssets=function(){this.radarColumn=this.createChild(na),this.radarColumn.shouldClone=!1,this.radarColumn.strokeOpacity=void 0,this.column=this.radarColumn},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.radarColumn&&this.radarColumn.copyFrom(e.radarColumn)},e.prototype.getTooltipX=function(){var t=this.getPropertyValue("tooltipX");return k(t)?t:this.radarColumn.getTooltipX()},e.prototype.getTooltipY=function(){var t=this.getPropertyValue("tooltipX");return k(t)?t:this.radarColumn.getTooltipY()},e}(Ps);ve.registeredClasses.RadarColumn=qs;var Ks=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Cs),Zs=function(t){function e(){var e=t.call(this)||this;return e.className="RadarColumnSeries",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createColumnTemplate=function(){return new qs},e.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},e.prototype.disableUnusedColumns=function(t){t&&(t.column&&(t.column.__disabled=!0),se(this.axisRanges.iterator(),(function(e){var i=t.rangesColumns.getKey(e.uid);i&&(i.__disabled=!0)})))},e.prototype.validateDataElementReal=function(t){var e,i,r,n,a=this,o=this.chart.startAngle,s=this.chart.endAngle,l=this.yField,u=this.yOpenField,c=this.xField,h=this.xOpenField,p=this.getStartLocation(t),d=this.getEndLocation(t),m=(s-o)/(this.dataItems.length*(this.end-this.start)),y=t.column;y||(y=this.columns.create(),t.column=y,ie(this,y,vn),ie(this.columns.template,y,vn),t.addSprite(y),y.paper=this.paper,this.setColumnStates(y));var g=y.width,b=100;g instanceof f&&(b=g.percent);var v=L((d-p)*(1-b/100)/2,5);if(p+=v,d-=v,this.xAxis instanceof Io&&this.yAxis instanceof Io?(r=W({x:this.yAxis.getX(t,l,0,"valueY"),y:this.yAxis.getY(t,l,0,"valueY")}),n=W({x:this.yAxis.getX(t,u,1,"valueY"),y:this.yAxis.getY(t,u,1,"valueY")}),e=this.xAxis.getAngle(t,h,0,"valueX"),i=this.xAxis.getAngle(t,c,1,"valueX"),o+=p*m,s-=(1-d)*m):this.baseAxis==this.xAxis?(r=W({x:this.yAxis.getX(t,l,t.locations[l],"valueY"),y:this.yAxis.getY(t,l,t.locations[l],"valueY")}),n=W({x:this.yAxis.getX(t,u,t.locations[u],"valueY"),y:this.yAxis.getY(t,u,t.locations[u],"valueY")}),e=this.xAxis.getAngle(t,h,p,"valueX"),i=this.xAxis.getAngle(t,c,d,"valueX"),o+=p*m,s-=(1-d)*m):(r=W({x:this.yAxis.getX(t,l,p,"valueY"),y:this.yAxis.getY(t,l,p,"valueY")}),n=W({x:this.yAxis.getX(t,u,d,"valueY"),y:this.yAxis.getY(t,u,d,"valueY")}),e=this.xAxis.getAngle(t,c,t.locations[c],"valueX"),i=this.xAxis.getAngle(t,h,t.locations[h],"valueX")),i<e){var _=i;i=e,e=_}e=V(e,o,s),i=V(i,o,s);var x=y.radarColumn;x.startAngle=e;var S=i-e;S>0?(x.arc=S,x.radius=r,x.innerRadius=n,y.__disabled=!1,y.parent=this.columnsContainer,se(this.axisRanges.iterator(),(function(i){var o,s,l=t.rangesColumns.getKey(i.uid);l||(l=a.columns.create(),o=a.columns.template,s=l,ht(vn,(function(t){s[t]=o[t]})),ie(i.contents,l,vn),l.dataItem&&_t(l.dataItem.sprites,l),t.addSprite(l),l.paper=a.paper,a.setColumnStates(l),t.rangesColumns.setKey(i.uid,l));var u=l.radarColumn;u.startAngle=e,u.arc=S,u.radius=r,u.innerRadius=n,u.invalid&&(u.paper=a.paper,u.validate()),l.__disabled=!1,l.parent=i.contents}))):this.disableUnusedColumns(t)},e.prototype.getPoint=function(t,e,i,r,n,a,o){a||(a="valueX"),o||(o="valueY");var s=W({x:this.yAxis.getX(t,i,n,o),y:this.yAxis.getY(t,i,n,o)});0==s&&(s=1e-5);var l=this.xAxis.getAngle(t,e,r,a);return{x:s*B(l),y:s*j(l)}},e.prototype.getMaskPath=function(){var t=this.yAxis.renderer;return Kn(t.startAngle,t.endAngle-t.startAngle,t.pixelRadius,t.pixelInnerRadius)},e.prototype.positionBulletReal=function(t,e,i){var r=this.xAxis,n=this.yAxis;(e<r.start||e>r.end||i<n.start||i>n.end)&&(t.visible=!1),t.moveTo(this.xAxis.renderer.positionToPoint(e,i))},e.prototype.setXAxis=function(e){t.prototype.setXAxis.call(this,e),this.updateRendererRefs()},e.prototype.setYAxis=function(e){t.prototype.setYAxis.call(this,e),this.updateRendererRefs()},e.prototype.updateRendererRefs=function(){this.xAxis.renderer.axisRendererY=this.yAxis.renderer},e}(ks);ve.registeredClasses.RadarColumnSeries=Zs,ve.registeredClasses.RadarColumnSeriesDataItem=Ks;var Js=function(t){function e(){var e=t.call(this)||this;return e.slice=e.createChild(_n),e.slice.shouldClone=!1,e.slice.setElement(e.paper.add("path")),e.slice.isMeasured=!1,e.orientation="vertical",e.bottomWidth=m(100),e.topWidth=m(100),e.isMeasured=!1,e.width=10,e.height=10,e.expandDistance=0,e.className="FunnelSlice",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.pixelPaddingTop,i=this.pixelPaddingLeft,r=this.pixelWidth-this.pixelPaddingRight-i,n=this.pixelHeight-e-this.pixelPaddingBottom,a=this.expandDistance,o="";if("vertical"==this.orientation){var s={x:(r-(m=Ze(this.topWidth,r)))/2+i,y:e},l={x:(r+m)/2+i,y:e},u={x:(r+(y=Ze(this.bottomWidth,r)))/2+i,y:e+n},c={x:(r-y)/2+i,y:e+n},h={x:l.x+(u.x-l.x)/2+a*n,y:l.y+.5*n},p={x:s.x+(c.x-s.x)/2-a*n,y:s.y+.5*n},d=Wn(u),f="";0!=a&&(d=Yn(u,h),f=Yn(s,p)),o=Hn(s)+Wn(l)+d+Wn(c)+f,this.tickPoint={x:l.x+(u.x-l.x)/2,y:l.y+(u.y-l.y)/2}}else{var m,y,g={x:i,y:(n-(m=Ze(this.topWidth,n)))/2+e},b={x:i,y:(n+m)/2+e},v={x:i+r,y:(n-(y=Ze(this.bottomWidth,n)))/2+e},_={x:i+r,y:(n+y)/2+e};h={y:g.y+(v.y-g.y)/2-a*r,x:g.x+.5*r},p={y:b.y+(_.y-b.y)/2+a*r,x:b.x+.5*r},d=Wn(v),f="",0!=a&&(d=Yn(v,h),f=Yn(b,p)),o=Hn(b)+Wn(g)+d+Wn(_)+f,this.tickPoint={y:b.y+(_.y-b.y)/2,x:b.x+(_.x-b.x)/2}}this.slice.path=o,this.invalidateLayout()},e.prototype.getPoint=function(t,e){var i=this.pixelPaddingTop,r=this.pixelPaddingLeft,n=this.pixelWidth-this.pixelPaddingRight-r,a=this.pixelHeight-i-this.pixelPaddingBottom;if("vertical"==this.orientation){var o={x:(n-(c=Ze(this.topWidth,n)))/2+r,y:i},s={x:(n+c)/2+r,y:i},l={x:(n+(h=Ze(this.bottomWidth,n)))/2+r,y:i+a},u=o.x+((n-h)/2+r-o.x)*e;return{x:u+(s.x+(l.x-s.x)*e-u)*t,y:s.y+(l.y-s.y)*e}}var c,h,p=r,d=(a-(c=Ze(this.topWidth,a)))/2+i,f=(a+c)/2+i,m=r+n,y=d+((a-(h=Ze(this.bottomWidth,a)))/2+i-d)*t;return{y:y+(f+((a+h)/2+i-f)*t-y)*e,x:p+(m-p)*t}},Object.defineProperty(e.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(t){this.setPercentProperty("bottomWidth",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(t){this.setPercentProperty("topWidth",t,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandDistance",{get:function(){return this.getPropertyValue("expandDistance")},set:function(t){this.setPropertyValue("expandDistance",t,!0)},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.slice&&this.slice.copyFrom(e.slice)},e}(Sn);ve.registeredClasses.FunnelSlice=Js;var $s=function(t){function e(){var e=t.call(this)||this;return e._label=new Vt,e._slice=new Vt,e.className="FunnelTick",e.element=e.paper.add("path"),e._disposers.push(e._label),e._disposers.push(e._slice),e.setPropertyValue("locationX",0),e.setPropertyValue("locationY",0),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.draw=function(){t.prototype.draw.call(this);var e=this.slice,i=e.getPoint(this.locationX,this.locationY);if(i){var r=this.label,n=e.dataItem.component,a=void 0,o=void 0,s=void 0;if("vertical"==n.orientation){var l=r.pixelX,u=r.pixelY;n.labelsOpposite||(l+=r.maxRight),a=xi(i,e,this.parent),s=xi({x:l,y:u},r.parent,this.parent),o={x:r.parent.pixelX-this.length,y:s.y},n.labelsOpposite||(o.x=r.parent.measuredWidth+this.length)}else l=r.pixelX,u=r.pixelY,n.labelsOpposite||(u+=r.maxBottom),a=xi(i,e,this.parent),o={x:(s=xi({x:l,y:u},r.parent,this.parent)).x,y:r.parent.pixelY-this.length},n.labelsOpposite||(o.y=r.parent.measuredHeight+this.length);this.path=Hn(a)+Wn(o)+Wn(s)}},Object.defineProperty(e.prototype,"slice",{get:function(){return this._slice.get()},set:function(t){this._slice.set(t,new Rt([t.events.on("transformed",this.invalidate,this,!1),t.events.on("validated",this.invalidate,this,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label.get()},set:function(t){this._label.set(t,t.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(t){this.setPropertyValue("locationX",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(t){this.setPropertyValue("locationY",t,!1,!0)},enumerable:!0,configurable:!0}),e}(fo);ve.registeredClasses.FunnelTick=$s;var Qs=function(t){function e(){var e=t.call(this)||this;return e.className="FunnelSeriesDataItem",e.events.on("visibilitychanged",(function(){e.component&&e.component.invalidateDataItems()}),e,!1),e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"sliceLink",{get:function(){var t=this;if(!this._sliceLink){var e=this.component.sliceLinks.create();this._sliceLink=e,this._disposers.push(e),e.parent=this.component.slicesContainer,this._disposers.push(new Lt((function(){t.component&&t.component.sliceLinks.removeValue(e)}))),this.addSprite(e),e.visible=this.visible}return this._sliceLink},enumerable:!0,configurable:!0}),e}(Jo),tl=function(t){function e(){var e=t.call(this)||this;return e._nextY=0,e.className="FunnelSeries",e.orientation="vertical",e.width=m(100),e.height=m(100),e.slicesContainer.width=m(100),e.slicesContainer.height=m(100),e._disposers.push(e.slicesContainer.events.on("maxsizechanged",e.invalidateDataItems,e,!1)),e.labelsOpposite=!0,e.labelsContainer.layout="absolute",e.bottomRatio=0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createSlice=function(){return new Js},e.prototype.createTick=function(){return new $s},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Funnel Series"))},e.prototype.createDataItem=function(){return new Qs},e.prototype.initSlice=function(t){t.isMeasured=!1,t.defaultState.properties.scale=1,t.observe("scale",this.handleSliceScale,this),t.observe(["dx","dy","x","y"],this.handleSliceMove,this),t.tooltipText="{category}: {value.percent.formatNumber('#.#')}% ({value.value})",t.states.create("hover").properties.expandDistance=.2},e.prototype.initLabel=function(e){t.prototype.initLabel.call(this,e),e.verticalCenter="middle",e.horizontalCenter="middle",e.isMeasured=!0,e.padding(5,5,5,5)},e.prototype.validate=function(){t.prototype.validate.call(this),this._nextY=0},e.prototype.validateDataElements=function(){var e=this,i=this.slicesContainer,r=this.labelsContainer,n=this.labels.template;this.alignLabels?(n.interactionsEnabled=!0,i.isMeasured=!0,r.isMeasured=!0):(n.interactionsEnabled=!1,i.isMeasured=!1,r.isMeasured=!1);var a=0,o=0;this.dataItems.each((function(t){S(t.value)&&(o++,t.value>0?a+=Math.abs(t.getWorkingValue("value")/t.value):e.ignoreZeroValues?o--:!t.visible||t.__disabled||t.isHiding?o--:a+=1)})),this._total=1/o*a,this._count=o,t.prototype.validateDataElements.call(this),this.arrangeLabels()},e.prototype.getNextValue=function(t){var e=t.index,i=t.getWorkingValue("value");if(e<this.dataItems.length-1){var r=this.dataItems.getIndex(e+1);if(i=r.getWorkingValue("value"),!r.visible||r.isHiding||r.__disabled||0==r.value&&this.ignoreZeroValues)return this.getNextValue(r)}return i},e.prototype.formDataElement=function(){},e.prototype.validateDataElement=function(e){var i=this,r=e.slice;r.orientation=this.orientation;var n=e.sliceLink;n.orientation=this.orientation;var a=e.tick,o=e.label;a.slice=r,a.label=o,S(e.value)?(this.decorateSlice(e),ht(e.sprites,(function(t){t.__disabled=!(0!=e.value||!i.ignoreZeroValues)}))):ht(e.sprites,(function(t){t.__disabled=!0})),e.index==this.dataItems.length-1&&(n.disabled=!0),t.prototype.validateDataElement.call(this,e),n.fill=r.fill},e.prototype.decorateSlice=function(t){var e=t.slice,i=t.sliceLink,r=t.label,n=t.tick,a=this.slicesContainer.innerWidth,o=this.slicesContainer.innerHeight,s=this.getNextValue(t),l=Math.abs(t.getWorkingValue("value")),u=this.bottomRatio,c=1;if(0!=t.value?c=l/Math.abs(t.value):(t.__disabled||t.isHiding||!t.visible)&&(c=1e-6),this.ignoreZeroValues&&0==t.value)t.__disabled=!0;else if(t.__disabled=!1,this._nextY==1/0&&(this._nextY=0),"vertical"==this.orientation){var h=i.pixelHeight*c;o+=h,e.topWidth=l/this.dataItem.values.value.high*a,e.bottomWidth=(l-(l-s)*u)/this.dataItem.values.value.high*a,i.topWidth=e.bottomWidth,i.bottomWidth=(l-(l-s))/this.dataItem.values.value.high*a,e.y=this._nextY,e.height=Math.min(1e5,N(0,o/this._count*c/this._total-h)),e.x=a/2,r.x=this.alignLabels?void 0:e.x,r.y=e.pixelY+e.pixelHeight*n.locationY,this._nextY+=e.pixelHeight+h,i.y=this._nextY-h,i.x=e.x}else{var p=i.pixelWidth*c;a+=p,e.topWidth=l/this.dataItem.values.value.high*o,e.bottomWidth=(l-(l-s)*u)/this.dataItem.values.value.high*o,i.topWidth=e.bottomWidth,i.bottomWidth=(l-(l-s))/this.dataItem.values.value.high*o,e.x=this._nextY,e.width=Math.min(1e5,a/this._count*c*1/this._total-p),e.y=o/2,r.y=this.alignLabels?this.labelsContainer.measuredHeight:e.y,r.x=e.pixelX+e.pixelWidth*n.locationX,this._nextY+=e.pixelWidth+p,i.x=this._nextY-p,i.y=e.y}},e.prototype.getLastLabel=function(t){if(t>0){var e=this.labels.getIndex(t);return e.__disabled||!e.visible?this.getLastLabel(t-1):e}},e.prototype.arrangeLabels=function(){if(this.alignLabels){var t=this.labels.length;if(t>1){var e=this.getLastLabel(t-1);if(e){var i=e.pixelY,r=e.pixelX;if(t>1){for(var n=t-2;n>=0;n--)(a=this.labels.getIndex(n)).visible&&!a.__disabled&&(a.invalid&&a.validate(),"vertical"==this.orientation?a.pixelY+a.measuredHeight>i&&(a.y=Math.min(1e6,i-a.measuredHeight)):a.pixelX+a.measuredWidth>r&&(a.x=Math.min(1e6,r-a.measuredWidth)),i=a.pixelY,r=a.pixelX);for(i=0,r=0,n=0;n<t;n++){var a;(a=this.labels.getIndex(n)).visible&&!a.__disabled&&(a.invalid&&a.validate(),"vertical"==this.orientation?a.pixelY<i&&(a.y=Math.min(1e6,i)):a.pixelX<r&&(a.x=Math.min(1e6,r)),i+=a.measuredHeight,r+=a.measuredWidth)}}}}}},e.prototype.positionBullet=function(e){t.prototype.positionBullet.call(this,e);var i=e.dataItem.slice,r=e.locationX;k(r)||(r=.5);var n=e.locationY;k(n)||(n=1),e.x=i.pixelX+i.measuredWidth*r,e.y=i.pixelY+i.measuredHeight*n},Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t)&&(this.labelsOpposite=this.labelsOpposite,this.invalidate(),"vertical"==t?(this.ticks.template.locationX=1,this.ticks.template.locationY=.5,this.labels.template.rotation=0,this.layout="horizontal"):(this.ticks.template.locationX=.5,this.ticks.template.locationY=1,this.labels.template.rotation=-90,this.layout="vertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRatio",{get:function(){return this.getPropertyValue("bottomRatio")},set:function(t){this.setPropertyValue("bottomRatio",t)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sliceLinks",{get:function(){if(!this._sliceLinks){var t=new Js;t.applyOnClones=!0,t.fillOpacity=.5,t.expandDistance=-.3,t.hiddenState.properties.opacity=0,this._disposers.push(t),this._sliceLinks=new Pe(t),this._disposers.push(new Se(this._sliceLinks))}return this._sliceLinks},enumerable:!0,configurable:!0}),e.prototype.show=function(e){var i=this,r=this.startIndex,n=this.endIndex,a=this.defaultState.transitionDuration;k(e)&&(a=e),Gi.animationsEnabled||(a=0);var o=0;return se(ce(this.dataItems.iterator()),(function(t){var e=t[0];i.sequencedInterpolation&&(o=i.sequencedInterpolationDelay*e+a*(e-r)/(n-r)),t[1].show(a,o,["value"])})),t.prototype.show.call(this,e)},e.prototype.hide=function(e){var i=this,r=["value"],n=this.startIndex,a=this.endIndex,o=0,s=this.hiddenState.transitionDuration;k(e)&&(s=e),Gi.animationsEnabled||(s=0),se(ce(this.dataItems.iterator()),(function(t){var e=t[0];i.sequencedInterpolation&&(o=i.sequencedInterpolationDelay*e+s*(e-n)/(a-n)),t[1].hide(s,o,0,r)}));var l=t.prototype.hide.call(this,e);return l&&!l.isFinished()&&l.delay(o),l},e.prototype.setAlignLabels=function(e){t.prototype.setAlignLabels.call(this,e),this.ticks.template.disabled=!e;var i=this.labelsContainer;i&&(e?(i.height=void 0,i.width=void 0,i.margin(10,10,10,10)):(i.width=m(100),i.height=m(100))),this.labelsOpposite=this.labelsOpposite},Object.defineProperty(e.prototype,"labelsOpposite",{get:function(){return this.getPropertyValue("labelsOpposite")},set:function(t){this.setPropertyValue("labelsOpposite",t);var e=this.labels.template,i="none",r="none";this.alignLabels?t?(this.labelsContainer.toFront(),"vertical"==this.orientation?(this.ticks.template.locationX=1,e.horizontalCenter="left",i="right"):(this.ticks.template.locationY=1,e.horizontalCenter="right",r="bottom")):(this.labelsContainer.toBack(),"vertical"==this.orientation?(this.ticks.template.locationX=0,i="left"):(r="top",this.ticks.template.locationY=0)):"vertical"==this.orientation?i="center":r="middle",e.align=i,e.valign=r,this.validateLayout(),this.ticks.each((function(t){t.invalidate()})),this.invalidateDataItems()},enumerable:!0,configurable:!0}),e}($o);ve.registeredClasses.FunnelSeries=tl,ve.registeredClasses.FunnelSeriesDataItem=Qs;var el=function(t){function e(){var e=t.call(this)||this;return e.className="PyramidSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Qs),il=function(t){function e(){var e=t.call(this)||this;return e.className="PyramidSeries",e.topWidth=m(0),e.bottomWidth=m(100),e.pyramidHeight=m(100),e.valueIs="area",e.sliceLinks.template.width=0,e.sliceLinks.template.height=0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},e.prototype.createDataItem=function(){return new el},e.prototype.validate=function(){t.prototype.validate.call(this),this._nextWidth=void 0},e.prototype.getNextValue=function(t){var e=t.index,i=t.getWorkingValue("value");return e<this.dataItems.length-1&&(i=this.dataItems.getIndex(e+1).getWorkingValue("value")),0==i&&(i=1e-6),i},e.prototype.validateDataElements=function(){var e=this,i=this.slicesContainer.innerWidth,r=this.slicesContainer.innerHeight;if(this.dataItems.each((function(t){if(t.value>0){var n=t.getWorkingValue("value")/t.value,a=t.sliceLink;"vertical"==e.orientation?r-=a.pixelHeight*n:i-=a.pixelWidth*n}})),this._pyramidHeight=Ze(this.pyramidHeight,r),this._pyramidWidth=Ze(this.pyramidHeight,i),"vertical"==this.orientation){var n=(r-this._pyramidHeight)/2;this.slicesContainer.y=n,this.labelsContainer.y=n,this.ticksContainer.y=n}else{var a=(i-this._pyramidWidth)/2;this.slicesContainer.x=a,this.labelsContainer.x=a,this.ticksContainer.x=a}t.prototype.validateDataElements.call(this)},e.prototype.decorateSlice=function(t){var e=this.dataItem.values.value.absoluteSum;if(0!=e){var i=t.slice,r=t.sliceLink,n=t.label,a=t.tick;this.getNextValue(t);var o=Math.abs(t.getWorkingValue("value")),s=this._pyramidWidth,l=this._pyramidHeight,u=this.slicesContainer.innerWidth,c=this.slicesContainer.innerHeight,h=r.pixelWidth,p=r.pixelHeight;if(t.__disabled=!(0!=t.value||!this.ignoreZeroValues),"vertical"==this.orientation){var d=Ze(this.topWidth,u);k(this._nextWidth)||(this._nextWidth=d);var f=Ze(this.bottomWidth,u),m=this._nextWidth,y=Math.atan2(l,d-f);0==(x=Math.tan(Math.PI/2-y))&&(x=1e-8);var g=void 0,b=void 0;if("area"==this.valueIs){var v=(d+f)/2*l*o/e,_=Math.abs(m*m-2*v*x);b=(g=(m-Math.sqrt(_))/x)>0?(2*v-g*m)/g:m}else b=m-(g=l*o/e)*x;i.height=g,i.width=u,i.bottomWidth=b,i.topWidth=m,r.topWidth=i.bottomWidth,r.bottomWidth=i.bottomWidth,i.y=this._nextY,n.x=this.alignLabels?0:u/2,n.y=i.pixelY+i.pixelHeight*a.locationY+i.dy,this._nextY+=i.pixelHeight+p*o/Math.max(Math.abs(t.value),1e-8),r.y=this._nextY-p,r.x=u/2}else{var x;d=Ze(this.topWidth,c),k(this._nextWidth)||(this._nextWidth=d),f=Ze(this.bottomWidth,c),m=this._nextWidth,y=Math.atan2(s,d-f),0==(x=Math.tan(Math.PI/2-y))&&(x=1e-8);var S=void 0;b=void 0,b="area"==this.valueIs?(2*(v=(d+f)/2*s*o/e)-(S=(m-Math.sqrt(m*m-2*v*x))/x)*m)/S:m-(S=s*o/e)*x,i.width=S,i.height=c,i.bottomWidth=b,i.topWidth=m,r.topWidth=i.bottomWidth,r.bottomWidth=i.bottomWidth,i.x=this._nextY,n.y=this.alignLabels?this.labelsContainer.measuredHeight:c/2,n.x=i.pixelX+i.pixelWidth*a.locationX+i.dx,this._nextY+=i.pixelWidth+h*o/Math.max(Math.abs(t.value),1e-8),r.x=this._nextY-h,r.y=c/2}this._nextWidth=i.bottomWidth}},Object.defineProperty(e.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(t){this.setPercentProperty("topWidth",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pyramidHeight",{get:function(){return this.getPropertyValue("pyramidHeight")},set:function(t){this.setPercentProperty("pyramidHeight",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(t){this.setPercentProperty("bottomWidth",t,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueIs",{get:function(){return this.getPropertyValue("valueIs")},set:function(t){this.setPropertyValue("valueIs",t)&&this.invalidate()},enumerable:!0,configurable:!0}),e}(tl);ve.registeredClasses.PyramidSeries=il,ve.registeredClasses.PyramidSeriesDataItem=el;var rl=function(t){function e(){var e=t.call(this)||this;return e.className="PictorialStackedSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(el),nl=function(t){function e(){var e=t.call(this)||this;return e.className="PictorialStackedSeries",e.topWidth=m(100),e.bottomWidth=m(100),e.valueIs="height",e.applyTheme(),e.startLocation=0,e.endLocation=1,e.align="center",e.valign="middle",e._maskSprite=e.slicesContainer.createChild(_n),e._maskSprite.visible=!1,e._maskSprite.zIndex=100,e._maskSprite.shouldClone=!1,e}return Object(d.d)(e,t),e.prototype.validateDataElements=function(){var e=this.slicesContainer.maxWidth,i=this.slicesContainer.maxHeight,r=this._maskSprite,n=r.measuredWidth/r.scale,a=r.measuredHeight/r.scale,o=U(i/a,e/n);o==1/0&&(o=1),o=N(.001,o);var s,l,u=this.startLocation,c=this.endLocation,h=U(e,n*o),p=U(i,a*o);r.scale=o,"vertical"==this.orientation?(this.topWidth=h+4,this.bottomWidth=h+4,this.pyramidHeight=p*(c-u),r.x=e/2,r.y=p/2):(this.topWidth=p+4,this.bottomWidth=p+4,this.pyramidHeight=h*(c-u),r.valign="middle",r.x=h/2,r.y=i/2),r.verticalCenter="middle",r.horizontalCenter="middle",t.prototype.validateDataElements.call(this),"vertical"==this.orientation?("bottom"==this.valign&&(s=i-p),"middle"==this.valign&&(s=(i-p)/2),"top"==this.valign&&(s=0),"left"==this.align&&(l=-(e-h)/2),"center"==this.align&&(l=0),"right"==this.align&&(l=(e-h)/2),this.slices.template.dy=u*p,this.alignLabels&&(this.slicesContainer.dx=l)):("bottom"==this.valign&&(s=(i-p)/2),"middle"==this.valign&&(s=0),"top"==this.valign&&(s=-(i-p)/2),"left"==this.align&&(l=0),"center"==this.align&&(l=(e-h)/2),"right"==this.align&&(l=e-h),this.slices.template.dx=u*h,this.alignLabels&&(this.slicesContainer.dy=s)),this.slicesContainer.x=l,this.labelsContainer.x=l,this.ticksContainer.x=l,this.slicesContainer.y=s,this.labelsContainer.y=s,this.ticksContainer.y=s,h>0&&p>0&&(this.slicesContainer.mask=r)},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},e.prototype.createDataItem=function(){return new rl},Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},enumerable:!0,configurable:!0}),e.prototype.initSlice=function(e){t.prototype.initSlice.call(this,e);var i=e.states.getKey("hover");i&&(i.properties.expandDistance=0)},Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),e}(il);ve.registeredClasses.PictorialStackedSeries=nl,ve.registeredClasses.PictorialStackedSeriesDataItem=rl;var al=function(t){function e(){var e=t.call(this)||this;return e.className="ConeColumn",e}return Object(d.d)(e,t),e.prototype.createAssets=function(){this.coneColumn=this.createChild(ka),this.coneColumn.shouldClone=!1,this.column=this.coneColumn},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.coneColumn&&this.coneColumn.copyFrom(e.coneColumn)},e}(Ps);ve.registeredClasses.ConeColumn=al;var ol=function(t){function e(){var e=t.call(this)||this;return e.className="ConeSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Cs),sl=function(t){function e(){var e=t.call(this)||this;return e.className="ConeSeries",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createColumnTemplate=function(){return new al},e.prototype.getMaskPath=function(){var t=0,e=0,i=this.columns.getIndex(0);if(i)return this.baseAxis==this.xAxis?e=i.coneColumn.innerWidth/2+1:t=i.coneColumn.innerHeight/2+1,$n({x:-t,y:0,width:this.xAxis.axisLength+t,height:this.yAxis.axisLength+e})},e.prototype.validateDataElementReal=function(e){if(t.prototype.validateDataElementReal.call(this,e),e.column){var i=e.column.coneColumn;i.fill=e.column.fill,i.orientation=this.baseAxis==this.yAxis?"horizontal":"vertical"}},e}(ks);ve.registeredClasses.ConeSeries=sl,ve.registeredClasses.ConeSeriesDataItem=ol;var ll=function(t){function e(){var e=t.call(this)||this;return e.className="CurvedColumn",e}return Object(d.d)(e,t),e.prototype.createAssets=function(){this.curvedColumn=this.createChild(_n),this.curvedColumn.shouldClone=!1,this.setPropertyValue("tension",.7),this.width=m(120),this.height=m(120),this.column=this.curvedColumn},e.prototype.draw=function(){t.prototype.draw.call(this);var e,i=this.realWidth,r=this.realHeight,n=this.realX-this.pixelX,a=this.realY-this.pixelY,o=1,s=1;"vertical"==this.orientation?(o=this.tension,e=[{x:0,y:r+a},{x:i/2,y:a},{x:i,y:r+a}]):(s=this.tension,e=[{x:n,y:0},{x:n+i,y:r/2},{x:n,y:r}]);var l=Hn(e[0])+new ga(o,s).smooth(e);this.column.path=l},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.curvedColumn&&this.curvedColumn.copyFrom(e.curvedColumn)},Object.defineProperty(e.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(t){this.setPropertyValue("tension",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),e}(Ps);ve.registeredClasses.CurvedColumn=ll;var ul=function(t){function e(){var e=t.call(this)||this;return e.className="CurvedColumnSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Cs),cl=function(t){function e(){var e=t.call(this)||this;return e.className="CurvedColumnSeries",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createColumnTemplate=function(){return new ll},e.prototype.validateDataElementReal=function(e){t.prototype.validateDataElementReal.call(this,e);var i=e.column;(i=e.column)&&(e.column.curvedColumn.fill=e.column.fill,i.orientation=this.baseAxis==this.yAxis?"horizontal":"vertical")},e}(ks);ve.registeredClasses.CurvedColumnSeries=cl,ve.registeredClasses.CurvedColumnSeriesDataItem=ul;var hl=function(t){function e(){var e=t.call(this)||this;e.className="CircleBullet";var i=e.createChild(jn);return i.shouldClone=!1,i.radius=5,i.isMeasured=!1,e.circle=i,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.circle.copyFrom(e.circle)},e}(Ja);ve.registeredClasses.CircleBullet=hl;var pl=function(t){function e(){var e=t.call(this)||this;return e.className="ErrorBullet",e.errorLine=e.createChild(_n),e.errorLine.shouldClone=!1,e.width=20,e.height=20,e.strokeOpacity=1,e.isDynamic=!0,e}return Object(d.d)(e,t),e.prototype.validatePosition=function(){t.prototype.validatePosition.call(this);var e=this.pixelWidth/2,i=this.pixelHeight/2;this.errorLine.path=Hn({x:-e,y:-i})+Wn({x:e,y:-i})+Hn({x:0,y:-i})+Wn({x:0,y:i})+Hn({x:-e,y:i})+Wn({x:e,y:i})},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.errorLine.copyFrom(e.errorLine)},e}(Ja);ve.registeredClasses.ErrorBullet=pl;var dl=function(t){function e(){var e=t.call(this)||this;return e.className="NavigationBarDataItem",e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this.properties.name},set:function(t){this.setProperty("name",t)},enumerable:!0,configurable:!0}),e}(Mn),fl=function(t){function e(){var e=t.call(this)||this;e.className="NavigationBar";var i=new _r,r=new ha;r.valign="middle",r.paddingTop=8,r.paddingBottom=8,e.paddingBottom=2,e.links=new Pe(r),e._disposers.push(new Se(e.links)),e._disposers.push(r),e._linksIterator=new pe(e.links,(function(){return e.links.create()})),e._linksIterator.createNewItems=!0;var n=new ya;n.direction="right",n.width=8,n.height=12,n.fill=i.getFor("alternativeBackground"),n.fillOpacity=.5,n.valign="middle",n.marginLeft=10,n.marginRight=10,e.separators=new Pe(n),e._disposers.push(new Se(e.separators)),e._disposers.push(n);var a=new ha;return e.activeLink=a,a.copyFrom(r),a.valign="middle",a.fontWeight="bold",e.width=m(100),e.layout="grid",e.dataFields.name="name",e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validateDataElements=function(){this.removeChildren(),this._linksIterator.reset(),t.prototype.validateDataElements.call(this)},e.prototype.validateDataElement=function(e){var i;if(t.prototype.validateDataElement.call(this,e),e.index<this.dataItems.length-1){(i=this._linksIterator.getLast()).parent=this;var r=this.separators.create();r.parent=this,r.valign="middle"}else(i=this.activeLink).events.copyFrom(this.links.template.events),i.hide(0),i.show(),i.parent=this;i.dataItem=e,i.text=e.name,i.validate()},e}(En);ve.registeredClasses.NavigationBar=fl,ve.registeredClasses.NavigationBarDataItem=dl;var ml=function(t){function e(){var e=t.call(this)||this;e.point={x:0,y:0},e._stick="none",e.className="Cursor",e.width=m(100),e.height=m(100),e.shouldClone=!1,e.hide(0),e.trackable=!0,e.clickable=!0,e.isMeasured=!1;var i=Vr();return e._disposers.push(i.body.events.on("down",e.handleCursorDown,e)),e._disposers.push(i.body.events.on("up",e.handleCursorUp,e)),e._disposers.push(i.body.events.on("track",e.handleCursorMove,e)),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.handleCursorMove=function(t){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&t.touch)){if(("zoom"==this._generalBehavior||"pan"==this._generalBehavior)&&this.downPoint||Vr().isLocalElement(t.pointer,this.paper.svg,this.uid)){var e=Pi(t.pointer.point,this);return"hard"==this._stick&&this._stickPoint&&(e=this._stickPoint),"soft"==this._stick&&this._stickPoint&&(this.fitsToBounds(e)||(e=this._stickPoint)),this.triggerMove(e),e}this.isHidden&&this.isHiding||this.hide()}},e.prototype.hideReal=function(e){if("hard"!=this._stick&&"soft"!=this._stick||!this._stickPoint)return t.prototype.hideReal.call(this,e)},e.prototype.triggerMove=function(t,e,i){t.x=L(t.x,1),t.y=L(t.y,1),e&&(this._stick=e),"hard"!=e&&"soft"!=e||(this._stickPoint=t),this.triggerMoveReal(t,i)},e.prototype.triggerMoveReal=function(t,e){(this.point.x!=t.x||this.point.y!=t.y||e)&&(this.point=t,this.invalidatePosition(),this.fitsToBounds(t)?this.show(0):this.downPoint||this.hide(0),this.visible&&(this.getPositions(),this.dispatch("cursorpositionchanged")))},e.prototype.triggerDown=function(t){this.triggerDownReal(t)},e.prototype.triggerDownReal=function(t){switch(this._generalBehavior){case"zoom":this.dispatchImmediately("zoomstarted");break;case"select":this.dispatchImmediately("selectstarted");break;case"pan":this.dispatchImmediately("panstarted"),Vr().setGlobalStyle(Qr.grabbing)}},e.prototype.triggerUp=function(t){this.triggerUpReal(t)},e.prototype.triggerUpReal=function(t){wn.requestFrame(),this.updatePoint(this.upPoint);var e=Vr();if(W(this._upPointOrig,this._downPointOrig)>e.getHitOption(this.interactions,"hitTolerance")){switch(this._generalBehavior){case"zoom":this.dispatch("zoomended");break;case"select":this.dispatch("selectended");break;case"pan":this.dispatch("panended"),e.setGlobalStyle(Qr.default)}this.downPoint=void 0,this.updateSelection()}},e.prototype.updateSelection=function(){},e.prototype.getPositions=function(){this.xPosition=this.point.x/this.innerWidth,this.yPosition=1-this.point.y/this.innerHeight},e.prototype.handleCursorDown=function(t){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&t.touch)&&Vr().isLocalElement(t.pointer,this.paper.svg,this.uid)){var e=Pi(t.pointer.point,this);"hard"==this._stick&&this._stickPoint&&(e=this._stickPoint),this._downPointOrig={x:e.x,y:e.y},t.event.cancelable&&this.shouldPreventGestures(t.touch)&&this.fitsToBounds(e)&&t.event.preventDefault(),this.triggerMove(e),this.triggerDown(e)}},e.prototype.shouldPreventGestures=function(t){return!0},e.prototype.updatePoint=function(t){},e.prototype.handleCursorUp=function(t){if(this.interactionsEnabled&&(this.downPoint||Vr().isLocalElement(t.pointer,this.paper.svg,this.uid))){var e=Pi(t.pointer.point,this);"hard"==this._stick&&this._stickPoint&&(e=this._stickPoint),this._upPointOrig={x:e.x,y:e.y},this.triggerMove(e),this.triggerUp(e)}},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t,S(this._chart.plotContainer)&&Vr().lockElement(this._chart.plotContainer.interactions)},enumerable:!0,configurable:!0}),e}(Sn);ve.registeredClasses.Cursor=ml;var yl=function(t){function e(){var e=t.call(this)||this;e._lineX=new Vt,e._lineY=new Vt,e._xAxis=new Vt,e._yAxis=new Vt,e._snapToDisposers=[],e.className="XYCursor",e.behavior="zoomX",e.maxPanOut=.1;var i=new _r,r=e.createChild(_n);r.shouldClone=!1,r.fillOpacity=.2,r.fill=i.getFor("alternativeBackground"),r.isMeasured=!1,r.visible=!1,r.interactionsEnabled=!1,e.selection=r,e._disposers.push(e.selection);var n=e.createChild(_n);n.shouldClone=!1,n.stroke=i.getFor("grid"),n.fill=Ue(),n.strokeDasharray="3,3",n.isMeasured=!1,n.strokeOpacity=.4,n.interactionsEnabled=!1,n.y=0,e.lineX=n,e._disposers.push(e.lineX);var a=e.createChild(_n);return a.shouldClone=!1,a.stroke=i.getFor("grid"),a.fill=Ue(),a.strokeDasharray="3,3",a.isMeasured=!1,a.strokeOpacity=.4,a.interactionsEnabled=!1,a.x=0,e.lineY=a,e._disposers.push(e.lineY),e.events.on("sizechanged",e.updateSize,e,!1),e._disposers.push(e._lineX),e._disposers.push(e._lineY),e._disposers.push(e._xAxis),e._disposers.push(e._yAxis),e.mask=e,e.hideSeriesTooltipsOnSelection=!0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.updateSize=function(){this.lineX&&(this.lineX.path=Hn({x:0,y:0})+Wn({x:0,y:this.innerHeight})),this.lineY&&(this.lineY.path=Hn({x:0,y:0})+Wn({x:this.innerWidth,y:0}))},e.prototype.updateSelection=function(){if(this._usesSelection){var t=this.downPoint,e=this.behavior;if(t){var i=this.point;this.lineX&&(i.x=this.lineX.pixelX),this.lineY&&(i.y=this.lineY.pixelY);var r=this.selection,n=Math.min(i.x,t.x),a=Math.min(i.y,t.y),o=L(Math.abs(t.x-i.x),this._positionPrecision),s=L(Math.abs(t.y-i.y),this._positionPrecision);switch(e){case"zoomX":a=0,s=this.pixelHeight;break;case"zoomY":n=0,o=this.pixelWidth;break;case"selectX":a=0,s=this.pixelHeight;break;case"selectY":n=0,o=this.pixelWidth}r.x=n,r.y=a,r.path=Jn(o,s),r.validatePosition()}else"select"!=this._generalBehavior&&this.selection.hide()}},e.prototype.fixPoint=function(t){return t.x=Math.max(0,t.x),t.y=Math.max(0,t.y),t.x=Math.min(this.pixelWidth,t.x),t.y=Math.min(this.pixelHeight,t.y),t},e.prototype.triggerMoveReal=function(e,i){t.prototype.triggerMoveReal.call(this,e,i);var r=this.snapToSeries;if(r&&!this.downPoint)if(r instanceof Oo)r.isHidden&&this.updateLinePositions(e);else{var n=!0;ht(r,(function(t){t.isHidden||(n=!1)})),n&&this.updateLinePositions(e)}else this.updateLinePositions(e);this.downPoint&&W(this.downPoint,e)>3&&"pan"==this._generalBehavior&&(this.getPanningRanges(),this.dispatch("panning"))},e.prototype.updateLinePositions=function(t){t=this.fixPoint(this.point),this.lineX&&this.lineX.visible&&!this.xAxis&&(this.lineX.x=t.x),this.lineY&&this.lineY.visible&&!this.yAxis&&(this.lineY.y=t.y),this.updateSelection()},e.prototype.triggerDownReal=function(e){if(this.visible&&!this.isHiding)if("select"==this._generalBehavior&&(this.selection.parent=this.parent),this.fitsToBounds(e)){this.downPoint={x:e.x,y:e.y},this.updatePoint(e),this.point.x=this.downPoint.x,this.point.y=this.downPoint.y;var i=this.selection,r=this.downPoint.y;this._usesSelection&&(i.x=this.downPoint.x,i.y=r,i.path="",i.show()),t.prototype.triggerDownReal.call(this,e)}else this.downPoint=void 0;else this.downPoint=void 0},e.prototype.updatePoint=function(t){this.lineX&&(t.x=this.lineX.pixelX),this.lineY&&(t.y=this.lineY.pixelY)},e.prototype.triggerUpReal=function(e){this.hasMoved()?this.downPoint&&(this.upPoint=e,this.updatePoint(this.upPoint),"pan"!=this._generalBehavior&&this.getRanges(),"select"!=this._generalBehavior&&this.selection.hide(),t.prototype.triggerUpReal.call(this,e)):("select"!=this._generalBehavior?this.selection.hide(0):(this.xRange=void 0,this.yRange=void 0,this.dispatchImmediately("selectended")),"pan"==this._generalBehavior&&Vr().setGlobalStyle(Qr.default),this.dispatchImmediately("behaviorcanceled")),this.downPoint=void 0,this.dispatch("cursorpositionchanged")},e.prototype.hasMoved=function(){var t,e,i;return"zoomX"==this.behavior||"panX"==this.behavior?(i=this._downPointOrig,t=(e=this._upPointOrig)?(i||(i={x:0,y:0}),Math.abs(e.x-i.x)):0):t="zoomY"==this.behavior||"panY"==this.behavior?function(t,e){return t?(e||(e={x:0,y:0}),Math.abs(t.y-e.y)):0}(this._upPointOrig,this._downPointOrig):W(this._upPointOrig,this._downPointOrig),t>Vr().getHitOption(this.interactions,"hitTolerance")},e.prototype.getPanningRanges=function(){var t=L(this.downPoint.x/this.innerWidth,5),e=1-L(this.downPoint.y/this.innerHeight,5),i=t-L(this.point.x/this.innerWidth,5),r=e-(1-L(this.point.y/this.innerHeight,5));this.xRange={start:i,end:1+i},this.yRange={start:r,end:1+r},"panX"==this.behavior&&(this.yRange.start=0,this.yRange.end=1),"panY"==this.behavior&&(this.xRange.start=0,this.xRange.end=1)},e.prototype.getRanges=function(){this.lineX&&(this.upPoint.x=this.lineX.pixelX),this.lineY&&(this.upPoint.y=this.lineY.pixelY);var t=L(this.downPoint.x/this.innerWidth,5),e=L(this.upPoint.x/this.innerWidth,5),i=1-L(this.downPoint.y/this.innerHeight,5),r=1-L(this.upPoint.y/this.innerHeight,5);this.xRange={start:U(t,e),end:N(t,e)},this.yRange={start:U(i,r),end:N(i,r)}},Object.defineProperty(e.prototype,"behavior",{get:function(){return this.getPropertyValue("behavior")},set:function(t){this.setPropertyValue("behavior",t,!0),this._usesSelection=!1,-1!=t.indexOf("zoom")&&(this._generalBehavior="zoom",this._usesSelection=!0),-1!=t.indexOf("select")&&(this._generalBehavior="select",this._usesSelection=!0),-1!=t.indexOf("pan")&&(this._generalBehavior="pan",this._usesSelection=!1)},enumerable:!0,configurable:!0}),e.prototype.shouldPreventGestures=function(t){return!(this.interactions.isTouchProtected&&t||"none"==this.behavior)},Object.defineProperty(e.prototype,"fullWidthLineX",{get:function(){return this.getPropertyValue("fullWidthLineX")},set:function(t){this.setPropertyValue("fullWidthLineX",t),t||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullWidthLineY",{get:function(){return this.getPropertyValue("fullWidthLineY")},set:function(t){this.setPropertyValue("fullWidthLineY",t),t||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideSeriesTooltipsOnSelection",{get:function(){return this.getPropertyValue("hideSeriesTooltipsOnSelection")},set:function(t){this.setPropertyValue("hideSeriesTooltipsOnSelection",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTooltipDistance",{get:function(){return this.getPropertyValue("maxTooltipDistance")},set:function(t){this.setPropertyValue("maxTooltipDistance",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPanOut",{get:function(){return this.getPropertyValue("maxPanOut")},set:function(t){this.setPropertyValue("maxPanOut",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xAxis",{get:function(){return this._xAxis.get()},set:function(t){var e=this;this._xAxis.get()!=t&&this._xAxis.set(t,new Rt([t.tooltip.events.on("positionchanged",this.handleXTooltipPosition,this,!1),t.events.on("rangechangestarted",(function(t){e.hide(0),e.preventShow=!0}),void 0,!1),t.events.on("rangechangeended",(function(t){e.preventShow=!1,e.hide(0),e.dispatch("cursorpositionchanged")}),void 0,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxis",{get:function(){return this._yAxis.get()},set:function(t){var e=this;this._yAxis.get()!=t&&this._yAxis.set(t,new Rt([t.tooltip.events.on("positionchanged",this.handleYTooltipPosition,this,!1),t.events.on("rangechangestarted",(function(t){e.hide(0),e.__disabled=!0}),void 0,!1),t.events.on("rangechangeended",(function(t){e.__disabled=!1,e.hide(0),e.dispatch("cursorpositionchanged")}),void 0,!1)]))},enumerable:!0,configurable:!0}),e.prototype.handleXTooltipPosition=function(t){var e=this.xAxis.tooltip,i=vi({x:e.pixelX,y:e.pixelY},this),r=i.x;if(i.y=1,this.lineX&&(this.lineX.x=r,this.fitsToBounds(i)||this.hide()),this.xAxis&&this.fullWidthLineX){var n=this.xAxis.currentItemStartPoint,a=this.xAxis.currentItemEndPoint;if(n&&a){this.lineX.x=r;var o=a.x-n.x;this.lineX.path=Jn(o,this.innerHeight,-o/2)}}},e.prototype.handleYTooltipPosition=function(t){var e=this.yAxis.tooltip,i=vi({x:e.pixelX,y:e.pixelY},this),r=i.y;if(i.x=1,this.lineY&&(this.lineY.y=r,this.fitsToBounds(i)||this.hide()),this.yAxis&&this.fullWidthLineY){var n=this.yAxis.currentItemStartPoint,a=this.yAxis.currentItemEndPoint;if(n&&a){this.lineY.y=r;var o=a.y-n.y;this.lineY.path=Jn(this.innerWidth,o,0,-o/2)}}},Object.defineProperty(e.prototype,"lineX",{get:function(){return this._lineX.get()},set:function(t){t?(t.setElement(this.paper.add("path")),this._lineX.set(t,t.events.on("positionchanged",this.updateSelection,this,!1)),t.interactionsEnabled=!1,t.parent=this):this._lineX.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineY",{get:function(){return this._lineY.get()},set:function(t){t?(t.setElement(this.paper.add("path")),this._lineY.set(t,t.events.on("positionchanged",this.updateSelection,this,!1)),t.parent=this,t.interactionsEnabled=!1):this._lineY.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection},set:function(t){this._selection=t,t&&(t.element=this.paper.add("path"),t.parent=this)},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){e&&(S(e.xAxis)&&C(e.xAxis)&&(this.map.hasKey(e.xAxis)?e.xAxis=this.map.getKey(e.xAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+e.xAxis+'" found for `xAxis`'),delete e.xAxis)),S(e.yAxis)&&C(e.yAxis)&&(this.map.hasKey(e.yAxis)?e.yAxis=this.map.getKey(e.yAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+e.yAxis+'" found for `yAxis`'),delete e.yAxis)),S(e.snapToSeries)&&C(e.snapToSeries)&&(this.map.hasKey(e.snapToSeries)?e.snapToSeries=this.map.getKey(e.snapToSeries):(this.processingErrors.push('[XYCursor] No series with id "'+e.snapToSeries+'" found for `series`'),delete e.snapToSeries))),t.prototype.processConfig.call(this,e)},Object.defineProperty(e.prototype,"snapToSeries",{get:function(){return this.getPropertyValue("snapToSeries")},set:function(t){var e=this;this.setPropertyValue("snapToSeries",t)&&(t instanceof Oo&&(t=[t]),this._snapToDisposers&&ht(this._snapToDisposers,(function(t){t.dispose()})),this._snapToDisposers=[],t&&ht(t,(function(t){e._snapToDisposers.push(t.events.on("tooltipshownat",(function(){e.handleSnap(t)}),void 0,!1))})))},enumerable:!0,configurable:!0}),e.prototype.handleSnap=function(t){if(!this.downPoint){var e=t.getTooltipX()+t.xAxis.pixelX,i=t.getTooltipY()+t.yAxis.pixelY;this.xAxis&&this.xAxis.renderer.opposite&&(i-=this.pixelHeight),this.point={x:e,y:i},this.getPositions();var r=e,n=i;e-=this.pixelWidth,this.yAxis&&this.yAxis.renderer.opposite&&(e+=this.pixelWidth);var a=t.tooltip,o=a.animationDuration,s=a.animationEasing,l=t.xAxis,u=t.yAxis;l instanceof xo&&!(l instanceof To)&&u instanceof xo&&!(u instanceof To)?(t.yAxis.showTooltipAtPosition(this.yPosition),t.xAxis.showTooltipAtPosition(this.xPosition)):(t.baseAxis==t.xAxis&&t.yAxis.showTooltipAtPosition(this.yPosition),t.baseAxis==t.yAxis&&t.xAxis.showTooltipAtPosition(this.xPosition)),this.lineX.animate([{property:"y",to:i}],o,s),this.lineY.animate([{property:"x",to:e}],o,s),this.xAxis||this.lineX.animate([{property:"x",to:r}],o,s),this.yAxis||this.lineY.animate([{property:"y",to:n}],o,s)}},e.prototype.dispose=function(){this.hide(0),t.prototype.dispose.call(this)},e}(ml);ve.registeredClasses.XYCursor=yl;var gl=function(t){function e(){var e=t.call(this)||this;return e.className="RadarCursor",e.radius=m(100),e.innerRadius=m(0),e.applyTheme(),e.mask=void 0,e}return Object(d.d)(e,t),e.prototype.fitsToBounds=function(t){var e=W(t);return e<this.truePixelRadius+1&&e>this.pixelInnerRadius-1},Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),e.prototype.triggerMoveReal=function(e,i){this.xAxis&&(!this.xAxis||this.xAxis.cursorTooltipEnabled&&!this.xAxis.tooltip.disabled)||this.updateLineX(this.point),this.yAxis&&(!this.yAxis||this.yAxis.cursorTooltipEnabled&&!this.yAxis.tooltip.disabled)||this.updateLineY(this.point),this.updateSelection(),t.prototype.triggerMoveReal.call(this,e,i)},e.prototype.updateLineX=function(t){var e=this.pixelRadius,i=this.startAngle,r=this.endAngle,n=this.pixelInnerRadius;if(e>0&&k(i)&&k(r)&&k(n)){var a=nt(K(t),i,r),o=void 0;if(this.lineX&&this.lineX.visible){if(this.lineX.moveTo({x:0,y:0}),this.xAxis&&this.fullWidthLineX){var s=this.xAxis.currentItemStartPoint,l=this.xAxis.currentItemEndPoint;if(s&&l){var u=nt(K(s),i,r),c=nt(K(l),i,r)-u;i<r?c<0&&(c+=360):c>0&&(c-=360),o=Hn({x:n*B(a-=c/2),y:n*j(a)})+Wn({x:e*B(a),y:e*j(a)})+qn(a,c,e)+Wn({x:n*B(a+c),y:n*j(a+c)})+qn(a+c,-c,n)}}o||(o=Hn({x:n*B(a),y:n*j(a)})+Wn({x:e*B(a),y:e*j(a)})),this.lineX.path=o}}},e.prototype.updateLineY=function(t){if(this.lineY&&this.lineY.visible){var e=this.startAngle,i=this.endAngle,r=this.truePixelRadius,n=V(W(t),0,this.truePixelRadius);if(k(n)&&k(e)){this.lineY.moveTo({x:0,y:0});var a=void 0,o=i-e;if(this.yAxis&&this.fullWidthLineY){var s=this.yAxis.currentItemStartPoint,l=this.yAxis.currentItemEndPoint;if(s&&l){var u=V(W(s),0,r);a=Hn({x:(n=V(W(l),0,r))*B(e),y:n*j(e)})+qn(e,o,n),a+=Hn({x:u*B(i),y:u*j(i)})+qn(i,-o,u)}}a||(a=Hn({x:n*B(e),y:n*j(e)})+qn(e,i-e,n)),this.lineY.path=a}}},e.prototype.updateSelection=function(){if(this._usesSelection){var t=this.downPoint;if(t){var e=this.point,i=this.pixelRadius,r=this.truePixelRadius,n=this.pixelInnerRadius,a=Math.min(this.startAngle,this.endAngle),o=Math.max(this.startAngle,this.endAngle),s=nt(K(t),a,o),l=nt(K(e),a,o),u=W(t);if(u<r){var c=V(W(e),0,r);this._prevAngle=l;var h=Hn({x:0,y:0}),p=j(s),d=B(s),f=j(l),m=B(l),y=this.behavior;"zoomX"==y||"selectX"==y?h+=Wn({x:i*d,y:i*p})+qn(s,l-s,i)+Wn({x:n*m,y:n*f})+qn(l,s-l,n):"zoomY"==y||"selectY"==y?h=Hn({x:c*B(a),y:c*j(a)})+qn(a,o-a,c)+Wn({x:u*B(o),y:u*j(o)})+qn(o,a-o,u)+" Z":"zoomXY"==y&&(h=Hn({x:c*B(s),y:c*j(s)})+qn(s,l-s,c)+Wn({x:u*B(l),y:u*j(l)})+qn(l,s-l,u)+" Z"),this.selection.path=h}this.selection.moveTo({x:0,y:0})}}},e.prototype.getPositions=function(){if(this.chart){var t=this.pixelInnerRadius,e=this.truePixelRadius-t,i=this.startAngle,r=this.endAngle,n=nt(K(this.point),i,r);this.xPosition=(n-i)/(r-i),this.yPosition=V((W(this.point)-t)/e,0,1)}},e.prototype.updatePoint=function(t){},e.prototype.handleXTooltipPosition=function(t){if(this.xAxis.cursorTooltipEnabled){var e=this.xAxis.tooltip;this.updateLineX(vi({x:e.pixelX,y:e.pixelY},this))}},e.prototype.handleYTooltipPosition=function(t){if(this.yAxis.cursorTooltipEnabled){var e=this.yAxis.tooltip;this.updateLineY(vi({x:e.pixelX,y:e.pixelY},this))}},e.prototype.updateLinePositions=function(t){},e.prototype.getRanges=function(){var t=this.downPoint;if(t){var e=this.upPoint;if(this.chart){var i=this.pixelRadius,r=this.startAngle,n=this.endAngle,a=nt(K(t),this.startAngle,this.endAngle),o=nt(K(e),this.startAngle,this.endAngle),s=V(W(t),0,i),l=V(W(e),0,i),u=0,c=1,h=0,p=1,d=this.behavior;if("zoomX"==d||"selectX"==d||"zoomXY"==d||"selectXY"==d){var f=n-r;u=L((a-r)/f,5),c=L((o-r)/f,5)}"zoomY"!=d&&"selectY"!=d&&"zoomXY"!=d&&"selectXY"!=d||(h=L(s/i,5),p=L(l/i,5)),this.xRange={start:Math.min(u,c),end:Math.max(u,c)},this.yRange={start:Math.min(h,p),end:Math.max(h,p)},"selectX"==this.behavior||"selectY"==this.behavior||"selectXY"==this.behavior||this.selection.hide()}}},e.prototype.updateSize=function(){},Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPercentProperty("radius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelRadius",{get:function(){return Je(this.radius,this.truePixelRadius)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"truePixelRadius",{get:function(){return Ze(m(100),U(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPercentProperty("innerRadius",t,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelInnerRadius",{get:function(){var t=this.innerRadius;return t instanceof f&&(t=m(100*t.value*this.chart.innerRadiusModifyer)),Je(t,this.truePixelRadius)||0},enumerable:!0,configurable:!0}),e.prototype.fixPoint=function(t){return t},e}(yl);ve.registeredClasses.RadarCursor=gl;var bl=function(t){_e(t,"ColorSet")&&(t.list=[Ue("#F3C300"),Ue("#875692"),Ue("#F38400"),Ue("#A1CAF1"),Ue("#BE0032"),Ue("#C2B280"),Ue("#848482"),Ue("#008856"),Ue("#E68FAC"),Ue("#0067A5"),Ue("#F99379"),Ue("#604E97"),Ue("#F6A600"),Ue("#B3446C"),Ue("#DCD300"),Ue("#882D17"),Ue("#8DB600"),Ue("#654522"),Ue("#E25822"),Ue("#2B3D26"),Ue("#F2F3F4"),Ue("#222222")],t.minLightness=.2,t.maxLightness=.7,t.reuse=!0)},vl=function(t){_e(t,"SpriteState")&&(t.transitionDuration=400),_e(t,"Component")&&(t.rangeChangeDuration=500,t.interpolationDuration=500,t.sequencedInterpolation=!1,_e(t,"SankeyDiagram")&&(t.sequencedInterpolation=!0),_e(t,"FunnelSeries")&&(t.sequencedInterpolation=!0)),_e(t,"Chart")&&(t.defaultState.transitionDuration=2e3,t.hiddenState.transitionDuration=1e3),_e(t,"Tooltip")&&(t.animationDuration=400,t.defaultState.transitionDuration=400,t.hiddenState.transitionDuration=400),_e(t,"Scrollbar")&&(t.animationDuration=500),_e(t,"Series")&&(t.defaultState.transitionDuration=1e3,t.hiddenState.transitionDuration=700,t.hiddenState.properties.opacity=1,t.showOnInit=!0),_e(t,"MapSeries")&&(t.hiddenState.properties.opacity=0),_e(t,"PercentSeries")&&(t.hiddenState.properties.opacity=0),_e(t,"FunnelSlice")&&(t.defaultState.transitionDuration=800,t.hiddenState.transitionDuration=1e3,t.hiddenState.properties.opacity=1),_e(t,"Slice")&&(t.defaultState.transitionDuration=700,t.hiddenState.transitionDuration=1e3,t.hiddenState.properties.opacity=1),_e(t,"Preloader")&&(t.hiddenState.transitionDuration=2e3),_e(t,"Column")&&(t.defaultState.transitionDuration=700,t.hiddenState.transitionDuration=1e3,t.hiddenState.properties.opacity=1),_e(t,"Column3D")&&(t.hiddenState.properties.opacity=0)},_l=i("TYT/"),xl=function(){function t(t){this.zone=t,this.clicked=!0,this.clicked1=!1}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose()),t.chart3&&(console.log("Chart disposed"),t.chart3.dispose()),t.chart4&&(console.log("Chart disposed"),t.chart4.dispose()),t.chart5&&(console.log("Chart disposed"),t.chart5.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartDashboard1(),t.getChartDashboard2(),t.getChartDashboard3(),t.getChartDashboard4(),t.getChartDashboard5()}))},t.prototype.getChartDashboard1=function(){Ga(bl),Ga(vl);var t=Ya("chartdashboard1",Mo);function e(e,i,r,n){var a=t.yAxes.push(new xo);0!=t.yAxes.indexOf(a)&&(a.syncWithAxis=t.yAxes.getIndex(0));var o=t.series.push(new jo);o.dataFields.valueY=e,o.dataFields.dateX="date",o.strokeWidth=2,o.yAxis=a,o.name=i,o.tooltipText="{name}: [bold]{valueY}[/]",o.tensionX=.8,o.showOnInit=!0;var s=new _r;switch(n){case"triangle":var l=o.bullets.push(new Ja);l.width=12,l.height=12,l.horizontalCenter="middle",l.verticalCenter="middle";var u=l.createChild(ya);u.stroke=s.getFor("background"),u.strokeWidth=2,u.direction="top",u.width=12,u.height=12;break;default:var c=o.bullets.push(new Ja);c.width=10,c.height=10,c.horizontalCenter="middle",c.verticalCenter="middle";var h=c.createChild(xn);h.stroke=s.getFor("background"),h.strokeWidth=2,h.width=10,h.height=10}a.renderer.line.strokeOpacity=1,a.renderer.line.strokeWidth=2,a.renderer.line.stroke=o.stroke,a.renderer.labels.template.fill=o.stroke,a.renderer.opposite=r}t.colors.step=2,t.data=function(){var t=[],e=new Date;e.setDate(e.getDate()-100),e.setHours(0,0,0,0);for(var i=1600,r=2900,n=0;n<15;n++){var a=new Date(e);a.setDate(a.getDate()+n),i+=Math.round((Math.random()<.5?1:-1)*Math.random()*10),r+=Math.round((Math.random()<.5?1:-1)*Math.random()*10),t.push({date:a,visits:i,hits:r})}return t}(),t.xAxes.push(new To).renderer.minGridDistance=50,e("visits","Outstanding",!1,"circle"),e("hits","Overdue",!0,"rectangle"),t.legend=new to,t.cursor=new yl,this.chart1=t},t.prototype.getChartDashboard2=function(){Ga(bl),Ga(vl);var t=Ya("chartdashboard2",Mo);t.data=[{year:"Mon",italy:1},{year:"Tue",italy:1},{year:"Wed",italy:2},{year:"Thu",italy:3},{year:"Fri",italy:5},{year:"Sat",italy:3},{year:"Sun",italy:1}];var e=t.xAxes.push(new Io);e.dataFields.category="year",e.renderer.opposite=!0;var i=t.yAxes.push(new xo);i.renderer.inversed=!0,i.renderer.minLabelPosition=.01;var r=t.series.push(new jo);r.dataFields.valueY="italy",r.dataFields.categoryX="year",r.name="Profit",r.bullets.push(new hl),r.tooltipText="{name} in {categoryX}: {valueY}",r.legendSettings.valueText="{valueY}",r.visible=!1,t.cursor=new yl,t.cursor.behavior="zoomY",r.segments.template.states.create("hover").properties.strokeWidth=5,r.segments.template.strokeWidth=1,t.legend=new to,t.legend.itemContainers.template.events.on("over",(function(t){t.target.dataItem.dataContext.each((function(t){t.isHover=!0}))})),t.legend.itemContainers.template.events.on("out",(function(t){t.target.dataItem.dataContext.each((function(t){t.isHover=!1}))})),this.chart2=t},t.prototype.getChartDashboard3=function(){Ga(bl),Ga(vl);var t=Ya("chartdashboard3",Mo);t.colors.step=2,t.legend=new to,t.legend.position="top",t.legend.paddingBottom=20,t.legend.labels.template.maxWidth=95;var e=t.xAxes.push(new Io);function i(e,i){var n=t.series.push(new ks);n.dataFields.valueY=e,n.dataFields.categoryX="category",n.name=i,n.events.on("hidden",r),n.events.on("shown",r);var a=n.bullets.push(new ms);return a.interactionsEnabled=!1,a.dy=30,a.label.text="{valueY}",a.label.fill=Ue("#ffffff"),n}function r(){var i=t.series.getIndex(0),r=1-e.renderer.cellStartLocation-(1-e.renderer.cellEndLocation);if(i.dataItems.length>1){var n=e.getX(i.dataItems.getIndex(0),"categoryX"),a=(e.getX(i.dataItems.getIndex(1),"categoryX")-n)/t.series.length*r;if(k(a)){var o=t.series.length/2,s=0;t.series.each((function(e){e.isHidden||e.isHiding?e.dummyData=t.series.indexOf(e):(e.dummyData=s,s++)}));var l=s/2;t.series.each((function(e){var i=t.series.indexOf(e),r=(e.dummyData-i+o-l)*a;e.animate({property:"dx",to:r},e.interpolationDuration,e.interpolationEasing),e.bulletsContainer.animate({property:"dx",to:r},e.interpolationDuration,e.interpolationEasing)}))}}}e.dataFields.category="category",e.renderer.cellStartLocation=.1,e.renderer.cellEndLocation=.9,e.renderer.grid.template.location=0,t.yAxes.push(new xo).min=0,t.data=[{category:"2017",first:40,second:55},{category:"2018",first:30,second:78},{category:"2019",first:27,second:40},{category:"2020",first:50,second:33}],i("first","Profit"),i("second","Revenue"),this.chart3=t},t.prototype.getChartDashboard4=function(){Ga(bl),Ga(vl);var t=Ya("chartdashboard4",as);t.data=[{country:"2020",litres:501.9},{country:"2019",litres:301.9},{country:"2018",litres:201.1},{country:"2017",litres:165.8}];var e=t.series.push(new rs);e.dataFields.value="litres",e.dataFields.category="country",e.slices.template.stroke=Ue("#fff"),e.slices.template.strokeOpacity=1,e.hiddenState.properties.opacity=1,e.hiddenState.properties.endAngle=-90,e.hiddenState.properties.startAngle=-90,t.hiddenState.properties.radius=m(0),this.chart4=t},t.prototype.getChartDashboard5=function(){Ga(bl),Ga(vl);var t=Ya("chartdashboard5",Mo);t.paddingBottom=50,t.cursor=new yl,t.scrollbarX=new ua;var e={},i=t.xAxes.push(new Io);i.dataFields.category="category",i.renderer.minGridDistance=60,i.renderer.grid.template.location=0,i.dataItems.template.text="{realName}",i.adapter.add("tooltipText",(function(t,e){return i.tooltipDataItem.dataContext.realName}));var n=t.yAxes.push(new xo);n.tooltip.disabled=!0,n.min=0;var a=t.series.push(new ks);a.columns.template.width=m(80),a.tooltipText="{provider}: {realName}, {valueY}",a.dataFields.categoryX="category",a.dataFields.valueY="value";var o=t.yAxes.push(new xo);o.renderer.opposite=!0,o.syncWithAxis=n,o.tooltip.disabled=!0;var s=t.series.push(new jo);s.tooltipText="{valueY}",s.dataFields.categoryX="category",s.dataFields.valueY="quantity",s.yAxis=o,s.bullets.push(new hl),s.stroke=t.colors.getIndex(13),s.fill=s.stroke,s.strokeWidth=2,s.snapTooltip=!0,s.events.on("datavalidated",(function(){s.dataItems.each((function(t){var e=t.dataContext;e.count/2==Math.round(e.count/2)?t.setLocation("categoryX",0):t.setLocation("categoryX",.5)}))})),a.columns.template.adapter.add("fill",(function(i,r){var n=r.dataItem.dataContext.realName;return e[n]||(e[n]=t.colors.next()),r.stroke=e[n],e[n]}));var l=i.axisRanges.template;l.tick.disabled=!1,l.tick.location=0,l.tick.strokeOpacity=.6,l.tick.length=60,l.grid.strokeOpacity=.5,l.label.tooltip=new fa,l.label.tooltip.dy=-10,l.label.cloneTooltip=!1;var u=[],c={2017:{"item 1":10,"item 2":35,quantity:430},2018:{"item 1":15,"item 2":21,quantity:210},2019:{"item 2":25,"item 1":11,quantity:265},2020:{"item 1":12,"item 2":15,quantity:98}};for(var h in c){var p=c[h],d=[],f=0;for(var y in p)"quantity"!=y&&(f++,d.push({category:h+"_"+y,realName:y,value:p[y],provider:h}));d.sort((function(t,e){return t.value>e.value?1:t.value<e.value?-1:0}));var g=Math.floor(f/2);d[g].quantity=p.quantity,d[g].count=f,r.each(d,(function(t){u.push(t)}));var b=i.axisRanges.create();b.category=d[0].category,b.endCategory=d[d.length-1].category,b.label.text=d[0].provider,b.label.dy=30,b.label.truncate=!0,b.label.fontWeight="bold",b.label.tooltipText=d[0].provider,b.label.adapter.add("maxWidth",(function(t,e){var r=e.dataItem,n=i.categoryToPosition(r.category,0),a=i.categoryToPosition(r.endCategory,1),o=i.positionToCoordinate(n);return i.positionToCoordinate(a)-o}))}t.data=u;var v=i.axisRanges.create();v.category=t.data[t.data.length-1].category,v.label.disabled=!0,v.tick.location=1,v.grid.location=1,this.chart5=t},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-dashboard"]],decls:72,vars:0,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-home","text-dark"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"text-muted","text-uppercase","ls-1","mb-1"],[1,"h3","mt-2","mb-0"],[1,"mt-3","mb-0","text-sm"],[1,"text-nowrap"],[1,"text-success","mr-2"],[1,"fa","fa-arrow-up"],[1,"card-body"],[1,"chart"],["id","chartdashboard1",1,"amchart"],["id","chartdashboard2",1,"amchart"],["id","chartdashboard3",1,"amchart"],[1,"col-xl-6"],["id","chartdashboard4",1,"amchart"],["id","chartdashboard5",1,"amchart"]],template:function(t,e){1&t&&(_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Dashboard"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h5",18),_l.Fc(20," Outstanding & Overdue Revenue "),_l.Sb(),_l.Tb(21,"h5",19),_l.Fc(22,"RM10,458"),_l.Sb(),_l.Tb(23,"p",20),_l.Tb(24,"span",21),_l.Fc(25," Total Outstanding "),_l.Sb(),_l.Tb(26,"span",22),_l.Pb(27,"i",23),_l.Fc(28," 10.48% "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(29,"div",24),_l.Tb(30,"div",25),_l.Pb(31,"div",26),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(32,"div",13),_l.Tb(33,"div",14),_l.Tb(34,"div",15),_l.Tb(35,"div",16),_l.Tb(36,"div",17),_l.Tb(37,"h5",19),_l.Fc(38,"Total Profit"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(39,"div",24),_l.Tb(40,"div",25),_l.Pb(41,"div",27),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(42,"div",13),_l.Tb(43,"div",14),_l.Tb(44,"div",15),_l.Tb(45,"div",16),_l.Tb(46,"div",17),_l.Tb(47,"h5",19),_l.Fc(48,"Profit vs Revenue"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(49,"div",24),_l.Tb(50,"div",25),_l.Pb(51,"div",28),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(52,"div",29),_l.Tb(53,"div",14),_l.Tb(54,"div",15),_l.Tb(55,"div",16),_l.Tb(56,"div",17),_l.Tb(57,"h5",19),_l.Fc(58," Total Expense "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(59,"div",24),_l.Tb(60,"div",25),_l.Pb(61,"div",30),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(62,"div",29),_l.Tb(63,"div",14),_l.Tb(64,"div",15),_l.Tb(65,"div",16),_l.Tb(66,"div",17),_l.Tb(67,"h5",19),_l.Fc(68," Assets "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(69,"div",24),_l.Tb(70,"div",25),_l.Pb(71,"div",31),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb())},styles:[""]}),t}(),Sl=i("xMyE"),wl=i("cUzu"),Tl=function(){function t(t){this.http=t,this.urlMock="assets/mock/",this.datas=[]}return t.prototype.getAll=function(t){var e=this;return this.http.get(this.urlMock+t).pipe(Object(Sl.a)((function(t){e.datas=t,console.log("Data: ",e.datas)})))},t.\u0275fac=function(e){return new(e||t)(_l.Xb(wl.b))},t.\u0275prov=_l.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Pl=i("wd/R"),Cl=i("PSD3"),kl=i.n(Cl);function Il(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"ID"),_l.Sb())}function Al(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.staff_id," ")}function Ol(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Created At"),_l.Sb())}function Dl(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.created_at," ")}function Fl(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function Ml(t,e){1&t&&(_l.Tb(0,"span",42),_l.Fc(1,"POST"),_l.Sb())}function El(t,e){1&t&&(_l.Tb(0,"span",43),_l.Fc(1,"GET"),_l.Sb())}function Ll(t,e){1&t&&(_l.Tb(0,"span",44),_l.Fc(1,"UPDATE"),_l.Sb())}function Rl(t,e){1&t&&(_l.Tb(0,"span",45),_l.Fc(1,"DELETE"),_l.Sb())}function Vl(t,e){if(1&t&&(_l.Dc(0,Ml,2,0,"span",38),_l.Dc(1,El,2,0,"span",39),_l.Dc(2,Ll,2,0,"span",40),_l.Dc(3,Rl,2,0,"span",41)),2&t){var i=e.row;_l.lc("ngIf","POST"==i.action),_l.Bb(1),_l.lc("ngIf","GET"==i.action),_l.Bb(1),_l.lc("ngIf","UPDATE"==i.action),_l.Bb(1),_l.lc("ngIf","DELETE"==i.action)}}function jl(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function zl(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",46),_l.Tb(1,"span",47),_l.Pb(2,"i",48),_l.Sb(),_l.Sb(),_l.Tb(3,"button",49),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",47),_l.Pb(5,"i",50),_l.Sb(),_l.Sb()}}Ga(vl);var Bl=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),Nl=function(){function t(t,e){this.mockService=t,this.zone=e,this.chartJanPost=0,this.chartJanGet=0,this.chartJanUpdate=0,this.chartJanDelete=0,this.chartFebPost=0,this.chartFebGet=0,this.chartFebUpdate=0,this.chartFebDelete=0,this.chartMarchPost=0,this.chartMarchGet=0,this.chartMarchUpdate=0,this.chartMarchDelete=0,this.chartAprPost=0,this.chartAprGet=0,this.chartAprUpdate=0,this.chartAprDelete=0,this.chartMayPost=0,this.chartMayGet=0,this.chartMayUpdate=0,this.chartMayDelete=0,this.chartJunPost=0,this.chartJunGet=0,this.chartJunUpdate=0,this.chartJunDelete=0,this.chartJulPost=0,this.chartJulGet=0,this.chartJulUpdate=0,this.chartJulDelete=0,this.chartAugPost=0,this.chartAugGet=0,this.chartAugUpdate=0,this.chartAugDelete=0,this.chartSepPost=0,this.chartSepGet=0,this.chartSepUpdate=0,this.chartSepDelete=0,this.chartOctPost=0,this.chartOctGet=0,this.chartOctUpdate=0,this.chartOctDelete=0,this.chartNovPost=0,this.chartNovGet=0,this.chartNovUpdate=0,this.chartNovDelete=0,this.chartDecPost=0,this.chartDecGet=0,this.chartDecUpdate=0,this.chartDecDelete=0,this.tableEntries=5,this.tableSelected=[],this.tableTemp=[],this.tableRows=[],this.SelectionType=Bl,this.getData()}return t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart&&t.chart.dispose()}))},t.prototype.getData=function(){var t=this;this.mockService.getAll("admin-audit/audit.data.json").subscribe((function(e){t.tableRows=e,t.tableTemp=t.tableRows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})})),console.log("Svc: ",t.tableTemp),t.resetCharts(),t.calculateCharts()}),(function(){}),(function(){t.getChart()}))},t.prototype.entriesChange=function(t){this.tableEntries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.tableTemp=this.tableRows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onSelect=function(t){var e=t.selected;this.tableSelected.splice(0,this.tableSelected.length),this.tableSelected.push(e)},t.prototype.onActivate=function(t){this.tableActiveRow=t.row},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChart()}))},t.prototype.getChart=function(){var t=Ya("chartdiv",Mo);t.colors.step=2,t.legend=new to,t.legend.position="top",t.legend.paddingBottom=20,t.legend.labels.template.maxWidth=95;var e=t.xAxes.push(new Io);function i(e,i){var n=t.series.push(new ks);n.dataFields.valueY=e,n.dataFields.categoryX="category",n.name=i,n.events.on("hidden",r),n.events.on("shown",r);var a=n.bullets.push(new ms);return a.interactionsEnabled=!1,a.dy=30,a.label.text="{valueY}",a.label.fill=Ue("#ffffff"),n}function r(){var i=t.series.getIndex(0),r=1-e.renderer.cellStartLocation-(1-e.renderer.cellEndLocation);if(i.dataItems.length>1){var n=e.getX(i.dataItems.getIndex(0),"categoryX"),a=(e.getX(i.dataItems.getIndex(1),"categoryX")-n)/t.series.length*r;if(k(a)){var o=t.series.length/2,s=0;t.series.each((function(e){e.isHidden||e.isHiding?e.dummyData=t.series.indexOf(e):(e.dummyData=s,s++)}));var l=s/2;t.series.each((function(e){var i=t.series.indexOf(e),r=(e.dummyData-i+o-l)*a;e.animate({property:"dx",to:r},e.interpolationDuration,e.interpolationEasing),e.bulletsContainer.animate({property:"dx",to:r},e.interpolationDuration,e.interpolationEasing)}))}}}e.dataFields.category="category",e.renderer.cellStartLocation=.1,e.renderer.cellEndLocation=.9,e.renderer.grid.template.location=0,t.yAxes.push(new xo).min=0,t.data=[{category:"POST",jan:this.chartJanPost,feb:this.chartFebPost,march:this.chartMarchPost,apr:this.chartAprPost,may:this.chartMayPost,Jun:this.chartJunPost,jul:this.chartJulPost,aug:this.chartAugPost,sep:this.chartSepPost,oct:this.chartOctPost,nov:this.chartNovPost,dec:this.chartDecPost},{category:"GET",jan:this.chartJanGet,feb:this.chartFebGet,march:this.chartMarchGet,apr:this.chartAprGet,may:this.chartMayGet,Jun:this.chartJunGet,jul:this.chartJulGet,aug:this.chartAugGet,sep:this.chartSepGet,oct:this.chartOctGet,nov:this.chartNovGet,dec:this.chartDecGet},{category:"UPDATE",jan:this.chartJanUpdate,feb:this.chartFebUpdate,march:this.chartMarchUpdate,apr:this.chartAprUpdate,may:this.chartMayUpdate,Jun:this.chartJunUpdate,jul:this.chartJulUpdate,aug:this.chartAugUpdate,sep:this.chartSepUpdate,oct:this.chartOctUpdate,nov:this.chartNovUpdate,dec:this.chartDecUpdate},{category:"DELETE",jan:this.chartJanDelete,feb:this.chartFebDelete,march:this.chartMarchDelete,apr:this.chartAprDelete,may:this.chartMayDelete,Jun:this.chartJunDelete,jul:this.chartJulDelete,aug:this.chartAugDelete,sep:this.chartSepDelete,oct:this.chartOctDelete,nov:this.chartNovDelete,dec:this.chartDecDelete}],i("jan","Jan"),i("feb","Feb"),i("march","March"),i("apr","Apr"),i("may","May"),i("Jun","Jun"),i("jul","Jul"),i("aug","Aug"),i("sep","Sep"),i("octove","Oct"),i("nov","Nov"),i("dec","Dec"),this.chart=t},t.prototype.resetCharts=function(){this.chartJanPost=0,this.chartJanGet=0,this.chartJanUpdate=0,this.chartJanDelete=0,this.chartFebPost=0,this.chartFebGet=0,this.chartFebUpdate=0,this.chartFebDelete=0,this.chartMarchPost=0,this.chartMarchGet=0,this.chartMarchUpdate=0,this.chartMarchDelete=0,this.chartAprPost=0,this.chartAprGet=0,this.chartAprUpdate=0,this.chartAprDelete=0,this.chartMayPost=0,this.chartMayGet=0,this.chartMayUpdate=0,this.chartMayDelete=0,this.chartJunPost=0,this.chartJunGet=0,this.chartJunUpdate=0,this.chartJunDelete=0,this.chartJulPost=0,this.chartJulGet=0,this.chartJulUpdate=0,this.chartJulDelete=0,this.chartAugPost=0,this.chartAugGet=0,this.chartAugUpdate=0,this.chartAugDelete=0,this.chartSepPost=0,this.chartSepGet=0,this.chartSepUpdate=0,this.chartSepDelete=0,this.chartOctPost=0,this.chartOctGet=0,this.chartOctUpdate=0,this.chartOctDelete=0,this.chartNovPost=0,this.chartNovGet=0,this.chartNovUpdate=0,this.chartNovDelete=0,this.chartDecPost=0,this.chartDecGet=0,this.chartDecUpdate=0,this.chartDecDelete=0},t.prototype.calculateCharts=function(){var t=this;this.tableRows.forEach((function(e){var i=e.action,r=Pl(e.created_at).month();console.log(r),0==r?"POST"==i?t.chartJanPost+=1:"GET"==i?t.chartJanGet+=1:"UPDATE"==i?t.chartJanUpdate+=1:"DELETE"==i&&(t.chartJanDelete+=1):1==r?"POST"==i?t.chartFebPost+=1:"GET"==i?t.chartFebGet+=1:"UPDATE"==i?t.chartFebUpdate+=1:"DELETE"==i&&(t.chartFebDelete+=1):2==r?"POST"==i?t.chartMarchPost+=1:"GET"==i?t.chartMarchGet+=1:"UPDATE"==i?t.chartMarchUpdate+=1:"DELETE"==i&&(t.chartMarchDelete+=1):3==r?"POST"==i?t.chartAprPost+=1:"GET"==i?t.chartAprGet+=1:"UPDATE"==i?t.chartAprUpdate+=1:"DELETE"==i&&(t.chartAprDelete+=1):4==r?"POST"==i?t.chartMayPost+=1:"GET"==i?t.chartMayGet+=1:"UPDATE"==i?t.chartMayUpdate+=1:"DELETE"==i&&(t.chartMayDelete+=1):5==r?"POST"==i?t.chartJunPost+=1:"GET"==i?t.chartJunGet+=1:"UPDATE"==i?t.chartJunUpdate+=1:"DELETE"==i&&(t.chartJunDelete+=1):6==r?"POST"==i?t.chartJulPost+=1:"GET"==i?t.chartJulGet+=1:"UPDATE"==i?t.chartJulUpdate+=1:"DELETE"==i&&(t.chartJulDelete+=1):7==r?"POST"==i?t.chartAugPost+=1:"GET"==i?t.chartAugGet+=1:"UPDATE"==i?t.chartAugUpdate+=1:"DELETE"==i&&(t.chartAugDelete+=1):8==r?"POST"==i?t.chartSepPost+=1:"GET"==i?t.chartSepGet+=1:"UPDATE"==i?t.chartSepUpdate+=1:"DELETE"==i&&(t.chartSepDelete+=1):9==r?"POST"==i?t.chartOctPost+=1:"GET"==i?t.chartOctGet+=1:"UPDATE"==i?t.chartOctUpdate+=1:"DELETE"==i&&(t.chartOctDelete+=1):10==r?"POST"==i?t.chartNovPost+=1:"GET"==i?t.chartNovGet+=1:"UPDATE"==i?t.chartNovUpdate+=1:"DELETE"==i&&(t.chartNovDelete+=1):11==r&&("POST"==i?t.chartDecPost+=1:"GET"==i?t.chartDecGet+=1:"UPDATE"==i?t.chartDecUpdate+=1:"DELETE"==i&&(t.chartDecDelete+=1))}))},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(Tl),_l.Ob(_l.z))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-management-audit"]],decls:69,vars:6,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-file-invoice","text-dark"],["href","javascript:void(0)",1,"text-dark"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col"],[1,"card"],[1,"card-header","bg-secondary"],[1,"m-0"],[1,"card-body"],[1,"chart"],["id","chartdiv",1,"amchart"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm"],["value","10"],["value","25"],["value","50"],["value","-1"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","Username"],["name","Email"],["name","Description"],["class","badge badge-pill badge-default",4,"ngIf"],["class","badge badge-pill badge-success",4,"ngIf"],["class","badge badge-pill badge-info",4,"ngIf"],["class","badge badge-pill badge-warning",4,"ngIf"],[1,"badge","badge-pill","badge-default"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-info"],[1,"badge","badge-pill","badge-warning"],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"]],template:function(t,e){1&t&&(_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Audit Trails"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Tb(12,"li",8),_l.Tb(13,"a",11),_l.Fc(14," Management "),_l.Sb(),_l.Sb(),_l.Tb(15,"li",12),_l.Fc(16," Audit Trails "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(17,"div",13),_l.Tb(18,"div",14),_l.Tb(19,"div",15),_l.Tb(20,"div",16),_l.Tb(21,"div",17),_l.Tb(22,"h3",18),_l.Fc(23,"Action Types"),_l.Sb(),_l.Sb(),_l.Tb(24,"div",19),_l.Tb(25,"div",20),_l.Pb(26,"div",21),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(27,"div",14),_l.Tb(28,"div",15),_l.Tb(29,"div",16),_l.Tb(30,"div",17),_l.Tb(31,"h3",18),_l.Fc(32,"Audit Trails"),_l.Sb(),_l.Sb(),_l.Tb(33,"div",22),_l.Tb(34,"div",14),_l.Tb(35,"div",23),_l.Tb(36,"div",24),_l.Tb(37,"label"),_l.Fc(38," Show "),_l.Tb(39,"select",25),_l.Tb(40,"option",26),_l.Fc(41,"5"),_l.Sb(),_l.Tb(42,"option",27),_l.Fc(43,"10"),_l.Sb(),_l.Tb(44,"option",28),_l.Fc(45,"15"),_l.Sb(),_l.Tb(46,"option",29),_l.Fc(47,"All"),_l.Sb(),_l.Sb(),_l.Fc(48," records "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(49,"div",23),_l.Tb(50,"div",30),_l.Tb(51,"label"),_l.Tb(52,"input",31),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(53,"ngx-datatable",32),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(54,"ngx-datatable-column"),_l.Dc(55,Il,2,0,"ng-template",33),_l.Dc(56,Al,1,1,"ng-template",34),_l.Sb(),_l.Pb(57,"ngx-datatable-column",35),_l.Pb(58,"ngx-datatable-column",36),_l.Tb(59,"ngx-datatable-column"),_l.Dc(60,Ol,2,0,"ng-template",33),_l.Dc(61,Dl,1,1,"ng-template",34),_l.Sb(),_l.Tb(62,"ngx-datatable-column"),_l.Dc(63,Fl,2,0,"ng-template",33),_l.Dc(64,Vl,4,4,"ng-template",34),_l.Sb(),_l.Pb(65,"ngx-datatable-column",37),_l.Tb(66,"ngx-datatable-column"),_l.Dc(67,jl,2,0,"ng-template",33),_l.Dc(68,zl,6,0,"ng-template",34),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb()),2&t&&(_l.Bb(53),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.tableEntries?e.tableEntries:void 0)("rows",e.tableTemp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,n.l],styles:[""]}),t}();function Ul(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"User ID"),_l.Sb())}function Xl(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.user_id," ")}function Hl(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Joined At"),_l.Sb())}function Wl(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.joined_at," ")}function Yl(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"User Type"),_l.Sb())}function Gl(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.user_type," ")}function ql(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Status"),_l.Sb())}function Kl(t,e){1&t&&(_l.Tb(0,"span",42),_l.Fc(1,"Active"),_l.Sb())}function Zl(t,e){1&t&&(_l.Tb(0,"span",43),_l.Fc(1,"Inactive"),_l.Sb())}function Jl(t,e){if(1&t&&(_l.Dc(0,Kl,2,0,"span",40),_l.Dc(1,Zl,2,0,"span",41)),2&t){var i=e.row;_l.lc("ngIf","Active"==i.is_active),_l.Bb(1),_l.lc("ngIf","Inactive"==i.is_active)}}function $l(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function Ql(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",44),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(75);return e.openModal(r)})),_l.Tb(1,"span",45),_l.Pb(2,"i",46),_l.Sb(),_l.Sb(),_l.Tb(3,"button",47),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",45),_l.Pb(5,"i",48),_l.Sb(),_l.Sb()}}function tu(t,e){if(1&t&&(_l.Tb(0,"div"),_l.Tb(1,"p",64),_l.Tb(2,"span"),_l.Fc(3),_l.Sb(),_l.Sb(),_l.Sb()),2&t){var i=_l.fc().$implicit;_l.Bb(3),_l.Gc(i.message)}}function eu(t,e){if(1&t&&(_l.Rb(0),_l.Dc(1,tu,4,1,"div",63),_l.Qb()),2&t){var i=e.$implicit,r=_l.fc(2);_l.Bb(1),_l.lc("ngIf",r.registerForm.get("name").hasError(i.type)&&(r.registerForm.get("name").dirty||r.registerForm.get("name").touched))}}function iu(t,e){if(1&t&&(_l.Tb(0,"div"),_l.Tb(1,"p",64),_l.Tb(2,"span"),_l.Fc(3),_l.Sb(),_l.Sb(),_l.Sb()),2&t){var i=_l.fc().$implicit;_l.Bb(3),_l.Gc(i.message)}}function ru(t,e){if(1&t&&(_l.Rb(0),_l.Dc(1,iu,4,1,"div",63),_l.Qb()),2&t){var i=e.$implicit,r=_l.fc(2);_l.Bb(1),_l.lc("ngIf",r.registerForm.get("email").hasError(i.type)&&(r.registerForm.get("email").dirty||r.registerForm.get("email").touched))}}function nu(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",49),_l.Tb(1,"h6",50),_l.Fc(2," Create New User "),_l.Sb(),_l.Tb(3,"button",51),_l.bc("click",(function(t){return _l.wc(i),_l.fc().closeModal()})),_l.Tb(4,"span",52),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",53),_l.Tb(7,"form",54),_l.Tb(8,"div",55),_l.Tb(9,"label",56),_l.Fc(10,"Name"),_l.Sb(),_l.Pb(11,"input",57),_l.Dc(12,eu,2,1,"ng-container",58),_l.Sb(),_l.Tb(13,"div",55),_l.Tb(14,"label",56),_l.Fc(15,"Email"),_l.Sb(),_l.Pb(16,"input",59),_l.Dc(17,ru,2,1,"ng-container",58),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(18,"div",60),_l.Tb(19,"button",61),_l.bc("click",(function(t){return _l.wc(i),_l.fc().confirm()})),_l.Fc(20," Create "),_l.Sb(),_l.Tb(21,"button",62),_l.bc("click",(function(t){return _l.wc(i),_l.fc().closeModal()})),_l.Fc(22," Close "),_l.Sb(),_l.Sb()}if(2&t){var r=_l.fc();_l.Bb(7),_l.lc("formGroup",r.registerForm),_l.Bb(5),_l.lc("ngForOf",r.registerFormMessages.name),_l.Bb(5),_l.lc("ngForOf",r.registerFormMessages.email),_l.Bb(2),_l.lc("disabled",!r.registerForm.valid)}}Ga(vl);var au=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),ou=function(){function t(t,e,i,r){this.mockService=t,this.modalService=e,this.formBuilder=i,this.zone=r,this.tableEntries=5,this.tableSelected=[],this.tableTemp=[],this.tableRows=[],this.SelectionType=au,this.chartJan=0,this.chartFeb=0,this.chartMar=0,this.chartApr=0,this.chartMay=0,this.chartJun=0,this.chartJul=0,this.chartAug=0,this.chartSep=0,this.chartOct=0,this.chartNov=0,this.chartDec=0,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.registerFormMessages={name:[{type:"required",message:"Name is required"}],email:[{type:"required",message:"Email is required"},{type:"email",message:"A valid email is required"}]},this.getData()}return t.prototype.ngOnInit=function(){this.registerForm=this.formBuilder.group({name:new s.d("",s.t.compose([s.t.required])),email:new s.d("",s.t.compose([s.t.required,s.t.email]))})},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart&&t.chart.dispose()}))},t.prototype.getData=function(){var t=this;this.mockService.getAll("admin-user/users.data.json").subscribe((function(e){t.tableRows=e,t.tableTemp=t.tableRows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})})),t.calculateCharts()}),(function(){}),(function(){t.getCharts()}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChart()}))},t.prototype.getChart=function(){var t=Ya("chartdiv",Mo);t.data=[{month:"Jan",count:this.chartJan},{month:"Feb",count:this.chartFeb},{month:"Mar",count:this.chartMar},{month:"Apr",count:this.chartApr},{month:"May",count:this.chartMar},{month:"Jun",count:this.chartJun},{month:"Jul",count:this.chartJul},{month:"Aug",count:this.chartAug},{month:"Sep",count:this.chartSep},{month:"Oct",count:this.chartOct},{month:"Nov",count:this.chartNov},{month:"Dec",count:this.chartDec}];var e=t.xAxes.push(new Io);e.dataFields.category="month",e.renderer.grid.template.location=0,e.renderer.minGridDistance=30,e.renderer.labels.template.adapter.add("dy",(function(t,e){return e.dataItem&&e.dataItem.index?t+25:t})),t.yAxes.push(new xo);var i=t.series.push(new ks);i.dataFields.valueY="count",i.dataFields.categoryX="month",i.name="count",i.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]",i.columns.template.fillOpacity=.8;var r=i.columns.template;r.strokeWidth=2,r.strokeOpacity=1,this.chart=t},t.prototype.calculateCharts=function(){var t=this;this.chartJan=0,this.chartFeb=0,this.chartMar=0,this.chartApr=0,this.chartMay=0,this.chartJun=0,this.chartJul=0,this.chartAug=0,this.chartSep=0,this.chartOct=0,this.chartNov=0,this.chartDec=0,this.tableRows.forEach((function(e){var i=Pl(e.joined_at).month();0==i?t.chartJan+=1:1==i?t.chartFeb+=1:2==i?t.chartMar+=1:3==i?t.chartApr+=1:4==i?t.chartMay+=1:5==i?t.chartJun+=1:6==i?t.chartJul+=1:7==i?t.chartAug+=1:8==i?t.chartSep+=1:9==i?t.chartOct+=1:10==i?t.chartNov+=1:11==i&&(t.chartDec+=1)}))},t.prototype.openModal=function(t){this.modal=this.modalService.show(t,this.modalConfig)},t.prototype.closeModal=function(){this.modal.hide(),this.registerForm.reset()},t.prototype.confirm=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure to create this new user?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.register()}))},t.prototype.register=function(){var t=this;kl.a.fire({title:"Success",text:"A new user has been created!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"}).then((function(e){e.value&&(t.modal.hide(),t.registerForm.reset())}))},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){var t=this;kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"}).then((function(e){e.value&&(t.modal.hide(),t.registerForm.reset())}))},t.\u0275fac=function(e){return new(e||t)(_l.Ob(Tl),_l.Ob(a.f),_l.Ob(s.c),_l.Ob(_l.z))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-management-user"]],decls:76,vars:6,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-file-invoice","text-dark"],["href","javascript:void(0)",1,"text-dark"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-6","col-5","text-right"],[1,"btn","btn-sm","btn-neutral",3,"click"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col"],[1,"card"],[1,"card-header","bg-secondary"],[1,"m-0"],[1,"card-body"],[1,"chart"],["id","chartdiv",1,"amchart"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm"],["value","10"],["value","25"],["value","50"],["value","-1"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","Name"],["name","Email"],["createUser",""],["class","badge badge-pill badge-success",4,"ngIf"],["class","badge badge-pill badge-warning",4,"ngIf"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-warning"],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],[1,"form-control-label"],["placeholder","Enter name","formControlName","name","type","text",1,"form-control"],[4,"ngFor","ngForOf"],["placeholder","Enter email","formControlName","email","type","text",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"disabled","click"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"],[4,"ngIf"],[1,"error-message"]],template:function(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6," User Control "),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Tb(12,"li",8),_l.Tb(13,"a",11),_l.Fc(14," System Management "),_l.Sb(),_l.Sb(),_l.Tb(15,"li",12),_l.Fc(16," User Control "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(17,"div",13),_l.Tb(18,"a",14),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(75);return e.openModal(r)})),_l.Fc(19," Create "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(20,"div",15),_l.Tb(21,"div",16),_l.Tb(22,"div",17),_l.Tb(23,"div",18),_l.Tb(24,"div",19),_l.Tb(25,"h3",20),_l.Fc(26,"Registered User by Month"),_l.Sb(),_l.Sb(),_l.Tb(27,"div",21),_l.Tb(28,"div",22),_l.Pb(29,"div",23),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(30,"div",16),_l.Tb(31,"div",17),_l.Tb(32,"div",18),_l.Tb(33,"div",19),_l.Tb(34,"h3",20),_l.Fc(35,"User List"),_l.Sb(),_l.Sb(),_l.Tb(36,"div",24),_l.Tb(37,"div",16),_l.Tb(38,"div",25),_l.Tb(39,"div",26),_l.Tb(40,"label"),_l.Fc(41," Show "),_l.Tb(42,"select",27),_l.Tb(43,"option",28),_l.Fc(44,"5"),_l.Sb(),_l.Tb(45,"option",29),_l.Fc(46,"10"),_l.Sb(),_l.Tb(47,"option",30),_l.Fc(48,"15"),_l.Sb(),_l.Tb(49,"option",31),_l.Fc(50,"All"),_l.Sb(),_l.Sb(),_l.Fc(51," records "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(52,"div",25),_l.Tb(53,"div",32),_l.Tb(54,"label"),_l.Pb(55,"input",33),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(56,"ngx-datatable",34),_l.Tb(57,"ngx-datatable-column"),_l.Dc(58,Ul,2,0,"ng-template",35),_l.Dc(59,Xl,1,1,"ng-template",36),_l.Sb(),_l.Pb(60,"ngx-datatable-column",37),_l.Pb(61,"ngx-datatable-column",38),_l.Tb(62,"ngx-datatable-column"),_l.Dc(63,Hl,2,0,"ng-template",35),_l.Dc(64,Wl,1,1,"ng-template",36),_l.Sb(),_l.Tb(65,"ngx-datatable-column"),_l.Dc(66,Yl,2,0,"ng-template",35),_l.Dc(67,Gl,1,1,"ng-template",36),_l.Sb(),_l.Tb(68,"ngx-datatable-column"),_l.Dc(69,ql,2,0,"ng-template",35),_l.Dc(70,Jl,2,2,"ng-template",36),_l.Sb(),_l.Tb(71,"ngx-datatable-column"),_l.Dc(72,$l,2,0,"ng-template",35),_l.Dc(73,Ql,6,0,"ng-template",36),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(74,nu,23,4,"ng-template",null,39,_l.Ec)}2&t&&(_l.Bb(56),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.tableEntries?e.tableEntries:void 0)("rows",e.tableTemp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,n.l,s.v,s.n,s.g,s.b,s.m,s.e,n.k],styles:[".error-message[_ngcontent-%COMP%]{color:#f5365c;text-align:right;font-size:.8em;padding-top:5px;padding-bottom:0;margin-bottom:0}"]}),t}();Ga(vl);var su=function(){function t(t,e){this.mockService=t,this.zone=e,this.dataChart=[],this.dataChart2=[],this.dataChart3=[],this.bsDPConfig={isAnimated:!0,containerClass:"theme-default"},this.getData()}return t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart4&&t.chart4.dispose(),t.chart1&&t.chart1.dispose(),t.chart2&&t.chart2.dispose(),t.chart3&&t.chart3.dispose()}))},t.prototype.getData=function(){var t=this;this.mockService.getAll("admin-report/report-data-1.json").subscribe((function(e){t.dataChart=e}),(function(){}),(function(){t.mockService.getAll("admin-report/report-data-2.json").subscribe((function(e){t.dataChart2=e}),(function(){}),(function(){t.mockService.getAll("admin-report/report-data-3.json").subscribe((function(e){t.dataChart3=e}),(function(){}),(function(){t.getCharts()}))}))}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartProfitability1(),t.getChartProfitability2(),t.getChartProfitability3(),t.getChartProfitability4()}))},t.prototype.getChartProfitability1=function(){Ga(bl),Ga(vl);var t=Ya("chartprofitabilityanalysis1",Mo);t.colors.step=2,t.legend=new to,t.legend.position="top",t.legend.paddingBottom=20,t.legend.labels.template.maxWidth=500;var e=t.xAxes.push(new Io);function i(e,i){var n=t.series.push(new ks);n.dataFields.valueY=e,n.dataFields.categoryX="category",n.name=i,n.events.on("hidden",r),n.events.on("shown",r);var a=n.bullets.push(new ms);return a.interactionsEnabled=!1,a.dy=30,a.label.text="{valueY}",a.label.fill=Ue("#ffffff"),n}function r(){var i=t.series.getIndex(0),r=1-e.renderer.cellStartLocation-(1-e.renderer.cellEndLocation);if(i.dataItems.length>1){var n=e.getX(i.dataItems.getIndex(0),"categoryX"),a=(e.getX(i.dataItems.getIndex(1),"categoryX")-n)/t.series.length*r;if(k(a)){var o=t.series.length/2,s=0;t.series.each((function(e){e.isHidden||e.isHiding?e.dummyData=t.series.indexOf(e):(e.dummyData=s,s++)}));var l=s/2;t.series.each((function(e){var i=t.series.indexOf(e),r=(e.dummyData-i+o-l)*a;e.animate({property:"dx",to:r},e.interpolationDuration,e.interpolationEasing),e.bulletsContainer.animate({property:"dx",to:r},e.interpolationDuration,e.interpolationEasing)}))}}}e.dataFields.category="category",e.renderer.cellStartLocation=.1,e.renderer.cellEndLocation=.9,e.renderer.grid.template.location=0,t.yAxes.push(new xo).min=0,t.data=[{category:"2015 Q1",first:40,second:55,third:60,forth:46},{category:"2015 Q2",first:30,second:78,third:69,forth:24},{category:"2015 Q3",first:27,second:40,third:45,forth:68},{category:"2015 Q4",first:50,second:33,third:22,forth:46}],i("first","Past Year"),i("second","Current Year"),i("third","Target"),i("forth","Industry Average"),this.chart2=t},t.prototype.getChartProfitability2=function(){Ga(bl),Ga(vl);var t=Ya("chartprofitabilityanalysis2",Mo);t.paddingBottom=50,t.cursor=new yl,t.scrollbarX=new ua;var e={},i=t.xAxes.push(new Io);i.dataFields.category="category",i.renderer.minGridDistance=60,i.renderer.grid.template.location=0,i.dataItems.template.text="{realName}",i.adapter.add("tooltipText",(function(t,e){return i.tooltipDataItem.dataContext.realName}));var n=t.yAxes.push(new xo);n.tooltip.disabled=!0,n.min=0;var a=t.series.push(new ks);a.columns.template.width=m(80),a.tooltipText="{provider}: {realName}, {valueY}",a.dataFields.categoryX="category",a.dataFields.valueY="value";var o=t.yAxes.push(new xo);o.renderer.opposite=!0,o.syncWithAxis=n,o.tooltip.disabled=!0;var s=t.series.push(new jo);s.tooltipText="{valueY}",s.dataFields.categoryX="category",s.dataFields.valueY="quantity",s.yAxis=o,s.bullets.push(new hl),s.stroke=t.colors.getIndex(13),s.fill=s.stroke,s.strokeWidth=2,s.snapTooltip=!0,s.events.on("datavalidated",(function(){s.dataItems.each((function(t){var e=t.dataContext;e.count/2==Math.round(e.count/2)?t.setLocation("categoryX",0):t.setLocation("categoryX",.5)}))})),a.columns.template.adapter.add("fill",(function(i,r){var n=r.dataItem.dataContext.realName;return e[n]||(e[n]=t.colors.next()),r.stroke=e[n],e[n]}));var l=i.axisRanges.template;l.tick.disabled=!1,l.tick.location=0,l.tick.strokeOpacity=.6,l.tick.length=60,l.grid.strokeOpacity=.5,l.label.tooltip=new fa,l.label.tooltip.dy=-10,l.label.cloneTooltip=!1;var u=[],c={2017:{"Net Income":10,Revenue:35,quantity:430},2018:{"Net Income":15,Revenue:21,quantity:210},2019:{"Net Income":25,Revenue:31,quantity:265},2020:{"Net Income":12,Revenue:15,quantity:98}};for(var h in c){var p=c[h],d=[],f=0;for(var y in p)"quantity"!=y&&(f++,d.push({category:h+"_"+y,realName:y,value:p[y],provider:h}));d.sort((function(t,e){return t.value>e.value?1:t.value<e.value?-1:0}));var g=Math.floor(f/2);d[g].quantity=p.quantity,d[g].count=f,r.each(d,(function(t){u.push(t)}));var b=i.axisRanges.create();b.category=d[0].category,b.endCategory=d[d.length-1].category,b.label.text=d[0].provider,b.label.dy=30,b.label.truncate=!0,b.label.fontWeight="bold",b.label.tooltipText=d[0].provider,b.label.adapter.add("maxWidth",(function(t,e){var r=e.dataItem,n=i.categoryToPosition(r.category,0),a=i.categoryToPosition(r.endCategory,1),o=i.positionToCoordinate(n);return i.positionToCoordinate(a)-o}))}t.data=u;var v=i.axisRanges.create();v.category=t.data[t.data.length-1].category,v.label.disabled=!0,v.tick.location=1,v.grid.location=1,this.chart2=t},t.prototype.getChartProfitability3=function(){var t=Ya("chartprofitabilityanalysis3",Mo);t.paddingRight=20,t.data=this.dataChart,t.dateFormatter.inputDateFormat="yyyy";var e=t.xAxes.push(new To);e.renderer.minGridDistance=50,e.baseInterval={timeUnit:"year",count:2},t.yAxes.push(new xo).tooltip.disabled=!0;var i=t.series.push(new Gs);i.dataFields.dateX="year",i.dataFields.valueY="amount",i.tooltipText="{valueY.amount}",i.strokeWidth=3,t.cursor=new yl,t.cursor.xAxis=e,t.cursor.fullWidthLineX=!0,t.cursor.lineX.strokeWidth=0,t.cursor.lineX.fill=t.colors.getIndex(2),t.cursor.lineX.fillOpacity=.1,t.scrollbarX=new ua,this.chart3=t},t.prototype.getChartProfitability4=function(){var t=Ya("chartprofitabilityanalysis4",Mo);t.hiddenState.properties.opacity=0;for(var e=[],i=100,r=250,n=1;n<120;n++)i+=Math.round((Math.random()<.5?1:-1)*Math.random()*4),r=Math.round(i+5*Math.random()+n/5-(Math.random()<.5?1:-1)*Math.random()*2),e.push({date:new Date(2018,0,n),open:i,close:r});t.data=e;var a=t.xAxes.push(new To);t.yAxes.push(new xo).tooltip.disabled=!0;var o=t.series.push(new jo);o.dataFields.dateX="date",o.dataFields.openValueY="open",o.dataFields.valueY="close",o.tooltipText="open: {openValueY.value} close: {valueY.value}",o.sequencedInterpolation=!0,o.fillOpacity=.3,o.defaultState.transitionDuration=1e3,o.tensionX=.8;var s=t.series.push(new jo);s.dataFields.dateX="date",s.dataFields.valueY="open",s.sequencedInterpolation=!0,s.defaultState.transitionDuration=1500,s.stroke=t.colors.getIndex(6),s.tensionX=.8,t.cursor=new yl,t.cursor.xAxis=a,t.scrollbarX=new ua,this.chart4=t},t.\u0275fac=function(e){return new(e||t)(_l.Ob(Tl),_l.Ob(_l.z))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-report"]],decls:85,vars:1,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-chart-bar","text-dark"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"card-body"],[1,"chart"],["id","chartprofitabilityanalysis1",1,"amchart"],["id","chartprofitabilityanalysis2",1,"amchart"],[1,"col-md-12"],[1,"m-0"],[1,"col-md-12","col-lg-5"],[1,"form-group"],[1,"form-control-label"],[1,"form-control","custom-select"],["hidden","","selected",""],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"far","fa-calendar-alt"],["type","text","bsDaterangepicker","","placeholder","Date range","name","bsDaterangepicker",1,"form-control",3,"bsConfig"],[1,"col-md-12","col-lg-2","d-flex","align-items-center"],["type","button",1,"btn","btn-default"],[1,"col-md-12","col-lg-6"],["id","chartprofitabilityanalysis3",1,"amchart"],["id","chartprofitabilityanalysis4",1,"amchart"]],template:function(t,e){1&t&&(_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6," Statutory Reporting "),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h5",18),_l.Fc(20,"Net Profit"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(21,"div",19),_l.Tb(22,"div",20),_l.Pb(23,"div",21),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(24,"div",13),_l.Tb(25,"div",14),_l.Tb(26,"div",15),_l.Tb(27,"div",16),_l.Tb(28,"div",17),_l.Tb(29,"h5",18),_l.Fc(30,"Net Income"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(31,"div",19),_l.Tb(32,"div",20),_l.Pb(33,"div",22),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(34,"div",23),_l.Tb(35,"div",14),_l.Tb(36,"div",15),_l.Tb(37,"h3",24),_l.Fc(38,"Reporting Tool"),_l.Sb(),_l.Sb(),_l.Tb(39,"div",19),_l.Tb(40,"div",12),_l.Tb(41,"div",25),_l.Tb(42,"div",26),_l.Tb(43,"label",27),_l.Fc(44,"Report type"),_l.Sb(),_l.Tb(45,"select",28),_l.Tb(46,"option",29),_l.Fc(47,"Please pick"),_l.Sb(),_l.Tb(48,"option"),_l.Fc(49,"Report 1"),_l.Sb(),_l.Tb(50,"option"),_l.Fc(51,"Report 2"),_l.Sb(),_l.Tb(52,"option"),_l.Fc(53,"Report 3"),_l.Sb(),_l.Tb(54,"option"),_l.Fc(55,"Report 4"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(56,"div",25),_l.Tb(57,"div",26),_l.Tb(58,"label",27),_l.Fc(59,"Date range"),_l.Sb(),_l.Tb(60,"div",30),_l.Tb(61,"div",31),_l.Tb(62,"span",32),_l.Pb(63,"i",33),_l.Sb(),_l.Sb(),_l.Pb(64,"input",34),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(65,"div",35),_l.Tb(66,"button",36),_l.Fc(67,"Search"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(68,"div",12),_l.Tb(69,"div",37),_l.Tb(70,"div",14),_l.Tb(71,"div",15),_l.Tb(72,"h3",24),_l.Fc(73,"Report 1"),_l.Sb(),_l.Sb(),_l.Tb(74,"div",19),_l.Tb(75,"div",20),_l.Pb(76,"div",38),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(77,"div",37),_l.Tb(78,"div",14),_l.Tb(79,"div",15),_l.Tb(80,"h3",24),_l.Fc(81,"Report 2"),_l.Sb(),_l.Sb(),_l.Tb(82,"div",19),_l.Tb(83,"div",20),_l.Pb(84,"div",39),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb()),2&t&&(_l.Bb(64),_l.lc("bsConfig",e.bsDPConfig))},directives:[s.q,s.u,o.e,o.d],styles:[""]}),t}(),lu=function(t){_e(t,"ColorSet")&&(t.list=[Ue("#65738e"),Ue("#766c91"),Ue("#78566f"),Ue("#523b58"),Ue("#813b3d"),Ue("#bc5e52"),Ue("#ee8b78"),Ue("#f9c885"),Ue("#eba05c"),Ue("#9b5134")],t.minLightness=.2,t.maxLightness=.7,t.reuse=!0)};function uu(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Acc No."),_l.Sb())}function cu(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.accNo," ")}function hu(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Debit (RM)"),_l.Sb())}function pu(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.debit," ")}function du(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Credit (RM)"),_l.Sb())}function fu(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.credit," ")}function mu(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Net Movement"),_l.Sb())}function yu(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.netMove," ")}function gu(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function bu(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",65),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(159);return e.openModal(r)})),_l.Tb(1,"span",66),_l.Pb(2,"i",67),_l.Sb(),_l.Sb(),_l.Tb(3,"button",68),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",66),_l.Pb(5,"i",69),_l.Sb(),_l.Sb()}}function vu(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",70),_l.Tb(1,"h6",71),_l.Fc(2," General Ledger "),_l.Sb(),_l.Tb(3,"button",72),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",73),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",74),_l.Tb(7,"table",75),_l.Tb(8,"thead",76),_l.Tb(9,"tr"),_l.Tb(10,"th",77),_l.Fc(11,"No."),_l.Sb(),_l.Tb(12,"th",77),_l.Fc(13,"Type"),_l.Sb(),_l.Tb(14,"th",77),_l.Fc(15,"Reason"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(16,"tbody"),_l.Tb(17,"tr"),_l.Tb(18,"td"),_l.Fc(19,"1"),_l.Sb(),_l.Tb(20,"td"),_l.Fc(21,"debtor"),_l.Sb(),_l.Tb(22,"td"),_l.Fc(23,"Reason 1"),_l.Sb(),_l.Sb(),_l.Tb(24,"tr"),_l.Tb(25,"td"),_l.Fc(26,"2"),_l.Sb(),_l.Tb(27,"td"),_l.Fc(28,"creditor"),_l.Sb(),_l.Tb(29,"td"),_l.Fc(30,"Reason 2"),_l.Sb(),_l.Sb(),_l.Tb(31,"tr"),_l.Tb(32,"td"),_l.Fc(33,"3"),_l.Sb(),_l.Tb(34,"td"),_l.Fc(35,"creditor"),_l.Sb(),_l.Tb(36,"td"),_l.Fc(37,"Reason 3"),_l.Sb(),_l.Sb(),_l.Tb(38,"tr"),_l.Tb(39,"td"),_l.Fc(40,"4"),_l.Sb(),_l.Tb(41,"td"),_l.Fc(42,"debtor"),_l.Sb(),_l.Tb(43,"td"),_l.Fc(44,"Reason 4"),_l.Sb(),_l.Sb(),_l.Tb(45,"tr"),_l.Tb(46,"td"),_l.Fc(47,"5"),_l.Sb(),_l.Tb(48,"td"),_l.Fc(49,"creditor"),_l.Sb(),_l.Tb(50,"td"),_l.Fc(51,"Reason 5"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(52,"div",78),_l.Tb(53,"button",79),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(54," Close "),_l.Sb(),_l.Sb()}}var _u=function(){return{isAnimated:!0,containerClass:"theme-red"}},xu=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),Su=function(){function t(t,e){this.zone=t,this.modalService=e,this.bsValue=new Date,this.maxDate=new Date,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$385,750"}],this.SelectionType=xu,this.maxDate.setDate(this.maxDate.getDate()+7),this.bsRangeValue=[this.bsValue,this.maxDate],this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartGeneralLedger1(),t.getChartGeneralLedger2()}))},t.prototype.getChartGeneralLedger1=function(){Ga(lu),Ga(vl);var t=Ya("chartgeneral1",as);t.data=[{country:"Closed",litres:501.9},{country:"Opened",litres:301.9},{country:"Pending",litres:201.1}];var e=t.series.push(new rs);e.dataFields.value="litres",e.dataFields.category="country",e.slices.template.stroke=Ue("#fff"),e.slices.template.strokeOpacity=1,e.hiddenState.properties.opacity=1,e.hiddenState.properties.endAngle=-90,e.hiddenState.properties.startAngle=-90,t.hiddenState.properties.radius=m(0),this.chart1=t},t.prototype.getChartGeneralLedger2=function(){Ga(lu),Ga(vl);var t={2016:[{sector:"Pending",size:43},{sector:"Opened",size:123},{sector:"Closed",size:283}],2017:[{sector:"Pending",size:34},{sector:"Opened",size:536},{sector:"Closed",size:744}],2018:[{sector:"Pending",size:57},{sector:"Opened",size:425},{sector:"Closed",size:538}],2019:[{sector:"Pending",size:33},{sector:"Opened",size:357},{sector:"Closed",size:833}],2020:[{sector:"Pending",size:24},{sector:"Opened",size:462},{sector:"Closed",size:649}]},e=Ya("chartgeneral2",as);e.data=[{sector:"Pending",size:43},{sector:"Opened",size:245},{sector:"Closed",size:568}],e.innerRadius=100;var i=e.seriesContainer.createChild(Ln);i.text="2020",i.horizontalCenter="middle",i.verticalCenter="middle",i.fontSize=30;var r=e.series.push(new rs);r.dataFields.value="size",r.dataFields.category="sector";var n=2016;!function r(){for(var a=function(){i.text=n;var e=t[n];return++n>2021&&(n=2016),e}(),o=0;o<a.length;o++)e.data[o].size=a[o].size;e.invalidateRawData(),e.setTimeout(r,4e3)}(),this.chart2=e},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"})},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-general-ledger"]],decls:160,vars:13,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-file-alt","text-dark"],[1,"row"],[1,"col-sm-3","col-md-6","col-lg-4","mb-4"],[1,"card","border-light","shadow-sm"],[1,"card-body"],[1,"row","d-block","d-xl-flex","align-items-center"],[1,"col-12","px-xl-0","text-center"],[1,"d-none","d-sm-block"],[1,"h4"],[1,"h3","mb-1"],[1,"small","mt-2"],[1,"fas","fa-angle-up","text-success"],[1,"text-success","font-weight-bold"],[1,"col-sm-3","col-md-6","col-lg-4"],[1,"container-fluid","mt--6"],[1,"col-xl-6"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"chart"],["id","chartgeneral1",1,"amchart"],["id","chartgeneral2",1,"amchart"],[1,"col-xl-12"],[1,"col-md-5"],[1,"form-group"],[1,"form-control-label"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"ni","ni-calendar-grid-58"],["type","text","bsDaterangepicker","","name","bsDaterangepicker",1,"form-control",3,"ngModel","bsConfig","ngModelChange"],["for","exampleFormControlSelect1"],["id","exampleFormControlSelect1",1,"form-control"],["hidden","","selected",""],["value","1"],["value","2"],["value","3"],[1,"col-md-2","text-right","mt-4"],["type","button",1,"btn","btn-default",3,"click"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["createUser",""],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"table","table-centered","table-nowrap","mb-0","rounded"],[1,"thead-light"],[1,"border-0"],[1,"modal-footer"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){1&t&&(_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"General Ledger"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h2",18),_l.Fc(20,"General Ledger Total"),_l.Sb(),_l.Tb(21,"h3",19),_l.Fc(22,"2,302"),_l.Sb(),_l.Sb(),_l.Tb(23,"div",20),_l.Pb(24,"span",21),_l.Tb(25,"span",22),_l.Fc(26," 28.2%"),_l.Sb(),_l.Fc(27," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(28,"div",23),_l.Tb(29,"div",13),_l.Tb(30,"div",14),_l.Tb(31,"div",15),_l.Tb(32,"div",16),_l.Tb(33,"div",17),_l.Tb(34,"h2",18),_l.Fc(35,"Total of Completed General Ledger"),_l.Sb(),_l.Tb(36,"h3",19),_l.Fc(37,"308"),_l.Sb(),_l.Sb(),_l.Tb(38,"div",20),_l.Pb(39,"span",21),_l.Tb(40,"span",22),_l.Fc(41," 76.2%"),_l.Sb(),_l.Fc(42," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(43,"div",23),_l.Tb(44,"div",13),_l.Tb(45,"div",14),_l.Tb(46,"div",15),_l.Tb(47,"div",16),_l.Tb(48,"div",17),_l.Tb(49,"h2",18),_l.Fc(50,"Total of Overdue General Ledger"),_l.Sb(),_l.Tb(51,"h3",19),_l.Fc(52,"867"),_l.Sb(),_l.Sb(),_l.Tb(53,"div",20),_l.Pb(54,"span",21),_l.Tb(55,"span",22),_l.Fc(56," 5.12%"),_l.Sb(),_l.Fc(57," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(58,"div",24),_l.Tb(59,"div",11),_l.Tb(60,"div",25),_l.Tb(61,"div",26),_l.Tb(62,"div",27),_l.Tb(63,"div",28),_l.Tb(64,"div",29),_l.Tb(65,"h5",30),_l.Fc(66,"No. of Journals"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(67,"div",14),_l.Tb(68,"div",31),_l.Pb(69,"div",32),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(70,"div",25),_l.Tb(71,"div",26),_l.Tb(72,"div",27),_l.Tb(73,"div",28),_l.Tb(74,"div",29),_l.Tb(75,"h5",30),_l.Fc(76,"No. of Accounts"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(77,"div",14),_l.Tb(78,"div",31),_l.Pb(79,"div",33),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(80,"div",34),_l.Tb(81,"div",26),_l.Tb(82,"div",27),_l.Tb(83,"div",28),_l.Tb(84,"div",29),_l.Tb(85,"h5",30),_l.Fc(86,"Search Ledger"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(87,"div",14),_l.Tb(88,"div",11),_l.Tb(89,"div",35),_l.Tb(90,"div",36),_l.Tb(91,"label",37),_l.Fc(92,"Pick Range Date"),_l.Sb(),_l.Tb(93,"div",38),_l.Tb(94,"div",39),_l.Tb(95,"span",40),_l.Pb(96,"i",41),_l.Sb(),_l.Sb(),_l.Tb(97,"input",42),_l.bc("ngModelChange",(function(t){return e.bsRangeValue=t})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(98,"div",35),_l.Tb(99,"div",36),_l.Tb(100,"label",43),_l.Fc(101,"Sort By"),_l.Sb(),_l.Tb(102,"select",44),_l.Tb(103,"option",45),_l.Fc(104,"Choose"),_l.Sb(),_l.Tb(105,"option",46),_l.Fc(106,"Debit"),_l.Sb(),_l.Tb(107,"option",47),_l.Fc(108,"Credit"),_l.Sb(),_l.Tb(109,"option",48),_l.Fc(110,"Net Movement"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(111,"div",49),_l.Tb(112,"button",50),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(113," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(114,"div",34),_l.Tb(115,"div",26),_l.Tb(116,"div",27),_l.Tb(117,"div",28),_l.Tb(118,"div",29),_l.Tb(119,"h5",30),_l.Fc(120,"General Ledger"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(121,"div",14),_l.Tb(122,"div",51),_l.Tb(123,"div",11),_l.Tb(124,"div",52),_l.Tb(125,"div",53),_l.Tb(126,"label"),_l.Fc(127," Show "),_l.Tb(128,"select",54),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(129,"option",55),_l.Fc(130,"5"),_l.Sb(),_l.Tb(131,"option",56),_l.Fc(132,"10"),_l.Sb(),_l.Tb(133,"option",57),_l.Fc(134,"15"),_l.Sb(),_l.Tb(135,"option",58),_l.Fc(136,"All"),_l.Sb(),_l.Sb(),_l.Fc(137," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(138,"div",52),_l.Tb(139,"div",59),_l.Tb(140,"label"),_l.Tb(141,"input",60),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(142,"ngx-datatable",61),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(143,"ngx-datatable-column"),_l.Dc(144,uu,2,0,"ng-template",62),_l.Dc(145,cu,1,1,"ng-template",63),_l.Sb(),_l.Tb(146,"ngx-datatable-column"),_l.Dc(147,hu,2,0,"ng-template",62),_l.Dc(148,pu,1,1,"ng-template",63),_l.Sb(),_l.Tb(149,"ngx-datatable-column"),_l.Dc(150,du,2,0,"ng-template",62),_l.Dc(151,fu,1,1,"ng-template",63),_l.Sb(),_l.Tb(152,"ngx-datatable-column"),_l.Dc(153,mu,2,0,"ng-template",62),_l.Dc(154,yu,1,1,"ng-template",63),_l.Sb(),_l.Tb(155,"ngx-datatable-column"),_l.Dc(156,gu,2,0,"ng-template",62),_l.Dc(157,bu,6,0,"ng-template",63),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(158,vu,55,0,"ng-template",null,64,_l.Ec)),2&t&&(_l.Bb(97),_l.lc("ngModel",e.bsRangeValue)("bsConfig",_l.nc(12,_u)),_l.Bb(32),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[o.e,s.b,o.d,s.m,s.p,s.q,s.u,l.d,l.b,l.c,l.a],styles:[""]}),t}(),wu=function(t){_e(t,"ColorSet")&&(t.list=[Ue("#283250"),Ue("#902c2d"),Ue("#d5433d"),Ue("#f05440")],t.reuse=!1,t.stepOptions={lightness:.05,hue:0},t.passOptions={})};function Tu(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Budgetary Report"),_l.Sb())}function Pu(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.accNo," ")}function Cu(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Total (RM)"),_l.Sb())}function ku(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.debit," ")}function Iu(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Session"),_l.Sb())}function Au(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.start," ")}function Ou(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function Du(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",58),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(141);return e.openModal(r)})),_l.Tb(1,"span",59),_l.Pb(2,"i",60),_l.Sb(),_l.Sb(),_l.Tb(3,"button",61),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",59),_l.Pb(5,"i",62),_l.Sb(),_l.Sb()}}function Fu(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",63),_l.Tb(1,"h6",64),_l.Fc(2," Add Budgetary Report "),_l.Sb(),_l.Tb(3,"button",65),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",66),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",67),_l.Tb(7,"form"),_l.Tb(8,"div",12),_l.Tb(9,"div",68),_l.Tb(10,"div",69),_l.Tb(11,"label",70),_l.Fc(12,"ID"),_l.Sb(),_l.Pb(13,"input",71),_l.Sb(),_l.Sb(),_l.Tb(14,"div",68),_l.Tb(15,"div",69),_l.Tb(16,"label",72),_l.Fc(17,"Title"),_l.Sb(),_l.Pb(18,"input",73),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(19,"form"),_l.Tb(20,"div",12),_l.Tb(21,"div",68),_l.Tb(22,"div",69),_l.Tb(23,"label",74),_l.Fc(24,"Total(RM)"),_l.Sb(),_l.Pb(25,"input",75),_l.Sb(),_l.Sb(),_l.Tb(26,"div",68),_l.Tb(27,"div",69),_l.Tb(28,"label",76),_l.Fc(29,"Session"),_l.Sb(),_l.Tb(30,"div",77),_l.Tb(31,"span",78),_l.Pb(32,"span",79),_l.Sb(),_l.Pb(33,"input",80),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(34,"form"),_l.Tb(35,"div",12),_l.Tb(36,"div",68),_l.Tb(37,"div",69),_l.Tb(38,"label",81),_l.Fc(39,"Department"),_l.Sb(),_l.Pb(40,"input",82),_l.Sb(),_l.Sb(),_l.Tb(41,"div",68),_l.Tb(42,"div",69),_l.Tb(43,"label",83),_l.Fc(44,"Division"),_l.Sb(),_l.Pb(45,"input",84),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(46,"form"),_l.Tb(47,"div",12),_l.Tb(48,"div",85),_l.Tb(49,"div",69),_l.Tb(50,"label",86),_l.Fc(51,"Description"),_l.Sb(),_l.Pb(52,"textarea",87),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(53,"div",88),_l.Tb(54,"button",89),_l.bc("click",(function(t){return _l.wc(i),_l.fc().successSwal("saved")})),_l.Fc(55," Save "),_l.Sb(),_l.Tb(56,"button",90),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(57," Close "),_l.Sb(),_l.Sb()}}var Mu=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),Eu=function(){function t(t,e){this.zone=t,this.modalService=e,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$385,750"}],this.SelectionType=Mu,this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartPlanningControl1()}))},t.prototype.getChartPlanningControl1=function(){Ga(wu),Ga(vl);var t=Ya("chartplanningcontrol1",Vs);t.data=[{country:"Jan",year2017:3.5,year2018:4.2},{country:"Feb",year2017:1.7,year2018:3.1},{country:"Mar",year2017:2.8,year2018:2.9},{country:"Apr",year2017:2.6,year2018:2.3},{country:"May",year2017:1.4,year2018:2.1},{country:"June",year2017:2.6,year2018:4.9},{country:"July",year2017:6.4,year2018:7.2},{country:"Aug",year2017:8,year2018:7.1},{country:"Sep",year2017:7.3,year2018:8.1},{country:"Oct",year2017:7.6,year2018:9.2},{country:"Nov",year2017:2,year2018:3.5},{country:"Dec",year2017:7.2,year2018:10.1}];var e=t.xAxes.push(new Io);e.dataFields.category="country",e.renderer.grid.template.location=0,e.renderer.minGridDistance=30;var i=t.yAxes.push(new xo);i.title.text="Budget (RM)",i.renderer.labels.template.adapter.add("text",(function(t){return t+"%"}));var r=t.series.push(new Rs);r.dataFields.valueY="year2017",r.dataFields.categoryX="country",r.name="Forecast",r.clustered=!1,r.columns.template.tooltipText="Forecast Budget in {country} : [bold]{valueY}[/]",r.columns.template.fillOpacity=.9;var n=t.series.push(new Rs);n.dataFields.valueY="year2018",n.dataFields.categoryX="country",n.name="Actual",n.clustered=!1,n.columns.template.tooltipText="Actual Budget in {country} : [bold]{valueY}[/]",this.chart1=t},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"}),this.modalRef.hide()},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-planning-budgetary-control"]],decls:142,vars:10,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-balance-scale","text-dark"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"card-body"],[1,"chart"],["id","chartplanningcontrol1",1,"amchart"],[1,"col-lg-4"],[1,"card","border-light","shadow-sm"],[1,"row","d-block","d-xl-flex","align-items-center","text-center"],[1,"col-12","px-xl-0"],[1,"d-none","d-sm-block"],[1,"h4"],[1,"h3","mb-1"],[1,"small","mt-2"],[1,"fas","fa-angle-up","text-success"],[1,"text-success","font-weight-bold"],[1,"col-md-6"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-default",3,"click"],[1,"form-group"],["for","exampleFormControlSelect2"],["id","exampleFormControlSelect2",1,"form-control"],["selected",""],["value","1"],["value","2"],["value","3"],["value","4"],[1,"col-xl-12","text-right"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["createUser",""],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"col-6"],[1,"mb-4"],["for","id1"],["type","text","id","id1","placeholder","eg RB-cs-240",1,"form-control"],["for","title1"],["type","text","id","title1","placeholder","eg PENJANA",1,"form-control"],["for","total1"],["type","text","id","total1","placeholder","eg 1098.00",1,"form-control"],["for","session1"],[1,"input-group"],[1,"input-group-text"],[1,"far","fa-calendar-alt"],["data-datepicker","","id","session","type","text","placeholder","Choose date","required","",1,"form-control"],["for","department"],["type","text","placeholder","eg Acquisition","id","department",1,"form-control"],["for","division"],["type","text","placeholder","eg High Risk Economy","id","department1",1,"form-control"],[1,"col-12"],["for","textarea"],["placeholder","Enter your message...","id","textarea","rows","2",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6," Budget Setup & Performance Reporting "),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h5",18),_l.Fc(20,"Forecost vs Actual Budget"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(21,"div",19),_l.Tb(22,"div",20),_l.Pb(23,"div",21),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(24,"div",22),_l.Tb(25,"div",23),_l.Tb(26,"div",19),_l.Tb(27,"div",24),_l.Tb(28,"div",25),_l.Tb(29,"div",26),_l.Tb(30,"h2",27),_l.Fc(31,"Budgetary Proposal"),_l.Sb(),_l.Tb(32,"h3",28),_l.Fc(33,"10"),_l.Sb(),_l.Sb(),_l.Tb(34,"div",29),_l.Pb(35,"span",30),_l.Tb(36,"span",31),_l.Fc(37,"28.2%"),_l.Sb(),_l.Fc(38," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(39,"div",22),_l.Tb(40,"div",23),_l.Tb(41,"div",19),_l.Tb(42,"div",24),_l.Tb(43,"div",25),_l.Tb(44,"div",26),_l.Tb(45,"h2",27),_l.Fc(46,"Successful Budgetary"),_l.Sb(),_l.Tb(47,"h3",28),_l.Fc(48,"7"),_l.Sb(),_l.Sb(),_l.Tb(49,"div",29),_l.Pb(50,"span",30),_l.Tb(51,"span",31),_l.Fc(52,"76.2%"),_l.Sb(),_l.Fc(53," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(54,"div",22),_l.Tb(55,"div",23),_l.Tb(56,"div",19),_l.Tb(57,"div",24),_l.Tb(58,"div",25),_l.Tb(59,"div",26),_l.Tb(60,"h2",27),_l.Fc(61,"Failed Budgetary"),_l.Sb(),_l.Tb(62,"h3",28),_l.Fc(63,"3"),_l.Sb(),_l.Sb(),_l.Tb(64,"div",29),_l.Pb(65,"span",30),_l.Tb(66,"span",31),_l.Fc(67,"5.12%"),_l.Sb(),_l.Fc(68," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(69,"div",13),_l.Tb(70,"div",14),_l.Tb(71,"div",15),_l.Tb(72,"div",16),_l.Tb(73,"div",32),_l.Tb(74,"h5",18),_l.Fc(75,"List of Budgetary Reports"),_l.Sb(),_l.Sb(),_l.Tb(76,"div",33),_l.Tb(77,"button",34),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(141);return e.openModal(r)})),_l.Fc(78," Add New "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(79,"div",19),_l.Tb(80,"div",12),_l.Tb(81,"div",13),_l.Tb(82,"div",35),_l.Tb(83,"label",36),_l.Fc(84,"Search Project"),_l.Sb(),_l.Tb(85,"select",37),_l.Tb(86,"option",38),_l.Fc(87,"Choose"),_l.Sb(),_l.Tb(88,"option",39),_l.Fc(89,"Session"),_l.Sb(),_l.Tb(90,"option",40),_l.Fc(91,"Department"),_l.Sb(),_l.Tb(92,"option",41),_l.Fc(93,"Division"),_l.Sb(),_l.Tb(94,"option",42),_l.Fc(95,"Title"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(96,"div",43),_l.Tb(97,"button",34),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(98," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(99,"div",13),_l.Tb(100,"div",14),_l.Tb(101,"div",15),_l.Tb(102,"div",16),_l.Tb(103,"div",17),_l.Tb(104,"h5",18),_l.Fc(105,"Budgetary Report"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(106,"div",19),_l.Tb(107,"div",44),_l.Tb(108,"div",12),_l.Tb(109,"div",45),_l.Tb(110,"div",46),_l.Tb(111,"label"),_l.Fc(112," Show "),_l.Tb(113,"select",47),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(114,"option",48),_l.Fc(115,"5"),_l.Sb(),_l.Tb(116,"option",49),_l.Fc(117,"10"),_l.Sb(),_l.Tb(118,"option",50),_l.Fc(119,"15"),_l.Sb(),_l.Tb(120,"option",51),_l.Fc(121,"All"),_l.Sb(),_l.Sb(),_l.Fc(122," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(123,"div",45),_l.Tb(124,"div",52),_l.Tb(125,"label"),_l.Tb(126,"input",53),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(127,"ngx-datatable",54),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(128,"ngx-datatable-column"),_l.Dc(129,Tu,2,0,"ng-template",55),_l.Dc(130,Pu,1,1,"ng-template",56),_l.Sb(),_l.Tb(131,"ngx-datatable-column"),_l.Dc(132,Cu,2,0,"ng-template",55),_l.Dc(133,ku,1,1,"ng-template",56),_l.Sb(),_l.Tb(134,"ngx-datatable-column"),_l.Dc(135,Iu,2,0,"ng-template",55),_l.Dc(136,Au,1,1,"ng-template",56),_l.Sb(),_l.Tb(137,"ngx-datatable-column"),_l.Dc(138,Ou,2,0,"ng-template",55),_l.Dc(139,Du,6,0,"ng-template",56),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(140,Fu,58,0,"ng-template",null,57,_l.Ec)}2&t&&(_l.Bb(114),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,s.v,s.n,s.o],styles:[""]}),t}(),Lu=function(t){function e(){var e=t.call(this)||this;return e.className="CurveLineSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Vo),Ru=function(t){function e(){var e=t.call(this)||this;return e.className="CurveLineSeries",e.connectEnds=!1,e.bulletsContainer.mask=new _n,e.topOffset=.2,e.bottomOffset=.2,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createDataItem=function(){return new Lu},e.prototype.getPoint=function(t,e,i,r,n,a,o){a||(a="valueX"),o||(o="valueY");var s=this.yAxis.renderer,l=V(this.yAxis.getY(t,i,n,o),-s.radius*(1+this.bottomOffset),-s.innerRadius*(1+this.topOffset)),u=this.xAxis.getX(t,e,r,a),c=this.xAxis.getY(t,e,r,a),h=this.xAxis.getAngle(t,e,r,a);return{x:u+l*B(h),y:c+l*j(h)}},e.prototype.addPoints=function(t,e,i,r,n){var a=this.getPoint(e,i,r,e.locations[i],e.locations[r]);a&&t.push(a)},e.prototype.getMaskPath=function(){var t=this.yAxis.renderer.getPositionRangePath(this.yAxis.start,this.yAxis.end),e=this.bulletsContainer;return this.chart&&this.chart.maskBullets?(e.mask||(e.mask=new _n),e.mask.path=t):e.mask=void 0,t},e.prototype.drawSegment=function(e,i,r){this.connectEnds&&(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)&&(i.push(i[0]),r.length>0&&r.unshift(r[r.length-1])),t.prototype.drawSegment.call(this,e,i,r)},Object.defineProperty(e.prototype,"connectEnds",{get:function(){return this.getPropertyValue("connectEnds")},set:function(t){this.setPropertyValue("connectEnds",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topOffset",{get:function(){return this.getPropertyValue("topOffset")},set:function(t){this.setPropertyValue("topOffset",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomOffset",{get:function(){return this.getPropertyValue("bottomOffset")},set:function(t){this.setPropertyValue("bottomOffset",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionBulletReal=function(t,e,i){var r=this.xAxis,n=this.yAxis;(e<r.start||e>r.end||i<n.start||i>n.end)&&(t.visible=!1),t.moveTo(this.xAxis.renderer.positionToPoint(e,i))},e.prototype.setXAxis=function(e){t.prototype.setXAxis.call(this,e),this.updateRendererRefs()},e.prototype.setYAxis=function(e){t.prototype.setYAxis.call(this,e),this.updateRendererRefs()},e.prototype.updateRendererRefs=function(){var t=this.xAxis.renderer,e=this.yAxis.renderer;t.axisRendererY=e,e.axisRendererX=t},e}(jo);ve.registeredClasses.CurveLineSeries=Ru,ve.registeredClasses.CurveLineSeriesDataItem=Lu;var Vu=function(t){function e(){var e=t.call(this)||this;return e.pixelRadiusReal=0,e.autoScaleScale=1,e.layout="none",e.autoScale=!0,e.autoCenter=!0,e.isMeasured=!1,e.className="AxisRendererCurveX",e.line.strokeOpacity=1,e.precisionStep=10,e.points=[{x:-300,y:0},{x:300,y:0}],e._tempSprite=e.createChild(_n),e._tempSprite.visible=!1,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"axisLength",{get:function(){return this.polyspline.distance},enumerable:!0,configurable:!0}),e.prototype.updateAxisLine=function(){this.line.path=this.polyspline.path},Object.defineProperty(e.prototype,"polyspline",{get:function(){var t=this.getPropertyValue("polyspline");return t||((t=this.createChild(ra)).tensionX=1,t.tensionY=1,this.polyspline=t),t},set:function(t){this.setPropertyValue("polyspline",t,!0),t.parent=this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoScale",{get:function(){return this.getPropertyValue("autoScale")},set:function(t){this.setPropertyValue("autoScale",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoCenter",{get:function(){return this.getPropertyValue("autoCenter")},set:function(t){this.setPropertyValue("autoCenter",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"precisionStep",{get:function(){return this.getPropertyValue("precisionStep")},set:function(t){this.setPropertyValue("precisionStep",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return this.getPropertyValue("points")},set:function(t){this.setPropertyValue("points",t,!0)&&(this._pointsChanged=!0,this.polyspline.segments=[t])},enumerable:!0,configurable:!0}),e.prototype.setAxis=function(e){var i=this;if(t.prototype.setAxis.call(this,e),e&&e.chart){var r=e.chart;this._disposers.push(r.curveContainer.events.on("positionchanged",(function(){i.handleSizeChange()}))),this._disposers.push(r.events.on("maxsizechanged",(function(){i.handleSizeChange()})))}},e.prototype.handleSizeChange=function(){if(this._pointsChanged){var t=this.axis.getPositionRangePath(0,1);this._tempSprite.path=t,this._pointsChanged=!1}if(this.points){var e=this.axis.chart,i=e.curveContainer,r=e.plotContainer.maxWidth-i.pixelPaddingLeft-i.pixelPaddingRight,n=e.plotContainer.maxHeight-i.pixelPaddingTop-i.pixelPaddingBottom,a=this._tempSprite.element.getBBox(),o={x:0,y:0};this.autoCenter&&(o={x:a.x+a.width/2,y:a.y+a.height/2});var s=1;this.autoScale&&(s=U(r/a.width,n/a.height));var l=[];ht(this.points,(function(t){l.push({x:(t.x-o.x)*s,y:(t.y-o.y)*s})})),this.polyspline.segments=[l]}},e.prototype.positionToPoint=function(t,e){var i=this.axis,r=this.polyspline.positionToPoint(t=(t-i.start)/(i.end-i.start),!0);r.angle+=90;var n=this.axisRendererY;if(k(e)&&n){var a=n.positionToPoint(e).y;r.x+=a*B(r.angle),r.y+=a*j(r.angle)}return r},e.prototype.positionToAngle=function(t){var e=this.axis;return t=N(0,(t-e.start)/(e.end-e.start)),this.polyspline.positionToPoint(t,!0).angle+90},e.prototype.updateGridElement=function(t,e,i){t.element&&(e+=(i-e)*t.location,t.zIndex=0,t.path=this.getGridPath(e),this.toggleVisibility(t,e,0,1))},e.prototype.getGridPath=function(t){var e=this.positionToPoint(t),i=e.angle,r=this.axisRendererY;if(r){var n=-r.radius,a=-r.innerRadius;return Hn({x:e.x+a*B(i),y:e.y+a*j(i)})+Wn({x:e.x+n*B(i),y:e.y+n*j(i)})}return""},e.prototype.updateTickElement=function(t,e){if(t.element){var i=this.positionToPoint(e),r=i.angle,n=t.length;t.inside&&(n*=-1),t.path=Hn({x:i.x,y:i.y})+Wn({x:i.x+n*B(r),y:i.y+n*j(r)}),this.toggleVisibility(t,e,0,1)}},e.prototype.updateLabelElement=function(t,e,i,r){S(r)||(r=t.location);var n=this.positionToPoint(e+=(i-e)*r);t.x=n.x,t.y=n.y,t.zIndex=2,this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)},e.prototype.getPositionRangePath=function(t,e){var i="",r=this.axisRendererY;if(r){if(t>e){var n=t;t=e,e=n}var a=r.axis.start,o=r.axis.end,s=this.axis.start,l=this.axis.end;if(t<=s&&e<=s||t>=l&&e>=l)return i;if(t=V(t,s,l),(e=V(e,s,l))==s||t==l)return i;if(e==t)return i;var u=0|L(r.positionToPoint(a).y,1),c=0|L(r.positionToPoint(o).y,1),h=this.positionToPoint(t),p=h.angle;i=Hn(h);for(var d=Math.ceil(this.axisLength/this.precisionStep*(e-t)/(l-s)),f=0;f<=d;f++)i+=Wn({x:(h=this.positionToPoint(t+f/d*(e-t))).x+u*B(p=h.angle),y:h.y+u*j(p)});for(f=d;f>=0;f--)i+=Wn({x:(h=this.positionToPoint(t+f/d*(e-t))).x+c*B(p=h.angle),y:h.y+c*j(p)});i+=" Z"}return i},e.prototype.updateBaseGridElement=function(){},e.prototype.updateBullet=function(t,e,i){var r=.5;t instanceof go&&(r=t.location);var n=this.positionToPoint(e+=(i-e)*r);t.moveTo({x:n.x,y:n.y}),this.toggleVisibility(t,e,0,1)},e.prototype.updateBreakElement=function(t){var e=this.axisRendererY;if(e){var i=t.startPosition,r=t.endPosition,n=this.positionToAngle(i),a=this.positionToPoint(i),o=this.positionToAngle(r),s=this.positionToPoint(r),l=t.startLine,u=t.endLine,c=t.fillShape,h=-e.radius+t.pixelMarginTop,p=-e.innerRadius-t.pixelMarginBottom,d={x:a.x+p*B(n),y:a.y+p*j(n)},f={x:a.x+h*B(n),y:a.y+h*j(n)},m={x:s.x+p*B(o),y:s.y+p*j(o)},y={x:s.x+h*B(o),y:s.y+h*j(o)};l.path=Hn(d)+ba(d,f,l.waveLength,l.waveHeight,l.tension,!0),u.path=Hn(y)+ba(y,m,u.waveLength,u.waveHeight,u.tension,!0);var g=Hn(d);g+=ba(d,f,c.waveLength,c.waveHeight,c.tension,!0);for(var b=Math.ceil(this.axisLength/this.precisionStep*(r-i)/(this.axis.end-this.axis.start)),v=0;v<=b;v++)g+=Wn({x:(_=this.positionToPoint(i+v/b*(r-i))).x+h*B(x=_.angle),y:_.y+h*j(x)});for(g+=ba(y,m,c.waveLength,c.waveHeight,c.tension,!0),v=b;v>=0;v--){var _,x;g+=Wn({x:(_=this.positionToPoint(i+v/b*(r-i))).x+p*B(x=_.angle),y:_.y+p*j(x)})}c.path=g,this.toggleVisibility(t.startLine,t.startPosition,0,1),this.toggleVisibility(t.endLine,t.endPosition,0,1)}},e.prototype.toAxisPosition=function(t){return t},e.prototype.coordinateToPosition=function(e,i){var r=this.polyspline.allPoints,n=this.polyspline.getClosestPointIndex({x:e,y:i});return t.prototype.coordinateToPosition.call(this,n/(r.length-1)*this.axisLength)},e.prototype.updateTooltip=function(){},Object.defineProperty(e.prototype,"inversed",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),e}(Po);ve.registeredClasses.AxisRendererCurveX=Vu;var ju=function(t){function e(){var e=t.call(this)||this;return e._chart=new Vt,e.className="AxisRendererCurveY",e.isMeasured=!1,e.minGridDistance=30,e.isMeasured=!1,e.layout="none",e.radius=40,e.innerRadius=-40,e.line.strokeOpacity=0,e.labels.template.horizontalCenter="right",e._disposers.push(e._chart),e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),t.prototype.validate.call(this)},Object.defineProperty(e.prototype,"axisLength",{get:function(){return Math.abs(this.radius-this.innerRadius)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(t){this.setPropertyValue("radius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPropertyValue("innerRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this._chart.set(t,null)},enumerable:!0,configurable:!0}),e.prototype.positionToPoint=function(t){return{x:0,y:this.positionToCoordinate(t)}},e.prototype.updateAxisLine=function(){var t=this.axisRendererX;if(t){var e=t.axis,i=t.positionToPoint(e.start+(e.end-e.start)*this.axisLocation),r=i.angle,n=-this.radius,a=-this.innerRadius;this.line.path=Hn({x:a*B(r),y:a*j(r)})+Wn({x:n*B(r),y:n*j(r)}),this.line.moveTo(i);var o=this.axis.title;o.moveTo({x:i.x+n/2*B(r),y:i.y+n/2*j(r)}),o.rotation=r-180}},e.prototype.updateGridElement=function(t,e,i){this.axisRendererX&&((e+=(i-e)*t.location)>=0&&e<=1&&(t.path=this.getGridPath(e)),this.positionItem(t,{x:0,y:0}),this.toggleVisibility(t,e,0,1))},e.prototype.getGridPath=function(t){var e=this.axisRendererX,i="";if(e&&k(t)){for(var r=L(this.positionToPoint(t).y,1),n=e.positionToPoint(e.axis.start),a=n.angle,o=Math.ceil(e.axisLength/e.precisionStep),s=e.axis.start,l=e.axis.end,u=0;u<=o;u++)i+=Wn({x:(n=e.positionToPoint(s+u/o*(l-s))).x+r*B(a=n.angle),y:n.y+r*j(a)});i=i.replace("L","M")}return i},e.prototype.updateLabelElement=function(t,e,i,r){S(r)||(r=t.location);var n=this.positionToPoint(e+=(i-e)*r).y,a=this.axisRendererX;if(a){var o=a.axis,s=a.positionToPoint(o.start+(o.end-o.start)*this.axisLocation),l=s.angle;s.x+=n*B(l),s.y+=n*j(l),this.positionItem(t,s),this.toggleVisibility(t,e,this.minLabelPosition,this.maxLabelPosition)}},e.prototype.updateTickElement=function(t,e){if(t.element){var i=this.axisRendererX;if(i){var r=i.positionToPoint(this.axisLocation),n=r.angle,a=this.positionToPoint(e).y;r.x+=a*B(n),r.y+=a*j(n),n=rt(n+90),t.pixelPerfect=n/90==Math.round(n/90);var o=t.length;t.inside&&(o*=-1),t.path=Hn({x:0,y:0})+Wn({x:o*B(n),y:o*j(n)}),this.positionItem(t,r),this.toggleVisibility(t,e,0,1)}}},e.prototype.updateBullet=function(t,e,i){var r=.5;t instanceof go&&(r=t.location),e+=(i-e)*r;var n=this.axisRendererX;if(n){var a=n.positionToPoint(this.axisLocation),o=a.angle,s=this.positionToPoint(e).y;a.x+=s*B(o),a.y+=s*j(o),o=rt(o+90),this.positionItem(t,a),this.toggleVisibility(t,e,0,1)}},e.prototype.updateBaseGridElement=function(){},e.prototype.fitsToBounds=function(t){return!0},e.prototype.getPositionRangePath=function(t,e){var i="",r=this.axisRendererX;if(r){var n=r.axis.start,a=r.axis.end,o=this.axis.start,s=this.axis.end;if(t<=o&&e<=o||t>=s&&e>=s)return i;t=V(t,o,s),e=V(e,o,s);var l=L(this.positionToPoint(t).y,1),u=L(this.positionToPoint(e).y,1);if(y(l)||y(u))return"";var c=r.positionToPoint(n),h=c.angle;i=Hn(c);for(var p=Math.ceil(r.axisLength/r.precisionStep),d=0;d<=p;d++)i+=Wn({x:(c=r.positionToPoint(n+d/p*(a-n))).x+l*B(h=c.angle),y:c.y+l*j(h)});for(d=p;d>=0;d--)i+=Wn({x:(c=r.positionToPoint(n+d/p*(a-n))).x+u*B(h=c.angle),y:c.y+u*j(h)});i+=" Z"}return i},e.prototype.updateBreakElement=function(t){this.axisRendererX&&(t.fillShape.path=this.getPositionRangePath(t.startPosition,t.endPosition),this.toggleVisibility(t.startLine,t.startPosition,0,1),this.toggleVisibility(t.endLine,t.endPosition,0,1))},e.prototype.createBreakSprites=function(t){t.startLine=new va,t.endLine=new va,t.fillShape=new va},e.prototype.updateTooltip=function(){},e.prototype.positionToCoordinate=function(t){var e=this.axis,i=e.axisFullLength;return L(-this.innerRadius-(e.renderer.inversed?(e.end-t)*i:(t-e.start)*i),4)},Object.defineProperty(e.prototype,"axisLocation",{get:function(){return this.getPropertyValue("axisLocation")},set:function(t){this.setPropertyValue("axisLocation",t),this.invalidateAxisItems()},enumerable:!0,configurable:!0}),e.prototype.processRenderer=function(){t.prototype.processRenderer.call(this);var e=this.axis;if(e){var i=e.title;i&&(i.isMeasured=!1,i.horizontalCenter="middle",i.verticalCenter="bottom")}},e.prototype.coordinateToPosition=function(e,i){var r=this.axisRendererX,n=e;if(r){var a=r.polyspline.allPoints[r.polyspline.getClosestPointIndex({x:i,y:e})],o=a.angle-90;n=W({x:a.x+this.innerRadius*B(o),y:a.y+this.innerRadius*j(o)},{x:i,y:e})}return t.prototype.coordinateToPosition.call(this,n)},e.prototype.toAxisPosition=function(t){return t},e}(bo);ve.registeredClasses.AxisRendererCurveY=ju;var zu=function(t){function e(){var e=t.call(this)||this;return e.className="CurveChartDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Fo),Bu=function(t){function e(){var e=t.call(this)||this;e._axisRendererX=Vu,e._axisRendererY=ju,e.className="CurveChart";var i=e.plotContainer.createChild(Sn);return i.shouldClone=!1,i.layout="absolute",i.align="center",i.valign="middle",e.seriesContainer.parent=i,e.curveContainer=i,e.bulletsContainer.parent=i,e.axisBulletsContainer.parent=i,e._cursorContainer=i,e._bulletMask=void 0,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),S(this.readerTitle)},e.prototype.processAxis=function(e){t.prototype.processAxis.call(this,e);var i=e.renderer;i.gridContainer.parent=i,i.breakContainer.parent=i,e.parent=this.curveContainer,i.toBack()},e.prototype.processConfig=function(e){if(e&&(S(e.cursor)&&!S(e.cursor.type)&&(e.cursor.type="CurveCursor"),S(e.series)&&A(e.series)))for(var i=0,r=e.series.length;i<r;i++)e.series[i].type=e.series[i].type||"CurveLineSeries";t.prototype.processConfig.call(this,e)},e.prototype.createSeries=function(){return new Ru},e.prototype.updateXAxis=function(t){t&&t.processRenderer()},e.prototype.updateYAxis=function(t){t&&t.processRenderer()},e.prototype.hasLicense=function(){if(!t.prototype.hasLicense.call(this))return!1;for(var e=0;e<Gi.licenses.length;e++)if(Gi.licenses[e].match(/^TL.{5,}/i))return!0;return!1},e}(Mo);ve.registeredClasses.CurveChart=Bu,function(t){Object(d.d)((function(){var e=t.call(this)||this;return e.className="SerpentineChartDataItem",e.applyTheme(),e}),t)}(zu);var Nu=function(t){function e(){var e=t.call(this)||this;return e.className="SerpentineChart",e.orientation="vertical",e.levelCount=3,e.yAxisRadius=m(25),e.yAxisInnerRadius=m(-25),e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(t){this.setPropertyValue("orientation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"levelCount",{get:function(){return this.getPropertyValue("levelCount")},set:function(t){this.setPropertyValue("levelCount",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxisRadius",{get:function(){return this.getPropertyValue("yAxisRadius")},set:function(t){this.setPropertyValue("yAxisRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxisInnerRadius",{get:function(){return this.getPropertyValue("yAxisInnerRadius")},set:function(t){this.setPropertyValue("yAxisInnerRadius",t,!0)},enumerable:!0,configurable:!0}),e.prototype.validate=function(){t.prototype.validate.call(this);var e=this.curveContainer,i=this.plotContainer.maxWidth-e.pixelPaddingLeft-e.pixelPaddingRight,r=this.plotContainer.maxHeight-e.pixelPaddingTop-e.pixelPaddingBottom,n=0;this.yAxes.each((function(t){n=N(t.renderer.radius,n)})),i-=2*n,r-=2*n;var a,o=[],s=this.levelCount;if("vertical"==this.orientation){a=U(r/(s-1)/2,i/2),r=U(a*(s-1)*2,r);for(var l=0;l<this.levelCount;l++)if(l%2==0){o.push({x:-i/2+a,y:-r/2+r/(s-1)*l}),o.push({x:i/2-a,y:-r/2+r/(s-1)*l});var u={x:i/2-a,y:-r/2+r/(s-1)*(l+.5)};if(l<this.levelCount-1)for(var c=0;c<50;c++)o.push({x:u.x+a*B(f=c/50*180-90),y:u.y+a*j(f)})}else if(o.push({x:i/2-a,y:-r/2+r/(s-1)*l}),o.push({x:-i/2+a,y:-r/2+r/(s-1)*l}),u={x:-i/2+a,y:-r/2+r/(s-1)*(l+.5)},l<this.levelCount-1)for(var h=0;h<50;h++)o.push({x:u.x+a*B(f=-90-h/50*180),y:u.y+a*j(f)})}else for(a=U(i/(s-1)/2,r/2),i=U(a*(s-1)*2,i),l=0;l<this.levelCount;l++)if(l%2==0){if(o.push({y:-r/2+a,x:-i/2+i/(s-1)*l}),o.push({y:r/2-a,x:-i/2+i/(s-1)*l}),u={y:r/2-a,x:-i/2+i/(s-1)*(l+.5)},l<this.levelCount-1)for(var p=0;p<50;p++)o.push({y:u.y+a*B(f=p/50*180-90),x:u.x+a*j(f)})}else if(o.push({y:r/2-a,x:-i/2+i/(s-1)*l}),o.push({y:-r/2+a,x:-i/2+i/(s-1)*l}),u={y:-r/2+a,x:-i/2+i/(s-1)*(l+.5)},l<this.levelCount-1)for(var d=0;d<50;d++){var f;o.push({y:u.y+a*B(f=-90-d/50*180),x:u.x+a*j(f)})}this.xAxes.each((function(t){t.renderer.points=o,t.renderer.autoScale=!1,t.renderer.autoCenter=!1,t.renderer.polyspline.tensionX=1,t.renderer.polyspline.tensionY=1}));var m=Je(this.yAxisInnerRadius,2*a),y=Je(this.yAxisRadius,2*a);this.yAxes.each((function(t){t.renderer.radius=y,t.renderer.innerRadius=m}))},e.prototype.updateYAxis=function(e){t.prototype.updateYAxis.call(this,e),e.innerRadius=void 0,e.radius=void 0},e}(Bu);ve.registeredClasses.SerpentineChart=Nu,function(t){Object(d.d)((function(){var e=t.call(this)||this;return e.className="SpiralChartDataItem",e.applyTheme(),e}),t)}(zu);var Uu=function(t){function e(){var e=t.call(this)||this;return e.className="SpiralChart",e.levelCount=3,e.precisionStep=5,e.startAngle=0,e.endAngle=0,e.innerRadius=m(25),e.yAxisRadius=m(35),e.yAxisInnerRadius=m(-35),e.inversed=!1,e.applyTheme(),e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"levelCount",{get:function(){return this.getPropertyValue("levelCount")},set:function(t){this.setPropertyValue("levelCount",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(t){this.setPropertyValue("startAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(t){this.setPropertyValue("endAngle",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radiusStep",{get:function(){return this.getPropertyValue("radiusStep")},set:function(t){this.setPropertyValue("radiusStep",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"precisionStep",{get:function(){return this.getPropertyValue("precisionStep")},set:function(t){this.setPropertyValue("precisionStep",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(t){this.setPropertyValue("innerRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxisRadius",{get:function(){return this.getPropertyValue("yAxisRadius")},set:function(t){this.setPropertyValue("yAxisRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxisInnerRadius",{get:function(){return this.getPropertyValue("yAxisInnerRadius")},set:function(t){this.setPropertyValue("yAxisInnerRadius",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inversed",{get:function(){return this.getPropertyValue("inversed")},set:function(t){this.setPropertyValue("inversed",t,!0)},enumerable:!0,configurable:!0}),e.prototype.validate=function(){t.prototype.validate.call(this);var e=this.curveContainer,i=U(this.plotContainer.maxWidth-e.pixelPaddingLeft-e.pixelPaddingRight,this.plotContainer.maxHeight-e.pixelPaddingTop-e.pixelPaddingBottom)/2,r=this.radiusStep,n=Je(this.innerRadius,i);k(r)||(r=(i-n)/this.levelCount);var a=function(t,e,i,r,n,a,o,s,l){k(s)||(s=0),k(s)||(l=s);for(var u=n+.01,c=s*F,h=[];u<i+o;){var p=a;if(p/2>u&&(p=2*u),(c+=2*Math.asin(p/2/u))*M>l+(i-n)/o*360)break;var d=c*M,f={x:0+u*Math.cos(c),y:0+u*r/i*Math.sin(c)};h.push(f),u=n+d/360*o}return h.shift(),h}(0,0,i,i,n,this.precisionStep,r,this.startAngle,this.endAngle),o=Je(this.yAxisInnerRadius,r),s=Je(this.yAxisRadius,r);this.inversed&&a.reverse(),this.xAxes.each((function(t){t.renderer.points=a,t.renderer.autoScale=!1,t.renderer.autoCenter=!1,t.renderer.polyspline.tensionX=1,t.renderer.polyspline.tensionY=1})),this.yAxes.each((function(t){t.renderer.radius=s,t.renderer.innerRadius=o}))},e.prototype.updateYAxis=function(e){t.prototype.updateYAxis.call(this,e),e.innerRadius=void 0,e.radius=void 0},e}(Bu);ve.registeredClasses.SpiralChart=Uu;var Xu=function(t){function e(){var e=t.call(this)||this;return e.className="CurveColumn",e}return Object(d.d)(e,t),e.prototype.createAssets=function(){this.curveColumn=this.createChild(_n),this.CurveColumn=this.curveColumn,this.curveColumn.shouldClone=!1,this.curveColumn.strokeOpacity=void 0,this.column=this.curveColumn},e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.curveColumn&&this.curveColumn.copyFrom(e.curveColumn)},e}(Ps);ve.registeredClasses.CurveColumn=Xu;var Hu=function(t){function e(){var e=t.call(this)||this;return e.className="ColumnSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Cs),Wu=function(t){function e(){var e=t.call(this)||this;return e.className="CurveColumnSeries",e.bulletsContainer.mask=new _n,e.topOffset=.2,e.bottomOffset=.2,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createColumnTemplate=function(){return new Xu},e.prototype.validateDataElementReal=function(t){var e=this,i=this.yField,r=this.yOpenField,n=this.xField,a=this.xOpenField,o=this.getStartLocation(t),s=this.getEndLocation(t),l=this.columns.template,u=l.percentWidth,c=l.percentHeight;y(u)&&(u=100);var h,p=[],d=this.xAxis,f=this.yAxis,m=d.renderer;if(this.baseAxis==this.xAxis){o+=S=L((s-o)*(1-u/100)/2,5);var g=((s-=S)-o)/(Math.ceil(this.xAxis.axisLength/m.precisionStep/(this.endIndex-this.startIndex))+2),b=t.locations[r],v=t.locations[i];if(this.yAxis instanceof xo)this.dataFields[this.yField]!=this.dataFields[this.yOpenField]&&(b=0,v=0);else if(this.yAxis instanceof Io&&!y(c)){v=0,b=1;var _=L((1-c/100)/2,5);v+=_,b-=_}for(var x=o;x<=s;x+=g)x>s&&(x=s),p.push(this.getPoint(t,n,i,x,v));for(p.push(this.getPoint(t,n,i,s,v)),x=s;x>=o;x-=g)x<o&&(x=o),p.push(this.getPoint(t,a,r,x,b));p.push(this.getPoint(t,a,r,o,b)),h=this.getPoint(t,n,i,o+(s-o)/2,.5)}else{var S;o+=S=L((s-o)*(1-c/100)/2,5),s-=S;var w={start:d.start,end:d.end},T={start:f.start,end:f.end},P=t.locations[n],C=t.locations[a];this.xAxis instanceof xo&&this.dataFields[this.xField]!=this.dataFields[this.xOpenField]&&(P=0,C=0);var k=d.getPositionX(t,a,C,"valueX",w),I=d.getPositionX(t,n,P,"valueX",w),A=f.getPositionY(t,r,o,"valueY",T),O=f.getPositionY(t,i,s,"valueY",T);if(g=(I-k)/(Math.ceil(d.axisLength/m.precisionStep*(I-k)/(d.end-d.start))+2),I>k){for(x=k;x<=I;x+=g)x>I&&(x=I),p.push(d.renderer.positionToPoint(x,A));for(p.push(d.renderer.positionToPoint(I,A)),x=I;x>=k;x-=g)x<k&&(x=k),p.push(d.renderer.positionToPoint(x,O));p.push(d.renderer.positionToPoint(k,O))}h=d.renderer.positionToPoint(k+(I-k)/2,A+(O-A)/2)}var D=t.column;D||(D=this.columns.create(),t.column=D,t.addSprite(D),this.setColumnStates(D),D.paper=this.paper);var F=D.curveColumn;p.length>0&&p.push(p[0]),F.path=function(t){if(!t||0==t.length)return"";var e=Hn(t[0]);if(t&&t.length>0)for(var i=1;i<t.length;i++)e+=Wn(t[i]);return e}(p),D.__disabled=!1,D.parent=this.columnsContainer,D.tooltipX=h.x,D.tooltipY=h.y,D.curveColumn.tooltipX=h.x,D.curveColumn.tooltipY=h.y,this.axisRanges.each((function(i){var r=t.rangesColumns.getKey(i.uid);r||((r=e.columns.create()).dataItem&&_t(r.dataItem.sprites,r),t.addSprite(r),r.paper=e.paper,e.setColumnStates(r),t.rangesColumns.setKey(i.uid,r)),r.curveColumn.path=F.path,r.__disabled=!1,r.parent=i.contents}))},e.prototype.getPoint=function(t,e,i,r,n,a,o){a||(a="valueX"),o||(o="valueY");var s=this.yAxis.renderer,l=V(this.yAxis.getY(t,i,n,o),-s.radius*(1+this.topOffset),-s.innerRadius*(1+this.bottomOffset)),u={start:this.xAxis.start,end:this.xAxis.end},c=this.xAxis.getX(t,e,r,a,u),h=this.xAxis.getY(t,e,r,a,u),p=this.xAxis.getAngle(t,e,r,a,u);return{x:c+l*B(p),y:h+l*j(p)}},e.prototype.getMaskPath=function(){var t=this.yAxis.renderer,e=t.getPositionRangePath(t.axis.start,t.axis.end),i=this.bulletsContainer;return this.chart&&this.chart.maskBullets?(i.mask||(i.mask=new _n),i.mask.path=e):i.mask=void 0,e},Object.defineProperty(e.prototype,"topOffset",{get:function(){return this.getPropertyValue("topOffset")},set:function(t){this.setPropertyValue("topOffset",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomOffset",{get:function(){return this.getPropertyValue("bottomOffset")},set:function(t){this.setPropertyValue("bottomOffset",t,!0)},enumerable:!0,configurable:!0}),e.prototype.positionBulletReal=function(t,e,i){var r=this.xAxis,n=this.yAxis;(e<r.start||e>r.end||i<n.start||i>n.end)&&(t.visible=!1),t.moveTo(this.xAxis.renderer.positionToPoint(e,i))},e.prototype.setXAxis=function(e){t.prototype.setXAxis.call(this,e),this.updateRendererRefs()},e.prototype.setYAxis=function(e){t.prototype.setYAxis.call(this,e),this.updateRendererRefs()},e.prototype.updateRendererRefs=function(){var t=this.xAxis.renderer,e=this.yAxis.renderer;t.axisRendererY=e,e.axisRendererX=t},e}(ks);ve.registeredClasses.CurveColumnSeries=Wu,ve.registeredClasses.CurveColumnSeriesDataItem=Hu;var Yu=function(t){function e(){var e=t.call(this)||this;return e.className="CurveStepLineSeriesDataItem",e.applyTheme(),e}return Object(d.d)(e,t),e}(Lu),Gu=function(t){function e(){var e=t.call(this)||this;return e.className="CurveStepLineSeries",e.startLocation=0,e.endLocation=1,e.applyTheme(),e}return Object(d.d)(e,t),e.prototype.createDataItem=function(){return new Yu},e.prototype.addPoints=function(t,e,i,r,n){var a=this.startLocation,o=this.endLocation;n&&(a=this.endLocation,o=this.startLocation);var s=this.xAxis,l=this.yAxis,u=this._previousPosition,c={start:s.start,end:s.end},h={start:l.start,end:l.end},p=s.renderer;if(this.baseAxis==this.xAxis){var d=Math.ceil(this.xAxis.axisLength/p.precisionStep/(this.endIndex-this.startIndex))+2,f=Math.abs(o-a)/d;if(this.xAxis instanceof To){var m=e.index;if(n){var y=this.dataItems.getIndex(m-1),g=this.xAxis.baseDuration;y&&(b=y.dateX.getTime())<(v=e.dateX.getTime())-g&&(o-=(v-b)/g-1)}else{var b,v;y=this.dataItems.getIndex(m+1),g=this.xAxis.baseDuration,y&&(b=y.dateX.getTime())>(v=e.dateX.getTime())+g&&(o+=(b-v)/g-1)}}if(n){for(var _=a;_>=o;_-=f)_<o&&(_=o),t.push(this.getPoint(e,i,r,_,e.locations[r]));t.push(this.getPoint(e,i,r,o,e.locations[r]))}else{for(_=a;_<=o;_+=f)_>o&&(_=o),t.push(this.getPoint(e,i,r,_,e.locations[r]));t.push(this.getPoint(e,i,r,o,e.locations[r]))}}else{var x=s.getPositionX(e,i,e.locations[i],"valueX",c),S=l.getPositionY(e,r,a,"valueY",h);if(k(u))if(d=Math.ceil(s.axisLength/p.precisionStep*(x-u)/(s.end-s.start))+2,f=Math.abs((x-u)/d),x>u)for(_=u;_<=x;_+=f)_>x&&(_=x),t.push(s.renderer.positionToPoint(_,S));else if(x<u)for(_=u;_>=x;_-=f)_<x&&(_=x),t.push(s.renderer.positionToPoint(_,S));var w=this.getPoint(e,i,r,e.locations[i],a);w&&t.push(w);var T=this.getPoint(e,i,r,e.locations[i],o);T&&t.push(T),this._previousPosition=x}},Object.defineProperty(e.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(t){this.setPropertyValue("startLocation",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(t){this.setPropertyValue("endLocation",t,!0)},enumerable:!0,configurable:!0}),e}(Ru);ve.registeredClasses.CurveStepLineSeries=Gu,ve.registeredClasses.CurveStepLineSeriesDataItem=Yu;var qu=function(t){function e(){var e=t.call(this)||this;return e.className="CurveCursor",e.applyTheme(),e.mask=void 0,e}return Object(d.d)(e,t),e.prototype.fitsToBounds=function(t){if(this.xAxis&&this.yAxis){var e=this.xAxis.renderer,i=this.yAxis.renderer,r=e.polyspline.getClosestPointIndex(t),n=W(t,e.polyspline.allPoints[r]);return!(n>=Math.abs(i.radius)&&n>=Math.abs(i.innerRadius))}},e.prototype.triggerMoveReal=function(e){this.xAxis&&(!this.xAxis||this.xAxis.cursorTooltipEnabled&&!this.xAxis.tooltip.disabled)||this.updateLineX(this.point),this.yAxis&&(!this.yAxis||this.yAxis.cursorTooltipEnabled&&!this.yAxis.tooltip.disabled)||this.updateLineY(this.point),this.updateSelection(),t.prototype.triggerMoveReal.call(this,e)},e.prototype.updateLineX=function(t){var e=this.lineX,i=this.xAxis;if(i||(this.xAxis=this.chart.xAxes.getIndex(0),i=this.xAxis),e&&e.visible&&!e.disabled&&i){var r=i.renderer.pointToPosition(t);e.path=i.renderer.getGridPath(V(r,i.start,i.end))}},e.prototype.updateLineY=function(t){var e=this.lineY,i=this.yAxis;if(i||(this.yAxis=this.chart.yAxes.getIndex(0),i=this.yAxis),e&&e.visible&&!e.disabled&&i){var r=i.renderer.pointToPosition(t);e.path=i.renderer.getGridPath(V(r,i.start,i.end))}},e.prototype.updateSelection=function(){if(this._usesSelection){var t=this.downPoint,e=this.xAxis,i=this.yAxis;if(e&&i&&t){var r=this.point,n=this.selection;n.x=0,n.y=0;var a="",o=this.behavior;if("zoomX"==o||"selectX"==o){var s=e.renderer.pointToPosition(t),l=e.renderer.pointToPosition(r);a+=e.renderer.getPositionRangePath(s,l),s=e.toGlobalPosition(s),l=e.toGlobalPosition(l),this.xRange={start:Math.min(s,l),end:Math.max(l,s)}}else"zoomY"!=o&&"selectY"!=o||(s=i.renderer.pointToPosition(t),l=i.renderer.pointToPosition(r),a+=i.renderer.getPositionRangePath(s,l),s=i.toGlobalPosition(s),l=i.toGlobalPosition(l),this.yRange={start:Math.min(s,l),end:Math.max(l,s)});n.path=a}else this.selection.hide()}},e.prototype.getPositions=function(){this.xAxis&&(this.xPosition=this.xAxis.toGlobalPosition(this.xAxis.renderer.pointToPosition(this.point))),this.yAxis&&(this.yPosition=this.yAxis.toGlobalPosition(this.yAxis.renderer.pointToPosition(this.point)))},e.prototype.updatePoint=function(t){},e.prototype.handleXTooltipPosition=function(t){if(this.xAxis.cursorTooltipEnabled){var e=this.xAxis.tooltip;this.updateLineX(vi({x:e.pixelX,y:e.pixelY},this))}},e.prototype.handleYTooltipPosition=function(t){if(this.yAxis.cursorTooltipEnabled){var e=this.yAxis.tooltip;this.updateLineY(vi({x:e.pixelX,y:e.pixelY},this))}},e.prototype.updateLinePositions=function(t){},e.prototype.getRanges=function(){},e.prototype.updateSize=function(){},e.prototype.fixPoint=function(t){return t},e}(yl);function Ku(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Program ID"),_l.Sb())}function Zu(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.accNo," ")}function Ju(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Name"),_l.Sb())}function $u(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.name," ")}function Qu(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Type"),_l.Sb())}function tc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.type," ")}function ec(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Status"),_l.Sb())}function ic(t,e){1&t&&(_l.Tb(0,"span",50),_l.Fc(1,"Active"),_l.Sb())}function rc(t,e){1&t&&(_l.Tb(0,"span",51),_l.Fc(1,"Unactive"),_l.Sb())}function nc(t,e){if(1&t&&(_l.Dc(0,ic,2,0,"span",48),_l.Dc(1,rc,2,0,"span",49)),2&t){var i=e.row;_l.lc("ngIf","active"==i.status),_l.Bb(1),_l.lc("ngIf","unactive"==i.status)}}function ac(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function oc(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",52),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(107);return e.openModal(r)})),_l.Tb(1,"span",53),_l.Pb(2,"i",54),_l.Sb(),_l.Sb(),_l.Tb(3,"button",55),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",53),_l.Pb(5,"i",56),_l.Sb(),_l.Sb()}}function sc(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",57),_l.Tb(1,"h6",58),_l.Fc(2," Add Account Receivable "),_l.Sb(),_l.Tb(3,"button",59),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",60),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",61),_l.Tb(7,"form"),_l.Tb(8,"div",12),_l.Tb(9,"div",62),_l.Tb(10,"div",63),_l.Tb(11,"label",64),_l.Fc(12,"Program ID"),_l.Sb(),_l.Pb(13,"input",65),_l.Sb(),_l.Sb(),_l.Tb(14,"div",62),_l.Tb(15,"div",63),_l.Tb(16,"label",66),_l.Fc(17,"Name"),_l.Sb(),_l.Pb(18,"input",67),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(19,"form"),_l.Tb(20,"div",12),_l.Tb(21,"div",62),_l.Tb(22,"div",63),_l.Tb(23,"label",68),_l.Fc(24,"Type"),_l.Sb(),_l.Tb(25,"select",69),_l.Tb(26,"option",29),_l.Fc(27,"Choose"),_l.Sb(),_l.Tb(28,"option",30),_l.Fc(29,"One"),_l.Sb(),_l.Tb(30,"option",31),_l.Fc(31,"Two"),_l.Sb(),_l.Tb(32,"option",32),_l.Fc(33,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(34,"div",62),_l.Tb(35,"div",63),_l.Tb(36,"p",70),_l.Fc(37,"Status"),_l.Sb(),_l.Tb(38,"div",71),_l.Pb(39,"input",72),_l.Tb(40,"label",73),_l.Fc(41," Active "),_l.Sb(),_l.Sb(),_l.Tb(42,"div",71),_l.Pb(43,"input",74),_l.Tb(44,"label",75),_l.Fc(45," Inactive "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(46,"form"),_l.Tb(47,"div",12),_l.Tb(48,"div",76),_l.Tb(49,"div",63),_l.Tb(50,"label",77),_l.Fc(51,"Description"),_l.Sb(),_l.Pb(52,"textarea",78),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(53,"div",79),_l.Tb(54,"button",80),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc();return e.successSwal(e.saved)})),_l.Fc(55," Save "),_l.Sb(),_l.Tb(56,"button",81),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(57," Close "),_l.Sb(),_l.Sb()}}ve.registeredClasses.CurveCursor=qu;var lc=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),uc=function(){function t(t,e){this.zone=t,this.modalService=e,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Full time"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Ahmad",status:"unactive",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Trish",status:"active",type:"Full time"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"Sara",status:"active",type:"Part time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Malek",status:"unactive",type:"Part time"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Cheng Hong",status:"unactive",type:"Full time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Arumugam",status:"active",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Ronaldo",status:"active",type:"Part time"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"Neymar",status:"unactive",type:"Part time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"active",type:"Full time"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"John",status:"active",type:"Full time"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"John",status:"active",type:"Full time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"active",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$385,750",name:"John",status:"active",type:"Full time"}],this.SelectionType=lc,this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartActivities1(),t.getChartActivities2()}))},t.prototype.getChartActivities1=function(){Ga(bl),Ga(vl);var t=Ya("chartactivitiescosting1",Mo);t.colors.step=2,t.legend=new to,t.legend.position="top",t.legend.paddingBottom=20,t.legend.labels.template.maxWidth=500;var e=t.xAxes.push(new Io);function i(e,i){var n=t.series.push(new ks);n.dataFields.valueY=e,n.dataFields.categoryX="category",n.name=i,n.events.on("hidden",r),n.events.on("shown",r);var a=n.bullets.push(new ms);return a.interactionsEnabled=!1,a.dy=30,a.label.text="{valueY}",a.label.fill=Ue("#ffffff"),n}function r(){var i=t.series.getIndex(0),r=1-e.renderer.cellStartLocation-(1-e.renderer.cellEndLocation);if(i.dataItems.length>1){var n=e.getX(i.dataItems.getIndex(0),"categoryX"),a=(e.getX(i.dataItems.getIndex(1),"categoryX")-n)/t.series.length*r;if(k(a)){var o=t.series.length/2,s=0;t.series.each((function(e){e.isHidden||e.isHiding?e.dummyData=t.series.indexOf(e):(e.dummyData=s,s++)}));var l=s/2;t.series.each((function(e){var i=t.series.indexOf(e),r=(e.dummyData-i+o-l)*a;e.animate({property:"dx",to:r},e.interpolationDuration,e.interpolationEasing),e.bulletsContainer.animate({property:"dx",to:r},e.interpolationDuration,e.interpolationEasing)}))}}}e.dataFields.category="category",e.renderer.cellStartLocation=.1,e.renderer.cellEndLocation=.9,e.renderer.grid.template.location=0,t.yAxes.push(new xo).min=0,t.data=[{category:"Jan",first:40,second:55,third:60},{category:"Feb",first:34,second:56,third:65},{category:"Mar",first:56,second:54,third:87},{category:"Apr",first:46,second:57,third:75},{category:"May",first:42,second:52,third:46},{category:"June",first:85,second:74,third:53},{category:"July",first:40,second:55,third:60},{category:"Aug",first:74,second:79,third:68},{category:"Sep",first:30,second:78,third:69},{category:"Oct",first:27,second:40,third:45},{category:"Nov",first:50,second:33,third:22},{category:"Dec",first:30,second:78,third:69}],i("first","Succesful Projects"),i("second","Pending Projects"),i("third","In Progress Progress"),this.chart1=t},t.prototype.getChartActivities2=function(){Ga(bl),Ga(vl);var t=Ya("chartactivitiescosting2",Nu);t.curveContainer.padding(20,20,20,20),t.levelCount=8,t.orientation="horizontal",t.fontSize=11;var e=new za;e.saturation=.6,t.data=[{category:"Project #1",start:"2016-01-10",end:"2016-01-13",color:e.getIndex(0),task:"Gathering requirements"},{category:"Project #1",start:"2016-02-05",end:"2016-04-18",color:e.getIndex(0),task:"Development"},{category:"Project #2",start:"2016-01-08",end:"2016-01-10",color:e.getIndex(5),task:"Gathering requirements"},{category:"Project #2",start:"2016-01-12",end:"2016-01-15",color:e.getIndex(5),task:"Producing specifications"},{category:"Project #2",start:"2016-01-16",end:"2016-02-05",color:e.getIndex(5),task:"Development"},{category:"Project #2",start:"2016-02-10",end:"2016-02-18",color:e.getIndex(5),task:"Testing and QA"},{category:"",task:""},{category:"Project #3",start:"2016-01-01",end:"2016-01-19",color:e.getIndex(9),task:"Gathering requirements"},{category:"Project #3",start:"2016-02-01",end:"2016-02-10",color:e.getIndex(9),task:"Producing specifications"},{category:"Project #3",start:"2016-03-10",end:"2016-04-15",color:e.getIndex(9),task:"Development"},{category:"Project #3",start:"2016-04-20",end:"2016-04-30",color:e.getIndex(9),task:"Testing and QA"},{category:"Project #4",start:"2016-01-15",end:"2016-02-12",color:e.getIndex(15),task:"Gathering requirements"},{category:"Project #4",start:"2016-02-25",end:"2016-03-10",color:e.getIndex(15),task:"Development"},{category:"Project #4",start:"2016-03-23",end:"2016-04-29",color:e.getIndex(15),task:"Testing and QA"}],t.dateFormatter.dateFormat="yyyy-MM-dd",t.dateFormatter.inputDateFormat="yyyy-MM-dd";var i=t.yAxes.push(new Io);i.dataFields.category="category",i.renderer.grid.template.disabled=!0,i.renderer.labels.template.paddingRight=25,i.renderer.minGridDistance=10,i.renderer.innerRadius=-60,i.renderer.radius=60;var r=t.xAxes.push(new To);r.renderer.minGridDistance=70,r.baseInterval={count:1,timeUnit:"day"},r.renderer.tooltipLocation=0,r.startLocation=-.5,r.renderer.line.strokeDasharray="1,4",r.renderer.line.strokeOpacity=.7,r.tooltip.background.fillOpacity=.2,r.tooltip.background.cornerRadius=5,r.tooltip.label.fill=(new _r).getFor("alternativeBackground"),r.tooltip.label.paddingTop=7;var n=r.renderer.labels.template;n.verticalCenter="middle",n.fillOpacity=.7,n.background.fill=(new _r).getFor("background"),n.background.fillOpacity=1,n.padding(7,7,7,7);var a=i.renderer.labels.template;a.horizontalCenter="left",a.adapter.add("rotation",(function(t,e){var i=r.valueToPosition(r.min);return r.renderer.positionToAngle(i)+90}));var o=t.series.push(new Wu);o.columns.template.height=m(20),o.columns.template.tooltipText="{task}: [bold]{openDateX}[/] - [bold]{dateX}[/]",o.dataFields.openDateX="start",o.dataFields.dateX="end",o.dataFields.categoryY="category",o.columns.template.propertyFields.fill="color",o.columns.template.propertyFields.stroke="color",o.columns.template.strokeOpacity=0;var s=new hl;o.bullets.push(s),s.circle.radius=3,s.circle.strokeOpacity=0,s.propertyFields.fill="color",s.locationX=0;var l=new hl;o.bullets.push(l),l.circle.radius=3,l.circle.strokeOpacity=0,l.propertyFields.fill="color",l.locationX=1,t.scrollbarX=new ua,t.scrollbarX.align="center",t.scrollbarX.width=m(90);var u=new qu;t.cursor=u,u.xAxis=r,u.yAxis=i,u.lineY.disabled=!0,u.lineX.strokeDasharray="1,4",u.lineX.strokeOpacity=1,r.renderer.tooltipLocation2=0,i.cursorTooltipEnabled=!1,this.chart2=t},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"})},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-activities-project-costing"]],decls:108,vars:10,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-file-invoice-dollar","text-dark"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"card-body"],[1,"chart"],["id","chartactivitiescosting1",1,"amchart"],["id","chartactivitiescosting2",1,"amchart"],[1,"col-md-6"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-default",3,"click"],[1,"form-group"],["for","exampleFormControlSelect2"],["id","exampleFormControlSelect2",1,"form-control"],["selected",""],["value","1"],["value","2"],["value","3"],[1,"col-xl-12","text-right"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["createUser",""],["class","badge badge-pill badge-success",4,"ngIf"],["class","badge badge-pill badge-warning",4,"ngIf"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-warning"],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"col-6"],[1,"mb-4"],["for","exampleProgramID"],["type","total","id","exampleTotal","placeholder","eg PRG-CS-240",1,"form-control"],["for","exampleName"],["type","text","placeholder","eg Short Term Program","id","exampleName",1,"form-control"],["for","type1",1,"my-1","mr-2"],["id","type2","aria-label","Default select example",1,"form-select"],[1,"font-weight-bold"],[1,"form-check"],["type","radio","name","exampleRadios3","id","exampleRadios3","value","option3","checked","",1,"form-check-input"],["for","exampleRadios3",1,"form-check-label"],["type","radio","name","exampleRadios4","id","exampleRadios4","value","option4","checked","",1,"form-check-input"],["for","exampleRadios4",1,"form-check-label"],[1,"col-12"],["for","textarea2"],["placeholder","Enter your message...","id","textarea2","rows","2",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6," Activities & Project Costing "),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h5",18),_l.Fc(20,"Number of Projects"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(21,"div",19),_l.Tb(22,"div",20),_l.Pb(23,"div",21),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(24,"div",13),_l.Tb(25,"div",14),_l.Tb(26,"div",15),_l.Tb(27,"div",16),_l.Tb(28,"div",17),_l.Tb(29,"h5",18),_l.Fc(30,"Projects Progress"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(31,"div",19),_l.Tb(32,"div",20),_l.Pb(33,"div",22),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(34,"div",13),_l.Tb(35,"div",14),_l.Tb(36,"div",15),_l.Tb(37,"div",16),_l.Tb(38,"div",23),_l.Tb(39,"h5",18),_l.Fc(40,"List of Programs"),_l.Sb(),_l.Sb(),_l.Tb(41,"div",24),_l.Tb(42,"button",25),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(107);return e.openModal(r)})),_l.Fc(43," Add New "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(44,"div",19),_l.Tb(45,"div",12),_l.Tb(46,"div",13),_l.Tb(47,"div",26),_l.Tb(48,"label",27),_l.Fc(49,"Search Project"),_l.Sb(),_l.Tb(50,"select",28),_l.Tb(51,"option",29),_l.Fc(52,"Choose"),_l.Sb(),_l.Tb(53,"option",30),_l.Fc(54,"Type"),_l.Sb(),_l.Tb(55,"option",31),_l.Fc(56,"Status"),_l.Sb(),_l.Tb(57,"option",32),_l.Fc(58,"Name"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(59,"div",33),_l.Tb(60,"button",25),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(61," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(62,"div",13),_l.Tb(63,"div",14),_l.Tb(64,"div",15),_l.Tb(65,"div",16),_l.Tb(66,"div",17),_l.Tb(67,"h5",18),_l.Fc(68,"List View of Projects"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(69,"div",19),_l.Tb(70,"div",34),_l.Tb(71,"div",12),_l.Tb(72,"div",35),_l.Tb(73,"div",36),_l.Tb(74,"label"),_l.Fc(75," Show "),_l.Tb(76,"select",37),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(77,"option",38),_l.Fc(78,"5"),_l.Sb(),_l.Tb(79,"option",39),_l.Fc(80,"10"),_l.Sb(),_l.Tb(81,"option",40),_l.Fc(82,"15"),_l.Sb(),_l.Tb(83,"option",41),_l.Fc(84,"All"),_l.Sb(),_l.Sb(),_l.Fc(85," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(86,"div",35),_l.Tb(87,"div",42),_l.Tb(88,"label"),_l.Tb(89,"input",43),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(90,"ngx-datatable",44),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(91,"ngx-datatable-column"),_l.Dc(92,Ku,2,0,"ng-template",45),_l.Dc(93,Zu,1,1,"ng-template",46),_l.Sb(),_l.Tb(94,"ngx-datatable-column"),_l.Dc(95,Ju,2,0,"ng-template",45),_l.Dc(96,$u,1,1,"ng-template",46),_l.Sb(),_l.Tb(97,"ngx-datatable-column"),_l.Dc(98,Qu,2,0,"ng-template",45),_l.Dc(99,tc,1,1,"ng-template",46),_l.Sb(),_l.Tb(100,"ngx-datatable-column"),_l.Dc(101,ec,2,0,"ng-template",45),_l.Dc(102,nc,2,2,"ng-template",46),_l.Sb(),_l.Tb(103,"ngx-datatable-column"),_l.Dc(104,ac,2,0,"ng-template",45),_l.Dc(105,oc,6,0,"ng-template",46),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(106,sc,58,0,"ng-template",null,47,_l.Ec)}2&t&&(_l.Bb(77),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,n.l,s.v,s.n,s.o],styles:[""]}),t}();function cc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Payer ID"),_l.Sb())}function hc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.accNo," ")}function pc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Month 1 (RM)"),_l.Sb())}function dc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.debit," ")}function fc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Month 2 (RM)"),_l.Sb())}function mc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.credit," ")}function yc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Month 3 (RM)"),_l.Sb())}function gc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.netMove," ")}function bc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function vc(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",63),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(183);return e.openModal(r)})),_l.Tb(1,"span",64),_l.Pb(2,"i",65),_l.Sb(),_l.Sb(),_l.Tb(3,"button",66),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",64),_l.Pb(5,"i",67),_l.Sb(),_l.Sb()}}function _c(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",68),_l.Tb(1,"h6",69),_l.Fc(2," Add Budgetary Report "),_l.Sb(),_l.Tb(3,"button",70),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",71),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",72),_l.Tb(7,"form"),_l.Tb(8,"div",22),_l.Tb(9,"div",73),_l.Tb(10,"div",74),_l.Tb(11,"label",75),_l.Fc(12,"Receive by"),_l.Sb(),_l.Tb(13,"select",76),_l.Tb(14,"option",44),_l.Fc(15,"Choose"),_l.Sb(),_l.Tb(16,"option",45),_l.Fc(17,"One"),_l.Sb(),_l.Tb(18,"option",46),_l.Fc(19,"Two"),_l.Sb(),_l.Tb(20,"option",47),_l.Fc(21,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(22,"div",73),_l.Tb(23,"div",74),_l.Tb(24,"label",77),_l.Fc(25,"Acc No."),_l.Sb(),_l.Pb(26,"input",78),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(27,"form"),_l.Tb(28,"div",22),_l.Tb(29,"div",73),_l.Tb(30,"div",74),_l.Tb(31,"label",79),_l.Fc(32,"Date"),_l.Sb(),_l.Tb(33,"div",80),_l.Tb(34,"span",81),_l.Pb(35,"span",82),_l.Sb(),_l.Pb(36,"input",83),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(37,"div",73),_l.Tb(38,"div",74),_l.Tb(39,"label",84),_l.Fc(40,"Final Date"),_l.Sb(),_l.Tb(41,"div",80),_l.Tb(42,"span",81),_l.Pb(43,"span",82),_l.Sb(),_l.Pb(44,"input",85),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(45,"form"),_l.Tb(46,"div",22),_l.Tb(47,"div",73),_l.Tb(48,"div",74),_l.Tb(49,"label",86),_l.Fc(50,"Invoice No."),_l.Sb(),_l.Pb(51,"input",87),_l.Sb(),_l.Sb(),_l.Tb(52,"div",73),_l.Tb(53,"div",74),_l.Tb(54,"label",88),_l.Fc(55,"Brand"),_l.Sb(),_l.Tb(56,"select",89),_l.Tb(57,"option",44),_l.Fc(58,"Choose"),_l.Sb(),_l.Tb(59,"option",45),_l.Fc(60,"One"),_l.Sb(),_l.Tb(61,"option",46),_l.Fc(62,"Two"),_l.Sb(),_l.Tb(63,"option",47),_l.Fc(64,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(65,"form"),_l.Tb(66,"div",22),_l.Tb(67,"div",73),_l.Tb(68,"div",74),_l.Tb(69,"label",90),_l.Fc(70,"Currency"),_l.Sb(),_l.Tb(71,"select",91),_l.Tb(72,"option",44),_l.Fc(73,"Choose"),_l.Sb(),_l.Tb(74,"option",45),_l.Fc(75,"One"),_l.Sb(),_l.Tb(76,"option",46),_l.Fc(77,"Two"),_l.Sb(),_l.Tb(78,"option",47),_l.Fc(79,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(80,"div",73),_l.Tb(81,"div",74),_l.Tb(82,"label",92),_l.Fc(83,"Total (RM)"),_l.Sb(),_l.Pb(84,"input",93),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(85,"div",94),_l.Tb(86,"button",35),_l.bc("click",(function(t){return _l.wc(i),_l.fc().successSwal("saved")})),_l.Fc(87," Save "),_l.Sb(),_l.Tb(88,"button",95),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(89," Close "),_l.Sb(),_l.Sb()}}var xc=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),Sc=function(){function t(t,e){this.zone=t,this.modalService=e,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"320.80",name:"John",status:"active",type:"Full time"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Ahmad",status:"unactive",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Trish",status:"active",type:"Full time"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"Sara",status:"active",type:"Part time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Malek",status:"unactive",type:"Part time"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Cheng Hong",status:"unactive",type:"Full time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Arumugam",status:"active",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Ronaldo",status:"active",type:"Part time"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"Neymar",status:"unactive",type:"Part time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"active",type:"Full time"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"John",status:"active",type:"Full time"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"John",status:"active",type:"Full time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"active",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$385,750",name:"John",status:"active",type:"Full time"}],this.SelectionType=xc,this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartAccountRecei1(),t.getChartAccountRecei2()}))},t.prototype.getChartAccountRecei1=function(){Ga(bl),Ga(vl);var t=Ya("chartaccRecei1",as);t.data=[{country:"Overdue Invoices",litres:501.9},{country:"Open Invoices",litres:301.9},{country:"Paid Invoices",litres:201.1}];var e=t.series.push(new rs);e.dataFields.value="litres",e.dataFields.category="country",e.slices.template.stroke=Ue("#fff"),e.slices.template.strokeOpacity=1,e.hiddenState.properties.opacity=1,e.hiddenState.properties.endAngle=-90,e.hiddenState.properties.startAngle=-90,t.hiddenState.properties.radius=m(0),this.chart1=t},t.prototype.getChartAccountRecei2=function(){Ga(bl),Ga(vl);var t=Ya("chartaccRecei2",Mo);t.padding(40,40,40,40);var e=t.yAxes.push(new Io);e.renderer.grid.template.location=0,e.dataFields.category="network",e.renderer.minGridDistance=1,e.renderer.inversed=!0,e.renderer.grid.template.disabled=!0,t.xAxes.push(new xo).min=0;var i=t.series.push(new ks);i.dataFields.categoryY="network",i.dataFields.valueX="MAU",i.tooltipText="{valueX.value}",i.columns.template.strokeOpacity=0,i.columns.template.column.cornerRadiusBottomRight=5,i.columns.template.column.cornerRadiusTopRight=5;var r=i.bullets.push(new ms);r.label.horizontalCenter="left",r.label.dx=10,r.label.text="{values.valueX.workingValue.formatNumber('#.0as')}",r.locationX=1,i.columns.template.adapter.add("fill",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),e.sortBySeries=i,t.data=[{network:"31-60 Days",MAU:34},{network:"61-90 Days",MAU:23},{network:"1-30 Days",MAU:20},{network:"90+ Days",MAU:14}],this.chart2=t},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"}),this.modalRef.hide()},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-account-receivable"]],decls:184,vars:10,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-download","text-dark"],[1,"row","justify-content-md-center"],[1,"col-sm-3","col-md-5","col-lg-3","mb-4"],[1,"card","border-light","shadow-sm"],[1,"card-body"],[1,"row","d-block","d-xl-flex","align-items-center"],[1,"col-12","px-xl-0","text-center"],[1,"d-none","d-sm-block"],[1,"h4"],[1,"h3","text-success","mb-1"],[1,"col-sm-3","col-md-6","col-lg-3","mb-4"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-6"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"chart"],["id","chartaccRecei1",1,"amchart"],["id","chartaccRecei2",1,"amchart"],[1,"col-xl-12"],[1,"col-md-6"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-default",3,"click"],[1,"col-xl-3"],[1,"form-group"],["for","example-date-input",1,"form-control-label"],["type","date","placeholder","2021-01-01","id","example-date-input",1,"form-control"],["for","exampleFormControlSelect2"],["id","exampleFormControlSelect2",1,"form-control"],["selected",""],["value","1"],["value","2"],["value","3"],[1,"col-xl-12","text-right"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["createUser",""],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"col-6"],[1,"mb-4"],["for","from1"],["id","from1",1,"form-control"],["for","accno"],["type","text","placeholder","eg 273634347","id","accno",1,"form-control"],["for","date2"],[1,"input-group"],[1,"input-group-text"],[1,"far","fa-calendar-alt"],["data-datepicker","","id","date2","type","text","placeholder","Choose date","required","",1,"form-control"],["for","finaldate"],["data-datepicker","","id","finaldate","type","text","placeholder","Choose date","required","",1,"form-control"],["for","invoiceno"],["type","text","placeholder","eg INV8347384","id","invoiceno",1,"form-control"],["for","brand1"],["id","brand1",1,"form-control"],["for","currency1"],["id","currency1",1,"form-control"],["for","total2"],["type","text","placeholder","eg 1726","id","total2",1,"form-control"],[1,"modal-footer"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Account Receivable"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h2",18),_l.Fc(20,"Payable Account"),_l.Sb(),_l.Tb(21,"h3",19),_l.Fc(22,"RM3828"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(23,"div",20),_l.Tb(24,"div",13),_l.Tb(25,"div",14),_l.Tb(26,"div",15),_l.Tb(27,"div",16),_l.Tb(28,"div",17),_l.Tb(29,"h2",18),_l.Fc(30,"Overdue Cost"),_l.Sb(),_l.Tb(31,"h3",19),_l.Fc(32,"RM2017"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(33,"div",20),_l.Tb(34,"div",13),_l.Tb(35,"div",14),_l.Tb(36,"div",15),_l.Tb(37,"div",16),_l.Tb(38,"div",17),_l.Tb(39,"h2",18),_l.Fc(40,"Percent of Overdue"),_l.Sb(),_l.Tb(41,"h3",19),_l.Fc(42,"527"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(43,"div",20),_l.Tb(44,"div",13),_l.Tb(45,"div",14),_l.Tb(46,"div",15),_l.Tb(47,"div",16),_l.Tb(48,"div",17),_l.Tb(49,"h2",18),_l.Fc(50,"Cash on Hands"),_l.Sb(),_l.Tb(51,"h3",19),_l.Fc(52,"RM229"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(53,"div",21),_l.Tb(54,"div",22),_l.Tb(55,"div",23),_l.Tb(56,"div",24),_l.Tb(57,"div",25),_l.Tb(58,"div",26),_l.Tb(59,"div",27),_l.Tb(60,"h5",28),_l.Fc(61,"Invoice by Status"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(62,"div",14),_l.Tb(63,"div",29),_l.Pb(64,"div",30),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(65,"div",23),_l.Tb(66,"div",24),_l.Tb(67,"div",25),_l.Tb(68,"div",26),_l.Tb(69,"div",27),_l.Tb(70,"h5",28),_l.Fc(71,"Account Payable Age"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(72,"div",14),_l.Tb(73,"div",29),_l.Pb(74,"div",31),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(75,"div",32),_l.Tb(76,"div",24),_l.Tb(77,"div",25),_l.Tb(78,"div",26),_l.Tb(79,"div",33),_l.Tb(80,"h5",28),_l.Fc(81,"List of Account"),_l.Sb(),_l.Sb(),_l.Tb(82,"div",34),_l.Tb(83,"button",35),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(183);return e.openModal(r)})),_l.Fc(84," Export "),_l.Sb(),_l.Tb(85,"button",36),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(183);return e.openModal(r)})),_l.Fc(86," Upload "),_l.Sb(),_l.Tb(87,"button",37),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(183);return e.openModal(r)})),_l.Fc(88," Add New "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(89,"div",14),_l.Tb(90,"div",22),_l.Tb(91,"div",38),_l.Tb(92,"div",39),_l.Tb(93,"label",40),_l.Fc(94,"Date"),_l.Sb(),_l.Pb(95,"input",41),_l.Sb(),_l.Sb(),_l.Tb(96,"div",38),_l.Tb(97,"div",39),_l.Tb(98,"label",42),_l.Fc(99,"Shown by"),_l.Sb(),_l.Tb(100,"select",43),_l.Tb(101,"option",44),_l.Fc(102,"Choose"),_l.Sb(),_l.Tb(103,"option",45),_l.Fc(104,"Date"),_l.Sb(),_l.Tb(105,"option",46),_l.Fc(106,"Final Date"),_l.Sb(),_l.Tb(107,"option",47),_l.Fc(108,"Brand"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(109,"div",38),_l.Tb(110,"div",39),_l.Tb(111,"label",42),_l.Fc(112,"Sort by"),_l.Sb(),_l.Tb(113,"select",43),_l.Tb(114,"option",44),_l.Fc(115,"Choose"),_l.Sb(),_l.Tb(116,"option",45),_l.Fc(117,"Type"),_l.Sb(),_l.Tb(118,"option",46),_l.Fc(119,"Status"),_l.Sb(),_l.Tb(120,"option",47),_l.Fc(121,"Name"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(122,"div",38),_l.Tb(123,"div",39),_l.Tb(124,"label",42),_l.Fc(125,"Receive by"),_l.Sb(),_l.Tb(126,"select",43),_l.Tb(127,"option",44),_l.Fc(128,"Choose"),_l.Sb(),_l.Tb(129,"option",45),_l.Fc(130,"Type"),_l.Sb(),_l.Tb(131,"option",46),_l.Fc(132,"Status"),_l.Sb(),_l.Tb(133,"option",47),_l.Fc(134,"Name"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(135,"div",48),_l.Tb(136,"button",37),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(137," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(138,"div",32),_l.Tb(139,"div",24),_l.Tb(140,"div",25),_l.Tb(141,"div",26),_l.Tb(142,"div",27),_l.Tb(143,"h5",28),_l.Fc(144,"List of Account Receivable"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(145,"div",14),_l.Tb(146,"div",49),_l.Tb(147,"div",22),_l.Tb(148,"div",50),_l.Tb(149,"div",51),_l.Tb(150,"label"),_l.Fc(151," Show "),_l.Tb(152,"select",52),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(153,"option",53),_l.Fc(154,"5"),_l.Sb(),_l.Tb(155,"option",54),_l.Fc(156,"10"),_l.Sb(),_l.Tb(157,"option",55),_l.Fc(158,"15"),_l.Sb(),_l.Tb(159,"option",56),_l.Fc(160,"All"),_l.Sb(),_l.Sb(),_l.Fc(161," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(162,"div",50),_l.Tb(163,"div",57),_l.Tb(164,"label"),_l.Tb(165,"input",58),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(166,"ngx-datatable",59),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(167,"ngx-datatable-column"),_l.Dc(168,cc,2,0,"ng-template",60),_l.Dc(169,hc,1,1,"ng-template",61),_l.Sb(),_l.Tb(170,"ngx-datatable-column"),_l.Dc(171,pc,2,0,"ng-template",60),_l.Dc(172,dc,1,1,"ng-template",61),_l.Sb(),_l.Tb(173,"ngx-datatable-column"),_l.Dc(174,fc,2,0,"ng-template",60),_l.Dc(175,mc,1,1,"ng-template",61),_l.Sb(),_l.Tb(176,"ngx-datatable-column"),_l.Dc(177,yc,2,0,"ng-template",60),_l.Dc(178,gc,1,1,"ng-template",61),_l.Sb(),_l.Tb(179,"ngx-datatable-column"),_l.Dc(180,bc,2,0,"ng-template",60),_l.Dc(181,vc,6,0,"ng-template",61),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(182,_c,90,0,"ng-template",null,62,_l.Ec)}2&t&&(_l.Bb(153),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,s.v,s.n,s.o],styles:[""]}),t}();function wc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Type"),_l.Sb())}function Tc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.type," ")}function Pc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Date"),_l.Sb())}function Cc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.start," ")}function kc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Processed by"),_l.Sb())}function Ic(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.status," ")}function Ac(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Register"),_l.Sb())}function Oc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.reg," ")}function Dc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Description"),_l.Sb())}function Fc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.desc," ")}function Mc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Amount (RM)"),_l.Sb())}function Ec(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.netMove," ")}function Lc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function Rc(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",54),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(148);return e.openModal(r)})),_l.Tb(1,"span",55),_l.Pb(2,"i",56),_l.Sb(),_l.Sb(),_l.Tb(3,"button",57),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",55),_l.Pb(5,"i",58),_l.Sb(),_l.Sb()}}function Vc(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",59),_l.Tb(1,"h6",60),_l.Fc(2," Add Petty Cash Transaction "),_l.Sb(),_l.Tb(3,"button",61),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",62),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",63),_l.Tb(7,"form"),_l.Tb(8,"div",12),_l.Tb(9,"div",64),_l.Tb(10,"div",65),_l.Tb(11,"label",66),_l.Fc(12,"Type"),_l.Sb(),_l.Tb(13,"select",67),_l.Tb(14,"option",35),_l.Fc(15,"Choose"),_l.Sb(),_l.Tb(16,"option",36),_l.Fc(17,"Cash In"),_l.Sb(),_l.Tb(18,"option",37),_l.Fc(19,"Cash Out"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(20,"div",64),_l.Tb(21,"div",65),_l.Tb(22,"label",68),_l.Fc(23,"Amount"),_l.Sb(),_l.Pb(24,"input",69),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(25,"form"),_l.Tb(26,"div",12),_l.Tb(27,"div",64),_l.Tb(28,"div",65),_l.Tb(29,"label",70),_l.Fc(30,"Register"),_l.Sb(),_l.Tb(31,"select",71),_l.Tb(32,"option",35),_l.Fc(33,"Choose"),_l.Sb(),_l.Tb(34,"option",36),_l.Fc(35,"Register 1"),_l.Sb(),_l.Tb(36,"option",37),_l.Fc(37,"Register 2"),_l.Sb(),_l.Tb(38,"option",38),_l.Fc(39,"Register 3"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(40,"div",64),_l.Tb(41,"div",65),_l.Tb(42,"label",72),_l.Fc(43,"Description"),_l.Sb(),_l.Pb(44,"textarea",73),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(45,"div",74),_l.Tb(46,"button",26),_l.bc("click",(function(t){return _l.wc(i),_l.fc().successSwal("saved")})),_l.Fc(47," Save "),_l.Sb(),_l.Tb(48,"button",75),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(49," Close "),_l.Sb(),_l.Sb()}}var jc=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),zc=function(){function t(t,e){this.zone=t,this.modalService=e,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"320.80",name:"John",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Testing"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Ahmad",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Cleaning supplies"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Trish",status:"Owner",type:"Cash Out",reg:"Register 2",desc:"Testing"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"Sara",status:"Owner",type:"Cash Out",reg:"Register 4",desc:"Staff coffee"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Malek",status:"Owner",type:"Cash Out",reg:"Register 2",desc:"Staff coffee"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Cheng Hong",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Cleaning supplies"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Arumugam",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Testing"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Ronaldo",status:"Owner",type:"Cash Out",reg:"Register 5",desc:"Testing"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"Neymar",status:"Owner",type:"Cash Out",reg:"Register 4",desc:"Cleaning supplies"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"Owner",type:"Cash Out",reg:"Register 5",desc:"Staff coffee"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"Owner",type:"Cash Out",reg:"Register 3",desc:"Testing"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"John",status:"Owner",type:"Cash Out",reg:"Register 4",desc:"Cleaning supplies"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"John",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Testing"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Testing"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$385,750",name:"John",status:"Owner",type:"Cash Out",reg:"Register 6",desc:"Cleaning supplies"}],this.SelectionType=jc,this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartPettyCash1(),t.getChartPettyCash2()}))},t.prototype.getChartPettyCash1=function(){Ga(bl),Ga(vl);var t=Ya("chartpettycash1",as);t.data=[{country:"Cash In",litres:501.9},{country:"Cash Out",litres:301.9}];var e=t.series.push(new rs);e.dataFields.value="litres",e.dataFields.category="country",e.slices.template.stroke=Ue("#fff"),e.slices.template.strokeOpacity=1,e.hiddenState.properties.opacity=1,e.hiddenState.properties.endAngle=-90,e.hiddenState.properties.startAngle=-90,t.hiddenState.properties.radius=m(0),this.chart1=t},t.prototype.getChartPettyCash2=function(){Ga(bl),Ga(vl);var t=Ya("chartpettycash2",Mo);t.data=[{country:"Jan",visits:2025},{country:"Feb",visits:1882},{country:"Mar",visits:1809},{country:"Apr",visits:1322},{country:"May",visits:1122},{country:"June",visits:1114},{country:"July",visits:984},{country:"Aug",visits:711},{country:"Sep",visits:665},{country:"Oct",visits:580},{country:"Nov",visits:443},{country:"Dec",visits:441}];var e=t.xAxes.push(new Io);e.dataFields.category="country",e.renderer.grid.template.location=0,e.renderer.minGridDistance=30,e.renderer.labels.template.adapter.add("dy",(function(t,e){return 2==(e.dataItem&&2&e.dataItem.index)?t+25:t})),t.yAxes.push(new xo);var i=t.series.push(new ks);i.dataFields.valueY="visits",i.dataFields.categoryX="country",i.name="Visits",i.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]",i.columns.template.fillOpacity=.8;var r=i.columns.template;r.strokeWidth=2,r.strokeOpacity=1,this.chart2=t},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"}),this.modalRef.hide()},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-petty-cash"]],decls:149,vars:10,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-money-bill","text-dark"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-6"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"card-body"],[1,"chart"],["id","chartpettycash1",1,"amchart"],["id","chartpettycash2",1,"amchart"],[1,"col-xl-12"],[1,"col-md-6"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-default",3,"click"],[1,"col-xl-3"],[1,"form-group"],["for","example-date-input",1,"form-control-label"],["type","date","placeholder","2021-01-01","id","example-date-input",1,"form-control"],["for","exampleFormControlSelect2"],["id","exampleFormControlSelect2",1,"form-control"],["selected",""],["value","1"],["value","2"],["value","3"],[1,"col-xl-12","text-right"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["createUser",""],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"col-6"],[1,"mb-4"],["for","type3"],["id","type3",1,"form-control"],["for","amount2"],["type","number","placeholder","eg 123.34","id","amount2",1,"form-control"],["for","register2"],["id","register2",1,"form-control"],["for","textarea6"],["placeholder","Enter your message...","id","textarea6","rows","1",1,"form-control"],[1,"modal-footer"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Cash Management"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h5",18),_l.Fc(20,"Petty Cash"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(21,"div",19),_l.Tb(22,"div",20),_l.Pb(23,"div",21),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(24,"div",13),_l.Tb(25,"div",14),_l.Tb(26,"div",15),_l.Tb(27,"div",16),_l.Tb(28,"div",17),_l.Tb(29,"h5",18),_l.Fc(30,"Petty Cash Distribution"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(31,"div",19),_l.Tb(32,"div",20),_l.Pb(33,"div",22),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(34,"div",23),_l.Tb(35,"div",14),_l.Tb(36,"div",15),_l.Tb(37,"div",16),_l.Tb(38,"div",24),_l.Tb(39,"h5",18),_l.Fc(40,"List of Account"),_l.Sb(),_l.Sb(),_l.Tb(41,"div",25),_l.Tb(42,"button",26),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(148);return e.openModal(r)})),_l.Fc(43," Export "),_l.Sb(),_l.Tb(44,"button",27),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(148);return e.openModal(r)})),_l.Fc(45," Upload "),_l.Sb(),_l.Tb(46,"button",28),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(148);return e.openModal(r)})),_l.Fc(47," Add New "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(48,"div",19),_l.Tb(49,"div",12),_l.Tb(50,"div",29),_l.Tb(51,"div",30),_l.Tb(52,"label",31),_l.Fc(53,"Date"),_l.Sb(),_l.Pb(54,"input",32),_l.Sb(),_l.Sb(),_l.Tb(55,"div",29),_l.Tb(56,"div",30),_l.Tb(57,"label",33),_l.Fc(58,"Shown by"),_l.Sb(),_l.Tb(59,"select",34),_l.Tb(60,"option",35),_l.Fc(61,"Choose"),_l.Sb(),_l.Tb(62,"option",36),_l.Fc(63,"Date"),_l.Sb(),_l.Tb(64,"option",37),_l.Fc(65,"Final Date"),_l.Sb(),_l.Tb(66,"option",38),_l.Fc(67,"Brand"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(68,"div",29),_l.Tb(69,"div",30),_l.Tb(70,"label",33),_l.Fc(71,"Sort by"),_l.Sb(),_l.Tb(72,"select",34),_l.Tb(73,"option",35),_l.Fc(74,"Choose"),_l.Sb(),_l.Tb(75,"option",36),_l.Fc(76,"Type"),_l.Sb(),_l.Tb(77,"option",37),_l.Fc(78,"Status"),_l.Sb(),_l.Tb(79,"option",38),_l.Fc(80,"Name"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(81,"div",29),_l.Tb(82,"div",30),_l.Tb(83,"label",33),_l.Fc(84,"Receive by"),_l.Sb(),_l.Tb(85,"select",34),_l.Tb(86,"option",35),_l.Fc(87,"Choose"),_l.Sb(),_l.Tb(88,"option",36),_l.Fc(89,"Type"),_l.Sb(),_l.Tb(90,"option",37),_l.Fc(91,"Status"),_l.Sb(),_l.Tb(92,"option",38),_l.Fc(93,"Name"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(94,"div",39),_l.Tb(95,"button",28),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(96," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(97,"div",23),_l.Tb(98,"div",14),_l.Tb(99,"div",15),_l.Tb(100,"div",16),_l.Tb(101,"div",17),_l.Tb(102,"h5",18),_l.Fc(103,"List View of Cash Transaction"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(104,"div",19),_l.Tb(105,"div",40),_l.Tb(106,"div",12),_l.Tb(107,"div",41),_l.Tb(108,"div",42),_l.Tb(109,"label"),_l.Fc(110," Show "),_l.Tb(111,"select",43),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(112,"option",44),_l.Fc(113,"5"),_l.Sb(),_l.Tb(114,"option",45),_l.Fc(115,"10"),_l.Sb(),_l.Tb(116,"option",46),_l.Fc(117,"15"),_l.Sb(),_l.Tb(118,"option",47),_l.Fc(119,"All"),_l.Sb(),_l.Sb(),_l.Fc(120," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(121,"div",41),_l.Tb(122,"div",48),_l.Tb(123,"label"),_l.Tb(124,"input",49),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(125,"ngx-datatable",50),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(126,"ngx-datatable-column"),_l.Dc(127,wc,2,0,"ng-template",51),_l.Dc(128,Tc,1,1,"ng-template",52),_l.Sb(),_l.Tb(129,"ngx-datatable-column"),_l.Dc(130,Pc,2,0,"ng-template",51),_l.Dc(131,Cc,1,1,"ng-template",52),_l.Sb(),_l.Tb(132,"ngx-datatable-column"),_l.Dc(133,kc,2,0,"ng-template",51),_l.Dc(134,Ic,1,1,"ng-template",52),_l.Sb(),_l.Tb(135,"ngx-datatable-column"),_l.Dc(136,Ac,2,0,"ng-template",51),_l.Dc(137,Oc,1,1,"ng-template",52),_l.Sb(),_l.Tb(138,"ngx-datatable-column"),_l.Dc(139,Dc,2,0,"ng-template",51),_l.Dc(140,Fc,1,1,"ng-template",52),_l.Sb(),_l.Tb(141,"ngx-datatable-column"),_l.Dc(142,Mc,2,0,"ng-template",51),_l.Dc(143,Ec,1,1,"ng-template",52),_l.Sb(),_l.Tb(144,"ngx-datatable-column"),_l.Dc(145,Lc,2,0,"ng-template",51),_l.Dc(146,Rc,6,0,"ng-template",52),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(147,Vc,50,0,"ng-template",null,53,_l.Ec)}2&t&&(_l.Bb(112),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,s.v,s.n,s.o],styles:[""]}),t}();function Bc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Payer ID"),_l.Sb())}function Nc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.accNo," ")}function Uc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Month 1 (RM)"),_l.Sb())}function Xc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.debit," ")}function Hc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Month 2 (RM)"),_l.Sb())}function Wc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.credit," ")}function Yc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Month 3 (RM)"),_l.Sb())}function Gc(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.netMove," ")}function qc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function Kc(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",63),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(183);return e.openModal(r)})),_l.Tb(1,"span",64),_l.Pb(2,"i",65),_l.Sb(),_l.Sb(),_l.Tb(3,"button",66),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",64),_l.Pb(5,"i",67),_l.Sb(),_l.Sb()}}function Zc(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",68),_l.Tb(1,"h6",69),_l.Fc(2," Add Account Payable "),_l.Sb(),_l.Tb(3,"button",70),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",71),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",72),_l.Tb(7,"form"),_l.Tb(8,"div",22),_l.Tb(9,"div",73),_l.Tb(10,"div",74),_l.Tb(11,"label",75),_l.Fc(12,"From"),_l.Sb(),_l.Tb(13,"select",76),_l.Tb(14,"option",44),_l.Fc(15,"Choose"),_l.Sb(),_l.Tb(16,"option",45),_l.Fc(17,"One"),_l.Sb(),_l.Tb(18,"option",46),_l.Fc(19,"Two"),_l.Sb(),_l.Tb(20,"option",47),_l.Fc(21,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(22,"div",73),_l.Tb(23,"div",74),_l.Tb(24,"label",77),_l.Fc(25,"Acc No."),_l.Sb(),_l.Pb(26,"input",78),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(27,"form"),_l.Tb(28,"div",22),_l.Tb(29,"div",73),_l.Tb(30,"div",74),_l.Tb(31,"label",79),_l.Fc(32,"Date"),_l.Sb(),_l.Tb(33,"div",80),_l.Tb(34,"span",81),_l.Pb(35,"span",82),_l.Sb(),_l.Pb(36,"input",83),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(37,"div",73),_l.Tb(38,"div",74),_l.Tb(39,"label",84),_l.Fc(40,"Final Date"),_l.Sb(),_l.Tb(41,"div",80),_l.Tb(42,"span",81),_l.Pb(43,"span",82),_l.Sb(),_l.Pb(44,"input",85),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(45,"form"),_l.Tb(46,"div",22),_l.Tb(47,"div",73),_l.Tb(48,"div",74),_l.Tb(49,"label",86),_l.Fc(50,"Invoice No."),_l.Sb(),_l.Pb(51,"input",87),_l.Sb(),_l.Sb(),_l.Tb(52,"div",73),_l.Tb(53,"div",74),_l.Tb(54,"label",88),_l.Fc(55,"Brand"),_l.Sb(),_l.Tb(56,"select",89),_l.Tb(57,"option",44),_l.Fc(58,"Choose"),_l.Sb(),_l.Tb(59,"option",45),_l.Fc(60,"One"),_l.Sb(),_l.Tb(61,"option",46),_l.Fc(62,"Two"),_l.Sb(),_l.Tb(63,"option",47),_l.Fc(64,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(65,"form"),_l.Tb(66,"div",22),_l.Tb(67,"div",73),_l.Tb(68,"div",74),_l.Tb(69,"label",90),_l.Fc(70,"Currency"),_l.Sb(),_l.Tb(71,"select",91),_l.Tb(72,"option",44),_l.Fc(73,"Choose"),_l.Sb(),_l.Tb(74,"option",45),_l.Fc(75,"One"),_l.Sb(),_l.Tb(76,"option",46),_l.Fc(77,"Two"),_l.Sb(),_l.Tb(78,"option",47),_l.Fc(79,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(80,"div",73),_l.Tb(81,"div",74),_l.Tb(82,"label",92),_l.Fc(83,"Total (RM)"),_l.Sb(),_l.Pb(84,"input",93),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(85,"div",94),_l.Tb(86,"button",35),_l.bc("click",(function(t){return _l.wc(i),_l.fc().successSwal("saved")})),_l.Fc(87," Save "),_l.Sb(),_l.Tb(88,"button",95),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(89," Close "),_l.Sb(),_l.Sb()}}var Jc=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),$c=function(){function t(t,e){this.zone=t,this.modalService=e,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"320.80",name:"John",status:"active",type:"Full time"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Ahmad",status:"unactive",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Trish",status:"active",type:"Full time"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"Sara",status:"active",type:"Part time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Malek",status:"unactive",type:"Part time"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Cheng Hong",status:"unactive",type:"Full time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Arumugam",status:"active",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Ronaldo",status:"active",type:"Part time"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"Neymar",status:"unactive",type:"Part time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"active",type:"Full time"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"John",status:"active",type:"Full time"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2012/03/29",salary:"$433,060",name:"John",status:"active",type:"Full time"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"active",type:"Full time"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$385,750",name:"John",status:"active",type:"Full time"}],this.SelectionType=Jc,this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartAccountRecei1(),t.getChartAccountRecei2()}))},t.prototype.getChartAccountRecei1=function(){Ga(bl),Ga(vl);var t=Ya("chartaccPay1",as);t.data=[{country:"Overdue Invoices",litres:501.9},{country:"Open Invoices",litres:301.9},{country:"Paid Invoices",litres:201.1}];var e=t.series.push(new rs);e.dataFields.value="litres",e.dataFields.category="country",e.slices.template.stroke=Ue("#fff"),e.slices.template.strokeOpacity=1,e.hiddenState.properties.opacity=1,e.hiddenState.properties.endAngle=-90,e.hiddenState.properties.startAngle=-90,t.hiddenState.properties.radius=m(0),this.chart1=t},t.prototype.getChartAccountRecei2=function(){Ga(bl),Ga(vl);var t=Ya("chartaccPay2",Mo);t.padding(40,40,40,40);var e=t.yAxes.push(new Io);e.renderer.grid.template.location=0,e.dataFields.category="network",e.renderer.minGridDistance=1,e.renderer.inversed=!0,e.renderer.grid.template.disabled=!0,t.xAxes.push(new xo).min=0;var i=t.series.push(new ks);i.dataFields.categoryY="network",i.dataFields.valueX="MAU",i.tooltipText="{valueX.value}",i.columns.template.strokeOpacity=0,i.columns.template.column.cornerRadiusBottomRight=5,i.columns.template.column.cornerRadiusTopRight=5;var r=i.bullets.push(new ms);r.label.horizontalCenter="left",r.label.dx=10,r.label.text="{values.valueX.workingValue.formatNumber('#.0as')}",r.locationX=1,i.columns.template.adapter.add("fill",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),e.sortBySeries=i,t.data=[{network:"31-60 Days",MAU:34},{network:"61-90 Days",MAU:23},{network:"1-30 Days",MAU:20},{network:"90+ Days",MAU:14}],this.chart2=t},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"}),this.modalRef.hide()},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-account-payable"]],decls:184,vars:10,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-file-invoice","text-dark"],[1,"row","justify-content-md-center"],[1,"col-sm-3","col-md-5","col-lg-3","mb-4"],[1,"card","border-light","shadow-sm"],[1,"card-body"],[1,"row","d-block","d-xl-flex","align-items-center"],[1,"col-12","px-xl-0","text-center"],[1,"d-none","d-sm-block"],[1,"h4"],[1,"h3","text-success","mb-1"],[1,"col-sm-3","col-md-6","col-lg-3","mb-4"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-6"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"chart"],["id","chartaccPay1",1,"amchart"],["id","chartaccPay2",1,"amchart"],[1,"col-xl-12"],[1,"col-md-6"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-default",3,"click"],[1,"col-xl-3"],[1,"form-group"],["for","example-date-input",1,"form-control-label"],["type","date","placeholder","2021-01-01","id","example-date-input",1,"form-control"],["for","exampleFormControlSelect2"],["id","exampleFormControlSelect2",1,"form-control"],["selected",""],["value","1"],["value","2"],["value","3"],[1,"col-xl-12","text-right"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["createUser",""],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"col-6"],[1,"mb-4"],["for","from4"],["id","from4",1,"form-control"],["for","accno2"],["type","text","placeholder","eg 273634347","id","accno2",1,"form-control"],["for","date6"],[1,"input-group"],[1,"input-group-text"],[1,"far","fa-calendar-alt"],["data-datepicker","","id","date6","type","text","placeholder","Choose date","required","",1,"form-control"],["for","finaldate3"],["data-datepicker","","id","finaldate3","type","text","placeholder","Choose date","required","",1,"form-control"],["for","invoiceno3"],["type","text","placeholder","eg INV8347384","id","invoiceno3",1,"form-control"],["for","brand3"],["id","brand3",1,"form-control"],["for","currency3"],["id","currency3",1,"form-control"],["for","total4"],["type","text","placeholder","eg 1726","id","total4",1,"form-control"],[1,"modal-footer"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Account Payable"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h2",18),_l.Fc(20,"Payable Account"),_l.Sb(),_l.Tb(21,"h3",19),_l.Fc(22,"RM3828"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(23,"div",20),_l.Tb(24,"div",13),_l.Tb(25,"div",14),_l.Tb(26,"div",15),_l.Tb(27,"div",16),_l.Tb(28,"div",17),_l.Tb(29,"h2",18),_l.Fc(30,"Overdue Cost"),_l.Sb(),_l.Tb(31,"h3",19),_l.Fc(32,"RM2017"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(33,"div",20),_l.Tb(34,"div",13),_l.Tb(35,"div",14),_l.Tb(36,"div",15),_l.Tb(37,"div",16),_l.Tb(38,"div",17),_l.Tb(39,"h2",18),_l.Fc(40,"Percent of Overdue"),_l.Sb(),_l.Tb(41,"h3",19),_l.Fc(42,"527"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(43,"div",20),_l.Tb(44,"div",13),_l.Tb(45,"div",14),_l.Tb(46,"div",15),_l.Tb(47,"div",16),_l.Tb(48,"div",17),_l.Tb(49,"h2",18),_l.Fc(50,"Cash on Hands"),_l.Sb(),_l.Tb(51,"h3",19),_l.Fc(52,"RM229"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(53,"div",21),_l.Tb(54,"div",22),_l.Tb(55,"div",23),_l.Tb(56,"div",24),_l.Tb(57,"div",25),_l.Tb(58,"div",26),_l.Tb(59,"div",27),_l.Tb(60,"h5",28),_l.Fc(61,"Invoice by Status"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(62,"div",14),_l.Tb(63,"div",29),_l.Pb(64,"div",30),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(65,"div",23),_l.Tb(66,"div",24),_l.Tb(67,"div",25),_l.Tb(68,"div",26),_l.Tb(69,"div",27),_l.Tb(70,"h5",28),_l.Fc(71,"Account Payable Age"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(72,"div",14),_l.Tb(73,"div",29),_l.Pb(74,"div",31),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(75,"div",32),_l.Tb(76,"div",24),_l.Tb(77,"div",25),_l.Tb(78,"div",26),_l.Tb(79,"div",33),_l.Tb(80,"h5",28),_l.Fc(81,"List of Account"),_l.Sb(),_l.Sb(),_l.Tb(82,"div",34),_l.Tb(83,"button",35),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(183);return e.openModal(r)})),_l.Fc(84," Export "),_l.Sb(),_l.Tb(85,"button",36),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(183);return e.openModal(r)})),_l.Fc(86," Upload "),_l.Sb(),_l.Tb(87,"button",37),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(183);return e.openModal(r)})),_l.Fc(88," Add New "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(89,"div",14),_l.Tb(90,"div",22),_l.Tb(91,"div",38),_l.Tb(92,"div",39),_l.Tb(93,"label",40),_l.Fc(94,"Date"),_l.Sb(),_l.Pb(95,"input",41),_l.Sb(),_l.Sb(),_l.Tb(96,"div",38),_l.Tb(97,"div",39),_l.Tb(98,"label",42),_l.Fc(99,"Shown by"),_l.Sb(),_l.Tb(100,"select",43),_l.Tb(101,"option",44),_l.Fc(102,"Choose"),_l.Sb(),_l.Tb(103,"option",45),_l.Fc(104,"Date"),_l.Sb(),_l.Tb(105,"option",46),_l.Fc(106,"Final Date"),_l.Sb(),_l.Tb(107,"option",47),_l.Fc(108,"Brand"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(109,"div",38),_l.Tb(110,"div",39),_l.Tb(111,"label",42),_l.Fc(112,"Sort by"),_l.Sb(),_l.Tb(113,"select",43),_l.Tb(114,"option",44),_l.Fc(115,"Choose"),_l.Sb(),_l.Tb(116,"option",45),_l.Fc(117,"Type"),_l.Sb(),_l.Tb(118,"option",46),_l.Fc(119,"Status"),_l.Sb(),_l.Tb(120,"option",47),_l.Fc(121,"Name"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(122,"div",38),_l.Tb(123,"div",39),_l.Tb(124,"label",42),_l.Fc(125,"Receive by"),_l.Sb(),_l.Tb(126,"select",43),_l.Tb(127,"option",44),_l.Fc(128,"Choose"),_l.Sb(),_l.Tb(129,"option",45),_l.Fc(130,"Type"),_l.Sb(),_l.Tb(131,"option",46),_l.Fc(132,"Status"),_l.Sb(),_l.Tb(133,"option",47),_l.Fc(134,"Name"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(135,"div",48),_l.Tb(136,"button",37),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(137," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(138,"div",32),_l.Tb(139,"div",24),_l.Tb(140,"div",25),_l.Tb(141,"div",26),_l.Tb(142,"div",27),_l.Tb(143,"h5",28),_l.Fc(144,"List of Account Payable"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(145,"div",14),_l.Tb(146,"div",49),_l.Tb(147,"div",22),_l.Tb(148,"div",50),_l.Tb(149,"div",51),_l.Tb(150,"label"),_l.Fc(151," Show "),_l.Tb(152,"select",52),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(153,"option",53),_l.Fc(154,"5"),_l.Sb(),_l.Tb(155,"option",54),_l.Fc(156,"10"),_l.Sb(),_l.Tb(157,"option",55),_l.Fc(158,"15"),_l.Sb(),_l.Tb(159,"option",56),_l.Fc(160,"All"),_l.Sb(),_l.Sb(),_l.Fc(161," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(162,"div",50),_l.Tb(163,"div",57),_l.Tb(164,"label"),_l.Tb(165,"input",58),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(166,"ngx-datatable",59),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(167,"ngx-datatable-column"),_l.Dc(168,Bc,2,0,"ng-template",60),_l.Dc(169,Nc,1,1,"ng-template",61),_l.Sb(),_l.Tb(170,"ngx-datatable-column"),_l.Dc(171,Uc,2,0,"ng-template",60),_l.Dc(172,Xc,1,1,"ng-template",61),_l.Sb(),_l.Tb(173,"ngx-datatable-column"),_l.Dc(174,Hc,2,0,"ng-template",60),_l.Dc(175,Wc,1,1,"ng-template",61),_l.Sb(),_l.Tb(176,"ngx-datatable-column"),_l.Dc(177,Yc,2,0,"ng-template",60),_l.Dc(178,Gc,1,1,"ng-template",61),_l.Sb(),_l.Tb(179,"ngx-datatable-column"),_l.Dc(180,qc,2,0,"ng-template",60),_l.Dc(181,Kc,6,0,"ng-template",61),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(182,Zc,90,0,"ng-template",null,62,_l.Ec)}2&t&&(_l.Bb(153),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,s.v,s.n,s.o],styles:[""]}),t}();function Qc(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Description"),_l.Sb())}function th(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.desc," ")}function eh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Code"),_l.Sb())}function ih(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.accNo," ")}function rh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Purchase Date"),_l.Sb())}function nh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.start," ")}function ah(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Book Value (RM)"),_l.Sb())}function oh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.debit," ")}function sh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Acquisition Cost (RM)"),_l.Sb())}function lh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.credit," ")}function uh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Remaining Life (Years)"),_l.Sb())}function ch(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.netMove," ")}function hh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function ph(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",63),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(179);return e.openModal(r)})),_l.Tb(1,"span",64),_l.Pb(2,"i",65),_l.Sb(),_l.Sb(),_l.Tb(3,"button",66),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",64),_l.Pb(5,"i",67),_l.Sb(),_l.Sb()}}function dh(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",68),_l.Tb(1,"h6",69),_l.Fc(2," Edit Fixed Asset "),_l.Sb(),_l.Tb(3,"button",70),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",71),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",72),_l.Tb(7,"form"),_l.Tb(8,"div",22),_l.Tb(9,"div",73),_l.Tb(10,"div",74),_l.Tb(11,"label",75),_l.Fc(12,"Code"),_l.Sb(),_l.Pb(13,"input",76),_l.Sb(),_l.Sb(),_l.Tb(14,"div",73),_l.Tb(15,"div",74),_l.Tb(16,"label",77),_l.Fc(17,"Value"),_l.Sb(),_l.Pb(18,"input",78),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(19,"form"),_l.Tb(20,"div",22),_l.Tb(21,"div",79),_l.Tb(22,"div",74),_l.Tb(23,"label",80),_l.Fc(24,"Department"),_l.Sb(),_l.Tb(25,"select",81),_l.Tb(26,"option",44),_l.Fc(27,"Choose"),_l.Sb(),_l.Tb(28,"option",45),_l.Fc(29,"Register 1"),_l.Sb(),_l.Tb(30,"option",46),_l.Fc(31,"Register 2"),_l.Sb(),_l.Tb(32,"option",47),_l.Fc(33,"Register 3"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(34,"div",79),_l.Tb(35,"div",74),_l.Tb(36,"label",82),_l.Fc(37,"Period"),_l.Sb(),_l.Pb(38,"input",83),_l.Sb(),_l.Sb(),_l.Tb(39,"div",79),_l.Tb(40,"div",74),_l.Tb(41,"label",84),_l.Fc(42,"Day/Month/Year"),_l.Sb(),_l.Tb(43,"select",85),_l.Tb(44,"option",44),_l.Fc(45,"Choose"),_l.Sb(),_l.Tb(46,"option",45),_l.Fc(47,"Day"),_l.Sb(),_l.Tb(48,"option",46),_l.Fc(49,"Year"),_l.Sb(),_l.Tb(50,"option",47),_l.Fc(51,"Month"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(52,"form"),_l.Tb(53,"div",22),_l.Tb(54,"div",86),_l.Tb(55,"div",74),_l.Tb(56,"label",87),_l.Fc(57,"Description"),_l.Sb(),_l.Pb(58,"textarea",88),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(59,"div",89),_l.Tb(60,"button",35),_l.bc("click",(function(t){return _l.wc(i),_l.fc().successSwal("saved")})),_l.Fc(61," Save "),_l.Sb(),_l.Tb(62,"button",90),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(63," Close "),_l.Sb(),_l.Sb()}}var fh=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),mh=function(){function t(t,e){this.zone=t,this.modalService=e,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"5",start:"2011/04/25",salary:"320.80",name:"John",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Testing"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"3",start:"2011/07/25",salary:"$170,750",name:"Ahmad",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Cleaning supplies"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"4",start:"2009/01/12",salary:"$86,000",name:"Trish",status:"Owner",type:"Cash Out",reg:"Register 2",desc:"Testing"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"5",start:"2012/03/29",salary:"$433,060",name:"Sara",status:"Owner",type:"Cash Out",reg:"Register 4",desc:"Staff coffee"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"9",start:"2008/11/28",salary:"$162,700",name:"Malek",status:"Owner",type:"Cash Out",reg:"Register 2",desc:"Staff coffee"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"14",start:"2011/07/25",salary:"$170,750",name:"Cheng Hong",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Cleaning supplies"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"8",start:"2008/11/28",salary:"$162,700",name:"Arumugam",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Testing"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"4",start:"2009/01/12",salary:"$86,000",name:"Ronaldo",status:"Owner",type:"Cash Out",reg:"Register 5",desc:"Testing"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"5",start:"2012/03/29",salary:"$433,060",name:"Neymar",status:"Owner",type:"Cash Out",reg:"Register 4",desc:"Cleaning supplies"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"3",start:"2008/11/28",salary:"$162,700",name:"John",status:"Owner",type:"Cash Out",reg:"Register 5",desc:"Staff coffee"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"9",start:"2011/04/25",salary:"$320,800",name:"John",status:"Owner",type:"Cash Out",reg:"Register 3",desc:"Testing"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"42",start:"2009/01/12",salary:"$86,000",name:"John",status:"Owner",type:"Cash Out",reg:"Register 4",desc:"Cleaning supplies"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"2",start:"2012/03/29",salary:"$433,060",name:"John",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Testing"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"9",start:"2008/11/28",salary:"$162,700",name:"John",status:"Owner",type:"Cash Out",reg:"Register 1",desc:"Testing"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"42",start:"2009/01/12",salary:"$385,750",name:"John",status:"Owner",type:"Cash Out",reg:"Register 6",desc:"Cleaning supplies"}],this.SelectionType=fh,this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartFixedAsset1(),t.getChartFixedAsset2()}))},t.prototype.getChartFixedAsset1=function(){Ga(bl),Ga(vl);var t=Ya("chartfixedasset1",Mo);t.scrollbarX=new ua,t.data=[{country:"Check-out",visits:3025},{country:"Check-in",visits:1882},{country:"Pending",visits:1809},{country:"Maintenance",visits:1322}];var e=t.xAxes.push(new Io);e.dataFields.category="country",e.renderer.grid.template.location=0,e.renderer.minGridDistance=30,e.renderer.labels.template.horizontalCenter="right",e.renderer.labels.template.verticalCenter="middle",e.renderer.labels.template.rotation=270,e.tooltip.disabled=!0,e.renderer.minHeight=110,t.yAxes.push(new xo).renderer.minWidth=50;var i=t.series.push(new ks);i.sequencedInterpolation=!0,i.dataFields.valueY="visits",i.dataFields.categoryX="country",i.tooltipText="[{categoryX}: bold]{valueY}[/]",i.columns.template.strokeWidth=0,i.tooltip.pointerOrientation="vertical",i.columns.template.column.cornerRadiusTopLeft=10,i.columns.template.column.cornerRadiusTopRight=10,i.columns.template.column.fillOpacity=.8;var r=i.columns.template.column.states.create("hover");r.properties.cornerRadiusTopLeft=0,r.properties.cornerRadiusTopRight=0,r.properties.fillOpacity=1,i.columns.template.adapter.add("fill",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),t.cursor=new yl,this.chart1=t},t.prototype.getChartFixedAsset2=function(){Ga(bl),Ga(vl);var t=Ya("chartfixedasset2",as);t.hiddenState.properties.opacity=0,t.data=[{country:"Lithuania",value:401},{country:"Czech Republic",value:300},{country:"Ireland",value:200},{country:"Germany",value:165},{country:"Australia",value:139},{country:"Austria",value:128}],t.radius=m(70),t.innerRadius=m(40),t.startAngle=180,t.endAngle=360;var e=t.series.push(new rs);e.dataFields.value="value",e.dataFields.category="country",e.slices.template.cornerRadius=10,e.slices.template.innerCornerRadius=7,e.slices.template.draggable=!0,e.slices.template.inert=!0,e.alignLabels=!1,e.hiddenState.properties.startAngle=90,e.hiddenState.properties.endAngle=90,t.legend=new to,this.chart2=t},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"}),this.modalRef.hide()},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-fixed-asset"]],decls:180,vars:10,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-screwdriver","text-dark"],[1,"row","justify-content-md-center"],[1,"col-sm-3","col-md-6","col-lg-4","mb-4"],[1,"card","border-light","shadow-sm"],[1,"card-body"],[1,"row","d-block","d-xl-flex","align-items-center"],[1,"col-12","px-xl-0","text-center"],[1,"d-none","d-sm-block"],[1,"h4"],[1,"h3","mb-1","text-success"],[1,"col-sm-3","col-md-6","col-lg-4"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-6"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"chart"],["id","chartfixedasset1",1,"amchart"],["id","chartfixedasset2",1,"amchart"],[1,"col-xl-12"],[1,"col-md-6"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-default",3,"click"],[1,"col-xl-3"],[1,"form-group"],["for","example-date-input",1,"form-control-label"],["type","date","placeholder","2021-01-01","id","example-date-input",1,"form-control"],["for","exampleFormControlSelect2"],["id","exampleFormControlSelect2",1,"form-control"],["selected",""],["value","1"],["value","2"],["value","3"],[1,"col-xl-12","text-right"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["createUser",""],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"col-6"],[1,"mb-4"],["for","code"],["type","text","placeholder","eg HGY8283","id","code",1,"form-control"],["for","value1"],["type","text","placeholder","eg 372.89","id","value1",1,"form-control"],[1,"col-4"],["for","department2"],["id","department2",1,"form-control"],["for","period1"],["type","text","placeholder","eg 6","id","period1",1,"form-control"],["for","period2"],["id","period2",1,"form-control"],[1,"col-12"],["for","textarea4"],["placeholder","Enter your message...","id","textarea4","rows","2",1,"form-control"],[1,"modal-footer"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Fixed Asset"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h2",18),_l.Fc(20,"Assets Overdue"),_l.Sb(),_l.Tb(21,"h3",19),_l.Fc(22,"10"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(23,"div",20),_l.Tb(24,"div",13),_l.Tb(25,"div",14),_l.Tb(26,"div",15),_l.Tb(27,"div",16),_l.Tb(28,"div",17),_l.Tb(29,"h2",18),_l.Fc(30,"Assets Due Soon"),_l.Sb(),_l.Tb(31,"h3",19),_l.Fc(32,"7"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(33,"div",20),_l.Tb(34,"div",13),_l.Tb(35,"div",14),_l.Tb(36,"div",15),_l.Tb(37,"div",16),_l.Tb(38,"div",17),_l.Tb(39,"h2",18),_l.Fc(40,"Insurance Expiring"),_l.Sb(),_l.Tb(41,"h3",19),_l.Fc(42,"3"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(43,"div",21),_l.Tb(44,"div",22),_l.Tb(45,"div",23),_l.Tb(46,"div",24),_l.Tb(47,"div",25),_l.Tb(48,"div",26),_l.Tb(49,"div",27),_l.Tb(50,"h5",28),_l.Fc(51,"Asset Status"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(52,"div",14),_l.Tb(53,"div",29),_l.Pb(54,"div",30),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(55,"div",23),_l.Tb(56,"div",24),_l.Tb(57,"div",25),_l.Tb(58,"div",26),_l.Tb(59,"div",27),_l.Tb(60,"h5",28),_l.Fc(61,"Asset Condition"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(62,"div",14),_l.Tb(63,"div",29),_l.Pb(64,"div",31),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(65,"div",32),_l.Tb(66,"div",24),_l.Tb(67,"div",25),_l.Tb(68,"div",26),_l.Tb(69,"div",33),_l.Tb(70,"h5",28),_l.Fc(71,"List of Account"),_l.Sb(),_l.Sb(),_l.Tb(72,"div",34),_l.Tb(73,"button",35),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(179);return e.openModal(r)})),_l.Fc(74," Export "),_l.Sb(),_l.Tb(75,"button",36),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(179);return e.openModal(r)})),_l.Fc(76," Upload "),_l.Sb(),_l.Tb(77,"button",37),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(179);return e.openModal(r)})),_l.Fc(78," Add New "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(79,"div",14),_l.Tb(80,"div",22),_l.Tb(81,"div",38),_l.Tb(82,"div",39),_l.Tb(83,"label",40),_l.Fc(84,"Date"),_l.Sb(),_l.Pb(85,"input",41),_l.Sb(),_l.Sb(),_l.Tb(86,"div",38),_l.Tb(87,"div",39),_l.Tb(88,"label",42),_l.Fc(89,"Shown by"),_l.Sb(),_l.Tb(90,"select",43),_l.Tb(91,"option",44),_l.Fc(92,"Choose"),_l.Sb(),_l.Tb(93,"option",45),_l.Fc(94,"Date"),_l.Sb(),_l.Tb(95,"option",46),_l.Fc(96,"Final Date"),_l.Sb(),_l.Tb(97,"option",47),_l.Fc(98,"Brand"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(99,"div",38),_l.Tb(100,"div",39),_l.Tb(101,"label",42),_l.Fc(102,"Sort by"),_l.Sb(),_l.Tb(103,"select",43),_l.Tb(104,"option",44),_l.Fc(105,"Choose"),_l.Sb(),_l.Tb(106,"option",45),_l.Fc(107,"Type"),_l.Sb(),_l.Tb(108,"option",46),_l.Fc(109,"Status"),_l.Sb(),_l.Tb(110,"option",47),_l.Fc(111,"Name"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(112,"div",38),_l.Tb(113,"div",39),_l.Tb(114,"label",42),_l.Fc(115,"Receive by"),_l.Sb(),_l.Tb(116,"select",43),_l.Tb(117,"option",44),_l.Fc(118,"Choose"),_l.Sb(),_l.Tb(119,"option",45),_l.Fc(120,"Type"),_l.Sb(),_l.Tb(121,"option",46),_l.Fc(122,"Status"),_l.Sb(),_l.Tb(123,"option",47),_l.Fc(124,"Name"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(125,"div",48),_l.Tb(126,"button",37),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(127," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(128,"div",32),_l.Tb(129,"div",24),_l.Tb(130,"div",25),_l.Tb(131,"div",26),_l.Tb(132,"div",27),_l.Tb(133,"h5",28),_l.Fc(134,"List of Fixed Assets"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(135,"div",14),_l.Tb(136,"div",49),_l.Tb(137,"div",22),_l.Tb(138,"div",50),_l.Tb(139,"div",51),_l.Tb(140,"label"),_l.Fc(141," Show "),_l.Tb(142,"select",52),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(143,"option",53),_l.Fc(144,"5"),_l.Sb(),_l.Tb(145,"option",54),_l.Fc(146,"10"),_l.Sb(),_l.Tb(147,"option",55),_l.Fc(148,"15"),_l.Sb(),_l.Tb(149,"option",56),_l.Fc(150,"All"),_l.Sb(),_l.Sb(),_l.Fc(151," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(152,"div",50),_l.Tb(153,"div",57),_l.Tb(154,"label"),_l.Tb(155,"input",58),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(156,"ngx-datatable",59),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(157,"ngx-datatable-column"),_l.Dc(158,Qc,2,0,"ng-template",60),_l.Dc(159,th,1,1,"ng-template",61),_l.Sb(),_l.Tb(160,"ngx-datatable-column"),_l.Dc(161,eh,2,0,"ng-template",60),_l.Dc(162,ih,1,1,"ng-template",61),_l.Sb(),_l.Tb(163,"ngx-datatable-column"),_l.Dc(164,rh,2,0,"ng-template",60),_l.Dc(165,nh,1,1,"ng-template",61),_l.Sb(),_l.Tb(166,"ngx-datatable-column"),_l.Dc(167,ah,2,0,"ng-template",60),_l.Dc(168,oh,1,1,"ng-template",61),_l.Sb(),_l.Tb(169,"ngx-datatable-column"),_l.Dc(170,sh,2,0,"ng-template",60),_l.Dc(171,lh,1,1,"ng-template",61),_l.Sb(),_l.Tb(172,"ngx-datatable-column"),_l.Dc(173,uh,2,0,"ng-template",60),_l.Dc(174,ch,1,1,"ng-template",61),_l.Sb(),_l.Tb(175,"ngx-datatable-column"),_l.Dc(176,hh,2,0,"ng-template",60),_l.Dc(177,ph,6,0,"ng-template",61),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(178,dh,64,0,"ng-template",null,62,_l.Ec)}2&t&&(_l.Bb(143),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,s.v,s.n,s.o],styles:[""]}),t}();function yh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Vendor ID"),_l.Sb())}function gh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.netMove," ")}function bh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Company Name"),_l.Sb())}function vh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.reg," ")}function _h(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Category"),_l.Sb())}function xh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.category," ")}function Sh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Scale"),_l.Sb())}function wh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.scale," ")}function Th(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Experience (Years)"),_l.Sb())}function Ph(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.status," ")}function Ch(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function kh(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",68),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(201);return e.openModal(r)})),_l.Tb(1,"span",69),_l.Pb(2,"i",70),_l.Sb(),_l.Sb(),_l.Tb(3,"button",71),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",69),_l.Pb(5,"i",72),_l.Sb(),_l.Sb()}}function Ih(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",73),_l.Tb(1,"h6",74),_l.Fc(2," Edit Vendor "),_l.Sb(),_l.Tb(3,"button",75),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",76),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",77),_l.Tb(7,"form"),_l.Tb(8,"div",26),_l.Tb(9,"div",78),_l.Tb(10,"div",79),_l.Tb(11,"label",80),_l.Fc(12,"Vendor ID"),_l.Sb(),_l.Pb(13,"input",81),_l.Sb(),_l.Sb(),_l.Tb(14,"div",78),_l.Tb(15,"div",79),_l.Tb(16,"label",82),_l.Fc(17,"Company Name"),_l.Sb(),_l.Pb(18,"input",83),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(19,"form"),_l.Tb(20,"div",26),_l.Tb(21,"div",78),_l.Tb(22,"div",79),_l.Tb(23,"label",84),_l.Fc(24,"Category"),_l.Sb(),_l.Tb(25,"select",85),_l.Tb(26,"option",48),_l.Fc(27,"Choose"),_l.Sb(),_l.Tb(28,"option",49),_l.Fc(29,"1"),_l.Sb(),_l.Tb(30,"option",50),_l.Fc(31,"2"),_l.Sb(),_l.Tb(32,"option",51),_l.Fc(33,"3"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(34,"div",78),_l.Tb(35,"div",79),_l.Tb(36,"label",86),_l.Fc(37,"Scale"),_l.Sb(),_l.Tb(38,"select",87),_l.Tb(39,"option",48),_l.Fc(40,"Choose"),_l.Sb(),_l.Tb(41,"option",49),_l.Fc(42,"Small"),_l.Sb(),_l.Tb(43,"option",50),_l.Fc(44,"Big"),_l.Sb(),_l.Tb(45,"option",51),_l.Fc(46,"Medium"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(47,"form"),_l.Tb(48,"div",26),_l.Tb(49,"div",78),_l.Tb(50,"div",79),_l.Tb(51,"label",88),_l.Fc(52,"Experience"),_l.Sb(),_l.Pb(53,"input",89),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(54,"div",90),_l.Tb(55,"button",91),_l.bc("click",(function(t){return _l.wc(i),_l.fc().successSwal("saved")})),_l.Fc(56," Save "),_l.Sb(),_l.Tb(57,"button",92),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(58," Close "),_l.Sb(),_l.Sb()}}var Ah=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),Oh=function(){function t(t,e){this.zone=t,this.modalService=e,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"1111",start:"2011/04/25",category:"1",name:"John",status:"12",type:"Cash Out",reg:"Company 1",desc:"Testing",scale:"Big"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"1112",start:"2011/07/25",category:"2",name:"Ahmad",status:"4",type:"Cash Out",reg:"Company 1",desc:"Cleaning supplies",scale:"Small"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"1113",start:"2009/01/12",category:"3",name:"Trish",status:"6",type:"Cash Out",reg:"Company 2",desc:"Testing",scale:"Big"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"1114",start:"2012/03/29",category:"4",name:"Sara",status:"9",type:"Cash Out",reg:"Company 4",desc:"Staff coffee",scale:"Big"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"1115",start:"2008/11/28",category:"5",name:"Malek",status:"3",type:"Cash Out",reg:"Company 2",desc:"Staff coffee",scale:"Medium"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"1116",start:"2011/07/25",category:"6",name:"Cheng Hong",status:"14",type:"Cash Out",reg:"Company 1",desc:"Cleaning supplies",scale:"Medium"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"1117",start:"2008/11/28",category:"7",name:"Arumugam",status:"23",type:"Cash Out",reg:"Company 1",desc:"Testing",scale:"Small"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"1118",start:"2009/01/12",category:"8",name:"Ronaldo",status:"9",type:"Cash Out",reg:"Company 5",desc:"Testing",scale:"Small"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"1119",start:"2012/03/29",category:"9",name:"Neymar",status:"3",type:"Cash Out",reg:"Company 4",desc:"Cleaning supplies",scale:"Big"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"1121",start:"2008/11/28",category:"10",name:"John",status:"4",type:"Cash Out",reg:"Company 5",desc:"Staff coffee",scale:"Medium"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"1122",start:"2011/04/25",category:"1",name:"John",status:"11",type:"Cash Out",reg:"Company 3",desc:"Testing",scale:"Big"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"1123",start:"2009/01/12",category:"2",name:"John",status:"6",type:"Cash Out",reg:"Company 4",desc:"Cleaning supplies",scale:"Medium"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"1124",start:"2012/03/29",category:"3",name:"John",status:"3",type:"Cash Out",reg:"Company 1",desc:"Testing",scale:"Small"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"1125",start:"2008/11/28",category:"4",name:"John",status:"19",type:"Cash Out",reg:"Company 1",desc:"Testing",scale:"Big"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"1126",start:"2009/01/12",category:"5",name:"John",status:"12",type:"Cash Out",reg:"Company 6",desc:"Cleaning supplies",scale:"Medium"}],this.SelectionType=Ah,this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"}),this.modalRef.hide()},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-procurement-vendor-list"]],decls:202,vars:10,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-handshake","text-dark"],["href","javascript:void(0)",1,"text-dark"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row","justify-content-md-center"],[1,"col-sm-3","col-md-6","col-lg-4","mb-4"],[1,"card","border-light","shadow-sm"],[1,"card-body"],[1,"row","d-block","d-xl-flex","align-items-center"],[1,"col-12","px-xl-0","text-center"],[1,"d-none","d-sm-block"],[1,"h4"],[1,"h3","mb-1","text-success"],[1,"col-sm-3","col-md-6","col-lg-4"],[1,"h3","mb-1","text-danger"],[1,"h3","mb-1","text-primary"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"table-responsive"],[1,"table","table-centered","table-nowrap","mb-0","rounded"],[1,"thead-light"],[1,"progress",2,"height","20px"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success",2,"width","25%"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-danger",2,"width","95%"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-info",2,"width","55%"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-secondary",2,"width","76%"],[1,"text-dark"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-gray",2,"width","64%"],[1,"col-md-6"],[1,"col-xl-6"],[1,"form-group"],["for","exampleFormControlSelect2"],["id","exampleFormControlSelect2",1,"form-control"],["selected",""],["value","1"],["value","2"],["value","3"],[1,"col-xl-12","text-right"],["type","button",1,"btn","btn-default",3,"click"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["createUser",""],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"col-6"],[1,"mb-4"],["for","vendorid"],["type","text","placeholder","eg 23","id","vendorid",1,"form-control"],["for","companyname2"],["type","text","placeholder","eg Maju","id","companyname2",1,"form-control"],["for","category3"],["id","category3",1,"form-control"],["for","scale3"],["id","scale3",1,"form-control"],["for","experience"],["type","text","placeholder","eg 7 years","id","experience",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){1&t&&(_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Vendor List"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Tb(12,"li",8),_l.Tb(13,"a",11),_l.Fc(14," Procurement "),_l.Sb(),_l.Sb(),_l.Tb(15,"li",12),_l.Fc(16," Vendor List "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(17,"div",13),_l.Tb(18,"div",14),_l.Tb(19,"div",15),_l.Tb(20,"div",16),_l.Tb(21,"div",17),_l.Tb(22,"div",18),_l.Tb(23,"div",19),_l.Tb(24,"h2",20),_l.Fc(25,"Contracted"),_l.Sb(),_l.Tb(26,"h3",21),_l.Fc(27,"64%"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(28,"div",22),_l.Tb(29,"div",15),_l.Tb(30,"div",16),_l.Tb(31,"div",17),_l.Tb(32,"div",18),_l.Tb(33,"div",19),_l.Tb(34,"h2",20),_l.Fc(35,"Unlisted"),_l.Sb(),_l.Tb(36,"h3",23),_l.Fc(37,"45%"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(38,"div",22),_l.Tb(39,"div",15),_l.Tb(40,"div",16),_l.Tb(41,"div",17),_l.Tb(42,"div",18),_l.Tb(43,"div",19),_l.Tb(44,"h2",20),_l.Fc(45,"Vendors"),_l.Sb(),_l.Tb(46,"h3",24),_l.Fc(47,"81%"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(48,"div",25),_l.Tb(49,"div",26),_l.Tb(50,"div",27),_l.Tb(51,"div",28),_l.Tb(52,"div",29),_l.Tb(53,"div",30),_l.Tb(54,"div",31),_l.Tb(55,"h5",32),_l.Fc(56," Rate of Contract Compliance by Vendors Category "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(57,"div",16),_l.Tb(58,"div",33),_l.Tb(59,"table",34),_l.Tb(60,"thead",35),_l.Tb(61,"tr"),_l.Tb(62,"th"),_l.Fc(63,"CATEGORY & TOP VENDORS"),_l.Sb(),_l.Tb(64,"th"),_l.Fc(65,"# VENDORS"),_l.Sb(),_l.Tb(66,"th"),_l.Fc(67,"SHARE OF MANAGED VENDORS BY CATEGORY"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(68,"tbody"),_l.Tb(69,"tr"),_l.Tb(70,"td"),_l.Fc(71,"Category 6"),_l.Sb(),_l.Tb(72,"td"),_l.Fc(73,"28"),_l.Sb(),_l.Tb(74,"td"),_l.Tb(75,"div",36),_l.Tb(76,"div",37),_l.Fc(77," 25% "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(78,"tr"),_l.Tb(79,"td"),_l.Fc(80,"Category 6"),_l.Sb(),_l.Tb(81,"td"),_l.Fc(82,"28"),_l.Sb(),_l.Tb(83,"td"),_l.Tb(84,"div",36),_l.Tb(85,"div",38),_l.Fc(86," 95% "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(87,"tr"),_l.Tb(88,"td"),_l.Fc(89,"Category 6"),_l.Sb(),_l.Tb(90,"td"),_l.Fc(91,"28"),_l.Sb(),_l.Tb(92,"td"),_l.Tb(93,"div",36),_l.Tb(94,"div",39),_l.Fc(95," 55% "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(96,"tr"),_l.Tb(97,"td"),_l.Fc(98,"Category 6"),_l.Sb(),_l.Tb(99,"td"),_l.Fc(100,"28"),_l.Sb(),_l.Tb(101,"td"),_l.Tb(102,"div",36),_l.Tb(103,"div",40),_l.Tb(104,"div",41),_l.Fc(105,"76%"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(106,"tr"),_l.Tb(107,"td"),_l.Fc(108,"Category 6"),_l.Sb(),_l.Tb(109,"td"),_l.Fc(110,"28"),_l.Sb(),_l.Tb(111,"td"),_l.Tb(112,"div",36),_l.Tb(113,"div",42),_l.Fc(114," 64% "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(115,"div",27),_l.Tb(116,"div",28),_l.Tb(117,"div",29),_l.Tb(118,"div",30),_l.Tb(119,"div",43),_l.Tb(120,"h5",32),_l.Fc(121,"Search Vendor"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(122,"div",16),_l.Tb(123,"div",26),_l.Tb(124,"div",44),_l.Tb(125,"div",45),_l.Tb(126,"label",46),_l.Fc(127,"Category"),_l.Sb(),_l.Tb(128,"select",47),_l.Tb(129,"option",48),_l.Fc(130,"Choose"),_l.Sb(),_l.Tb(131,"option",49),_l.Fc(132,"1"),_l.Sb(),_l.Tb(133,"option",50),_l.Fc(134,"2"),_l.Sb(),_l.Tb(135,"option",51),_l.Fc(136,"3"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(137,"div",44),_l.Tb(138,"div",45),_l.Tb(139,"label",46),_l.Fc(140,"Scale"),_l.Sb(),_l.Tb(141,"select",47),_l.Tb(142,"option",48),_l.Fc(143,"Choose"),_l.Sb(),_l.Tb(144,"option",49),_l.Fc(145,"Big"),_l.Sb(),_l.Tb(146,"option",50),_l.Fc(147,"Medium"),_l.Sb(),_l.Tb(148,"option",51),_l.Fc(149,"Small"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(150,"div",52),_l.Tb(151,"button",53),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(152," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(153,"div",27),_l.Tb(154,"div",28),_l.Tb(155,"div",29),_l.Tb(156,"div",30),_l.Tb(157,"div",31),_l.Tb(158,"h5",32),_l.Fc(159,"List of Vendor"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(160,"div",16),_l.Tb(161,"div",54),_l.Tb(162,"div",26),_l.Tb(163,"div",55),_l.Tb(164,"div",56),_l.Tb(165,"label"),_l.Fc(166," Show "),_l.Tb(167,"select",57),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(168,"option",58),_l.Fc(169,"5"),_l.Sb(),_l.Tb(170,"option",59),_l.Fc(171,"10"),_l.Sb(),_l.Tb(172,"option",60),_l.Fc(173,"15"),_l.Sb(),_l.Tb(174,"option",61),_l.Fc(175,"All"),_l.Sb(),_l.Sb(),_l.Fc(176," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(177,"div",55),_l.Tb(178,"div",62),_l.Tb(179,"label"),_l.Tb(180,"input",63),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(181,"ngx-datatable",64),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(182,"ngx-datatable-column"),_l.Dc(183,yh,2,0,"ng-template",65),_l.Dc(184,gh,1,1,"ng-template",66),_l.Sb(),_l.Tb(185,"ngx-datatable-column"),_l.Dc(186,bh,2,0,"ng-template",65),_l.Dc(187,vh,1,1,"ng-template",66),_l.Sb(),_l.Tb(188,"ngx-datatable-column"),_l.Dc(189,_h,2,0,"ng-template",65),_l.Dc(190,xh,1,1,"ng-template",66),_l.Sb(),_l.Tb(191,"ngx-datatable-column"),_l.Dc(192,Sh,2,0,"ng-template",65),_l.Dc(193,wh,1,1,"ng-template",66),_l.Sb(),_l.Tb(194,"ngx-datatable-column"),_l.Dc(195,Th,2,0,"ng-template",65),_l.Dc(196,Ph,1,1,"ng-template",66),_l.Sb(),_l.Tb(197,"ngx-datatable-column"),_l.Dc(198,Ch,2,0,"ng-template",65),_l.Dc(199,kh,6,0,"ng-template",66),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(200,Ih,59,0,"ng-template",null,67,_l.Ec)),2&t&&(_l.Bb(168),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,s.v,s.n,s.o],styles:[""]}),t}();function Dh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Proccurement ID"),_l.Sb())}function Fh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.accNo," ")}function Mh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Title"),_l.Sb())}function Eh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.title," ")}function Lh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Date"),_l.Sb())}function Rh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.start," ")}function Vh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Status"),_l.Sb())}function jh(t,e){1&t&&(_l.Tb(0,"span",63),_l.Fc(1,"Approved"),_l.Sb())}function zh(t,e){1&t&&(_l.Tb(0,"span",64),_l.Fc(1,"Rejected"),_l.Sb())}function Bh(t,e){if(1&t&&(_l.Dc(0,jh,2,0,"span",61),_l.Dc(1,zh,2,0,"span",62)),2&t){var i=e.row;_l.lc("ngIf","active"==i.status),_l.Bb(1),_l.lc("ngIf","unactive"==i.status)}}function Nh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function Uh(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",65),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(148);return e.openModal(r)})),_l.Tb(1,"span",66),_l.Pb(2,"i",67),_l.Sb(),_l.Sb(),_l.Tb(3,"button",68),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",66),_l.Pb(5,"i",69),_l.Sb(),_l.Sb()}}function Xh(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",70),_l.Tb(1,"h6",71),_l.Fc(2," Add Procurement "),_l.Sb(),_l.Tb(3,"button",72),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",73),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",74),_l.Tb(7,"form"),_l.Tb(8,"div",27),_l.Tb(9,"div",75),_l.Tb(10,"div",76),_l.Tb(11,"label",77),_l.Fc(12,"Procurement ID"),_l.Sb(),_l.Pb(13,"input",78),_l.Sb(),_l.Sb(),_l.Tb(14,"div",75),_l.Tb(15,"div",76),_l.Tb(16,"label",79),_l.Fc(17,"Title"),_l.Sb(),_l.Pb(18,"input",80),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(19,"form"),_l.Tb(20,"div",27),_l.Tb(21,"div",75),_l.Tb(22,"div",76),_l.Tb(23,"label",81),_l.Fc(24,"Data 1"),_l.Sb(),_l.Tb(25,"div",82),_l.Pb(26,"input",83),_l.Tb(27,"label",84),_l.Tb(28,"span",85),_l.Fc(29,"Choose file..."),_l.Sb(),_l.Tb(30,"span",86),_l.Fc(31,"Browse"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(32,"div",75),_l.Tb(33,"div",76),_l.Tb(34,"label",87),_l.Fc(35,"Data 2"),_l.Sb(),_l.Tb(36,"div",82),_l.Pb(37,"input",88),_l.Tb(38,"label",89),_l.Tb(39,"span",85),_l.Fc(40,"Choose file..."),_l.Sb(),_l.Tb(41,"span",86),_l.Fc(42,"Browse"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(43,"form"),_l.Tb(44,"div",27),_l.Tb(45,"div",75),_l.Tb(46,"div",76),_l.Tb(47,"label",90),_l.Fc(48,"Data 3"),_l.Sb(),_l.Tb(49,"div",82),_l.Pb(50,"input",91),_l.Tb(51,"label",92),_l.Tb(52,"span",85),_l.Fc(53,"Choose file..."),_l.Sb(),_l.Tb(54,"span",86),_l.Fc(55,"Browse"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(56,"div",75),_l.Tb(57,"div",76),_l.Tb(58,"label",93),_l.Fc(59,"Data 4"),_l.Sb(),_l.Tb(60,"div",82),_l.Pb(61,"input",94),_l.Tb(62,"label",95),_l.Tb(63,"span",85),_l.Fc(64,"Choose file..."),_l.Sb(),_l.Tb(65,"span",86),_l.Fc(66,"Browse"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(67,"form"),_l.Tb(68,"div",27),_l.Tb(69,"div",96),_l.Tb(70,"div",76),_l.Tb(71,"label",97),_l.Fc(72,"Data 5"),_l.Sb(),_l.Tb(73,"div",82),_l.Pb(74,"input",98),_l.Tb(75,"label",99),_l.Tb(76,"span",85),_l.Fc(77,"Choose file..."),_l.Sb(),_l.Tb(78,"span",86),_l.Fc(79,"Browse"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(80,"p"),_l.Fc(81,"Procurement Process"),_l.Sb(),_l.Tb(82,"form"),_l.Tb(83,"div",27),_l.Tb(84,"div",75),_l.Tb(85,"div",76),_l.Tb(86,"fieldset"),_l.Tb(87,"label"),_l.Fc(88,"Status"),_l.Sb(),_l.Tb(89,"div",100),_l.Pb(90,"input",101),_l.Tb(91,"label",102),_l.Fc(92," Approved "),_l.Sb(),_l.Sb(),_l.Tb(93,"div",100),_l.Pb(94,"input",103),_l.Tb(95,"label",104),_l.Fc(96," Rejected "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(97,"div",75),_l.Tb(98,"div",76),_l.Tb(99,"label",105),_l.Fc(100,"Note"),_l.Sb(),_l.Pb(101,"textarea",106),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(102,"div",107),_l.Tb(103,"button",108),_l.bc("click",(function(t){return _l.wc(i),_l.fc().successSwal("saved")})),_l.Fc(104," Save "),_l.Sb(),_l.Tb(105,"button",109),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(106," Close "),_l.Sb(),_l.Sb()}}var Hh=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),Wh=function(){function t(t,e){this.zone=t,this.modalService=e,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Ahmad",status:"unactive",type:"Full time",title:"Otter, north american river"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Trish",status:"active",type:"Full time",title:"Asian false vampire bat"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"Sara",status:"active",type:"Part time",title:"Pelican, australian"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Malek",status:"unactive",type:"Part time",title:"Spotted-tailed quoll"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Cheng Hong",status:"unactive",type:"Full time",title:"Blue-cheeked cordon"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Arumugam",status:"active",type:"Full time",title:"Blue-cheeked cordon"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Ronaldo",status:"active",type:"Part time",title:"Blue-cheeked cordon"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"Neymar",status:"unactive",type:"Part time",title:"Blue-cheeked cordon"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$385,750",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon"}],this.SelectionType=Hh,this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartAnalysis1()}))},t.prototype.getChartAnalysis1=function(){Ga(bl),Ga(vl);var t=Ya("chartanalysis1",Mo);t.data=[{date:"2019-07-27",value:13},{date:"2019-07-28",value:11},{date:"2019-07-29",value:15},{date:"2019-07-30",value:16},{date:"2019-07-31",value:18},{date:"2019-08-01",value:13},{date:"2019-08-02",value:22},{date:"2019-08-03",value:23},{date:"2019-08-04",value:20},{date:"2019-08-05",value:17},{date:"2019-08-06",value:16},{date:"2019-08-07",value:18},{date:"2019-08-08",value:21},{date:"2019-08-09",value:26},{date:"2019-08-10",value:24},{date:"2019-08-11",value:29},{date:"2019-08-12",value:32},{date:"2019-08-13",value:18},{date:"2019-08-14",value:24},{date:"2019-08-15",value:22},{date:"2019-08-16",value:18},{date:"2019-08-17",value:19},{date:"2019-08-18",value:14},{date:"2019-08-19",value:15},{date:"2019-08-20",value:12},{date:"2019-08-21",value:8},{date:"2019-08-22",value:9},{date:"2019-08-23",value:8},{date:"2019-08-24",value:7},{date:"2019-08-25",value:5},{date:"2019-08-26",value:11},{date:"2019-08-27",value:13},{date:"2019-08-28",value:18},{date:"2019-08-29",value:20},{date:"2019-08-30",value:29},{date:"2019-08-31",value:33},{date:"2019-09-01",value:42},{date:"2019-09-02",value:35},{date:"2019-09-03",value:31},{date:"2019-09-04",value:47},{date:"2019-09-05",value:52},{date:"2019-09-06",value:46},{date:"2019-09-07",value:41},{date:"2019-09-08",value:43},{date:"2019-09-09",value:40},{date:"2019-09-10",value:39},{date:"2019-09-11",value:34},{date:"2019-09-12",value:29},{date:"2019-09-13",value:34},{date:"2019-09-14",value:37},{date:"2019-09-15",value:42},{date:"2019-09-16",value:49},{date:"2019-09-17",value:46},{date:"2019-09-18",value:47},{date:"2019-09-19",value:55},{date:"2019-09-20",value:59},{date:"2019-09-21",value:58},{date:"2019-09-22",value:57},{date:"2019-09-23",value:61},{date:"2019-09-24",value:59},{date:"2019-09-25",value:67},{date:"2019-09-26",value:65},{date:"2019-09-27",value:61},{date:"2019-09-28",value:66},{date:"2019-09-29",value:69},{date:"2019-09-30",value:71},{date:"2019-10-01",value:67},{date:"2019-10-02",value:63},{date:"2019-10-03",value:46},{date:"2019-10-04",value:32},{date:"2019-10-05",value:21},{date:"2019-10-06",value:18},{date:"2019-10-07",value:21},{date:"2019-10-08",value:28},{date:"2019-10-09",value:27},{date:"2019-10-10",value:36},{date:"2019-10-11",value:33},{date:"2019-10-12",value:31},{date:"2019-10-13",value:30},{date:"2019-10-14",value:34},{date:"2019-10-15",value:38},{date:"2019-10-16",value:37},{date:"2019-10-17",value:44},{date:"2019-10-18",value:49},{date:"2019-10-19",value:53},{date:"2019-10-20",value:57},{date:"2019-10-21",value:60},{date:"2019-10-22",value:61},{date:"2019-10-23",value:69},{date:"2019-10-24",value:67},{date:"2019-10-25",value:72},{date:"2019-10-26",value:77},{date:"2019-10-27",value:75},{date:"2019-10-28",value:70},{date:"2019-10-29",value:72},{date:"2019-10-30",value:70},{date:"2019-10-31",value:72},{date:"2019-11-01",value:73},{date:"2019-11-02",value:67},{date:"2019-11-03",value:68},{date:"2019-11-04",value:65},{date:"2019-11-05",value:71},{date:"2019-11-06",value:75},{date:"2019-11-07",value:74},{date:"2019-11-08",value:71},{date:"2019-11-09",value:76},{date:"2019-11-10",value:77},{date:"2019-11-11",value:81},{date:"2019-11-12",value:83},{date:"2019-11-13",value:80},{date:"2019-11-14",value:81},{date:"2019-11-15",value:87},{date:"2019-11-16",value:82},{date:"2019-11-17",value:86},{date:"2019-11-18",value:80},{date:"2019-11-19",value:87},{date:"2019-11-20",value:83},{date:"2019-11-21",value:85},{date:"2019-11-22",value:84},{date:"2019-11-23",value:82},{date:"2019-11-24",value:73},{date:"2019-11-25",value:71},{date:"2019-11-26",value:75},{date:"2019-11-27",value:79},{date:"2019-11-28",value:70},{date:"2019-11-29",value:73},{date:"2019-11-30",value:61},{date:"2019-12-01",value:62},{date:"2019-12-02",value:66},{date:"2019-12-03",value:65},{date:"2019-12-04",value:73},{date:"2019-12-05",value:79},{date:"2019-12-06",value:78},{date:"2019-12-07",value:78},{date:"2019-12-08",value:78},{date:"2019-12-09",value:74},{date:"2019-12-10",value:73},{date:"2019-12-11",value:75},{date:"2019-12-12",value:70},{date:"2019-12-13",value:77},{date:"2019-12-14",value:67},{date:"2019-12-15",value:62},{date:"2019-12-16",value:64},{date:"2019-12-17",value:61},{date:"2019-12-18",value:59},{date:"2019-12-19",value:53},{date:"2019-12-20",value:54},{date:"2019-12-21",value:56},{date:"2019-12-22",value:59},{date:"2019-12-23",value:58},{date:"2019-12-24",value:55},{date:"2019-12-25",value:52},{date:"2019-12-26",value:54},{date:"2019-12-27",value:50},{date:"2019-12-28",value:50},{date:"2019-12-29",value:51},{date:"2019-12-30",value:52},{date:"2019-12-31",value:58},{date:"2020-01-01",value:60},{date:"2020-01-02",value:67},{date:"2020-01-03",value:64},{date:"2020-01-04",value:66},{date:"2020-01-05",value:60},{date:"2020-01-06",value:63},{date:"2020-01-07",value:61},{date:"2020-01-08",value:60},{date:"2020-01-09",value:65},{date:"2020-01-10",value:75},{date:"2020-01-11",value:77},{date:"2020-01-12",value:78},{date:"2020-01-13",value:70},{date:"2020-01-14",value:70},{date:"2020-01-15",value:73},{date:"2020-01-16",value:71},{date:"2020-01-17",value:74},{date:"2020-01-18",value:78},{date:"2020-01-19",value:85},{date:"2020-01-20",value:82},{date:"2020-01-21",value:83},{date:"2020-01-22",value:88},{date:"2020-01-23",value:85},{date:"2020-01-24",value:85},{date:"2020-01-25",value:80},{date:"2020-01-26",value:87},{date:"2020-01-27",value:84},{date:"2020-01-28",value:83},{date:"2020-01-29",value:84},{date:"2020-01-30",value:81}],t.dateFormatter.inputDateFormat="yyyy-MM-dd";var e=t.xAxes.push(new To),i=(t.yAxes.push(new xo),t.series.push(new jo));i.dataFields.valueY="value",i.dataFields.dateX="date",i.tooltipText="{value}",i.strokeWidth=2,i.minBulletDistance=15,i.tooltip.background.cornerRadius=20,i.tooltip.background.strokeOpacity=0,i.tooltip.pointerOrientation="vertical",i.tooltip.label.minWidth=40,i.tooltip.label.minHeight=40,i.tooltip.label.textAlign="middle",i.tooltip.label.textValign="middle";var r=i.bullets.push(new hl);r.circle.strokeWidth=2,r.circle.radius=4,r.circle.fill=Ue("#fff"),r.states.create("hover").properties.scale=1.3,t.cursor=new yl,t.cursor.behavior="panXY",t.cursor.xAxis=e,t.cursor.snapToSeries=i,t.scrollbarY=new ua,t.scrollbarY.parent=t.leftAxesContainer,t.scrollbarY.toBack();var n=new Do;n.series.push(i),t.scrollbarX=n,t.scrollbarX.parent=t.bottomAxesContainer,e.start=.79,e.keepSelection=!0,this.chart1=t},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"}),this.modalRef.hide()},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-procurement-analysis"]],decls:149,vars:10,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-handshake","text-dark"],["href","javascript:void(0)",1,"text-dark"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row","justify-content-md-center"],[1,"col-sm-3","col-md-6","col-lg-4","mb-4"],[1,"card","border-light","shadow-sm"],[1,"card-body"],[1,"row","d-block","d-xl-flex","align-items-center"],[1,"col-12","px-xl-0","text-center"],[1,"d-none","d-sm-block"],[1,"h4"],[1,"h3","mb-1"],[1,"small","mt-2"],[1,"fas","fa-angle-up","text-success"],[1,"text-success","font-weight-bold"],[1,"col-sm-3","col-md-6","col-lg-4"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"chart"],["id","chartanalysis1",1,"amchart"],[1,"col-md-6"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-default",3,"click"],[1,"form-group"],["for","exampleFormControlSelect2"],["id","exampleFormControlSelect2",1,"form-control"],["selected",""],["value","1"],["value","2"],["value","3"],[1,"col-xl-12","text-right"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["createUser",""],["class","badge badge-pill badge-success",4,"ngIf"],["class","badge badge-pill badge-warning",4,"ngIf"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-warning"],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"col-6"],[1,"mb-4"],["for","procurementid"],["type","text","placeholder","eg RB-CS-240","id","procurementid",1,"form-control"],["for","title2"],["type","text","placeholder","eg Otter","id","title2",1,"form-control"],["for","data1"],[1,"form-file","mb-3"],["type","file","id","customFile1",1,"form-file-input"],["for","customFile1",1,"form-file-label"],[1,"form-file-text"],[1,"form-file-button"],["for","data2"],["type","file","id","customFile2",1,"form-file-input"],["for","customFile2",1,"form-file-label"],["for","data3"],["type","file","id","customFile3",1,"form-file-input"],["for","customFile3",1,"form-file-label"],["for","data4"],["type","file","id","customFile4",1,"form-file-input"],["for","customFile4",1,"form-file-label"],[1,"col-12"],["for","data5"],["type","file","id","customFile5",1,"form-file-input"],["for","customFile5",1,"form-file-label"],[1,"form-check"],["type","radio","name","exampleRadios","id","exampleRadios1","value","option1","checked","",1,"form-check-input"],["for","exampleRadios1",1,"form-check-label"],["type","radio","name","exampleRadios","id","exampleRadios2","value","option2",1,"form-check-input"],["for","exampleRadios2",1,"form-check-label"],["for","textarea5"],["placeholder","Enter your message...","id","textarea5","rows","2",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Analysis"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Tb(12,"li",8),_l.Tb(13,"a",11),_l.Fc(14," Procurement "),_l.Sb(),_l.Sb(),_l.Tb(15,"li",12),_l.Fc(16," Analysis "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(17,"div",13),_l.Tb(18,"div",14),_l.Tb(19,"div",15),_l.Tb(20,"div",16),_l.Tb(21,"div",17),_l.Tb(22,"div",18),_l.Tb(23,"div",19),_l.Tb(24,"h2",20),_l.Fc(25,"Total of Procurement"),_l.Sb(),_l.Tb(26,"h3",21),_l.Fc(27,"RM1276.09"),_l.Sb(),_l.Sb(),_l.Tb(28,"div",22),_l.Pb(29,"span",23),_l.Tb(30,"span",24),_l.Fc(31,"41.2%"),_l.Sb(),_l.Fc(32," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(33,"div",25),_l.Tb(34,"div",15),_l.Tb(35,"div",16),_l.Tb(36,"div",17),_l.Tb(37,"div",18),_l.Tb(38,"div",19),_l.Tb(39,"h2",20),_l.Fc(40,"Approved Procurement"),_l.Sb(),_l.Tb(41,"h3",21),_l.Fc(42,"RM987.23"),_l.Sb(),_l.Sb(),_l.Tb(43,"div",22),_l.Pb(44,"span",23),_l.Tb(45,"span",24),_l.Fc(46,"41.1%"),_l.Sb(),_l.Fc(47," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(48,"div",25),_l.Tb(49,"div",15),_l.Tb(50,"div",16),_l.Tb(51,"div",17),_l.Tb(52,"div",18),_l.Tb(53,"div",19),_l.Tb(54,"h2",20),_l.Fc(55,"Rejected Procurement"),_l.Sb(),_l.Tb(56,"h3",21),_l.Fc(57,"RM182.98"),_l.Sb(),_l.Sb(),_l.Tb(58,"div",22),_l.Pb(59,"span",23),_l.Tb(60,"span",24),_l.Fc(61,"11.11%"),_l.Sb(),_l.Fc(62," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(63,"div",26),_l.Tb(64,"div",27),_l.Tb(65,"div",28),_l.Tb(66,"div",29),_l.Tb(67,"div",30),_l.Tb(68,"div",31),_l.Tb(69,"div",32),_l.Tb(70,"h5",33),_l.Fc(71,"Procurement Amount Distribution"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(72,"div",16),_l.Tb(73,"div",34),_l.Pb(74,"div",35),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(75,"div",28),_l.Tb(76,"div",29),_l.Tb(77,"div",30),_l.Tb(78,"div",31),_l.Tb(79,"div",36),_l.Tb(80,"h5",33),_l.Fc(81,"List of Budgetary Reports"),_l.Sb(),_l.Sb(),_l.Tb(82,"div",37),_l.Tb(83,"button",38),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(148);return e.openModal(r)})),_l.Fc(84," Add New "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(85,"div",16),_l.Tb(86,"div",27),_l.Tb(87,"div",28),_l.Tb(88,"div",39),_l.Tb(89,"label",40),_l.Fc(90,"Search Procurement"),_l.Sb(),_l.Tb(91,"select",41),_l.Tb(92,"option",42),_l.Fc(93,"Choose"),_l.Sb(),_l.Tb(94,"option",43),_l.Fc(95,"One"),_l.Sb(),_l.Tb(96,"option",44),_l.Fc(97,"Two"),_l.Sb(),_l.Tb(98,"option",45),_l.Fc(99,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(100,"div",46),_l.Tb(101,"button",38),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(102," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(103,"div",28),_l.Tb(104,"div",29),_l.Tb(105,"div",30),_l.Tb(106,"div",31),_l.Tb(107,"div",32),_l.Tb(108,"h5",33),_l.Fc(109,"List of Fixed Assets"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(110,"div",16),_l.Tb(111,"div",47),_l.Tb(112,"div",27),_l.Tb(113,"div",48),_l.Tb(114,"div",49),_l.Tb(115,"label"),_l.Fc(116," Show "),_l.Tb(117,"select",50),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(118,"option",51),_l.Fc(119,"5"),_l.Sb(),_l.Tb(120,"option",52),_l.Fc(121,"10"),_l.Sb(),_l.Tb(122,"option",53),_l.Fc(123,"15"),_l.Sb(),_l.Tb(124,"option",54),_l.Fc(125,"All"),_l.Sb(),_l.Sb(),_l.Fc(126," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(127,"div",48),_l.Tb(128,"div",55),_l.Tb(129,"label"),_l.Tb(130,"input",56),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(131,"ngx-datatable",57),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(132,"ngx-datatable-column"),_l.Dc(133,Dh,2,0,"ng-template",58),_l.Dc(134,Fh,1,1,"ng-template",59),_l.Sb(),_l.Tb(135,"ngx-datatable-column"),_l.Dc(136,Mh,2,0,"ng-template",58),_l.Dc(137,Eh,1,1,"ng-template",59),_l.Sb(),_l.Tb(138,"ngx-datatable-column"),_l.Dc(139,Lh,2,0,"ng-template",58),_l.Dc(140,Rh,1,1,"ng-template",59),_l.Sb(),_l.Tb(141,"ngx-datatable-column"),_l.Dc(142,Vh,2,0,"ng-template",58),_l.Dc(143,Bh,2,2,"ng-template",59),_l.Sb(),_l.Tb(144,"ngx-datatable-column"),_l.Dc(145,Nh,2,0,"ng-template",58),_l.Dc(146,Uh,6,0,"ng-template",59),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(147,Xh,107,0,"ng-template",null,60,_l.Ec)}2&t&&(_l.Bb(118),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,n.l,s.v,s.n,s.o],styles:[""]}),t}();function Yh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Category"),_l.Sb())}function Gh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.category," ")}function qh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Year"),_l.Sb())}function Kh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.year," ")}function Zh(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Quarter"),_l.Sb())}function Jh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.category," ")}function $h(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Date of Reports"),_l.Sb())}function Qh(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.start," ")}function tp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Status"),_l.Sb())}function ep(t,e){1&t&&(_l.Tb(0,"span",54),_l.Fc(1,"Approved"),_l.Sb())}function ip(t,e){1&t&&(_l.Tb(0,"span",55),_l.Fc(1,"Rejected"),_l.Sb())}function rp(t,e){if(1&t&&(_l.Dc(0,ep,2,0,"span",52),_l.Dc(1,ip,2,0,"span",53)),2&t){var i=e.row;_l.lc("ngIf","active"==i.status),_l.Bb(1),_l.lc("ngIf","unactive"==i.status)}}function np(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Total (RM)"),_l.Sb())}function ap(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.debit," ")}function op(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function sp(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",56),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(159);return e.openModal(r)})),_l.Tb(1,"span",57),_l.Pb(2,"i",58),_l.Sb(),_l.Sb(),_l.Tb(3,"button",59),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",57),_l.Pb(5,"i",60),_l.Sb(),_l.Sb()}}function lp(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",61),_l.Tb(1,"h6",62),_l.Fc(2," Add Sales Report "),_l.Sb(),_l.Tb(3,"button",63),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",64),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",65),_l.Tb(7,"form"),_l.Tb(8,"div",12),_l.Tb(9,"div",66),_l.Tb(10,"div",67),_l.Tb(11,"label",68),_l.Fc(12,"Company Name"),_l.Sb(),_l.Pb(13,"input",69),_l.Sb(),_l.Sb(),_l.Tb(14,"div",66),_l.Tb(15,"div",67),_l.Tb(16,"label",70),_l.Fc(17,"Category"),_l.Sb(),_l.Tb(18,"select",71),_l.Tb(19,"option",31),_l.Fc(20,"Choose"),_l.Sb(),_l.Tb(21,"option",32),_l.Fc(22,"Small"),_l.Sb(),_l.Tb(23,"option",33),_l.Fc(24,"Big"),_l.Sb(),_l.Tb(25,"option",34),_l.Fc(26,"Medium"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(27,"form"),_l.Tb(28,"div",12),_l.Tb(29,"div",72),_l.Tb(30,"div",67),_l.Tb(31,"label",73),_l.Fc(32,"Year"),_l.Sb(),_l.Tb(33,"select",74),_l.Tb(34,"option",31),_l.Fc(35,"Choose"),_l.Sb(),_l.Tb(36,"option",32),_l.Fc(37,"1"),_l.Sb(),_l.Tb(38,"option",33),_l.Fc(39,"2"),_l.Sb(),_l.Tb(40,"option",34),_l.Fc(41,"3"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(42,"div",72),_l.Tb(43,"div",67),_l.Tb(44,"label",75),_l.Fc(45,"Quarter"),_l.Sb(),_l.Tb(46,"select",76),_l.Tb(47,"option",31),_l.Fc(48,"Choose"),_l.Sb(),_l.Tb(49,"option",32),_l.Fc(50,"1"),_l.Sb(),_l.Tb(51,"option",33),_l.Fc(52,"2"),_l.Sb(),_l.Tb(53,"option",34),_l.Fc(54,"3"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(55,"div",72),_l.Tb(56,"div",67),_l.Tb(57,"fieldset"),_l.Tb(58,"label"),_l.Fc(59,"Status"),_l.Sb(),_l.Tb(60,"div",77),_l.Pb(61,"input",78),_l.Tb(62,"label",79),_l.Fc(63," Approved "),_l.Sb(),_l.Sb(),_l.Tb(64,"div",77),_l.Pb(65,"input",80),_l.Tb(66,"label",81),_l.Fc(67," Rejected "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(68,"form"),_l.Tb(69,"div",12),_l.Tb(70,"div",66),_l.Tb(71,"div",67),_l.Tb(72,"label",82),_l.Fc(73,"Person in Charge"),_l.Sb(),_l.Pb(74,"input",83),_l.Sb(),_l.Sb(),_l.Tb(75,"div",66),_l.Tb(76,"div",67),_l.Tb(77,"label",84),_l.Fc(78,"Date of Report"),_l.Sb(),_l.Tb(79,"div",85),_l.Tb(80,"span",86),_l.Pb(81,"span",87),_l.Sb(),_l.Pb(82,"input",88),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(83,"form"),_l.Tb(84,"div",12),_l.Tb(85,"div",89),_l.Tb(86,"div",67),_l.Tb(87,"label",90),_l.Fc(88,"Remarks by Report Creator"),_l.Sb(),_l.Pb(89,"textarea",91),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(90,"div",92),_l.Tb(91,"button",93),_l.bc("click",(function(t){return _l.wc(i),_l.fc().successSwal("downloaded")})),_l.Fc(92," Download Report "),_l.Sb(),_l.Tb(93,"button",94),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(94," Close "),_l.Sb(),_l.Sb()}}var up=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),cp=function(){function t(t,e){this.zone=t,this.modalService=e,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"1",year:"2011"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Ahmad",status:"unactive",type:"Full time",title:"Otter, north american river",category:"2",year:"2011"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Trish",status:"active",type:"Full time",title:"Asian false vampire bat",category:"3",year:"2009"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"Sara",status:"active",type:"Part time",title:"Pelican, australian",category:"3",year:"2019"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Malek",status:"unactive",type:"Part time",title:"Spotted-tailed quoll",category:"1",year:"2008"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Cheng Hong",status:"unactive",type:"Full time",title:"Blue-cheeked cordon",category:"2",year:"2011"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Arumugam",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"1",year:"2008"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Ronaldo",status:"active",type:"Part time",title:"Blue-cheeked cordon",category:"3",year:"2009"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"Neymar",status:"unactive",type:"Part time",title:"Blue-cheeked cordon",category:"1",year:"2019"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"1",year:"2008"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"2",year:"2011"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"2",year:"2009"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"1",year:"2019"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"3",year:"2008"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$385,750",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"2",year:"2009"}],this.SelectionType=up,this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose()),t.chart3&&(console.log("Chart disposed"),t.chart3.dispose()),t.chart4&&(console.log("Chart disposed"),t.chart4.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartSalesDistribution1(),t.getChartSalesDistribution2(),t.getChartSalesDistribution3(),t.getChartSalesDistribution4()}))},t.prototype.getChartSalesDistribution1=function(){Ga(wu),Ga(vl);var t=Ya("chartsales1",Mo);t.scrollbarX=new ua,t.data=[{country:"Jan",visits:3025},{country:"Feb",visits:1882},{country:"Mar",visits:1809},{country:"Apr",visits:1322},{country:"May",visits:1122},{country:"June",visits:1114},{country:"July",visits:984},{country:"Aug",visits:711},{country:"Sep",visits:665},{country:"Oct",visits:580},{country:"Nov",visits:443},{country:"Dec",visits:441}];var e=t.xAxes.push(new Io);e.dataFields.category="country",e.renderer.grid.template.location=0,e.renderer.minGridDistance=30,e.renderer.labels.template.horizontalCenter="right",e.renderer.labels.template.verticalCenter="middle",e.renderer.labels.template.rotation=270,e.tooltip.disabled=!0,e.renderer.minHeight=110,t.yAxes.push(new xo).renderer.minWidth=50;var i=t.series.push(new ks);i.sequencedInterpolation=!0,i.dataFields.valueY="visits",i.dataFields.categoryX="country",i.tooltipText="[{categoryX}: bold]{valueY}[/]",i.columns.template.strokeWidth=0,i.tooltip.pointerOrientation="vertical",i.columns.template.column.cornerRadiusTopLeft=10,i.columns.template.column.cornerRadiusTopRight=10,i.columns.template.column.fillOpacity=.8;var r=i.columns.template.column.states.create("hover");r.properties.cornerRadiusTopLeft=0,r.properties.cornerRadiusTopRight=0,r.properties.fillOpacity=1,i.columns.template.adapter.add("fill",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),t.cursor=new yl,this.chart1=t},t.prototype.getChartSalesDistribution2=function(){Ga(wu),Ga(vl);var t=Ya("chartsales2",ls);t.hiddenState.properties.opacity=0,t.data=[{country:"Online",litres:501.9},{country:"Reseller",litres:301.9},{country:"Special Order",litres:201.1},{country:"Order",litres:165.8}],t.innerRadius=80;var e=t.series.push(new ss);e.dataFields.value="litres",e.dataFields.category="country",this.chart2=t},t.prototype.getChartSalesDistribution3=function(){Ga(wu),Ga(vl);var t=Ya("chartsales3",Mo);t.padding(40,40,40,40);var e=t.yAxes.push(new Io);e.renderer.grid.template.location=0,e.dataFields.category="network",e.renderer.minGridDistance=1,e.renderer.inversed=!0,e.renderer.grid.template.disabled=!0,t.xAxes.push(new xo).min=0;var i=t.series.push(new ks);i.dataFields.categoryY="network",i.dataFields.valueX="MAU",i.tooltipText="{valueX.value}",i.columns.template.strokeOpacity=0,i.columns.template.column.cornerRadiusBottomRight=5,i.columns.template.column.cornerRadiusTopRight=5;var r=i.bullets.push(new ms);r.label.horizontalCenter="left",r.label.dx=10,r.label.text="{values.valueX.workingValue.formatNumber('#.0as')}",r.locationX=1,i.columns.template.adapter.add("fill",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),e.sortBySeries=i,t.data=[{network:"Johor",MAU:6255},{network:"Kedah",MAU:4300},{network:"Kelantan",MAU:7e3},{network:"Melaka",MAU:2465},{network:"N.Sembilan",MAU:3550},{network:"Pahang",MAU:8500},{network:"P.Pinang",MAU:4240},{network:"Perak",MAU:9295},{network:"Perlis",MAU:8600},{network:"Sabah",MAU:5310},{network:"Sarawak",MAU:1433},{network:"Selangor",MAU:1900}],this.chart3=t},t.prototype.getChartSalesDistribution4=function(){Ga(wu),Ga(vl);var t=Ya("chartsales4",Mo);t.padding(40,40,40,40);var e=t.yAxes.push(new Io);e.renderer.grid.template.location=0,e.dataFields.category="network",e.renderer.minGridDistance=1,e.renderer.inversed=!0,e.renderer.grid.template.disabled=!0,t.xAxes.push(new xo).min=0;var i=t.series.push(new ks);i.dataFields.categoryY="network",i.dataFields.valueX="MAU",i.tooltipText="{valueX.value}",i.columns.template.strokeOpacity=0,i.columns.template.column.cornerRadiusBottomRight=5,i.columns.template.column.cornerRadiusTopRight=5;var r=i.bullets.push(new ms);r.label.horizontalCenter="left",r.label.dx=10,r.label.text="{values.valueX.workingValue.formatNumber('#.0as')}",r.locationX=1,i.columns.template.adapter.add("fill",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),e.sortBySeries=i,t.data=[{network:"1",MAU:9465},{network:"2",MAU:7465},{network:"3",MAU:5675},{network:"4",MAU:3223}],this.chart4=t},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"}),this.modalRef.hide()},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-sales-distribution"]],decls:160,vars:10,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-chart-line","text-dark"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-6"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"card-body"],[1,"chart"],["id","chartsales1",1,"amchart"],["id","chartsales2",1,"amchart"],["id","chartsales3",1,"amchart"],["id","chartsales4",1,"amchart"],[1,"col-xl-12"],[1,"col-md-6"],[1,"col-xl-4"],[1,"form-group"],["for","exampleFormControlSelect2"],["id","exampleFormControlSelect2",1,"form-control"],["selected",""],["value","1"],["value","2"],["value","3"],[1,"col-xl-12","text-right"],["type","button",1,"btn","btn-default",3,"click"],[1,"col-md-6","text-right"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["createUser",""],["class","badge badge-pill badge-success",4,"ngIf"],["class","badge badge-pill badge-warning",4,"ngIf"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-warning"],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"col-6"],[1,"mb-4"],["for","companyname3"],["type","text","placeholder","eg MAJU","id","companyname3",1,"form-control"],["for","category5"],["id","category5",1,"form-control"],[1,"col-4"],["for","year2"],["id","year2",1,"form-control"],["for","quarter2"],["id","quarter2",1,"form-control"],[1,"form-check"],["type","radio","name","exampleRadios","id","exampleRadios1","value","option1","checked","",1,"form-check-input"],["for","exampleRadios1",1,"form-check-label"],["type","radio","name","exampleRadios","id","exampleRadios2","value","option2",1,"form-check-input"],["for","exampleRadios2",1,"form-check-label"],["for","pic1"],["type","text","placeholder","eg Mrs Ilya","id","pic1",1,"form-control"],["for","dateofreport"],[1,"input-group"],[1,"input-group-text"],[1,"far","fa-calendar-alt"],["data-datepicker","","id","dateofreport","type","text","placeholder","Choose date","required","",1,"form-control"],[1,"col-12"],["for","textarea6"],["placeholder","Enter your message...","id","textarea6","rows","2",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6," Sales & Service Taxes "),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h5",18),_l.Fc(20,"Sales Per Month"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(21,"div",19),_l.Tb(22,"div",20),_l.Pb(23,"div",21),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(24,"div",13),_l.Tb(25,"div",14),_l.Tb(26,"div",15),_l.Tb(27,"div",16),_l.Tb(28,"div",17),_l.Tb(29,"h5",18),_l.Fc(30,"Sales Per Sale Channel"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(31,"div",19),_l.Tb(32,"div",20),_l.Pb(33,"div",22),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(34,"div",13),_l.Tb(35,"div",14),_l.Tb(36,"div",15),_l.Tb(37,"div",16),_l.Tb(38,"div",17),_l.Tb(39,"h5",18),_l.Fc(40,"Sales Per State"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(41,"div",19),_l.Tb(42,"div",20),_l.Pb(43,"div",23),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(44,"div",13),_l.Tb(45,"div",14),_l.Tb(46,"div",15),_l.Tb(47,"div",16),_l.Tb(48,"div",17),_l.Tb(49,"h5",18),_l.Fc(50,"Sales Per Product Category"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(51,"div",19),_l.Tb(52,"div",20),_l.Pb(53,"div",24),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(54,"div",25),_l.Tb(55,"div",14),_l.Tb(56,"div",15),_l.Tb(57,"div",16),_l.Tb(58,"div",26),_l.Tb(59,"h5",18),_l.Fc(60,"Search Sales Report"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(61,"div",19),_l.Tb(62,"div",12),_l.Tb(63,"div",27),_l.Tb(64,"div",28),_l.Tb(65,"label",29),_l.Fc(66,"Category"),_l.Sb(),_l.Tb(67,"select",30),_l.Tb(68,"option",31),_l.Fc(69,"Choose"),_l.Sb(),_l.Tb(70,"option",32),_l.Fc(71,"One"),_l.Sb(),_l.Tb(72,"option",33),_l.Fc(73,"Two"),_l.Sb(),_l.Tb(74,"option",34),_l.Fc(75,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(76,"div",27),_l.Tb(77,"div",28),_l.Tb(78,"label",29),_l.Fc(79,"Year"),_l.Sb(),_l.Tb(80,"select",30),_l.Tb(81,"option",31),_l.Fc(82,"Choose"),_l.Sb(),_l.Tb(83,"option",32),_l.Fc(84,"One"),_l.Sb(),_l.Tb(85,"option",33),_l.Fc(86,"Two"),_l.Sb(),_l.Tb(87,"option",34),_l.Fc(88,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(89,"div",27),_l.Tb(90,"div",28),_l.Tb(91,"label",29),_l.Fc(92,"Quarter"),_l.Sb(),_l.Tb(93,"select",30),_l.Tb(94,"option",31),_l.Fc(95,"Choose"),_l.Sb(),_l.Tb(96,"option",32),_l.Fc(97,"One"),_l.Sb(),_l.Tb(98,"option",33),_l.Fc(99,"Two"),_l.Sb(),_l.Tb(100,"option",34),_l.Fc(101,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(102,"div",35),_l.Tb(103,"button",36),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(104," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(105,"div",25),_l.Tb(106,"div",14),_l.Tb(107,"div",15),_l.Tb(108,"div",16),_l.Tb(109,"div",26),_l.Tb(110,"h5",18),_l.Fc(111,"Sales Report"),_l.Sb(),_l.Sb(),_l.Tb(112,"div",37),_l.Tb(113,"button",36),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(159);return e.openModal(r)})),_l.Fc(114," Add New "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(115,"div",19),_l.Tb(116,"div",38),_l.Tb(117,"div",12),_l.Tb(118,"div",39),_l.Tb(119,"div",40),_l.Tb(120,"label"),_l.Fc(121," Show "),_l.Tb(122,"select",41),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(123,"option",42),_l.Fc(124,"5"),_l.Sb(),_l.Tb(125,"option",43),_l.Fc(126,"10"),_l.Sb(),_l.Tb(127,"option",44),_l.Fc(128,"15"),_l.Sb(),_l.Tb(129,"option",45),_l.Fc(130,"All"),_l.Sb(),_l.Sb(),_l.Fc(131," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(132,"div",39),_l.Tb(133,"div",46),_l.Tb(134,"label"),_l.Tb(135,"input",47),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(136,"ngx-datatable",48),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(137,"ngx-datatable-column"),_l.Dc(138,Yh,2,0,"ng-template",49),_l.Dc(139,Gh,1,1,"ng-template",50),_l.Sb(),_l.Tb(140,"ngx-datatable-column"),_l.Dc(141,qh,2,0,"ng-template",49),_l.Dc(142,Kh,1,1,"ng-template",50),_l.Sb(),_l.Tb(143,"ngx-datatable-column"),_l.Dc(144,Zh,2,0,"ng-template",49),_l.Dc(145,Jh,1,1,"ng-template",50),_l.Sb(),_l.Tb(146,"ngx-datatable-column"),_l.Dc(147,$h,2,0,"ng-template",49),_l.Dc(148,Qh,1,1,"ng-template",50),_l.Sb(),_l.Tb(149,"ngx-datatable-column"),_l.Dc(150,tp,2,0,"ng-template",49),_l.Dc(151,rp,2,2,"ng-template",50),_l.Sb(),_l.Tb(152,"ngx-datatable-column"),_l.Dc(153,np,2,0,"ng-template",49),_l.Dc(154,ap,1,1,"ng-template",50),_l.Sb(),_l.Tb(155,"ngx-datatable-column"),_l.Dc(156,op,2,0,"ng-template",49),_l.Dc(157,sp,6,0,"ng-template",50),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(158,lp,95,0,"ng-template",null,51,_l.Ec)}2&t&&(_l.Bb(123),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,n.l,s.v,s.n,s.o],styles:[""]}),t}(),hp=function(){function t(t,e){this.mockService=t,this.zone=e,this.bsDPConfig={isAnimated:!0,containerClass:"theme-default"},this.dataChart=[],this.dataChart2=[],this.dataChart3=[],this.getData()}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose()),t.chart3&&(console.log("Chart disposed"),t.chart3.dispose()),t.chart4&&(console.log("Chart disposed"),t.chart4.dispose()),t.chart5&&(console.log("Chart disposed"),t.chart5.dispose())}))},t.prototype.getData=function(){var t=this;this.mockService.getAll("admin-report/report-data-1.json").subscribe((function(e){t.dataChart=e}),(function(){}),(function(){t.mockService.getAll("admin-report/report-data-2.json").subscribe((function(e){t.dataChart2=e}),(function(){}),(function(){t.mockService.getAll("admin-report/report-data-3.json").subscribe((function(e){t.dataChart3=e}),(function(){}),(function(){t.getCharts()}))}))}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartProductionPlanningExecution1(),t.getChartProductionPlanningExecution2(),t.getChartProductionPlanningExecution3(),t.getChartProductionPlanningExecution4(),t.getChartProductionPlanningExecution5()}))},t.prototype.getChartProductionPlanningExecution1=function(){Ga(wu),Ga(vl);var t=Ya("chartproplanexe1",Vs);t.data=[{country:"Machine A",visits:45},{country:"Machine B",visits:88},{country:"Machine C",visits:76}];var e=t.xAxes.push(new Io);e.dataFields.category="country",e.renderer.labels.template.rotation=270,e.renderer.labels.template.hideOversized=!1,e.renderer.minGridDistance=20,e.renderer.labels.template.horizontalCenter="right",e.renderer.labels.template.verticalCenter="middle",e.tooltip.label.rotation=270,e.tooltip.label.horizontalCenter="right",e.tooltip.label.verticalCenter="middle";var i=t.yAxes.push(new xo);i.title.text="Countries",i.title.fontWeight="bold";var r=t.series.push(new Rs);r.dataFields.valueY="visits",r.dataFields.categoryX="country",r.name="Visits",r.tooltipText="{categoryX}: [bold]{valueY}[/]",r.columns.template.fillOpacity=.8;var n=r.columns.template;n.strokeWidth=2,n.strokeOpacity=1,n.stroke=Ue("#FFFFFF"),n.adapter.add("fill",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),n.adapter.add("stroke",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),t.cursor=new yl,t.cursor.lineX.strokeOpacity=0,t.cursor.lineY.strokeOpacity=0,this.chart1=t},t.prototype.getChartProductionPlanningExecution2=function(){Ga(wu),Ga(vl);var t=Ya("chartproplanexe2",Vs);t.data=[{country:"Machine A",visits:46},{country:"Machine B",visits:57},{country:"Machine C",visits:68}];var e=t.xAxes.push(new Io);e.dataFields.category="country",e.renderer.labels.template.rotation=270,e.renderer.labels.template.hideOversized=!1,e.renderer.minGridDistance=20,e.renderer.labels.template.horizontalCenter="right",e.renderer.labels.template.verticalCenter="middle",e.tooltip.label.rotation=270,e.tooltip.label.horizontalCenter="right",e.tooltip.label.verticalCenter="middle";var i=t.yAxes.push(new xo);i.title.text="Countries",i.title.fontWeight="bold";var r=t.series.push(new Rs);r.dataFields.valueY="visits",r.dataFields.categoryX="country",r.name="Visits",r.tooltipText="{categoryX}: [bold]{valueY}[/]",r.columns.template.fillOpacity=.8;var n=r.columns.template;n.strokeWidth=2,n.strokeOpacity=1,n.stroke=Ue("#FFFFFF"),n.adapter.add("fill",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),n.adapter.add("stroke",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),t.cursor=new yl,t.cursor.lineX.strokeOpacity=0,t.cursor.lineY.strokeOpacity=0,this.chart2=t},t.prototype.getChartProductionPlanningExecution3=function(){Ga(wu),Ga(vl);var t=Ya("chartproplanexe3",Vs);t.data=[{country:"Jan",year2017:3.5,year2018:4.2},{country:"Feb",year2017:1.7,year2018:3.1},{country:"Mar",year2017:2.8,year2018:2.9},{country:"Apr",year2017:2.6,year2018:2.3},{country:"May",year2017:1.4,year2018:2.1},{country:"June",year2017:2.6,year2018:4.9},{country:"July",year2017:6.4,year2018:7.2},{country:"Aug",year2017:8,year2018:7.1},{country:"Sep",year2017:9.9,year2018:10.1},{country:"Oct",year2017:3.4,year2018:4.2},{country:"Nov",year2017:8,year2018:6.2},{country:"Dec",year2017:4.2,year2018:5.8}];var e=t.xAxes.push(new Io);e.dataFields.category="country",e.renderer.grid.template.location=0,e.renderer.minGridDistance=30;var i=t.yAxes.push(new xo);i.title.text="GDP growth rate",i.renderer.labels.template.adapter.add("text",(function(t){return t+"%"}));var r=t.series.push(new Rs);r.dataFields.valueY="year2017",r.dataFields.categoryX="country",r.name="Year 2017",r.clustered=!1,r.columns.template.tooltipText="Planned in {country} : [bold]{valueY}[/]",r.columns.template.fillOpacity=.9;var n=t.series.push(new Rs);n.dataFields.valueY="year2018",n.dataFields.categoryX="country",n.name="Year 2018",n.clustered=!1,n.columns.template.tooltipText="Actual in {country} : [bold]{valueY}[/]",this.chart3=t},t.prototype.getChartProductionPlanningExecution4=function(){var t=Ya("chartproplanexe4",Mo);t.paddingRight=20,t.data=this.dataChart,t.dateFormatter.inputDateFormat="yyyy";var e=t.xAxes.push(new To);e.renderer.minGridDistance=50,e.baseInterval={timeUnit:"year",count:2},t.yAxes.push(new xo).tooltip.disabled=!0;var i=t.series.push(new Gs);i.dataFields.dateX="year",i.dataFields.valueY="amount",i.tooltipText="{valueY.amount}",i.strokeWidth=3,t.cursor=new yl,t.cursor.xAxis=e,t.cursor.fullWidthLineX=!0,t.cursor.lineX.strokeWidth=0,t.cursor.lineX.fill=t.colors.getIndex(2),t.cursor.lineX.fillOpacity=.1,t.scrollbarX=new ua,this.chart4=t},t.prototype.getChartProductionPlanningExecution5=function(){var t=Ya("chartproplanexe5",Mo);t.hiddenState.properties.opacity=0;for(var e=[],i=100,r=250,n=1;n<120;n++)i+=Math.round((Math.random()<.5?1:-1)*Math.random()*4),r=Math.round(i+5*Math.random()+n/5-(Math.random()<.5?1:-1)*Math.random()*2),e.push({date:new Date(2018,0,n),open:i,close:r});t.data=e;var a=t.xAxes.push(new To);t.yAxes.push(new xo).tooltip.disabled=!0;var o=t.series.push(new jo);o.dataFields.dateX="date",o.dataFields.openValueY="open",o.dataFields.valueY="close",o.tooltipText="open: {openValueY.value} close: {valueY.value}",o.sequencedInterpolation=!0,o.fillOpacity=.3,o.defaultState.transitionDuration=1e3,o.tensionX=.8;var s=t.series.push(new jo);s.dataFields.dateX="date",s.dataFields.valueY="open",s.sequencedInterpolation=!0,s.defaultState.transitionDuration=1500,s.stroke=t.colors.getIndex(6),s.tensionX=.8,t.cursor=new yl,t.cursor.xAxis=a,t.scrollbarX=new ua,this.chart5=t},t.\u0275fac=function(e){return new(e||t)(_l.Ob(Tl),_l.Ob(_l.z))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-production-planning-execution"]],decls:144,vars:1,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-edit","text-dark"],[1,"row","justify-content-md-center"],[1,"col-sm-3","col-md-6","col-lg-4","mb-4"],[1,"card","border-light","shadow-sm"],[1,"card-body"],[1,"row","d-block","d-xl-flex","align-items-center"],[1,"col-12","px-xl-0","text-center"],[1,"d-none","d-sm-block"],[1,"h4"],[1,"h3","mb-1"],[1,"small","mt-2"],[1,"fas","fa-angle-down","text-danger"],[1,"text-danger","font-weight-bold"],[1,"col-sm-3","col-md-6","col-lg-4"],[1,"fas","fa-angle-up","text-success"],[1,"text-success","font-weight-bold"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-6"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"chart"],["id","chartproplanexe1",1,"amchart"],["id","chartproplanexe2",1,"amchart"],[1,"col-xl-12"],["id","chartproplanexe3",1,"amchart"],[1,"m-0"],[1,"col-md-6"],[1,"form-group"],[1,"form-control-label"],[1,"form-control","custom-select"],["hidden","","selected",""],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"far","fa-calendar-alt"],["type","text","bsDaterangepicker","","placeholder","Date range","name","bsDaterangepicker",1,"form-control",3,"bsConfig"],[1,"col-md-12","text-right"],["type","button",1,"btn","btn-default"],["id","chartproplanexe4",1,"amchart"],["id","chartproplanexe5",1,"amchart"]],template:function(t,e){1&t&&(_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6," Product, Planning & Execution "),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h2",18),_l.Fc(20,"Unit YTD"),_l.Sb(),_l.Tb(21,"h3",19),_l.Fc(22,"235,467"),_l.Sb(),_l.Sb(),_l.Tb(23,"div",20),_l.Pb(24,"span",21),_l.Tb(25,"span",22),_l.Fc(26,"-5.1%"),_l.Sb(),_l.Fc(27," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(28,"div",23),_l.Tb(29,"div",13),_l.Tb(30,"div",14),_l.Tb(31,"div",15),_l.Tb(32,"div",16),_l.Tb(33,"div",17),_l.Tb(34,"h2",18),_l.Fc(35,"Units Lost"),_l.Sb(),_l.Tb(36,"h3",19),_l.Fc(37,"380"),_l.Sb(),_l.Sb(),_l.Tb(38,"div",20),_l.Pb(39,"span",24),_l.Tb(40,"span",25),_l.Fc(41,"1%"),_l.Sb(),_l.Fc(42," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(43,"div",23),_l.Tb(44,"div",13),_l.Tb(45,"div",14),_l.Tb(46,"div",15),_l.Tb(47,"div",16),_l.Tb(48,"div",17),_l.Tb(49,"h2",18),_l.Fc(50,"Productivity"),_l.Sb(),_l.Tb(51,"h3",19),_l.Fc(52,"80.15%"),_l.Sb(),_l.Sb(),_l.Tb(53,"div",20),_l.Pb(54,"span",24),_l.Tb(55,"span",25),_l.Fc(56,"4%"),_l.Sb(),_l.Fc(57," Since last month "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(58,"div",26),_l.Tb(59,"div",27),_l.Tb(60,"div",28),_l.Tb(61,"div",29),_l.Tb(62,"div",30),_l.Tb(63,"div",31),_l.Tb(64,"div",32),_l.Tb(65,"h5",33),_l.Fc(66,"Production Rate: Machine"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(67,"div",14),_l.Tb(68,"div",34),_l.Pb(69,"div",35),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(70,"div",28),_l.Tb(71,"div",29),_l.Tb(72,"div",30),_l.Tb(73,"div",31),_l.Tb(74,"div",32),_l.Tb(75,"h5",33),_l.Fc(76,"Overall Productivity: YTD"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(77,"div",14),_l.Tb(78,"div",34),_l.Pb(79,"div",36),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(80,"div",37),_l.Tb(81,"div",29),_l.Tb(82,"div",30),_l.Tb(83,"div",31),_l.Tb(84,"div",32),_l.Tb(85,"h5",33),_l.Fc(86,"Planned vs Actual"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(87,"div",14),_l.Tb(88,"div",34),_l.Pb(89,"div",38),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(90,"div",37),_l.Tb(91,"div",29),_l.Tb(92,"div",30),_l.Tb(93,"h3",39),_l.Fc(94,"Reporting Tool"),_l.Sb(),_l.Sb(),_l.Tb(95,"div",14),_l.Tb(96,"div",27),_l.Tb(97,"div",40),_l.Tb(98,"div",41),_l.Tb(99,"label",42),_l.Fc(100,"Report type"),_l.Sb(),_l.Tb(101,"select",43),_l.Tb(102,"option",44),_l.Fc(103,"Please pick"),_l.Sb(),_l.Tb(104,"option"),_l.Fc(105,"Report 1"),_l.Sb(),_l.Tb(106,"option"),_l.Fc(107,"Report 2"),_l.Sb(),_l.Tb(108,"option"),_l.Fc(109,"Report 3"),_l.Sb(),_l.Tb(110,"option"),_l.Fc(111,"Report 4"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(112,"div",40),_l.Tb(113,"div",41),_l.Tb(114,"label",42),_l.Fc(115,"Date range"),_l.Sb(),_l.Tb(116,"div",45),_l.Tb(117,"div",46),_l.Tb(118,"span",47),_l.Pb(119,"i",48),_l.Sb(),_l.Sb(),_l.Pb(120,"input",49),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(121,"div",50),_l.Tb(122,"button",51),_l.Fc(123,"Search"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(124,"div",28),_l.Tb(125,"div",29),_l.Tb(126,"div",30),_l.Tb(127,"div",31),_l.Tb(128,"div",32),_l.Tb(129,"h5",33),_l.Fc(130,"Report 1"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(131,"div",14),_l.Tb(132,"div",34),_l.Pb(133,"div",52),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(134,"div",28),_l.Tb(135,"div",29),_l.Tb(136,"div",30),_l.Tb(137,"div",31),_l.Tb(138,"div",32),_l.Tb(139,"h5",33),_l.Fc(140,"Report 2"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(141,"div",14),_l.Tb(142,"div",34),_l.Pb(143,"div",53),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb()),2&t&&(_l.Bb(120),_l.lc("bsConfig",e.bsDPConfig))},directives:[s.q,s.u,o.e,o.d],styles:[""]}),t}();function pp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Category"),_l.Sb())}function dp(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.category," ")}function fp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Batch"),_l.Sb())}function mp(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.category," ")}function yp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Location"),_l.Sb())}function gp(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.location," ")}function bp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Date Created"),_l.Sb())}function vp(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.start," ")}function _p(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Quantity"),_l.Sb())}function xp(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.start," ")}function Sp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Status"),_l.Sb())}function wp(t,e){1&t&&(_l.Tb(0,"span",68),_l.Fc(1,"Available"),_l.Sb())}function Tp(t,e){1&t&&(_l.Tb(0,"span",69),_l.Fc(1,"In Production"),_l.Sb())}function Pp(t,e){1&t&&(_l.Tb(0,"span",70),_l.Fc(1,"Diminished"),_l.Sb())}function Cp(t,e){if(1&t&&(_l.Dc(0,wp,2,0,"span",65),_l.Dc(1,Tp,2,0,"span",66),_l.Dc(2,Pp,2,0,"span",67)),2&t){var i=e.row;_l.lc("ngIf","active"==i.status),_l.Bb(1),_l.lc("ngIf","inproduction"==i.status),_l.Bb(1),_l.lc("ngIf","unactive"==i.status)}}function kp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function Ip(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",71),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc(),r=_l.uc(240);return e.openModal(r)})),_l.Tb(1,"span",72),_l.Pb(2,"i",73),_l.Sb(),_l.Sb(),_l.Tb(3,"button",74),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",72),_l.Pb(5,"i",75),_l.Sb(),_l.Sb()}}function Ap(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",76),_l.Tb(1,"h6",77),_l.Fc(2," Edit List of Account "),_l.Sb(),_l.Tb(3,"button",78),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",79),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",80),_l.Tb(7,"form"),_l.Tb(8,"div",25),_l.Tb(9,"div",81),_l.Tb(10,"div",82),_l.Tb(11,"label",83),_l.Fc(12,"Program ID"),_l.Sb(),_l.Pb(13,"input",84),_l.Sb(),_l.Sb(),_l.Tb(14,"div",81),_l.Tb(15,"div",82),_l.Tb(16,"label",85),_l.Fc(17,"Name"),_l.Sb(),_l.Pb(18,"input",86),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(19,"form"),_l.Tb(20,"div",25),_l.Tb(21,"div",81),_l.Tb(22,"div",82),_l.Tb(23,"label",87),_l.Fc(24,"Type"),_l.Sb(),_l.Tb(25,"select",88),_l.Tb(26,"option",44),_l.Fc(27,"Choose"),_l.Sb(),_l.Tb(28,"option",45),_l.Fc(29,"One"),_l.Sb(),_l.Tb(30,"option",46),_l.Fc(31,"Two"),_l.Sb(),_l.Tb(32,"option",47),_l.Fc(33,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(34,"div",81),_l.Tb(35,"div",82),_l.Tb(36,"p",89),_l.Fc(37,"Status"),_l.Sb(),_l.Tb(38,"div",90),_l.Pb(39,"input",91),_l.Tb(40,"label",92),_l.Fc(41," Active "),_l.Sb(),_l.Sb(),_l.Tb(42,"div",90),_l.Pb(43,"input",93),_l.Tb(44,"label",94),_l.Fc(45," Inactive "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(46,"form"),_l.Tb(47,"div",25),_l.Tb(48,"div",95),_l.Tb(49,"div",82),_l.Tb(50,"label",96),_l.Fc(51,"Description"),_l.Sb(),_l.Pb(52,"textarea",97),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(53,"div",98),_l.Tb(54,"button",99),_l.bc("click",(function(t){return _l.wc(i),_l.fc().confirm()})),_l.Fc(55," Save "),_l.Sb(),_l.Tb(56,"button",100),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(57," Close "),_l.Sb(),_l.Sb()}}var Op=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),Dp=function(){function t(t,e){this.zone=t,this.modalService=e,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"1",year:"2011",location:"Perak"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Ahmad",status:"unactive",type:"Full time",title:"Otter, north american river",category:"2",year:"2011",location:"Kedah"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Trish",status:"inproduction",type:"Full time",title:"Asian false vampire bat",category:"3",year:"2009",location:"Selangor"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"Sara",status:"active",type:"Part time",title:"Pelican, australian",category:"3",year:"2019",location:"Kelantan"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Malek",status:"unactive",type:"Part time",title:"Spotted-tailed quoll",category:"1",year:"2008",location:"Perlis"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Cheng Hong",status:"unactive",type:"Full time",title:"Blue-cheeked cordon",category:"2",year:"2011",location:"Pulau Pinang"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Arumugam",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"1",year:"2008",location:"Terengganu"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Ronaldo",status:"inproduction",type:"Part time",title:"Blue-cheeked cordon",category:"3",year:"2009",location:"Pahang"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"Neymar",status:"unactive",type:"Part time",title:"Blue-cheeked cordon",category:"1",year:"2019",location:"Kuala Lumpur"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"inproduction",type:"Full time",title:"Blue-cheeked cordon",category:"1",year:"2008",location:"Melaka"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"2",year:"2011",location:"Negeri Sembilan"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"2",year:"2009",location:"Johor"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"1",year:"2019",location:"Sabah"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"inproduction",type:"Full time",title:"Blue-cheeked cordon",category:"3",year:"2008",location:"Sarawak"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$385,750",name:"John",status:"active",type:"Full time",title:"Blue-cheeked cordon",category:"2",year:"2009",location:"Labuan"}],this.SelectionType=Op,this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartIventoryControl1(),t.getChartIventoryControl2()}))},t.prototype.getChartIventoryControl1=function(){Ga(bl),Ga(vl);var t=Ya("chartiventory1",as);t.data=[{country:"Fruits",litres:501.9},{country:"Vegetables",litres:301.9},{country:"Palm Oil",litres:201.1},{country:"Cereals",litres:165.8}];var e=t.series.push(new rs);e.dataFields.value="litres",e.dataFields.category="country",e.innerRadius=m(50),e.ticks.template.disabled=!0,e.labels.template.disabled=!0;var i=new Da;i.brightnesses.push(-.8,-.8,-.5,0,-.5),e.slices.template.fillModifier=i,e.slices.template.strokeModifier=i,e.slices.template.strokeOpacity=.4,e.slices.template.strokeWidth=0,t.legend=new to,t.legend.position="right",this.chart1=t},t.prototype.getChartIventoryControl2=function(){Ga(bl),Ga(vl);var t=Ya("chartiventory2",Vs);t.paddingBottom=30,t.angle=35,t.data=[{country:"<3 Days",visits:2025},{country:"3-7 Days",visits:1882},{country:"8-14 Days",visits:1809},{country:"15-28 Days",visits:1322}];var e=t.xAxes.push(new Io);e.dataFields.category="country",e.renderer.grid.template.location=0,e.renderer.minGridDistance=20,e.renderer.inside=!0,e.renderer.grid.template.disabled=!0;var i=e.renderer.labels.template;i.rotation=-90,i.horizontalCenter="left",i.verticalCenter="middle",i.dy=10,i.inside=!1,t.yAxes.push(new xo).renderer.grid.template.disabled=!0;var r=t.series.push(new sl);r.dataFields.valueY="visits",r.dataFields.categoryX="country";var n=r.columns.template;n.adapter.add("fill",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),n.adapter.add("stroke",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),this.chart2=t},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"})},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-inventory-control"]],decls:241,vars:10,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-desktop","text-dark"],[1,"row","justify-content-md-center"],[1,"col-sm-3","col-md-6","col-lg-4","mb-4"],[1,"card","border-light","shadow-sm"],[1,"card-body"],[1,"row","d-block","d-xl-flex","align-items-center"],[1,"col-12","px-xl-0","text-center"],[1,"d-none","d-sm-block"],[1,"h4"],[1,"h3","text-info","mb-1"],[1,"small","mt-2"],[1,"col-sm-3","col-md-6","col-lg-4"],[1,"h3","text-success","mb-1"],[1,"h3","text-danger","mb-1"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-6"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"chart"],["id","chartiventory1",1,"amchart"],["id","chartiventory2",1,"amchart"],[1,"col-xl-12"],[1,"col-md-6"],[1,"table-responsive"],[1,"table","table-centered","table-nowrap","mb-0","rounded"],[1,"thead-light"],[1,"col-xl-4"],[1,"form-group"],["for","exampleFormControlSelect2"],["id","exampleFormControlSelect2",1,"form-control"],["selected",""],["value","1"],["value","2"],["value","3"],[1,"col-xl-12","text-right"],["type","button",1,"btn","btn-default",3,"click"],[1,"col-md-6","text-right"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["createUser",""],["class","badge badge-pill badge-success",4,"ngIf"],["class","badge badge-pill badge-primary",4,"ngIf"],["class","badge badge-pill badge-danger",4,"ngIf"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-primary"],[1,"badge","badge-pill","badge-danger"],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"col-6"],[1,"mb-4"],["for","exampleProgramID"],["type","total","id","exampleTotal","placeholder","eg PRG-CS-240",1,"form-control"],["for","exampleName"],["type","text","placeholder","eg Short Term Program","id","exampleName",1,"form-control"],["for","type1",1,"my-1","mr-2"],["id","type2","aria-label","Default select example",1,"form-select"],[1,"font-weight-bold"],[1,"form-check"],["type","radio","name","exampleRadios3","id","exampleRadios3","value","option3","checked","",1,"form-check-input"],["for","exampleRadios3",1,"form-check-label"],["type","radio","name","exampleRadios4","id","exampleRadios4","value","option4","checked","",1,"form-check-input"],["for","exampleRadios4",1,"form-check-label"],[1,"col-12"],["for","textarea2"],["placeholder","Enter your message...","id","textarea2","rows","2",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Inventory Control"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h2",18),_l.Fc(20,"Inventory Turnover"),_l.Sb(),_l.Tb(21,"h3",19),_l.Fc(22,"17.0"),_l.Sb(),_l.Sb(),_l.Tb(23,"div",20),_l.Fc(24,"Target: 13.0"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(25,"div",21),_l.Tb(26,"div",13),_l.Tb(27,"div",14),_l.Tb(28,"div",15),_l.Tb(29,"div",16),_l.Tb(30,"div",17),_l.Tb(31,"h2",18),_l.Fc(32,"Average OOS Rate"),_l.Sb(),_l.Tb(33,"h3",22),_l.Fc(34,"4.0%"),_l.Sb(),_l.Sb(),_l.Tb(35,"div",20),_l.Fc(36,"Target: 2.0%"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(37,"div",21),_l.Tb(38,"div",13),_l.Tb(39,"div",14),_l.Tb(40,"div",15),_l.Tb(41,"div",16),_l.Tb(42,"div",17),_l.Tb(43,"h2",18),_l.Fc(44,"Average OTIF Rate"),_l.Sb(),_l.Tb(45,"h3",23),_l.Fc(46,"81.0%"),_l.Sb(),_l.Sb(),_l.Tb(47,"div",20),_l.Fc(48,"Target: 90.0%"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(49,"div",24),_l.Tb(50,"div",25),_l.Tb(51,"div",26),_l.Tb(52,"div",27),_l.Tb(53,"div",28),_l.Tb(54,"div",29),_l.Tb(55,"div",30),_l.Tb(56,"h5",31),_l.Fc(57," Average Inventory Value by Product Category "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(58,"div",14),_l.Tb(59,"div",32),_l.Pb(60,"div",33),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(61,"div",26),_l.Tb(62,"div",27),_l.Tb(63,"div",28),_l.Tb(64,"div",29),_l.Tb(65,"div",30),_l.Tb(66,"h5",31),_l.Fc(67,"Products Sold within Freshness Date"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(68,"div",14),_l.Tb(69,"div",32),_l.Pb(70,"div",34),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(71,"div",35),_l.Tb(72,"div",27),_l.Tb(73,"div",28),_l.Tb(74,"div",29),_l.Tb(75,"div",36),_l.Tb(76,"h5",31),_l.Fc(77,"Sales Order"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(78,"div",14),_l.Tb(79,"div",37),_l.Tb(80,"table",38),_l.Tb(81,"thead",39),_l.Tb(82,"tr"),_l.Tb(83,"th"),_l.Fc(84,"CHANNEL"),_l.Sb(),_l.Tb(85,"th"),_l.Fc(86,"DRAFT"),_l.Sb(),_l.Tb(87,"th"),_l.Fc(88,"CONFIRMED"),_l.Sb(),_l.Tb(89,"th"),_l.Fc(90,"PACKED"),_l.Sb(),_l.Tb(91,"th"),_l.Fc(92,"SHIPPED"),_l.Sb(),_l.Tb(93,"th"),_l.Fc(94,"INVOICED"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(95,"tbody"),_l.Tb(96,"tr"),_l.Tb(97,"td"),_l.Fc(98,"Others"),_l.Sb(),_l.Tb(99,"td"),_l.Fc(100,"0"),_l.Sb(),_l.Tb(101,"td"),_l.Fc(102,"42"),_l.Sb(),_l.Tb(103,"td"),_l.Fc(104,"5"),_l.Sb(),_l.Tb(105,"td"),_l.Fc(106,"27"),_l.Sb(),_l.Tb(107,"td"),_l.Fc(108,"75"),_l.Sb(),_l.Sb(),_l.Tb(109,"tr"),_l.Tb(110,"td"),_l.Fc(111,"Etsy"),_l.Sb(),_l.Tb(112,"td"),_l.Fc(113,"0"),_l.Sb(),_l.Tb(114,"td"),_l.Fc(115,"3"),_l.Sb(),_l.Tb(116,"td"),_l.Fc(117,"0"),_l.Sb(),_l.Tb(118,"td"),_l.Fc(119,"6"),_l.Sb(),_l.Tb(120,"td"),_l.Fc(121,"6"),_l.Sb(),_l.Sb(),_l.Tb(122,"tr"),_l.Tb(123,"td"),_l.Fc(124,"Shopify"),_l.Sb(),_l.Tb(125,"td"),_l.Fc(126,"0"),_l.Sb(),_l.Tb(127,"td"),_l.Fc(128,"12"),_l.Sb(),_l.Tb(129,"td"),_l.Fc(130,"0"),_l.Sb(),_l.Tb(131,"td"),_l.Fc(132,"0"),_l.Sb(),_l.Tb(133,"td"),_l.Fc(134,"2"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(135,"div",35),_l.Tb(136,"div",27),_l.Tb(137,"div",28),_l.Tb(138,"div",29),_l.Tb(139,"div",36),_l.Tb(140,"h5",31),_l.Fc(141,"Search Physical Inventory"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(142,"div",14),_l.Tb(143,"div",25),_l.Tb(144,"div",40),_l.Tb(145,"div",41),_l.Tb(146,"label",42),_l.Fc(147,"Category"),_l.Sb(),_l.Tb(148,"select",43),_l.Tb(149,"option",44),_l.Fc(150,"Choose"),_l.Sb(),_l.Tb(151,"option",45),_l.Fc(152,"1"),_l.Sb(),_l.Tb(153,"option",46),_l.Fc(154,"2"),_l.Sb(),_l.Tb(155,"option",47),_l.Fc(156,"3"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(157,"div",40),_l.Tb(158,"div",41),_l.Tb(159,"label",42),_l.Fc(160,"Batch"),_l.Sb(),_l.Tb(161,"select",43),_l.Tb(162,"option",44),_l.Fc(163,"Choose"),_l.Sb(),_l.Tb(164,"option",45),_l.Fc(165,"One"),_l.Sb(),_l.Tb(166,"option",46),_l.Fc(167,"Two"),_l.Sb(),_l.Tb(168,"option",47),_l.Fc(169,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(170,"div",40),_l.Tb(171,"div",41),_l.Tb(172,"label",42),_l.Fc(173,"Status"),_l.Sb(),_l.Tb(174,"select",43),_l.Tb(175,"option",44),_l.Fc(176,"Choose"),_l.Sb(),_l.Tb(177,"option",45),_l.Fc(178,"Available"),_l.Sb(),_l.Tb(179,"option",46),_l.Fc(180,"In Production"),_l.Sb(),_l.Tb(181,"option",47),_l.Fc(182,"Diminished"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(183,"div",48),_l.Tb(184,"button",49),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(185," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(186,"div",35),_l.Tb(187,"div",27),_l.Tb(188,"div",28),_l.Tb(189,"div",29),_l.Tb(190,"div",36),_l.Tb(191,"h5",31),_l.Fc(192,"Physical Inventory"),_l.Sb(),_l.Sb(),_l.Tb(193,"div",50),_l.Tb(194,"button",49),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(240);return e.openModal(r)})),_l.Fc(195," Add New "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(196,"div",14),_l.Tb(197,"div",51),_l.Tb(198,"div",25),_l.Tb(199,"div",52),_l.Tb(200,"div",53),_l.Tb(201,"label"),_l.Fc(202," Show "),_l.Tb(203,"select",54),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(204,"option",55),_l.Fc(205,"5"),_l.Sb(),_l.Tb(206,"option",56),_l.Fc(207,"10"),_l.Sb(),_l.Tb(208,"option",57),_l.Fc(209,"15"),_l.Sb(),_l.Tb(210,"option",58),_l.Fc(211,"All"),_l.Sb(),_l.Sb(),_l.Fc(212," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(213,"div",52),_l.Tb(214,"div",59),_l.Tb(215,"label"),_l.Tb(216,"input",60),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(217,"ngx-datatable",61),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(218,"ngx-datatable-column"),_l.Dc(219,pp,2,0,"ng-template",62),_l.Dc(220,dp,1,1,"ng-template",63),_l.Sb(),_l.Tb(221,"ngx-datatable-column"),_l.Dc(222,fp,2,0,"ng-template",62),_l.Dc(223,mp,1,1,"ng-template",63),_l.Sb(),_l.Tb(224,"ngx-datatable-column"),_l.Dc(225,yp,2,0,"ng-template",62),_l.Dc(226,gp,1,1,"ng-template",63),_l.Sb(),_l.Tb(227,"ngx-datatable-column"),_l.Dc(228,bp,2,0,"ng-template",62),_l.Dc(229,vp,1,1,"ng-template",63),_l.Sb(),_l.Tb(230,"ngx-datatable-column"),_l.Dc(231,_p,2,0,"ng-template",62),_l.Dc(232,xp,1,1,"ng-template",63),_l.Sb(),_l.Tb(233,"ngx-datatable-column"),_l.Dc(234,Sp,2,0,"ng-template",62),_l.Dc(235,Cp,3,3,"ng-template",63),_l.Sb(),_l.Tb(236,"ngx-datatable-column"),_l.Dc(237,kp,2,0,"ng-template",62),_l.Dc(238,Ip,6,0,"ng-template",63),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(239,Ap,58,0,"ng-template",null,64,_l.Ec)}2&t&&(_l.Bb(204),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,n.l,s.v,s.n,s.o],styles:[""]}),t}();function Fp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Type"),_l.Sb())}function Mp(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.type," ")}function Ep(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Name"),_l.Sb())}function Lp(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.name," ")}function Rp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Amount (RM)"),_l.Sb())}function Vp(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.debit," ")}function jp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Total (RM)"),_l.Sb())}function zp(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.credit," ")}function Bp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Status"),_l.Sb())}function Np(t,e){1&t&&(_l.Tb(0,"span",50),_l.Fc(1,"Paid"),_l.Sb())}function Up(t,e){1&t&&(_l.Tb(0,"span",51),_l.Fc(1,"Pending"),_l.Sb())}function Xp(t,e){1&t&&(_l.Tb(0,"span",52),_l.Fc(1,"Overdue"),_l.Sb())}function Hp(t,e){if(1&t&&(_l.Dc(0,Np,2,0,"span",47),_l.Dc(1,Up,2,0,"span",48),_l.Dc(2,Xp,2,0,"span",49)),2&t){var i=e.row;_l.lc("ngIf","active"==i.status),_l.Bb(1),_l.lc("ngIf","inproduction"==i.status),_l.Bb(1),_l.lc("ngIf","unactive"==i.status)}}function Wp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Action"),_l.Sb())}function Yp(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"button",53),_l.bc("click",(function(t){_l.wc(i);var e=_l.fc();return e.openModal(e.createUser)})),_l.Tb(1,"span",54),_l.Pb(2,"i",55),_l.Sb(),_l.Sb(),_l.Tb(3,"button",56),_l.bc("click",(function(t){return _l.wc(i),_l.fc().delete()})),_l.Tb(4,"span",54),_l.Pb(5,"i",57),_l.Sb(),_l.Sb()}}var Gp=function(t){return t.single="single",t.multi="multi",t.multiClick="multiClick",t.cell="cell",t.checkbox="checkbox",t}({}),qp=function(){function t(t,e){this.zone=t,this.modalService=e,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Invoice",title:"Blue-cheeked cordon",category:"1",year:"2011",location:"Perak"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Ahmad",status:"unactive",type:"Invoice",title:"Otter, north american river",category:"2",year:"2011",location:"Kedah"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Trish",status:"inproduction",type:"Invoice",title:"Asian false vampire bat",category:"3",year:"2009",location:"Selangor"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"Sara",status:"active",type:"Invoice",title:"Pelican, australian",category:"3",year:"2019",location:"Kelantan"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Malek",status:"unactive",type:"Invoice",title:"Spotted-tailed quoll",category:"1",year:"2008",location:"Perlis"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",start:"2011/07/25",salary:"$170,750",name:"Cheng Hong",status:"unactive",type:"Invoice",title:"Blue-cheeked cordon",category:"2",year:"2011",location:"Pulau Pinang"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"Arumugam",status:"active",type:"Invoice",title:"Blue-cheeked cordon",category:"1",year:"2008",location:"Terengganu"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"Ronaldo",status:"inproduction",type:"Invoice",title:"Blue-cheeked cordon",category:"3",year:"2009",location:"Pahang"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"Neymar",status:"unactive",type:"Invoice",title:"Blue-cheeked cordon",category:"1",year:"2019",location:"Kuala Lumpur"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"inproduction",type:"Invoice",title:"Blue-cheeked cordon",category:"1",year:"2008",location:"Melaka"},{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",start:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Invoice",title:"Blue-cheeked cordon",category:"2",year:"2011",location:"Negeri Sembilan"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$86,000",name:"John",status:"active",type:"Invoice",title:"Blue-cheeked cordon",category:"2",year:"2009",location:"Johor"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",start:"2019/03/29",salary:"$433,060",name:"John",status:"active",type:"Invoice",title:"Blue-cheeked cordon",category:"1",year:"2019",location:"Sabah"},{accNo:"ACC-120-MJM",debit:"136.34",credit:"916.82",netMove:"983.35",start:"2008/11/28",salary:"$162,700",name:"John",status:"inproduction",type:"Invoice",title:"Blue-cheeked cordon",category:"3",year:"2008",location:"Sarawak"},{accNo:"ACC-635-KDJ",debit:"107",credit:"22.37",netMove:"426.32",start:"2009/01/12",salary:"$385,750",name:"John",status:"active",type:"Invoice",title:"Blue-cheeked cordon",category:"2",year:"2009",location:"Labuan"}],this.SelectionType=Gp,this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})}))}return t.prototype.ngOnInit=function(){this.getCharts()},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart1&&(console.log("Chart disposed"),t.chart1.dispose()),t.chart2&&(console.log("Chart disposed"),t.chart2.dispose()),t.chart3&&(console.log("Chart disposed"),t.chart3.dispose())}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChartProductionCosting1(),t.getChartProductionCosting2(),t.getChartProductionCosting3()}))},t.prototype.getChartProductionCosting1=function(){Ga(bl),Ga(vl);var t=Ya("chartproductioncosting1",Mo);t.scrollbarX=new ua,t.data=[{country:"2017",visits:2025},{country:"2018",visits:1882},{country:"2019",visits:1809},{country:"2020",visits:1322}];var e=t.xAxes.push(new Io);e.dataFields.category="country",e.renderer.grid.template.location=0,e.renderer.minGridDistance=30,e.renderer.labels.template.horizontalCenter="right",e.renderer.labels.template.verticalCenter="middle",e.renderer.labels.template.rotation=270,e.tooltip.disabled=!0,e.renderer.minHeight=110,t.yAxes.push(new xo).renderer.minWidth=50;var i=t.series.push(new ks);i.sequencedInterpolation=!0,i.dataFields.valueY="visits",i.dataFields.categoryX="country",i.tooltipText="[{categoryX}: bold]{valueY}[/]",i.columns.template.strokeWidth=0,i.tooltip.pointerOrientation="vertical",i.columns.template.column.cornerRadiusTopLeft=10,i.columns.template.column.cornerRadiusTopRight=10,i.columns.template.column.fillOpacity=.8;var r=i.columns.template.column.states.create("hover");r.properties.cornerRadiusTopLeft=0,r.properties.cornerRadiusTopRight=0,r.properties.fillOpacity=1,i.columns.template.adapter.add("fill",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),t.cursor=new yl,this.chart1=t},t.prototype.getChartProductionCosting2=function(){Ga(bl),Ga(vl);var t=Ya("chartproductioncosting2",ls);t.hiddenState.properties.opacity=0,t.legend=new to,t.data=[{country:"Client",litres:501.9},{country:"Staff",litres:165.8},{country:"Scheduled",litres:139.9}],t.innerRadius=100;var e=t.series.push(new ss);e.dataFields.value="litres",e.dataFields.category="country",this.chart2=t},t.prototype.getChartProductionCosting3=function(){Ga(bl),Ga(vl);var t=Ya("chartproductioncosting3",Vs);t.data=[{country:"Sun",visits:3025},{country:"Mon",visits:7882},{country:"Tue",visits:6809},{country:"Wed",visits:8322},{country:"Thu",visits:9122},{country:"Fri",visits:6114},{country:"Sat",visits:8984}];var e=t.xAxes.push(new Io);e.dataFields.category="country",e.renderer.labels.template.rotation=270,e.renderer.labels.template.hideOversized=!1,e.renderer.minGridDistance=20,e.renderer.labels.template.horizontalCenter="right",e.renderer.labels.template.verticalCenter="middle",e.tooltip.label.rotation=270,e.tooltip.label.horizontalCenter="right",e.tooltip.label.verticalCenter="middle";var i=t.yAxes.push(new xo);i.title.text="Countries",i.title.fontWeight="bold";var r=t.series.push(new Rs);r.dataFields.valueY="visits",r.dataFields.categoryX="country",r.name="Visits",r.tooltipText="{categoryX}: [bold]{valueY}[/]",r.columns.template.fillOpacity=.8;var n=r.columns.template;n.strokeWidth=2,n.strokeOpacity=1,n.stroke=Ue("#FFFFFF"),n.adapter.add("fill",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),n.adapter.add("stroke",(function(e,i){return t.colors.getIndex(i.dataItem.index)})),t.cursor=new yl,t.cursor.lineX.strokeOpacity=0,t.cursor.lineY.strokeOpacity=0,this.chart3=t},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"})},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-production-costing-material-ledger"]],decls:112,vars:10,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-file-invoice","text-dark"],[1,"row","justify-content-md-center"],[1,"col-sm-3","col-md-6","col-lg-14","mb-3"],[1,"card","border-light","shadow-sm"],[1,"card-body"],[1,"row","d-block","d-xl-flex","align-items-center"],[1,"col-12","text-center","px-xl-0"],[1,"d-none","d-sm-block"],[1,"h4"],[1,"h3","mb-1","text-success"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-xl-6"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col"],[1,"h3","mt-2","mb-0"],[1,"chart"],["id","chartproductioncosting1",1,"amchart"],["id","chartproductioncosting2",1,"amchart"],[1,"col-xl-12"],["id","chartproductioncosting3",1,"amchart"],[1,"col-md-6"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["class","badge badge-pill badge-success",4,"ngIf"],["class","badge badge-pill badge-primary",4,"ngIf"],["class","badge badge-pill badge-danger",4,"ngIf"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-primary"],[1,"badge","badge-pill","badge-danger"],["type","button","title","Edit",1,"btn","btn-icon","btn-default","btn-sm",3,"click"],[1,"btn-inner--icon"],[1,"far","fa-eye"],["type","button","title","Delete",1,"btn","btn-icon","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash"]],template:function(t,e){1&t&&(_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6," Product Costing & Material Ledger "),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"div",16),_l.Tb(18,"div",17),_l.Tb(19,"h2",18),_l.Fc(20,"Total Volume"),_l.Sb(),_l.Tb(21,"h3",19),_l.Fc(22,"RM1,029.97"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(23,"div",12),_l.Tb(24,"div",13),_l.Tb(25,"div",14),_l.Tb(26,"div",15),_l.Tb(27,"div",16),_l.Tb(28,"div",17),_l.Tb(29,"h2",18),_l.Fc(30,"Average Transaction"),_l.Sb(),_l.Tb(31,"h3",19),_l.Fc(32,"RM9,283.23"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(33,"div",20),_l.Tb(34,"div",21),_l.Tb(35,"div",22),_l.Tb(36,"div",23),_l.Tb(37,"div",24),_l.Tb(38,"div",25),_l.Tb(39,"div",26),_l.Tb(40,"h5",27),_l.Fc(41,"Total Payment Volume"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(42,"div",14),_l.Tb(43,"div",28),_l.Pb(44,"div",29),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(45,"div",22),_l.Tb(46,"div",23),_l.Tb(47,"div",24),_l.Tb(48,"div",25),_l.Tb(49,"div",26),_l.Tb(50,"h5",27),_l.Fc(51,"Payment Source"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(52,"div",14),_l.Tb(53,"div",28),_l.Pb(54,"div",30),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(55,"div",31),_l.Tb(56,"div",23),_l.Tb(57,"div",24),_l.Tb(58,"div",25),_l.Tb(59,"div",26),_l.Tb(60,"h5",27),_l.Fc(61,"Weekly Transaction"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(62,"div",14),_l.Tb(63,"div",28),_l.Pb(64,"div",32),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(65,"div",31),_l.Tb(66,"div",23),_l.Tb(67,"div",24),_l.Tb(68,"div",25),_l.Tb(69,"div",33),_l.Tb(70,"h5",27),_l.Fc(71,"List of Transaction"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(72,"div",14),_l.Tb(73,"div",34),_l.Tb(74,"div",21),_l.Tb(75,"div",35),_l.Tb(76,"div",36),_l.Tb(77,"label"),_l.Fc(78," Show "),_l.Tb(79,"select",37),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(80,"option",38),_l.Fc(81,"5"),_l.Sb(),_l.Tb(82,"option",39),_l.Fc(83,"10"),_l.Sb(),_l.Tb(84,"option",40),_l.Fc(85,"15"),_l.Sb(),_l.Tb(86,"option",41),_l.Fc(87,"All"),_l.Sb(),_l.Sb(),_l.Fc(88," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(89,"div",35),_l.Tb(90,"div",42),_l.Tb(91,"label"),_l.Tb(92,"input",43),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(93,"ngx-datatable",44),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(94,"ngx-datatable-column"),_l.Dc(95,Fp,2,0,"ng-template",45),_l.Dc(96,Mp,1,1,"ng-template",46),_l.Sb(),_l.Tb(97,"ngx-datatable-column"),_l.Dc(98,Ep,2,0,"ng-template",45),_l.Dc(99,Lp,1,1,"ng-template",46),_l.Sb(),_l.Tb(100,"ngx-datatable-column"),_l.Dc(101,Rp,2,0,"ng-template",45),_l.Dc(102,Vp,1,1,"ng-template",46),_l.Sb(),_l.Tb(103,"ngx-datatable-column"),_l.Dc(104,jp,2,0,"ng-template",45),_l.Dc(105,zp,1,1,"ng-template",46),_l.Sb(),_l.Tb(106,"ngx-datatable-column"),_l.Dc(107,Bp,2,0,"ng-template",45),_l.Dc(108,Hp,3,3,"ng-template",46),_l.Sb(),_l.Tb(109,"ngx-datatable-column"),_l.Dc(110,Wp,2,0,"ng-template",45),_l.Dc(111,Yp,6,0,"ng-template",46),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb()),2&t&&(_l.Bb(80),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[s.q,s.u,l.d,l.b,l.c,l.a,n.l],styles:[""]}),t}();function Kp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Date of Transaction"),_l.Sb())}function Zp(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.dateTrans," ")}function Jp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Date of Application"),_l.Sb())}function $p(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.dateAppli," ")}function Qp(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Date of Approval"),_l.Sb())}function td(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.dateAppro," ")}function ed(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Category"),_l.Sb())}function id(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.category," ")}function rd(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"More Info"),_l.Sb())}function nd(t,e){1&t&&_l.Fc(0),2&t&&_l.Hc(" ",e.row.moreInfo," ")}function ad(t,e){1&t&&(_l.Tb(0,"span"),_l.Fc(1,"Status"),_l.Sb())}function od(t,e){1&t&&(_l.Tb(0,"span",64),_l.Fc(1,"Paid"),_l.Sb())}function sd(t,e){1&t&&(_l.Tb(0,"span",65),_l.Fc(1,"Pending"),_l.Sb())}function ld(t,e){if(1&t&&(_l.Dc(0,od,2,0,"span",62),_l.Dc(1,sd,2,0,"span",63)),2&t){var i=e.row;_l.lc("ngIf","active"==i.status),_l.Bb(1),_l.lc("ngIf","unactive"==i.status)}}var ud=function(){return{isAnimated:!0,containerClass:"theme-red"}};function cd(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",66),_l.Tb(1,"h6",67),_l.Fc(2," Submit a New Claim "),_l.Sb(),_l.Tb(3,"button",68),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Tb(4,"span",69),_l.Fc(5," \xd7 "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(6,"div",70),_l.Tb(7,"form"),_l.Tb(8,"div",13),_l.Tb(9,"div",71),_l.Tb(10,"div",72),_l.Tb(11,"label"),_l.Fc(12,"Date of Transaction"),_l.Sb(),_l.Tb(13,"div",73),_l.Tb(14,"div",33),_l.Tb(15,"span",34),_l.Pb(16,"i",35),_l.Sb(),_l.Sb(),_l.Pb(17,"input",74),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(18,"div",71),_l.Tb(19,"div",72),_l.Tb(20,"label",75),_l.Fc(21,"Category"),_l.Sb(),_l.Tb(22,"select",76),_l.Tb(23,"option",39),_l.Fc(24,"Choose"),_l.Sb(),_l.Tb(25,"option",40),_l.Fc(26,"Small"),_l.Sb(),_l.Tb(27,"option",41),_l.Fc(28,"Big"),_l.Sb(),_l.Tb(29,"option",42),_l.Fc(30,"Medium"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(31,"form"),_l.Tb(32,"div",13),_l.Tb(33,"div",71),_l.Tb(34,"div",72),_l.Tb(35,"label",77),_l.Fc(36,"Total Receipt Amount"),_l.Sb(),_l.Tb(37,"div",32),_l.Tb(38,"span",34),_l.Fc(39,"MYR"),_l.Sb(),_l.Pb(40,"input",78),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(41,"div",71),_l.Tb(42,"div",72),_l.Tb(43,"label",79),_l.Fc(44,"Tax Invoice / Receipt #"),_l.Sb(),_l.Pb(45,"input",80),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(46,"form"),_l.Tb(47,"div",13),_l.Tb(48,"div",81),_l.Tb(49,"div",72),_l.Tb(50,"label",82),_l.Fc(51,"Notes about this claim"),_l.Sb(),_l.Pb(52,"textarea",83),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(53,"form"),_l.Tb(54,"div",84),_l.Pb(55,"input",85),_l.Tb(56,"label",86),_l.Fc(57,"Select file"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(58,"div",87),_l.Tb(59,"button",88),_l.bc("click",(function(t){return _l.wc(i),_l.fc().successSwal("created")})),_l.Fc(60," Create "),_l.Sb(),_l.Tb(61,"button",89),_l.bc("click",(function(t){return _l.wc(i),_l.fc().modalRef.hide()})),_l.Fc(62," Close "),_l.Sb(),_l.Sb()}if(2&t){var r=_l.fc();_l.Bb(17),_l.lc("bsValue",r.bsValue)("bsConfig",_l.nc(2,ud))}}var hd=function(){function t(t,e){this.zone=t,this.modalService=e,this.bsValue=new Date,this.maxDate=new Date,this.modalConfig={keyboard:!0,class:"modal-dialog-centered"},this.entries=5,this.selected=[],this.temp=[],this.rows=[{accNo:"ACC-719-MOX",debit:"849.19",credit:"754.16",netMove:"595.03",dateTrans:"2009/01/12",dateAppli:"2011/07/25",dateAppro:"2011/04/25",salary:"$320,800",name:"John",status:"active",type:"Full time",moreInfo:"Blue-cheeked cordon",category:"1",year:"2011"},{accNo:"ACC-649-LVT",debit:"919",credit:"703",netMove:"562",dateTrans:"2012/03/29",dateAppli:"2011/05/23",dateAppro:"2011/07/25",salary:"$433,060",name:"Sara",status:"active",type:"Part time",moreInfo:"Pelican, australian",category:"3",year:"2019"},{accNo:"ACC-119-VLJ",debit:"785.51",credit:"795.16",netMove:"314.71",dateAppro:"2011/07/25",dateTrans:"2008/11/28",dateAppli:"2009/01/12",salary:"$170,750",name:"Cheng Hong",status:"unactive",type:"Full time",moreInfo:"Blue-cheeked cordon",category:"2",year:"2011"}],this.temp=this.rows.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{id:e})})),this.maxDate.setDate(this.maxDate.getDate()+7),this.bsRangeValue=[this.bsValue,this.maxDate]}return t.prototype.ngOnInit=function(){},t.prototype.successSwal=function(t){kl.a.fire({title:"Success",text:"Successfully "+t+"!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success"}),this.modalRef.hide()},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.filterTable=function(t){var e=t.target.value;this.temp=this.rows.filter((function(t){for(var i in t)if(-1!==t[i].toLowerCase().indexOf(e))return!0;return!1}))},t.prototype.onActivate=function(t){this.activeRow=t.row},t.prototype.openModal=function(t){this.modalRef=this.modalService.show(t,this.modalConfig)},t.prototype.delete=function(){var t=this;kl.a.fire({title:"Confirmation",text:"Are you sure want to delete this data?",type:"info",buttonsStyling:!1,confirmButtonClass:"btn btn-info",confirmButtonText:"Confirm",showCancelButton:!0,cancelButtonClass:"btn btn-danger",cancelButtonText:"Cancel"}).then((function(e){e.value&&t.doneDelete()}))},t.prototype.doneDelete=function(){kl.a.fire({title:"Success",text:"The data has been deleted!",type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-success",confirmButtonText:"Close"})},t.\u0275fac=function(e){return new(e||t)(_l.Ob(_l.z),_l.Ob(a.f))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-claim"]],decls:179,vars:13,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-hand-holding-usd","text-dark"],[1,"col-lg-6","col-5","text-right"],[1,"btn","btn-md","btn-default","text-white",3,"click"],[1,"row"],[1,"col-sm-3","col-md-6","col-lg-2"],[1,"card","border-light","shadow-sm"],[1,"card-body"],[1,"row","d-block","d-xl-flex","align-items-center"],[1,"col-12","px-xl-0","text-center"],[1,"d-none","d-sm-block"],[1,"h5"],[1,"h4","mt-4","text-success"],[1,"container-fluid","mt--6"],[1,"col-xl-12"],[1,"card"],[1,"card-header","bg-secondary"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"h3","mt-2","mb-0"],[1,"col-xl-4"],[1,"form-group"],[1,"form-control-label"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"ni","ni-calendar-grid-58"],["type","text","bsDaterangepicker","","name","bsDaterangepicker",1,"form-control",3,"ngModel","bsConfig","ngModelChange"],["for","claimCategory"],["id","claimCategory",1,"form-control"],["selected",""],["value","1"],["value","2"],["value","3"],["for","claimType"],["id","claimType",1,"form-control"],[1,"col-xl-12","text-right"],["type","button",1,"btn","btn-default",3,"click"],[1,"col"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","5",3,"selected"],["value","10",3,"selected"],["value","15",3,"selected"],["value","-1",3,"selected"],["id","datatable_filter",1,"dataTables_filter"],["type","search","placeholder","Search records","aria-controls","datatable",1,"form-control","form-control-sm",3,"keyup"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","activate"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["claim",""],["class","badge badge-pill badge-success",4,"ngIf"],["class","badge badge-pill badge-warning",4,"ngIf"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-warning"],[1,"modal-header","bg-default"],["id","modal-title-default",1,"modal-title","text-white","my-auto"],["aria-label","Close","data-dismiss","modal","type","button",1,"close",3,"click"],["aria-hidden","true",1,"text-white","my-auto"],[1,"modal-body"],[1,"col-6"],[1,"mb-4"],[1,"input-group","input-group-alternative"],["type","text","placeholder","Datepicker","bsDatepicker","",1,"form-control",3,"bsValue","bsConfig"],["for","category5"],["id","category5",1,"form-control"],["for","dateofreport"],["type","number","value","0.00","id","example-number-input",1,"form-control"],["for","pic1"],["type","text","placeholder","eg Mrs Ilya","id","pic1",1,"form-control"],[1,"col-12"],["for","textarea6"],["placeholder","Enter your message...","id","textarea6","rows","3",1,"form-control"],[1,"custom-file"],["type","file","id","customFileLang","lang","en",1,"custom-file-input"],["for","customFileLang",1,"custom-file-label"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["data-dismiss","modal","type","button",1,"btn","btn-outline-danger","ml-auto",3,"click"]],template:function(t,e){if(1&t){var i=_l.Ub();_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Claim"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"a",12),_l.bc("click",(function(t){_l.wc(i);var r=_l.uc(178);return e.openModal(r)})),_l.Fc(14," New Claim "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(15,"div",13),_l.Tb(16,"div",14),_l.Tb(17,"div",15),_l.Tb(18,"div",16),_l.Tb(19,"div",17),_l.Tb(20,"div",18),_l.Tb(21,"div",19),_l.Tb(22,"h2",20),_l.Fc(23,"Total amount of pending claims:"),_l.Sb(),_l.Tb(24,"h3",21),_l.Fc(25,"MYR 0.00"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(26,"div",14),_l.Tb(27,"div",15),_l.Tb(28,"div",16),_l.Tb(29,"div",17),_l.Tb(30,"div",18),_l.Tb(31,"div",19),_l.Tb(32,"h2",20),_l.Fc(33,"Total amount of approved + paid:"),_l.Sb(),_l.Tb(34,"h3",21),_l.Fc(35,"MYR 0.00"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(36,"div",14),_l.Tb(37,"div",15),_l.Tb(38,"div",16),_l.Tb(39,"div",17),_l.Tb(40,"div",18),_l.Tb(41,"div",19),_l.Tb(42,"h2",20),_l.Fc(43,"Total amount of rejected claims:"),_l.Sb(),_l.Tb(44,"h3",21),_l.Fc(45,"MYR 0.00"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(46,"div",14),_l.Tb(47,"div",15),_l.Tb(48,"div",16),_l.Tb(49,"div",17),_l.Tb(50,"div",18),_l.Tb(51,"div",19),_l.Tb(52,"h2",20),_l.Fc(53,"Total claims amount excl. SST:"),_l.Sb(),_l.Tb(54,"h3",21),_l.Fc(55,"MYR 0.00"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(56,"div",14),_l.Tb(57,"div",15),_l.Tb(58,"div",16),_l.Tb(59,"div",17),_l.Tb(60,"div",18),_l.Tb(61,"div",19),_l.Tb(62,"h2",20),_l.Fc(63,"Total SST "),_l.Pb(64,"br"),_l.Fc(65,"amount:"),_l.Sb(),_l.Tb(66,"h3",21),_l.Fc(67,"MYR 0.00"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(68,"div",14),_l.Tb(69,"div",15),_l.Tb(70,"div",16),_l.Tb(71,"div",17),_l.Tb(72,"div",18),_l.Tb(73,"div",19),_l.Tb(74,"h2",20),_l.Tb(75,"b"),_l.Fc(76,"Total claims "),_l.Pb(77,"br"),_l.Fc(78,"amount:"),_l.Sb(),_l.Sb(),_l.Tb(79,"h3",21),_l.Fc(80,"MYR 0.00"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(81,"div",22),_l.Tb(82,"div",13),_l.Tb(83,"div",23),_l.Tb(84,"div",24),_l.Tb(85,"div",25),_l.Tb(86,"div",26),_l.Tb(87,"div",27),_l.Tb(88,"h5",28),_l.Fc(89,"Search Claim Report"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(90,"div",16),_l.Tb(91,"div",13),_l.Tb(92,"div",29),_l.Tb(93,"div",30),_l.Tb(94,"label",31),_l.Fc(95,"Pick Range Date"),_l.Sb(),_l.Tb(96,"div",32),_l.Tb(97,"div",33),_l.Tb(98,"span",34),_l.Pb(99,"i",35),_l.Sb(),_l.Sb(),_l.Tb(100,"input",36),_l.bc("ngModelChange",(function(t){return e.bsRangeValue=t})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(101,"div",29),_l.Tb(102,"div",30),_l.Tb(103,"label",37),_l.Fc(104,"Category"),_l.Sb(),_l.Tb(105,"select",38),_l.Tb(106,"option",39),_l.Fc(107,"Choose"),_l.Sb(),_l.Tb(108,"option",40),_l.Fc(109,"One"),_l.Sb(),_l.Tb(110,"option",41),_l.Fc(111,"Two"),_l.Sb(),_l.Tb(112,"option",42),_l.Fc(113,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(114,"div",29),_l.Tb(115,"div",30),_l.Tb(116,"label",43),_l.Fc(117,"Claim Type"),_l.Sb(),_l.Tb(118,"select",44),_l.Tb(119,"option",39),_l.Fc(120,"Choose"),_l.Sb(),_l.Tb(121,"option",40),_l.Fc(122,"One"),_l.Sb(),_l.Tb(123,"option",41),_l.Fc(124,"Two"),_l.Sb(),_l.Tb(125,"option",42),_l.Fc(126,"Three"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(127,"div",45),_l.Tb(128,"button",46),_l.bc("click",(function(t){return e.successSwal("searched")})),_l.Fc(129," Search "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(130,"div",23),_l.Tb(131,"div",24),_l.Tb(132,"div",25),_l.Tb(133,"div",26),_l.Tb(134,"div",47),_l.Tb(135,"h5",28),_l.Fc(136,"Claim Data Report"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(137,"div",16),_l.Tb(138,"div",48),_l.Tb(139,"div",13),_l.Tb(140,"div",49),_l.Tb(141,"div",50),_l.Tb(142,"label"),_l.Fc(143," Show "),_l.Tb(144,"select",51),_l.bc("change",(function(t){return e.entriesChange(t)})),_l.Tb(145,"option",52),_l.Fc(146,"5"),_l.Sb(),_l.Tb(147,"option",53),_l.Fc(148,"10"),_l.Sb(),_l.Tb(149,"option",54),_l.Fc(150,"15"),_l.Sb(),_l.Tb(151,"option",55),_l.Fc(152,"All"),_l.Sb(),_l.Sb(),_l.Fc(153," entries "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(154,"div",49),_l.Tb(155,"div",56),_l.Tb(156,"label"),_l.Tb(157,"input",57),_l.bc("keyup",(function(t){return e.filterTable(t)})),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(158,"ngx-datatable",58),_l.bc("activate",(function(t){return e.onActivate(t)})),_l.Tb(159,"ngx-datatable-column"),_l.Dc(160,Kp,2,0,"ng-template",59),_l.Dc(161,Zp,1,1,"ng-template",60),_l.Sb(),_l.Tb(162,"ngx-datatable-column"),_l.Dc(163,Jp,2,0,"ng-template",59),_l.Dc(164,$p,1,1,"ng-template",60),_l.Sb(),_l.Tb(165,"ngx-datatable-column"),_l.Dc(166,Qp,2,0,"ng-template",59),_l.Dc(167,td,1,1,"ng-template",60),_l.Sb(),_l.Tb(168,"ngx-datatable-column"),_l.Dc(169,ed,2,0,"ng-template",59),_l.Dc(170,id,1,1,"ng-template",60),_l.Sb(),_l.Tb(171,"ngx-datatable-column"),_l.Dc(172,rd,2,0,"ng-template",59),_l.Dc(173,nd,1,1,"ng-template",60),_l.Sb(),_l.Tb(174,"ngx-datatable-column"),_l.Dc(175,ad,2,0,"ng-template",59),_l.Dc(176,ld,2,2,"ng-template",60),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Dc(177,cd,63,3,"ng-template",null,61,_l.Ec)}2&t&&(_l.Bb(100),_l.lc("ngModel",e.bsRangeValue)("bsConfig",_l.nc(12,ud)),_l.Bb(45),_l.lc("selected",5==e.entries),_l.Bb(2),_l.lc("selected",10==e.entries),_l.Bb(2),_l.lc("selected",15==e.entries),_l.Bb(2),_l.lc("selected",-1==e.entries),_l.Bb(7),_l.lc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.temp))},directives:[o.e,s.b,o.d,s.m,s.p,s.q,s.u,l.d,l.b,l.c,l.a,n.l,s.v,s.n,s.o,o.b,o.a],styles:[""]}),t}();Ga(vl);var pd=function(){function t(t,e){this.mockService=t,this.zone=e,this.dataChart=[],this.dataChart2=[],this.dataChart3=[],this.bsDPConfig={isAnimated:!0,containerClass:"theme-default"},this.getData()}return t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){var t=this;this.zone.runOutsideAngular((function(){t.chart&&t.chart.dispose(),t.chart1&&t.chart1.dispose(),t.chart2&&t.chart2.dispose(),t.chart3&&t.chart3.dispose()}))},t.prototype.getData=function(){var t=this;this.mockService.getAll("admin-report/report-data-1.json").subscribe((function(e){t.dataChart=e}),(function(){}),(function(){t.mockService.getAll("admin-report/report-data-2.json").subscribe((function(e){t.dataChart2=e}),(function(){}),(function(){t.mockService.getAll("admin-report/report-data-3.json").subscribe((function(e){t.dataChart3=e}),(function(){}),(function(){t.getCharts()}))}))}))},t.prototype.getCharts=function(){var t=this;this.zone.runOutsideAngular((function(){t.getChart(),t.getChart1(),t.getChart2(),t.getChart3()}))},t.prototype.getChart=function(){var t=Ya("chartreportdiv1",Mo);t.paddingRight=20,t.data=this.dataChart,t.dateFormatter.inputDateFormat="yyyy";var e=t.xAxes.push(new To);e.renderer.minGridDistance=50,e.baseInterval={timeUnit:"year",count:2},t.yAxes.push(new xo).tooltip.disabled=!0;var i=t.series.push(new Gs);i.dataFields.dateX="year",i.dataFields.valueY="amount",i.tooltipText="{valueY.amount}",i.strokeWidth=3,t.cursor=new yl,t.cursor.xAxis=e,t.cursor.fullWidthLineX=!0,t.cursor.lineX.strokeWidth=0,t.cursor.lineX.fill=t.colors.getIndex(2),t.cursor.lineX.fillOpacity=.1,t.scrollbarX=new ua,this.chart=t},t.prototype.getChart1=function(){var t=Ya("chartreportdiv2",Mo);t.hiddenState.properties.opacity=0;for(var e=[],i=100,r=250,n=1;n<120;n++)i+=Math.round((Math.random()<.5?1:-1)*Math.random()*4),r=Math.round(i+5*Math.random()+n/5-(Math.random()<.5?1:-1)*Math.random()*2),e.push({date:new Date(2018,0,n),open:i,close:r});t.data=e;var a=t.xAxes.push(new To);t.yAxes.push(new xo).tooltip.disabled=!0;var o=t.series.push(new jo);o.dataFields.dateX="date",o.dataFields.openValueY="open",o.dataFields.valueY="close",o.tooltipText="open: {openValueY.value} close: {valueY.value}",o.sequencedInterpolation=!0,o.fillOpacity=.3,o.defaultState.transitionDuration=1e3,o.tensionX=.8;var s=t.series.push(new jo);s.dataFields.dateX="date",s.dataFields.valueY="open",s.sequencedInterpolation=!0,s.defaultState.transitionDuration=1500,s.stroke=t.colors.getIndex(6),s.tensionX=.8,t.cursor=new yl,t.cursor.xAxis=a,t.scrollbarX=new ua,this.chart1=t},t.prototype.getChart2=function(){var t=Ya("chartreportdiv3",Mo);t.data=this.dataChart2;var e=t.xAxes.push(new xo);e.title.text="X Axis",e.renderer.minGridDistance=40,t.yAxes.push(new xo).title.text="Y Axis";var i=t.series.push(new jo);i.dataFields.valueY="ay",i.dataFields.valueX="ax",i.strokeOpacity=0;var r=t.series.push(new jo);r.dataFields.valueY="by",r.dataFields.valueX="bx",r.strokeOpacity=0;var n=i.bullets.push(new Ja).createChild(ya);n.horizontalCenter="middle",n.verticalCenter="middle",n.strokeWidth=0,n.fill=t.colors.getIndex(0),n.direction="top",n.width=12,n.height=12;var a=r.bullets.push(new Ja).createChild(ya);a.horizontalCenter="middle",a.verticalCenter="middle",a.rotation=180,a.strokeWidth=0,a.fill=t.colors.getIndex(3),a.direction="top",a.width=12,a.height=12;var o=t.series.push(new jo);o.dataFields.valueY="value2",o.dataFields.valueX="value",o.strokeWidth=2,o.stroke=t.colors.getIndex(0),o.strokeOpacity=.7,o.data=[{value:1,value2:2},{value:12,value2:11}];var s=t.series.push(new jo);s.dataFields.valueY="value2",s.dataFields.valueX="value",s.strokeWidth=2,s.stroke=t.colors.getIndex(3),s.strokeOpacity=.7,s.data=[{value:1,value2:1},{value:12,value2:19}],t.scrollbarX=new ua,t.scrollbarY=new ua,this.chart2=t},t.prototype.getChart3=function(){var t=Ya("chartreportdiv4",Mo);t.data=this.dataChart3,t.dateFormatter.inputDateFormat="yyyy-MM-dd";var e=t.xAxes.push(new To),i=(t.yAxes.push(new xo),t.series.push(new jo));i.dataFields.valueY="value",i.dataFields.dateX="date",i.tooltipText="{value}",i.strokeWidth=2,i.minBulletDistance=15,i.tooltip.background.cornerRadius=20,i.tooltip.background.strokeOpacity=0,i.tooltip.pointerOrientation="vertical",i.tooltip.label.minWidth=40,i.tooltip.label.minHeight=40,i.tooltip.label.textAlign="middle",i.tooltip.label.textValign="middle";var r=i.bullets.push(new hl);r.circle.strokeWidth=2,r.circle.radius=4,r.circle.fill=Ue("#fff"),r.states.create("hover").properties.scale=1.3,t.cursor=new yl,t.cursor.behavior="panXY",t.cursor.xAxis=e,t.cursor.snapToSeries=i,t.scrollbarY=new ua,t.scrollbarY.parent=t.leftAxesContainer,t.scrollbarY.toBack();var n=new Do;n.series.push(i),t.scrollbarX=n,t.scrollbarX.parent=t.bottomAxesContainer,e.start=.79,e.keepSelection=!0,this.chart3=t},t.\u0275fac=function(e){return new(e||t)(_l.Ob(Tl),_l.Ob(_l.z))},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-report123"]],decls:82,vars:1,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-chart-bar","text-dark"],[1,"container-fluid","mt--6"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","bg-secondary"],[1,"m-0"],[1,"card-body"],[1,"col-md-12","col-lg-5"],[1,"form-group"],[1,"form-control-label"],[1,"form-control","custom-select"],["hidden","","selected",""],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"far","fa-calendar-alt"],["type","text","bsDaterangepicker","","placeholder","Date range","name","bsDaterangepicker",1,"form-control",3,"bsConfig"],[1,"col-md-12","col-lg-2","d-flex","align-items-center"],["type","button",1,"btn","btn-default"],[1,"col-md-12","col-lg-6"],[1,"chart"],["id","chartreportdiv1",1,"amchart"],["id","chartreportdiv2",1,"amchart"],["id","chartreportdiv3",1,"amchart"],["id","chartreportdiv4",1,"amchart"]],template:function(t,e){1&t&&(_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Reporting"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(12,"div",11),_l.Tb(13,"div",12),_l.Tb(14,"div",13),_l.Tb(15,"div",14),_l.Tb(16,"div",15),_l.Tb(17,"h3",16),_l.Fc(18,"Reporting Tool"),_l.Sb(),_l.Sb(),_l.Tb(19,"div",17),_l.Tb(20,"div",12),_l.Tb(21,"div",18),_l.Tb(22,"div",19),_l.Tb(23,"label",20),_l.Fc(24,"Report type"),_l.Sb(),_l.Tb(25,"select",21),_l.Tb(26,"option",22),_l.Fc(27,"Please pick"),_l.Sb(),_l.Tb(28,"option"),_l.Fc(29,"Report 1"),_l.Sb(),_l.Tb(30,"option"),_l.Fc(31,"Report 2"),_l.Sb(),_l.Tb(32,"option"),_l.Fc(33,"Report 3"),_l.Sb(),_l.Tb(34,"option"),_l.Fc(35,"Report 4"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(36,"div",18),_l.Tb(37,"div",19),_l.Tb(38,"label",20),_l.Fc(39,"Date range"),_l.Sb(),_l.Tb(40,"div",23),_l.Tb(41,"div",24),_l.Tb(42,"span",25),_l.Pb(43,"i",26),_l.Sb(),_l.Sb(),_l.Pb(44,"input",27),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(45,"div",28),_l.Tb(46,"button",29),_l.Fc(47,"Search"),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(48,"div",12),_l.Tb(49,"div",30),_l.Tb(50,"div",14),_l.Tb(51,"div",15),_l.Tb(52,"h3",16),_l.Fc(53,"Report 1"),_l.Sb(),_l.Sb(),_l.Tb(54,"div",17),_l.Tb(55,"div",31),_l.Pb(56,"div",32),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(57,"div",30),_l.Tb(58,"div",14),_l.Tb(59,"div",15),_l.Tb(60,"h3",16),_l.Fc(61,"Report 2"),_l.Sb(),_l.Sb(),_l.Tb(62,"div",17),_l.Tb(63,"div",31),_l.Pb(64,"div",33),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(65,"div",12),_l.Tb(66,"div",30),_l.Tb(67,"div",14),_l.Tb(68,"div",15),_l.Tb(69,"h3",16),_l.Fc(70,"Report 3"),_l.Sb(),_l.Sb(),_l.Tb(71,"div",17),_l.Tb(72,"div",31),_l.Pb(73,"div",34),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Tb(74,"div",30),_l.Tb(75,"div",14),_l.Tb(76,"div",15),_l.Tb(77,"h3",16),_l.Fc(78,"Report 4"),_l.Sb(),_l.Sb(),_l.Tb(79,"div",17),_l.Tb(80,"div",31),_l.Pb(81,"div",35),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb()),2&t&&(_l.Bb(44),_l.lc("bsConfig",e.bsDPConfig))},directives:[s.q,s.u,o.e,o.d],styles:[""]}),t}(),dd=[{path:"",children:[{path:"dashboard",component:xl},{path:"general-ledger",component:Su},{path:"budget-setup-performance-reporting",component:Eu},{path:"activities-project-costing",component:uc},{path:"account-receivable",component:Sc},{path:"cash-management",component:zc},{path:"account-payable",component:$c},{path:"fixed-asset",component:mh},{path:"statutory-reporting",component:su},{path:"procurement",children:[{path:"vendor-list",component:Oh},{path:"analysis",component:Wh},{path:"notice",component:function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=_l.Ib({type:t,selectors:[["app-procurement-notice"]],decls:17,vars:0,consts:[[1,"header","pb-6"],[1,"container-fluid"],[1,"header-body"],[1,"row","align-items-center","py-4"],[1,"col-lg-6","col-7"],[1,"h2","text-dark","d-inline-block","mb-0"],["aria-label","breadcrumb",1,"d-none","d-md-inline-block","ml-md-4"],[1,"breadcrumb","breadcrumb-links","breadcrumb-dark"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"fas","fa-handshake","text-dark"],["href","javascript:void(0)",1,"text-dark"],["aria-current","page",1,"breadcrumb-item","active"]],template:function(t,e){1&t&&(_l.Tb(0,"div",0),_l.Tb(1,"div",1),_l.Tb(2,"div",2),_l.Tb(3,"div",3),_l.Tb(4,"div",4),_l.Tb(5,"h6",5),_l.Fc(6,"Notice"),_l.Sb(),_l.Tb(7,"nav",6),_l.Tb(8,"ol",7),_l.Tb(9,"li",8),_l.Tb(10,"a",9),_l.Pb(11,"i",10),_l.Sb(),_l.Sb(),_l.Tb(12,"li",8),_l.Tb(13,"a",11),_l.Fc(14," Procurement "),_l.Sb(),_l.Sb(),_l.Tb(15,"li",12),_l.Fc(16," Notice "),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb(),_l.Sb())},styles:[""]}),t}()}]},{path:"sales-service-tax",component:cp},{path:"claim",component:hd},{path:"production-planning-execution",component:hp},{path:"inventory-control",component:Dp},{path:"product-costing-material-ledger",component:qp},{path:"system-management",children:[{path:"audit-trails",component:Nl},{path:"user-control",component:ou}]},{path:"report",component:pd}]}];i.d(e,"AdminModule",(function(){return fd})),h.accessToken=c.a.mapbox.accessToken;var fd=function(){function t(){}return t.\u0275mod=_l.Mb({type:t}),t.\u0275inj=_l.Lb({factory:function(e){return new(e||t)},imports:[[n.c,a.a.forRoot(),o.c.forRoot(),a.d.forRoot(),a.g.forRoot(),a.i.forRoot(),a.j.forRoot(),a.k.forRoot(),s.h,s.s,u.b,l.e,p.g.forChild(dd)]]}),t}()}}]);